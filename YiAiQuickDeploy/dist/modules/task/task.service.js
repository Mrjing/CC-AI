'use strict';const _0x2b9410=_0xf04d;(function(_0x1a22f8,_0x19915f){const _0x5b12ec=_0xf04d,_0x504643=_0x1a22f8();while(!![]){try{const _0x57e6cd=parseInt(_0x5b12ec(0x13d))/0x1+-parseInt(_0x5b12ec(0x12a))/0x2*(parseInt(_0x5b12ec(0x145))/0x3)+-parseInt(_0x5b12ec(0x142))/0x4+-parseInt(_0x5b12ec(0x135))/0x5*(parseInt(_0x5b12ec(0x141))/0x6)+-parseInt(_0x5b12ec(0x13f))/0x7*(-parseInt(_0x5b12ec(0x159))/0x8)+parseInt(_0x5b12ec(0x133))/0x9+-parseInt(_0x5b12ec(0x15b))/0xa*(-parseInt(_0x5b12ec(0x13c))/0xb);if(_0x57e6cd===_0x19915f)break;else _0x504643['push'](_0x504643['shift']());}catch(_0x119b4c){_0x504643['push'](_0x504643['shift']());}}}(_0x5bb2,0x4852e));function _0xf04d(_0x4d0d60,_0x5c2e57){const _0x5bb21d=_0x5bb2();return _0xf04d=function(_0xf04dae,_0x4a262d){_0xf04dae=_0xf04dae-0x129;let _0x48ffef=_0x5bb21d[_0xf04dae];return _0x48ffef;},_0xf04d(_0x4d0d60,_0x5c2e57);}var __decorate=this&&this[_0x2b9410(0x14c)]||function(_0x3c3dac,_0x5e3da4,_0x16a873,_0x50dd86){const _0x350b18=_0x2b9410;var _0x40a985=arguments['length'],_0x22245d=_0x40a985<0x3?_0x5e3da4:_0x50dd86===null?_0x50dd86=Object[_0x350b18(0x158)](_0x5e3da4,_0x16a873):_0x50dd86,_0x2d7a46;if(typeof Reflect===_0x350b18(0x144)&&typeof Reflect[_0x350b18(0x148)]===_0x350b18(0x130))_0x22245d=Reflect[_0x350b18(0x148)](_0x3c3dac,_0x5e3da4,_0x16a873,_0x50dd86);else{for(var _0x1d868f=_0x3c3dac[_0x350b18(0x150)]-0x1;_0x1d868f>=0x0;_0x1d868f--)if(_0x2d7a46=_0x3c3dac[_0x1d868f])_0x22245d=(_0x40a985<0x3?_0x2d7a46(_0x22245d):_0x40a985>0x3?_0x2d7a46(_0x5e3da4,_0x16a873,_0x22245d):_0x2d7a46(_0x5e3da4,_0x16a873))||_0x22245d;}return _0x40a985>0x3&&_0x22245d&&Object[_0x350b18(0x13a)](_0x5e3da4,_0x16a873,_0x22245d),_0x22245d;},__metadata=this&&this[_0x2b9410(0x140)]||function(_0x398374,_0x5b8b8d){const _0x101bf8=_0x2b9410;if(typeof Reflect==='object'&&typeof Reflect[_0x101bf8(0x154)]==='function')return Reflect[_0x101bf8(0x154)](_0x398374,_0x5b8b8d);},__param=this&&this[_0x2b9410(0x12f)]||function(_0x2eb75f,_0x28759f){return function(_0x4470dc,_0x54bf0c){_0x28759f(_0x4470dc,_0x54bf0c,_0x2eb75f);};};Object[_0x2b9410(0x13a)](exports,_0x2b9410(0x14d),{'value':!![]}),exports[_0x2b9410(0x147)]=void 0x0;const globalConfig_service_1=require(_0x2b9410(0x149)),common_1=require(_0x2b9410(0x14f)),schedule_1=require(_0x2b9410(0x13e)),userBalance_entity_1=require('../userBalance/userBalance.entity'),typeorm_1=require('@nestjs/typeorm'),typeorm_2=require(_0x2b9410(0x12c)),models_service_1=require(_0x2b9410(0x134));let TaskService=class TaskService{constructor(_0x284efa,_0xd4b33f,_0x3b8bac){const _0x293000=_0x2b9410;this[_0x293000(0x12d)]=_0x284efa,this['globalConfigService']=_0xd4b33f,this[_0x293000(0x14b)]=_0x3b8bac;}['handleCron'](){const _0x458451=_0x2b9410;common_1[_0x458451(0x12e)]['debug'](_0x458451(0x155),_0x458451(0x147)),this['globalConfigService'][_0x458451(0x138)]();}async['checkUserMemerExpire'](){const _0xbeebec=_0x2b9410,_0x2cb363=await this[_0xbeebec(0x12d)][_0xbeebec(0x146)]({'where':{'expirationTime':(0x0,typeorm_2['LessThanOrEqual'])(new Date())}});if(!_0x2cb363||!_0x2cb363[_0xbeebec(0x150)])return;_0x2cb363[_0xbeebec(0x156)](_0x4ad8f0=>{const _0x114d5a=_0xbeebec;this[_0x114d5a(0x12d)][_0x114d5a(0x139)]({'id':_0x4ad8f0['id']},{'expirationTime':null,'packageId':0x0,'memberModel3Count':0x0,'memberModel4Count':0x0,'memberDrawMjCount':0x0})['then'](_0x1f74d6=>{const _0x36b26b=_0x114d5a;common_1['Logger'][_0x36b26b(0x12b)](_0x4ad8f0['id']+_0x36b26b(0x14e),_0x36b26b(0x147));});});}};__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0x2b9410(0x132)]['EVERY_HOUR']),__metadata(_0x2b9410(0x151),Function),__metadata(_0x2b9410(0x137),[]),__metadata(_0x2b9410(0x157),void 0x0)],TaskService[_0x2b9410(0x152)],_0x2b9410(0x136),null),__decorate([(0x0,schedule_1[_0x2b9410(0x15a)])(schedule_1[_0x2b9410(0x132)]['EVERY_5_MINUTES']),__metadata(_0x2b9410(0x151),Function),__metadata('design:paramtypes',[]),__metadata('design:returntype',Promise)],TaskService[_0x2b9410(0x152)],_0x2b9410(0x14a),null),TaskService=__decorate([(0x0,common_1[_0x2b9410(0x13b)])(),__param(0x0,(0x0,typeorm_1['InjectRepository'])(userBalance_entity_1[_0x2b9410(0x153)])),__metadata(_0x2b9410(0x137),[typeorm_2[_0x2b9410(0x143)],globalConfig_service_1[_0x2b9410(0x131)],models_service_1[_0x2b9410(0x129)]])],TaskService),exports[_0x2b9410(0x147)]=TaskService;function _0x5bb2(){const _0x1eaccf=['@nestjs/common','length','design:type','prototype','UserBalanceEntity','metadata','Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token','forEach','design:returntype','getOwnPropertyDescriptor','116376fQIgDd','Cron','6550OooLqX','ModelsService','2zXdXaB','debug','typeorm','userBalanceEntity','Logger','__param','function','GlobalConfigService','CronExpression','3622860kKPkho','../models/models.service','75qUtPQL','handleCron','design:paramtypes','getWechatAccessToken','update','defineProperty','Injectable','385xwWOgy','329804BfPsFG','@nestjs/schedule','259tFekGX','__metadata','126870hiFCaQ','1889568abYiaD','Repository','object','623109WJfAYl','find','TaskService','decorate','./../globalConfig/globalConfig.service','checkUserMemerExpire','modelsService','__decorate','__esModule','会员已到期、清空所有余额并移除会员身份！'];_0x5bb2=function(){return _0x1eaccf;};return _0x5bb2();}