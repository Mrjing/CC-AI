'use strict';const _0x215323=_0x5a9f;(function(_0x242394,_0x48d061){const _0x2d7936=_0x5a9f,_0x356141=_0x242394();while(!![]){try{const _0x546d14=-parseInt(_0x2d7936(0x72))/0x1+parseInt(_0x2d7936(0x95))/0x2+-parseInt(_0x2d7936(0x82))/0x3*(parseInt(_0x2d7936(0x6d))/0x4)+parseInt(_0x2d7936(0x8b))/0x5+parseInt(_0x2d7936(0x6b))/0x6*(-parseInt(_0x2d7936(0x7e))/0x7)+-parseInt(_0x2d7936(0x79))/0x8*(parseInt(_0x2d7936(0x87))/0x9)+parseInt(_0x2d7936(0x80))/0xa;if(_0x546d14===_0x48d061)break;else _0x356141['push'](_0x356141['shift']());}catch(_0x1943f3){_0x356141['push'](_0x356141['shift']());}}}(_0x2f14,0xe879b));function _0x2f14(){const _0x5514cb=['update','typeorm','32tdUOLc','handleCron','CronExpression','defineProperty','design:returntype','4409342zaHhyH','../models/models.service','46742520fkOIsD','GlobalConfigService','304959FbJmhG','length','find','会员已到期、清空所有余额并移除会员身份！','checkUserMemerExpire','3995685pmROea','@nestjs/typeorm','Injectable','function','2683240udNHEi','getWechatAccessToken','userBalanceEntity','EVERY_5_MINUTES','debug','Repository','metadata','design:paramtypes','decorate','getOwnPropertyDescriptor','3691546MwgXis','ModelsService','__metadata','then','object','InjectRepository','Logger','12tsfOXK','TaskService','52DgNoLB','Cron','prototype','__param','EVERY_HOUR','1747293coOLWT','design:type','LessThanOrEqual','globalConfigService','Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token'];_0x2f14=function(){return _0x5514cb;};return _0x2f14();}var __decorate=this&&this['__decorate']||function(_0xf4b57e,_0x4ba365,_0x1ade84,_0xadb956){const _0x104ada=_0x5a9f;var _0x3ea371=arguments[_0x104ada(0x83)],_0x2f58cc=_0x3ea371<0x3?_0x4ba365:_0xadb956===null?_0xadb956=Object[_0x104ada(0x94)](_0x4ba365,_0x1ade84):_0xadb956,_0x361d8f;if(typeof Reflect===_0x104ada(0x99)&&typeof Reflect[_0x104ada(0x93)]==='function')_0x2f58cc=Reflect[_0x104ada(0x93)](_0xf4b57e,_0x4ba365,_0x1ade84,_0xadb956);else{for(var _0x4af1c4=_0xf4b57e[_0x104ada(0x83)]-0x1;_0x4af1c4>=0x0;_0x4af1c4--)if(_0x361d8f=_0xf4b57e[_0x4af1c4])_0x2f58cc=(_0x3ea371<0x3?_0x361d8f(_0x2f58cc):_0x3ea371>0x3?_0x361d8f(_0x4ba365,_0x1ade84,_0x2f58cc):_0x361d8f(_0x4ba365,_0x1ade84))||_0x2f58cc;}return _0x3ea371>0x3&&_0x2f58cc&&Object[_0x104ada(0x7c)](_0x4ba365,_0x1ade84,_0x2f58cc),_0x2f58cc;},__metadata=this&&this[_0x215323(0x97)]||function(_0x13b0bc,_0x37fe25){const _0x48a3bd=_0x215323;if(typeof Reflect===_0x48a3bd(0x99)&&typeof Reflect['metadata']===_0x48a3bd(0x8a))return Reflect[_0x48a3bd(0x91)](_0x13b0bc,_0x37fe25);},__param=this&&this[_0x215323(0x70)]||function(_0x4b2c20,_0x5be2c1){return function(_0x5b119d,_0x419233){_0x5be2c1(_0x5b119d,_0x419233,_0x4b2c20);};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[_0x215323(0x6c)]=void 0x0;const globalConfig_service_1=require('./../globalConfig/globalConfig.service'),common_1=require('@nestjs/common'),schedule_1=require('@nestjs/schedule'),userBalance_entity_1=require('../userBalance/userBalance.entity'),typeorm_1=require(_0x215323(0x88)),typeorm_2=require(_0x215323(0x78)),models_service_1=require(_0x215323(0x7f));function _0x5a9f(_0x202586,_0x4a5181){const _0x2f14ca=_0x2f14();return _0x5a9f=function(_0x5a9fd7,_0x4f12a3){_0x5a9fd7=_0x5a9fd7-0x6a;let _0x3acfd6=_0x2f14ca[_0x5a9fd7];return _0x3acfd6;},_0x5a9f(_0x202586,_0x4a5181);}let TaskService=class TaskService{constructor(_0x41b7ce,_0x6d197b,_0xea80c6){const _0x404988=_0x215323;this[_0x404988(0x8d)]=_0x41b7ce,this[_0x404988(0x75)]=_0x6d197b,this['modelsService']=_0xea80c6;}[_0x215323(0x7a)](){const _0x403240=_0x215323;common_1[_0x403240(0x6a)][_0x403240(0x8f)](_0x403240(0x76),_0x403240(0x6c)),this[_0x403240(0x75)][_0x403240(0x8c)]();}async['checkUserMemerExpire'](){const _0x508c7d=_0x215323,_0x574445=await this[_0x508c7d(0x8d)][_0x508c7d(0x84)]({'where':{'expirationTime':(0x0,typeorm_2[_0x508c7d(0x74)])(new Date())}});if(!_0x574445||!_0x574445[_0x508c7d(0x83)])return;_0x574445['forEach'](_0x55ca62=>{const _0x4b4808=_0x508c7d;this['userBalanceEntity'][_0x4b4808(0x77)]({'id':_0x55ca62['id']},{'expirationTime':null,'packageId':0x0,'memberModel3Count':0x0,'memberModel4Count':0x0,'memberDrawMjCount':0x0})[_0x4b4808(0x98)](_0x545b99=>{const _0x592b95=_0x4b4808;common_1['Logger'][_0x592b95(0x8f)](_0x55ca62['id']+_0x592b95(0x85),_0x592b95(0x6c));});});}};__decorate([(0x0,schedule_1[_0x215323(0x6e)])(schedule_1[_0x215323(0x7b)][_0x215323(0x71)]),__metadata(_0x215323(0x73),Function),__metadata(_0x215323(0x92),[]),__metadata(_0x215323(0x7d),void 0x0)],TaskService[_0x215323(0x6f)],_0x215323(0x7a),null),__decorate([(0x0,schedule_1[_0x215323(0x6e)])(schedule_1[_0x215323(0x7b)][_0x215323(0x8e)]),__metadata('design:type',Function),__metadata(_0x215323(0x92),[]),__metadata('design:returntype',Promise)],TaskService[_0x215323(0x6f)],_0x215323(0x86),null),TaskService=__decorate([(0x0,common_1[_0x215323(0x89)])(),__param(0x0,(0x0,typeorm_1[_0x215323(0x9a)])(userBalance_entity_1['UserBalanceEntity'])),__metadata(_0x215323(0x92),[typeorm_2[_0x215323(0x90)],globalConfig_service_1[_0x215323(0x81)],models_service_1[_0x215323(0x96)]])],TaskService),exports[_0x215323(0x6c)]=TaskService;