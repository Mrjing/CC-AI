'use strict';const _0x18f858=_0x3b67;(function(_0x246dfb,_0x2d026c){const _0x5916fa=_0x3b67,_0x41f0fe=_0x246dfb();while(!![]){try{const _0x9f6c6e=-parseInt(_0x5916fa(0x169))/0x1+parseInt(_0x5916fa(0x15d))/0x2*(-parseInt(_0x5916fa(0x178))/0x3)+-parseInt(_0x5916fa(0x17e))/0x4+-parseInt(_0x5916fa(0x16e))/0x5*(-parseInt(_0x5916fa(0x159))/0x6)+-parseInt(_0x5916fa(0x15f))/0x7*(-parseInt(_0x5916fa(0x153))/0x8)+-parseInt(_0x5916fa(0x167))/0x9*(-parseInt(_0x5916fa(0x180))/0xa)+parseInt(_0x5916fa(0x182))/0xb;if(_0x9f6c6e===_0x2d026c)break;else _0x41f0fe['push'](_0x41f0fe['shift']());}catch(_0x3af3d7){_0x41f0fe['push'](_0x41f0fe['shift']());}}}(_0x95d2,0x454ea));function _0x3b67(_0x474203,_0x3ad353){const _0x95d2c1=_0x95d2();return _0x3b67=function(_0x3b67ea,_0x17eaec){_0x3b67ea=_0x3b67ea-0x14d;let _0x5be189=_0x95d2c1[_0x3b67ea];return _0x5be189;},_0x3b67(_0x474203,_0x3ad353);}var __decorate=this&&this[_0x18f858(0x16a)]||function(_0x147670,_0x13d380,_0x4c0f43,_0x339e1d){const _0xdbca14=_0x18f858;var _0x4795d9=arguments[_0xdbca14(0x16f)],_0x1d2d19=_0x4795d9<0x3?_0x13d380:_0x339e1d===null?_0x339e1d=Object['getOwnPropertyDescriptor'](_0x13d380,_0x4c0f43):_0x339e1d,_0x58529b;if(typeof Reflect==='object'&&typeof Reflect[_0xdbca14(0x17a)]===_0xdbca14(0x154))_0x1d2d19=Reflect['decorate'](_0x147670,_0x13d380,_0x4c0f43,_0x339e1d);else{for(var _0x579099=_0x147670[_0xdbca14(0x16f)]-0x1;_0x579099>=0x0;_0x579099--)if(_0x58529b=_0x147670[_0x579099])_0x1d2d19=(_0x4795d9<0x3?_0x58529b(_0x1d2d19):_0x4795d9>0x3?_0x58529b(_0x13d380,_0x4c0f43,_0x1d2d19):_0x58529b(_0x13d380,_0x4c0f43))||_0x1d2d19;}return _0x4795d9>0x3&&_0x1d2d19&&Object[_0xdbca14(0x160)](_0x13d380,_0x4c0f43,_0x1d2d19),_0x1d2d19;},__metadata=this&&this[_0x18f858(0x163)]||function(_0x45c8d5,_0x116381){const _0x4de34a=_0x18f858;if(typeof Reflect===_0x4de34a(0x176)&&typeof Reflect[_0x4de34a(0x15b)]===_0x4de34a(0x154))return Reflect['metadata'](_0x45c8d5,_0x116381);},__param=this&&this[_0x18f858(0x16b)]||function(_0xbf497c,_0xe2ef97){return function(_0x5bc36f,_0x6a773){_0xe2ef97(_0x5bc36f,_0x6a773,_0xbf497c);};};Object['defineProperty'](exports,_0x18f858(0x17d),{'value':!![]}),exports[_0x18f858(0x172)]=void 0x0;const globalConfig_service_1=require(_0x18f858(0x157)),common_1=require(_0x18f858(0x156)),schedule_1=require(_0x18f858(0x181)),userBalance_entity_1=require(_0x18f858(0x17c)),typeorm_1=require(_0x18f858(0x168)),typeorm_2=require(_0x18f858(0x170)),models_service_1=require(_0x18f858(0x16d));function _0x95d2(){const _0x3a8599=['Logger','@nestjs/common','./../globalConfig/globalConfig.service','design:returntype','204XOAbsW','globalConfigService','metadata','EVERY_5_MINUTES','6122kAzniZ','design:type','21dRLpgF','defineProperty','UserBalanceEntity','CronExpression','__metadata','Cron','handleCron','LessThanOrEqual','322776jxzsdt','@nestjs/typeorm','560128vhjABG','__decorate','__param','InjectRepository','../models/models.service','18220UHkhSj','length','typeorm','EVERY_HOUR','TaskService','userBalanceEntity','会员已到期、清空所有余额并移除会员身份！','Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token','object','Injectable','351AEYiQW','update','decorate','Repository','../userBalance/userBalance.entity','__esModule','1373852lEjUEb','getWechatAccessToken','140nTzDuJ','@nestjs/schedule','8743196JgAJXJ','prototype','design:paramtypes','checkUserMemerExpire','debug','GlobalConfigService','modelsService','332752xsEziF','function'];_0x95d2=function(){return _0x3a8599;};return _0x95d2();}let TaskService=class TaskService{constructor(_0xe00c03,_0x50eb53,_0x4e9930){const _0x19f864=_0x18f858;this['userBalanceEntity']=_0xe00c03,this[_0x19f864(0x15a)]=_0x50eb53,this[_0x19f864(0x152)]=_0x4e9930;}[_0x18f858(0x165)](){const _0x520fa8=_0x18f858;common_1[_0x520fa8(0x155)]['debug'](_0x520fa8(0x175),_0x520fa8(0x172)),this[_0x520fa8(0x15a)][_0x520fa8(0x17f)]();}async[_0x18f858(0x14f)](){const _0x3b9166=_0x18f858,_0x5704c7=await this['userBalanceEntity']['find']({'where':{'expirationTime':(0x0,typeorm_2[_0x3b9166(0x166)])(new Date())}});if(!_0x5704c7||!_0x5704c7['length'])return;_0x5704c7['forEach'](_0x45735f=>{const _0xbd06f=_0x3b9166;this[_0xbd06f(0x173)][_0xbd06f(0x179)]({'id':_0x45735f['id']},{'expirationTime':null,'packageId':0x0,'memberModel3Count':0x0,'memberModel4Count':0x0,'memberDrawMjCount':0x0})['then'](_0x56c042=>{const _0x53ff2f=_0xbd06f;common_1['Logger'][_0x53ff2f(0x150)](_0x45735f['id']+_0x53ff2f(0x174),_0x53ff2f(0x172));});});}};__decorate([(0x0,schedule_1[_0x18f858(0x164)])(schedule_1[_0x18f858(0x162)][_0x18f858(0x171)]),__metadata(_0x18f858(0x15e),Function),__metadata(_0x18f858(0x14e),[]),__metadata(_0x18f858(0x158),void 0x0)],TaskService[_0x18f858(0x14d)],'handleCron',null),__decorate([(0x0,schedule_1[_0x18f858(0x164)])(schedule_1[_0x18f858(0x162)][_0x18f858(0x15c)]),__metadata(_0x18f858(0x15e),Function),__metadata(_0x18f858(0x14e),[]),__metadata(_0x18f858(0x158),Promise)],TaskService['prototype'],_0x18f858(0x14f),null),TaskService=__decorate([(0x0,common_1[_0x18f858(0x177)])(),__param(0x0,(0x0,typeorm_1[_0x18f858(0x16c)])(userBalance_entity_1[_0x18f858(0x161)])),__metadata('design:paramtypes',[typeorm_2[_0x18f858(0x17b)],globalConfig_service_1[_0x18f858(0x151)],models_service_1['ModelsService']])],TaskService),exports[_0x18f858(0x172)]=TaskService;