'use strict';const _0x2368aa=_0x1ebf;(function(_0x31994e,_0x1fe5bf){const _0x4b66a2=_0x1ebf,_0x596d3b=_0x31994e();while(!![]){try{const _0x33c644=-parseInt(_0x4b66a2(0x145))/0x1+-parseInt(_0x4b66a2(0x126))/0x2+-parseInt(_0x4b66a2(0x13d))/0x3*(-parseInt(_0x4b66a2(0x144))/0x4)+-parseInt(_0x4b66a2(0x14a))/0x5*(parseInt(_0x4b66a2(0x133))/0x6)+-parseInt(_0x4b66a2(0x125))/0x7+-parseInt(_0x4b66a2(0x12c))/0x8+parseInt(_0x4b66a2(0x14f))/0x9*(parseInt(_0x4b66a2(0x148))/0xa);if(_0x33c644===_0x1fe5bf)break;else _0x596d3b['push'](_0x596d3b['shift']());}catch(_0x16ce50){_0x596d3b['push'](_0x596d3b['shift']());}}}(_0x512a,0x73eda));function _0x1ebf(_0x34c5ed,_0x418fbc){const _0x512ae6=_0x512a();return _0x1ebf=function(_0x1ebfd4,_0x1d14d0){_0x1ebfd4=_0x1ebfd4-0x124;let _0x1a815b=_0x512ae6[_0x1ebfd4];return _0x1a815b;},_0x1ebf(_0x34c5ed,_0x418fbc);}var __decorate=this&&this['__decorate']||function(_0x5e2d40,_0x28e2d6,_0x304cdf,_0x2246ef){const _0x46756f=_0x1ebf;var _0xe1e008=arguments[_0x46756f(0x14c)],_0x51b8a9=_0xe1e008<0x3?_0x28e2d6:_0x2246ef===null?_0x2246ef=Object[_0x46756f(0x13a)](_0x28e2d6,_0x304cdf):_0x2246ef,_0x36866b;if(typeof Reflect===_0x46756f(0x136)&&typeof Reflect[_0x46756f(0x128)]===_0x46756f(0x149))_0x51b8a9=Reflect[_0x46756f(0x128)](_0x5e2d40,_0x28e2d6,_0x304cdf,_0x2246ef);else{for(var _0x7f6a8f=_0x5e2d40['length']-0x1;_0x7f6a8f>=0x0;_0x7f6a8f--)if(_0x36866b=_0x5e2d40[_0x7f6a8f])_0x51b8a9=(_0xe1e008<0x3?_0x36866b(_0x51b8a9):_0xe1e008>0x3?_0x36866b(_0x28e2d6,_0x304cdf,_0x51b8a9):_0x36866b(_0x28e2d6,_0x304cdf))||_0x51b8a9;}return _0xe1e008>0x3&&_0x51b8a9&&Object[_0x46756f(0x132)](_0x28e2d6,_0x304cdf,_0x51b8a9),_0x51b8a9;},__metadata=this&&this[_0x2368aa(0x14b)]||function(_0x456770,_0x1748f6){const _0x133f2a=_0x2368aa;if(typeof Reflect===_0x133f2a(0x136)&&typeof Reflect[_0x133f2a(0x138)]===_0x133f2a(0x149))return Reflect[_0x133f2a(0x138)](_0x456770,_0x1748f6);},__param=this&&this['__param']||function(_0xf53bc4,_0x6ef694){return function(_0x594798,_0x19e7d8){_0x6ef694(_0x594798,_0x19e7d8,_0xf53bc4);};};function _0x512a(){const _0x3b434e=['EVERY_5_MINUTES','then','object','prototype','metadata','Logger','getOwnPropertyDescriptor','CronExpression','EVERY_HOUR','7620YCmkoH','@nestjs/typeorm','../userBalance/userBalance.entity','Injectable','__esModule','design:type','../models/models.service','1344aTBhgf','876913IPVIKZ','TaskService','@nestjs/common','1293790QaiDqs','function','5AFBUmx','__metadata','length','design:paramtypes','checkUserMemerExpire','189SvxCxd','@nestjs/schedule','debug','会员已到期、清空所有余额并移除会员身份！','LessThanOrEqual','3431309SRWFtU','352620LXNynt','InjectRepository','decorate','design:returntype','Cron','UserBalanceEntity','6750168kALqZM','handleCron','typeorm','./../globalConfig/globalConfig.service','ModelsService','userBalanceEntity','defineProperty','4250256LnWaTa'];_0x512a=function(){return _0x3b434e;};return _0x512a();}Object[_0x2368aa(0x132)](exports,_0x2368aa(0x141),{'value':!![]}),exports[_0x2368aa(0x146)]=void 0x0;const globalConfig_service_1=require(_0x2368aa(0x12f)),common_1=require(_0x2368aa(0x147)),schedule_1=require(_0x2368aa(0x150)),userBalance_entity_1=require(_0x2368aa(0x13f)),typeorm_1=require(_0x2368aa(0x13e)),typeorm_2=require(_0x2368aa(0x12e)),models_service_1=require(_0x2368aa(0x143));let TaskService=class TaskService{constructor(_0xbf4fd7,_0x512a3c,_0x1ab79e){this['userBalanceEntity']=_0xbf4fd7,this['globalConfigService']=_0x512a3c,this['modelsService']=_0x1ab79e;}[_0x2368aa(0x12d)](){const _0x1fdaf7=_0x2368aa;common_1[_0x1fdaf7(0x139)]['debug']('Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token','TaskService'),this['globalConfigService']['getWechatAccessToken']();}async[_0x2368aa(0x14e)](){const _0x5b46f2=_0x2368aa,_0x55e85d=await this[_0x5b46f2(0x131)]['find']({'where':{'expirationTime':(0x0,typeorm_2[_0x5b46f2(0x124)])(new Date())}});if(!_0x55e85d||!_0x55e85d[_0x5b46f2(0x14c)])return;_0x55e85d['forEach'](_0x243787=>{const _0x2648eb=_0x5b46f2;this[_0x2648eb(0x131)]['update']({'id':_0x243787['id']},{'expirationTime':null,'packageId':0x0,'memberModel3Count':0x0,'memberModel4Count':0x0,'memberDrawMjCount':0x0})[_0x2648eb(0x135)](_0x154922=>{const _0x38e868=_0x2648eb;common_1[_0x38e868(0x139)][_0x38e868(0x151)](_0x243787['id']+_0x38e868(0x152),_0x38e868(0x146));});});}};__decorate([(0x0,schedule_1['Cron'])(schedule_1['CronExpression'][_0x2368aa(0x13c)]),__metadata(_0x2368aa(0x142),Function),__metadata(_0x2368aa(0x14d),[]),__metadata(_0x2368aa(0x129),void 0x0)],TaskService[_0x2368aa(0x137)],_0x2368aa(0x12d),null),__decorate([(0x0,schedule_1[_0x2368aa(0x12a)])(schedule_1[_0x2368aa(0x13b)][_0x2368aa(0x134)]),__metadata(_0x2368aa(0x142),Function),__metadata(_0x2368aa(0x14d),[]),__metadata(_0x2368aa(0x129),Promise)],TaskService[_0x2368aa(0x137)],_0x2368aa(0x14e),null),TaskService=__decorate([(0x0,common_1[_0x2368aa(0x140)])(),__param(0x0,(0x0,typeorm_1[_0x2368aa(0x127)])(userBalance_entity_1[_0x2368aa(0x12b)])),__metadata(_0x2368aa(0x14d),[typeorm_2['Repository'],globalConfig_service_1['GlobalConfigService'],models_service_1[_0x2368aa(0x130)]])],TaskService),exports['TaskService']=TaskService;