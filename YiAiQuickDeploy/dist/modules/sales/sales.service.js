'use strict';const _0x49967e=_0x1926;(function(_0x6c51ac,_0x209461){const _0x411358=_0x1926,_0x4c8cb0=_0x6c51ac();while(!![]){try{const _0x6ac7fa=parseInt(_0x411358(0xda))/0x1+-parseInt(_0x411358(0x77))/0x2+parseInt(_0x411358(0xb1))/0x3*(-parseInt(_0x411358(0xa3))/0x4)+parseInt(_0x411358(0xad))/0x5+-parseInt(_0x411358(0x7d))/0x6+-parseInt(_0x411358(0x93))/0x7+parseInt(_0x411358(0x9a))/0x8*(parseInt(_0x411358(0xa8))/0x9);if(_0x6ac7fa===_0x209461)break;else _0x4c8cb0['push'](_0x4c8cb0['shift']());}catch(_0x2d3f9d){_0x4c8cb0['push'](_0x4c8cb0['shift']());}}}(_0x16ad,0x1f947));var __decorate=this&&this[_0x49967e(0xc2)]||function(_0x430bd7,_0x3fc279,_0x525d42,_0x59ccec){const _0x51e7fd=_0x49967e;var _0x1c355d=arguments['length'],_0x27c7a7=_0x1c355d<0x3?_0x3fc279:_0x59ccec===null?_0x59ccec=Object[_0x51e7fd(0xc1)](_0x3fc279,_0x525d42):_0x59ccec,_0x561be4;if(typeof Reflect===_0x51e7fd(0x98)&&typeof Reflect[_0x51e7fd(0xdb)]===_0x51e7fd(0xcb))_0x27c7a7=Reflect['decorate'](_0x430bd7,_0x3fc279,_0x525d42,_0x59ccec);else{for(var _0x235c0e=_0x430bd7[_0x51e7fd(0xd7)]-0x1;_0x235c0e>=0x0;_0x235c0e--)if(_0x561be4=_0x430bd7[_0x235c0e])_0x27c7a7=(_0x1c355d<0x3?_0x561be4(_0x27c7a7):_0x1c355d>0x3?_0x561be4(_0x3fc279,_0x525d42,_0x27c7a7):_0x561be4(_0x3fc279,_0x525d42))||_0x27c7a7;}return _0x1c355d>0x3&&_0x27c7a7&&Object[_0x51e7fd(0xd6)](_0x3fc279,_0x525d42,_0x27c7a7),_0x27c7a7;},__metadata=this&&this[_0x49967e(0xdf)]||function(_0x4becf8,_0x41f1aa){const _0x4e1e06=_0x49967e;if(typeof Reflect===_0x4e1e06(0x98)&&typeof Reflect[_0x4e1e06(0xa4)]===_0x4e1e06(0xcb))return Reflect[_0x4e1e06(0xa4)](_0x4becf8,_0x41f1aa);},__param=this&&this[_0x49967e(0xcc)]||function(_0x1ac4f3,_0x47d3fb){return function(_0x191edf,_0x5b03f7){_0x47d3fb(_0x191edf,_0x5b03f7,_0x1ac4f3);};};Object[_0x49967e(0xd6)](exports,'__esModule',{'value':!![]}),exports[_0x49967e(0x82)]=void 0x0;function _0x16ad(){const _0x4ddda7=['changeUserBaseSalesInfo','find','createOrder','update','getOwnPropertyDescriptor','__decorate','./salesUsers.entity','UserEntity','affected','totalAmount,\x20distributionBalance:\x20','@nestjs/common','count','./salesRecords.entity','save','function','__param','withdrawalAmount','drawMoneyOrder','assign','salesRecordsEntity','SalesUsersEntity','saveCommissionAmount','HttpException','salesBaseTitle','修改成功','defineProperty','length','Repository','auditUserName','187993TlKtgM','decorate','InjectRepository','@nestjs/typeorm','userId','__metadata','创建提现工单失败','inviteeEmail','salesUsersEntity','globalConfigService','plus','SalesRecordsEntity','85136IwrGIZ','minus','Like','inviterAvatar','error:\x20','email','1473270wVoLLD','inviteeAvatar','formatCreateOrUpdateDate','审核状态错误','inviterUserId','SalesService','BAD_REQUEST','withdrawalChannels','../../common/utils','./salesOrder.entity','auditUserId','getMineAccount','Injectable','creaetUserBaseSalesInfo','salesUserList','GlobalConfigService','提现金额不足','findAndCount','toNumber','includes','updateUserSales','map','950985JgqwTU','userInfo','findOne','hideString','提现金额必须为数字且大于0','object','salesOrderEntity','112nHLrBl','提现金额最低必须为','orderStatus','审核失败','inviteRecords','userEntity','user','该工单已审核过','salesOrder','95516BYeqfD','metadata','HttpStatus','username','push','243099epJEBp','新秀分销商','auditOrder','inviteeUsername','number','771625NkAxds','log','super','修改失败','21JbnMzc','inviterUsername','appForMoney','salesAllowDrawMoney','default','forEach','avatar','用户不存在','SalesOrderEntity','role','DESC','inviterEmail'];_0x16ad=function(){return _0x4ddda7;};return _0x16ad();}function _0x1926(_0x2d0e21,_0x1ce9b9){const _0x16adfb=_0x16ad();return _0x1926=function(_0x19262a,_0x5f33be){_0x19262a=_0x19262a-0x74;let _0x1f6afa=_0x16adfb[_0x19262a];return _0x1f6afa;},_0x1926(_0x2d0e21,_0x1ce9b9);}const globalConfig_service_1=require('../globalConfig/globalConfig.service'),common_1=require(_0x49967e(0xc7)),salesUsers_entity_1=require(_0x49967e(0xc3)),typeorm_1=require(_0x49967e(0xdd)),typeorm_2=require('typeorm'),salesRecords_entity_1=require(_0x49967e(0xc9)),utils_1=require(_0x49967e(0x85)),user_entity_1=require('../user/user.entity'),decimal_js_1=require('decimal.js'),salesOrder_entity_1=require(_0x49967e(0x86));let SalesService=class SalesService{constructor(_0x4be997,_0x20748b,_0x3bcbb7,_0x100fed,_0x8f53e7){const _0x40bc7b=_0x49967e;this[_0x40bc7b(0xe2)]=_0x4be997,this[_0x40bc7b(0xd0)]=_0x20748b,this['userEntity']=_0x3bcbb7,this[_0x40bc7b(0x99)]=_0x100fed,this['globalConfigService']=_0x8f53e7;}async[_0x49967e(0x88)](_0xc570fd){const _0x3b0c01=_0x49967e;try{const {id:_0x315414}=_0xc570fd[_0x3b0c01(0xa0)];let _0x454914=await this[_0x3b0c01(0xe2)]['findOne']({'where':{'userId':_0x315414}});if(!_0x454914){const {salesBaseRatio:salesBaseRatio=0xa,salesBaseTitle:salesBaseTitle=_0x3b0c01(0xa9)}=await this[_0x3b0c01(0x74)]['getConfigs'](['salesBaseRatio',_0x3b0c01(0xd4)]);_0x454914=await this['creaetUserBaseSalesInfo']({'userId':_0x315414,'performanceRatio':Number(salesBaseRatio),'salesOutletName':salesBaseTitle});}const _0x43e1e2=(0x0,utils_1['formatCreateOrUpdateDate'])(_0x454914),_0x5aaae9=await this['salesRecordsEntity']['count']({'where':{'inviterUserId':_0x315414}}),_0x800c82=await this[_0x3b0c01(0x9f)][_0x3b0c01(0x95)]({'where':{'id':_0x315414}})||{'inviteLinkCount':0x0,'inviteCode':'xxxxxxx'},{inviteLinkCount:_0x51c55d,inviteCode:_0x45253b}=_0x800c82,_0x56194c=await this['userEntity'][_0x3b0c01(0xc8)]({'where':{'invitedBy':_0x45253b}});return Object['assign'](Object[_0x3b0c01(0xcf)]({},_0x43e1e2),{'orderCount':_0x5aaae9,'inviteCount':_0x56194c,'inviteLinkCount':_0x51c55d});}catch(_0x29dcc0){console[_0x3b0c01(0xae)](_0x3b0c01(0x7b),_0x29dcc0);}}async['getMineRecords'](_0x11d461,_0x24896d){const _0x47cc92=_0x49967e;try{const {id:_0x24af0b}=_0x11d461[_0x47cc92(0xa0)],{page:_0x470090,size:_0x4a0c99}=_0x24896d,[_0x2ed74f,_0x57bf02]=await this['salesRecordsEntity']['findAndCount']({'where':{'inviterUserId':_0x24af0b},'order':{'createdAt':_0x47cc92(0xbb)},'skip':(_0x470090-0x1)*_0x4a0c99,'take':_0x4a0c99});return{'rows':(0x0,utils_1['formatCreateOrUpdateDate'])(_0x2ed74f),'count':_0x57bf02};}catch(_0x1cd057){console['log'](_0x47cc92(0x7b),_0x1cd057);}}async[_0x49967e(0x9e)](_0x7d51a7,_0x144590){const _0x32f64b=_0x49967e;try{const {page:_0x53bb94,size:_0x4adab4,orderId:_0x3fa0d7,orderPrice:_0x6946a1}=_0x144590;let _0x4bdc67={};_0x3fa0d7&&(_0x4bdc67={'orderId':_0x3fa0d7}),_0x6946a1&&(_0x4bdc67={'orderPrice':_0x6946a1});const [_0x403dd6,_0x3eaa12]=await this[_0x32f64b(0xd0)][_0x32f64b(0x8e)]({'where':_0x4bdc67,'order':{'createdAt':'DESC'},'skip':(_0x53bb94-0x1)*_0x4adab4,'take':_0x4adab4}),_0x52a097=[];_0x403dd6[_0x32f64b(0x92)](_0x120d81=>{const _0x9a802c=_0x32f64b;_0x52a097[_0x9a802c(0xa7)](_0x120d81['inviterUserId']),_0x52a097['push'](_0x120d81['inviteeUserId']);});const _0x541e5e=await this[_0x32f64b(0x9f)][_0x32f64b(0xbe)]({'where':{'id':(0x0,typeorm_2['In'])(_0x52a097)}});return _0x403dd6[_0x32f64b(0xb6)](_0x2608d4=>{const _0x33f520=_0x32f64b,_0x112342=_0x541e5e['find'](_0x2326f4=>_0x2326f4['id']===_0x2608d4[_0x33f520(0x81)]),_0x4b9e3d=_0x541e5e[_0x33f520(0xbe)](_0x3e58b0=>_0x3e58b0['id']===_0x2608d4['inviteeUserId']),{username:_0x526685,email:_0x234693,avatar:_0x3eec98}=_0x541e5e['find'](_0x28f259=>_0x28f259['id']===_0x2608d4[_0x33f520(0x81)]);_0x2608d4[_0x33f520(0xb2)]=_0x112342===null||_0x112342===void 0x0?void 0x0:_0x112342['username'],_0x2608d4[_0x33f520(0xbc)]=_0x112342===null||_0x112342===void 0x0?void 0x0:_0x112342['email'],_0x2608d4[_0x33f520(0x7a)]=_0x112342===null||_0x112342===void 0x0?void 0x0:_0x112342['avatar'],_0x2608d4[_0x33f520(0xab)]=_0x4b9e3d===null||_0x4b9e3d===void 0x0?void 0x0:_0x4b9e3d[_0x33f520(0xa6)],_0x2608d4[_0x33f520(0xe1)]=_0x4b9e3d===null||_0x4b9e3d===void 0x0?void 0x0:_0x4b9e3d[_0x33f520(0x7c)],_0x2608d4[_0x33f520(0x7e)]=_0x4b9e3d===null||_0x4b9e3d===void 0x0?void 0x0:_0x4b9e3d[_0x33f520(0xb7)];}),_0x7d51a7[_0x32f64b(0xa0)][_0x32f64b(0xba)]!==_0x32f64b(0xaf)&&_0x403dd6[_0x32f64b(0xb6)](_0x324fea=>{const _0x51d467=_0x32f64b;_0x324fea[_0x51d467(0xbc)]=_0x324fea[_0x51d467(0xbc)]?(0x0,utils_1[_0x51d467(0x96)])(_0x324fea[_0x51d467(0xbc)]):'',_0x324fea[_0x51d467(0xe1)]=_0x324fea['inviteeEmail']?(0x0,utils_1['hideString'])(_0x324fea['inviteeEmail']):'';}),{'rows':(0x0,utils_1['formatCreateOrUpdateDate'])(_0x403dd6),'count':_0x3eaa12};}catch(_0x13c55a){console[_0x32f64b(0xae)](_0x32f64b(0x7b),_0x13c55a);}}async[_0x49967e(0x8a)](_0x4a5d29){const _0x354b1d=_0x49967e,{userId:_0x382f30,performanceRatio:_0x88a8cd,salesOutletName:_0x11d714}=_0x4a5d29;return await this[_0x354b1d(0xe2)]['save']({'userId':_0x382f30,'performanceRatio':_0x88a8cd,'salesOutletName':_0x11d714});}async[_0x49967e(0xbd)](_0x37fe18){const _0x4aaba3=_0x49967e;return await this['salesUsersEntity'][_0x4aaba3(0xca)](_0x37fe18);}async['createSalesRecords'](_0x3ce2e3){const _0x5ecf3d=_0x49967e;return await this[_0x5ecf3d(0xd0)][_0x5ecf3d(0xca)](_0x3ce2e3);}async[_0x49967e(0xd2)](_0xd25e87,_0x5355b4){const _0x4bb1a1=_0x49967e,_0x528568=await this[_0x4bb1a1(0xe2)][_0x4bb1a1(0x95)]({'where':{'userId':_0xd25e87}});if(!_0x528568)return;const {totalAmount:_0x4e80db,distributionBalance:_0x5489a6}=_0x528568;return console['log'](_0x4bb1a1(0xc6),_0x4e80db,_0x5489a6),await this[_0x4bb1a1(0xe2)][_0x4bb1a1(0xc0)]({'userId':_0xd25e87},{'totalAmount':new decimal_js_1[(_0x4bb1a1(0xb5))](_0x4e80db)['plus'](_0x5355b4)['toNumber'](),'distributionBalance':new decimal_js_1['default'](_0x5489a6)[_0x4bb1a1(0x75)](_0x5355b4)[_0x4bb1a1(0x8f)]()});}async[_0x49967e(0xb3)](_0x339558,_0x5c70ed){const _0x41be6d=_0x49967e,{id:_0x4bdfeb}=_0x339558[_0x41be6d(0xa0)],{withdrawalAmount:_0x1ef4e8,withdrawalChannels:_0xbe747a,contactInformation:_0xcaee41,remark:_0x52b207}=_0x5c70ed,_0x9a23a4=await this[_0x41be6d(0x74)]['getConfigs']([_0x41be6d(0xb4)])||0xa;if(typeof _0x1ef4e8!==_0x41be6d(0xac)||_0x1ef4e8<=0x0)throw new common_1['HttpException'](_0x41be6d(0x97),common_1[_0x41be6d(0xa5)][_0x41be6d(0x83)]);if(Number(_0x1ef4e8)<Number(_0x9a23a4))throw new common_1['HttpException'](_0x41be6d(0x9b)+_0x9a23a4+'元',common_1[_0x41be6d(0xa5)][_0x41be6d(0x83)]);const _0x250098=await this['salesUsersEntity']['findOne']({'where':{'userId':_0x4bdfeb}}),{distributionBalance:_0x5d5e52,drawMoneyIn:_0x207266}=_0x250098;if(Number(_0x5d5e52)<Number(_0x1ef4e8))throw new common_1[(_0x41be6d(0xd3))](_0x41be6d(0x8d),common_1[_0x41be6d(0xa5)][_0x41be6d(0x83)]);const _0x38dfc4=new decimal_js_1[(_0x41be6d(0xb5))](_0x5d5e52)['minus'](_0x1ef4e8)[_0x41be6d(0x8f)](),_0x2bb462={'userId':_0x4bdfeb,'withdrawalAmount':_0x1ef4e8,'orderStatus':0x0,'auditStatus':0x0,'withdrawalChannels':_0xbe747a,'contactInformation':_0xcaee41,'remark':_0x52b207};await this[_0x41be6d(0xbf)](_0x2bb462);const _0x234715=await this[_0x41be6d(0xe2)][_0x41be6d(0xc0)]({'userId':_0x4bdfeb},{'distributionBalance':_0x38dfc4,'drawMoneyIn':new decimal_js_1[(_0x41be6d(0xb5))](_0x207266)['plus'](_0x1ef4e8)['toNumber']()});}async[_0x49967e(0xce)](_0x3f1b2c,_0x385e3f){const _0x53f3a0=_0x49967e,{id:_0x3c5028}=_0x3f1b2c[_0x53f3a0(0xa0)],{page:_0x85a8d1,size:_0x16b92c}=_0x385e3f,[_0x540a19,_0x46a190]=await this['salesOrderEntity'][_0x53f3a0(0x8e)]({'where':{'userId':_0x3c5028},'order':{'createdAt':_0x53f3a0(0xbb)},'skip':(_0x85a8d1-0x1)*_0x16b92c,'take':_0x16b92c}),_0x556789=_0x540a19['map'](_0x294b9e=>_0x294b9e[_0x53f3a0(0x87)]),_0xd46119=await this[_0x53f3a0(0x9f)][_0x53f3a0(0xbe)]({'where':{'id':(0x0,typeorm_2['In'])(_0x556789)}});return _0x540a19[_0x53f3a0(0xb6)](_0x4b16c6=>{const _0x555f26=_0x53f3a0,_0x552219=_0xd46119[_0x555f26(0xbe)](_0x50cc7b=>_0x50cc7b['id']===_0x4b16c6['auditUserId']);_0x4b16c6[_0x555f26(0xd9)]=_0x552219?_0x552219[_0x555f26(0xa6)]:'';}),{'rows':(0x0,utils_1[_0x53f3a0(0x7f)])(_0x540a19),'count':_0x46a190};}async[_0x49967e(0xa2)](_0x5585e1,_0x26d59e){const _0x4889d6=_0x49967e,{page:_0x2e0e,size:_0x5096c7}=_0x26d59e,_0x27d10c={};_0x26d59e[_0x4889d6(0x9c)]!==undefined&&_0x26d59e[_0x4889d6(0x9c)]!==''&&(_0x27d10c['orderStatus']=_0x26d59e['orderStatus']),_0x26d59e[_0x4889d6(0x84)]&&(_0x27d10c['withdrawalChannels']=_0x26d59e[_0x4889d6(0x84)]);const [_0x2ae00d,_0x218be5]=await this[_0x4889d6(0x99)][_0x4889d6(0x8e)]({'where':_0x27d10c,'order':{'createdAt':'DESC'},'skip':(_0x2e0e-0x1)*_0x5096c7,'take':_0x5096c7}),_0x6a96f4=_0x2ae00d['map'](_0x2c082a=>_0x2c082a[_0x4889d6(0xde)]),_0x35aacc=await this[_0x4889d6(0x9f)][_0x4889d6(0xbe)]({'where':{'id':(0x0,typeorm_2['In'])(_0x6a96f4)}});return _0x2ae00d[_0x4889d6(0xb6)](_0x51edef=>{const _0x313929=_0x4889d6,_0x1f2348=_0x35aacc[_0x313929(0xbe)](_0x21c932=>_0x21c932['id']===_0x51edef['userId']);if(_0x1f2348){const {username:_0x40dd92,email:_0x5d1dcc,avatar:_0x373aea}=_0x1f2348;_0x51edef['userInfo']={'username':_0x40dd92,'avatar':_0x373aea,'email':(0x0,utils_1[_0x313929(0x96)])(_0x5d1dcc)};}}),{'rows':(0x0,utils_1[_0x4889d6(0x7f)])(_0x2ae00d),'count':_0x218be5};}async['createOrder'](_0x1aeaa5){const _0x20b80a=_0x49967e;try{return await this[_0x20b80a(0x99)]['save'](_0x1aeaa5);}catch(_0x1ad4d3){console[_0x20b80a(0xae)](_0x20b80a(0x7b),_0x1ad4d3);throw new common_1[(_0x20b80a(0xd3))](_0x20b80a(0xe0),common_1[_0x20b80a(0xa5)][_0x20b80a(0x83)]);}}async[_0x49967e(0xaa)](_0x110b7e,_0x2870d9){const _0x3d6e9f=_0x49967e;try{const {id:_0x5890a3}=_0x110b7e[_0x3d6e9f(0xa0)],{id:_0x132a3b,status:_0x82c616}=_0x2870d9;if(![0x1,-0x1][_0x3d6e9f(0x90)](_0x82c616))throw new common_1[(_0x3d6e9f(0xd3))](_0x3d6e9f(0x80),common_1['HttpStatus'][_0x3d6e9f(0x83)]);const _0x33515a=await this[_0x3d6e9f(0x99)][_0x3d6e9f(0x95)]({'where':{'id':_0x132a3b}});if(_0x33515a[_0x3d6e9f(0x9c)]!==0x0)throw new common_1[(_0x3d6e9f(0xd3))](_0x3d6e9f(0xa1),common_1[_0x3d6e9f(0xa5)][_0x3d6e9f(0x83)]);const _0x20faf9=await this[_0x3d6e9f(0xe2)][_0x3d6e9f(0x95)]({'where':{'userId':_0x33515a[_0x3d6e9f(0xde)]}}),{withdrawalAmount:_0x3c4d18,drawMoneyIn:_0x1f235c}=_0x20faf9,_0x11a504=new decimal_js_1['default'](_0x3c4d18)['plus'](_0x33515a[_0x3d6e9f(0xcd)])[_0x3d6e9f(0x8f)](),_0x1a5a7c=new decimal_js_1[(_0x3d6e9f(0xb5))](_0x1f235c)[_0x3d6e9f(0x78)](_0x33515a[_0x3d6e9f(0xcd)])['toNumber']();return await this[_0x3d6e9f(0xe2)][_0x3d6e9f(0xc0)]({'userId':_0x33515a['userId']},{'withdrawalAmount':_0x11a504,'drawMoneyIn':_0x1a5a7c}),await this[_0x3d6e9f(0x99)]['update']({'id':_0x132a3b},{'orderStatus':_0x82c616,'auditStatus':_0x82c616,'auditUserId':_0x5890a3,'paymentStatus':_0x82c616}),'审核完成';}catch(_0x477965){console[_0x3d6e9f(0xae)](_0x3d6e9f(0x7b),_0x477965);throw new common_1[(_0x3d6e9f(0xd3))](_0x3d6e9f(0x9d),common_1[_0x3d6e9f(0xa5)][_0x3d6e9f(0x83)]);}}async[_0x49967e(0x8b)](_0x4dabcc,_0x3e52b6){const _0x7bf09f=_0x49967e,{page:_0x142dad,size:_0x1992d4,salesOutletName:_0xff7730,performanceRatio:_0x280999}=_0x3e52b6,_0xc392c6={};_0xff7730&&(_0xc392c6['salesOutletName']=(0x0,typeorm_2[_0x7bf09f(0x79)])('%'+_0xff7730+'%')),_0x280999&&(_0xc392c6['performanceRatio']=_0x280999);const [_0x1fbdb1,_0x408b46]=await this['salesUsersEntity'][_0x7bf09f(0x8e)]({'where':_0xc392c6,'order':{'id':_0x7bf09f(0xbb)},'skip':(_0x142dad-0x1)*_0x1992d4,'take':_0x1992d4}),_0x57654b=_0x1fbdb1[_0x7bf09f(0x92)](_0x53d046=>_0x53d046[_0x7bf09f(0xde)]),_0x412a41=await this['userEntity'][_0x7bf09f(0xbe)]({'where':{'id':(0x0,typeorm_2['In'])(_0x57654b)}});return _0x1fbdb1['forEach'](_0x13449d=>{const _0x82666=_0x7bf09f,_0x43eb1c=_0x412a41[_0x82666(0xbe)](_0x2b3a82=>_0x2b3a82['id']===_0x13449d['userId']);_0x13449d['userInfo']=_0x43eb1c?_0x43eb1c:{};}),_0x4dabcc[_0x7bf09f(0xa0)][_0x7bf09f(0xba)]!==_0x7bf09f(0xaf)&&_0x1fbdb1[_0x7bf09f(0xb6)](_0xea0c1=>{const _0x32ace6=_0x7bf09f;var _0x3720af,_0x3ff076;_0xea0c1[_0x32ace6(0x94)][_0x32ace6(0x7c)]=((_0x3720af=_0xea0c1[_0x32ace6(0x94)])===null||_0x3720af===void 0x0?void 0x0:_0x3720af['email'])?(0x0,utils_1[_0x32ace6(0x96)])((_0x3ff076=_0xea0c1[_0x32ace6(0x94)])===null||_0x3ff076===void 0x0?void 0x0:_0x3ff076['email']):'';}),{'rows':_0x1fbdb1,'count':_0x408b46};}async[_0x49967e(0x91)](_0x4e653d,_0x27dfc1){const _0x54613f=_0x49967e,{performanceRatio:_0x39f818,salesOutletName:_0x3ab521,userId:_0x472238}=_0x27dfc1,_0x27f401=await this[_0x54613f(0xe2)][_0x54613f(0x95)]({'where':{'userId':_0x472238}});if(!_0x27f401)throw new common_1['HttpException'](_0x54613f(0xb8),common_1[_0x54613f(0xa5)][_0x54613f(0x83)]);const _0x1a0189=await this[_0x54613f(0xe2)][_0x54613f(0xc0)]({'userId':_0x472238},{'performanceRatio':_0x39f818,'salesOutletName':_0x3ab521});if(_0x1a0189[_0x54613f(0xc5)]>0x0)return _0x54613f(0xd5);else throw new common_1['HttpException'](_0x54613f(0xb0),common_1['HttpStatus'][_0x54613f(0x83)]);}};SalesService=__decorate([(0x0,common_1[_0x49967e(0x89)])(),__param(0x0,(0x0,typeorm_1['InjectRepository'])(salesUsers_entity_1[_0x49967e(0xd1)])),__param(0x1,(0x0,typeorm_1[_0x49967e(0xdc)])(salesRecords_entity_1[_0x49967e(0x76)])),__param(0x2,(0x0,typeorm_1[_0x49967e(0xdc)])(user_entity_1[_0x49967e(0xc4)])),__param(0x3,(0x0,typeorm_1['InjectRepository'])(salesOrder_entity_1[_0x49967e(0xb9)])),__metadata('design:paramtypes',[typeorm_2[_0x49967e(0xd8)],typeorm_2['Repository'],typeorm_2[_0x49967e(0xd8)],typeorm_2[_0x49967e(0xd8)],globalConfig_service_1[_0x49967e(0x8c)]])],SalesService),exports[_0x49967e(0x82)]=SalesService;