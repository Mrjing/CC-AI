'use strict';function _0x12f9(){const _0x52ce50=['该工单已审核过','orderStatus','__esModule','salesOrderEntity','审核状态错误','SalesService','count','HttpStatus','forEach','BAD_REQUEST','../globalConfig/globalConfig.service','salesOrder','auditUserName','salesUsersEntity','minus','metadata','18bhPeOj','新秀分销商','@nestjs/typeorm','./salesUsers.entity','defineProperty','length','16999150CVfCUD','map','drawMoneyOrder','UserEntity','saveCommissionAmount','error:\x20','创建提现工单失败','@nestjs/common','用户不存在','userId','GlobalConfigService','inviteRecords','withdrawalChannels','username','assign','userEntity','affected','提现金额不足','avatar','审核完成','includes','../../common/utils','salesBaseRatio','inviteeUserId','inviterUserId','inviterEmail','审核失败','performanceRatio','decorate','1139765HhbnxD','salesRecordsEntity','salesBaseTitle','SalesOrderEntity','2571136UseJAU','getOwnPropertyDescriptor','push','auditUserId','10XyFYYK','HttpException','role','Repository','save','auditOrder','提现金额最低必须为','default','formatCreateOrUpdateDate','toNumber','createOrder','inviteeEmail','withdrawalAmount','creaetUserBaseSalesInfo','plus','findAndCount','find','73575LhXKRm','createSalesRecords','super','getMineAccount','7NsgqHA','inviteeUsername','99486obOgKg','totalAmount,\x20distributionBalance:\x20','969508uywboi','globalConfigService','email','DESC','user','SalesRecordsEntity','2014816sRbsRO','object','getConfigs','Injectable','log','hideString','InjectRepository','appForMoney','findOne','xxxxxxx','function','userInfo','update','../user/user.entity','__metadata','decimal.js'];_0x12f9=function(){return _0x52ce50;};return _0x12f9();}const _0x2e7fb0=_0x1ac3;(function(_0x32bcd,_0x3a07a8){const _0x20e19b=_0x1ac3,_0x55f91a=_0x32bcd();while(!![]){try{const _0x57b214=-parseInt(_0x20e19b(0xa5))/0x1+-parseInt(_0x20e19b(0xcc))/0x2+parseInt(_0x20e19b(0xbe))/0x3+parseInt(_0x20e19b(0xc6))/0x4*(parseInt(_0x20e19b(0xad))/0x5)+parseInt(_0x20e19b(0xc4))/0x6*(-parseInt(_0x20e19b(0xc2))/0x7)+parseInt(_0x20e19b(0xa9))/0x8*(parseInt(_0x20e19b(0x82))/0x9)+parseInt(_0x20e19b(0x88))/0xa;if(_0x57b214===_0x3a07a8)break;else _0x55f91a['push'](_0x55f91a['shift']());}catch(_0x47ae1a){_0x55f91a['push'](_0x55f91a['shift']());}}}(_0x12f9,0xa8060));var __decorate=this&&this['__decorate']||function(_0x1c41f9,_0x4f9cca,_0x23d2dd,_0x5188a7){const _0x2fedaa=_0x1ac3;var _0x36f0e6=arguments[_0x2fedaa(0x87)],_0xb405c1=_0x36f0e6<0x3?_0x4f9cca:_0x5188a7===null?_0x5188a7=Object[_0x2fedaa(0xaa)](_0x4f9cca,_0x23d2dd):_0x5188a7,_0x12ead0;if(typeof Reflect===_0x2fedaa(0xcd)&&typeof Reflect[_0x2fedaa(0xa4)]==='function')_0xb405c1=Reflect[_0x2fedaa(0xa4)](_0x1c41f9,_0x4f9cca,_0x23d2dd,_0x5188a7);else{for(var _0x14497a=_0x1c41f9[_0x2fedaa(0x87)]-0x1;_0x14497a>=0x0;_0x14497a--)if(_0x12ead0=_0x1c41f9[_0x14497a])_0xb405c1=(_0x36f0e6<0x3?_0x12ead0(_0xb405c1):_0x36f0e6>0x3?_0x12ead0(_0x4f9cca,_0x23d2dd,_0xb405c1):_0x12ead0(_0x4f9cca,_0x23d2dd))||_0xb405c1;}return _0x36f0e6>0x3&&_0xb405c1&&Object[_0x2fedaa(0x86)](_0x4f9cca,_0x23d2dd,_0xb405c1),_0xb405c1;},__metadata=this&&this[_0x2e7fb0(0xda)]||function(_0x5c0860,_0xd71bd2){const _0x2c19fb=_0x2e7fb0;if(typeof Reflect===_0x2c19fb(0xcd)&&typeof Reflect[_0x2c19fb(0x81)]===_0x2c19fb(0xd6))return Reflect[_0x2c19fb(0x81)](_0x5c0860,_0xd71bd2);},__param=this&&this['__param']||function(_0x131aa2,_0x127634){return function(_0x5e2e89,_0x1b28fb){_0x127634(_0x5e2e89,_0x1b28fb,_0x131aa2);};};function _0x1ac3(_0x5c236f,_0x12d97b){const _0x12f901=_0x12f9();return _0x1ac3=function(_0x1ac355,_0x20827e){_0x1ac355=_0x1ac355-0x79;let _0x12e156=_0x12f901[_0x1ac355];return _0x12e156;},_0x1ac3(_0x5c236f,_0x12d97b);}Object['defineProperty'](exports,_0x2e7fb0(0xde),{'value':!![]}),exports['SalesService']=void 0x0;const globalConfig_service_1=require(_0x2e7fb0(0x7c)),common_1=require(_0x2e7fb0(0x8f)),salesUsers_entity_1=require(_0x2e7fb0(0x85)),typeorm_1=require(_0x2e7fb0(0x84)),typeorm_2=require('typeorm'),salesRecords_entity_1=require('./salesRecords.entity'),utils_1=require(_0x2e7fb0(0x9d)),user_entity_1=require(_0x2e7fb0(0xd9)),decimal_js_1=require(_0x2e7fb0(0xdb)),salesOrder_entity_1=require('./salesOrder.entity');let SalesService=class SalesService{constructor(_0x4b9845,_0x257572,_0x1b7637,_0x433042,_0x49717a){const _0x239584=_0x2e7fb0;this[_0x239584(0x7f)]=_0x4b9845,this[_0x239584(0xa6)]=_0x257572,this['userEntity']=_0x1b7637,this[_0x239584(0xdf)]=_0x433042,this[_0x239584(0xc7)]=_0x49717a;}async[_0x2e7fb0(0xc1)](_0x4e2565){const _0x3e05bd=_0x2e7fb0;try{const {id:_0x145562}=_0x4e2565[_0x3e05bd(0xca)];let _0x34c924=await this[_0x3e05bd(0x7f)]['findOne']({'where':{'userId':_0x145562}});if(!_0x34c924){const {salesBaseRatio:salesBaseRatio=0xa,salesBaseTitle:salesBaseTitle=_0x3e05bd(0x83)}=await this[_0x3e05bd(0xc7)][_0x3e05bd(0xce)]([_0x3e05bd(0x9e),_0x3e05bd(0xa7)]);_0x34c924=await this[_0x3e05bd(0xba)]({'userId':_0x145562,'performanceRatio':Number(salesBaseRatio),'salesOutletName':salesBaseTitle});}const _0x47a89a=(0x0,utils_1[_0x3e05bd(0xb5)])(_0x34c924),_0x2f48b3=await this[_0x3e05bd(0xa6)][_0x3e05bd(0xe2)]({'where':{'inviterUserId':_0x145562}}),_0x2ffe42=await this[_0x3e05bd(0x97)][_0x3e05bd(0xd4)]({'where':{'id':_0x145562}})||{'inviteLinkCount':0x0,'inviteCode':_0x3e05bd(0xd5)},{inviteLinkCount:_0x14955b,inviteCode:_0x24349c}=_0x2ffe42,_0xf8764=await this[_0x3e05bd(0x97)][_0x3e05bd(0xe2)]({'where':{'invitedBy':_0x24349c}});return Object[_0x3e05bd(0x96)](Object[_0x3e05bd(0x96)]({},_0x47a89a),{'orderCount':_0x2f48b3,'inviteCount':_0xf8764,'inviteLinkCount':_0x14955b});}catch(_0x2f67e6){console['log'](_0x3e05bd(0x8d),_0x2f67e6);}}async['getMineRecords'](_0x1ad287,_0x546640){const _0x569a3f=_0x2e7fb0;try{const {id:_0x2cfbb5}=_0x1ad287[_0x569a3f(0xca)],{page:_0x5af221,size:_0x11331b}=_0x546640,[_0xe978f3,_0x1d259f]=await this[_0x569a3f(0xa6)][_0x569a3f(0xbc)]({'where':{'inviterUserId':_0x2cfbb5},'order':{'createdAt':'DESC'},'skip':(_0x5af221-0x1)*_0x11331b,'take':_0x11331b});return{'rows':(0x0,utils_1[_0x569a3f(0xb5)])(_0xe978f3),'count':_0x1d259f};}catch(_0xa9a935){console[_0x569a3f(0xd0)]('error:\x20',_0xa9a935);}}async[_0x2e7fb0(0x93)](_0x7e1d5b,_0x23ef68){const _0x43ac58=_0x2e7fb0;try{const {page:_0x11e566,size:_0x5311e3,orderId:_0x2943d9,orderPrice:_0x3d6762}=_0x23ef68;let _0x4f8db2={};_0x2943d9&&(_0x4f8db2={'orderId':_0x2943d9}),_0x3d6762&&(_0x4f8db2={'orderPrice':_0x3d6762});const [_0x4744c5,_0x1c94a9]=await this[_0x43ac58(0xa6)][_0x43ac58(0xbc)]({'where':_0x4f8db2,'order':{'createdAt':_0x43ac58(0xc9)},'skip':(_0x11e566-0x1)*_0x5311e3,'take':_0x5311e3}),_0x255c3c=[];_0x4744c5['map'](_0x39c9fa=>{const _0x2576da=_0x43ac58;_0x255c3c[_0x2576da(0xab)](_0x39c9fa[_0x2576da(0xa0)]),_0x255c3c['push'](_0x39c9fa[_0x2576da(0x9f)]);});const _0x105a4b=await this[_0x43ac58(0x97)]['find']({'where':{'id':(0x0,typeorm_2['In'])(_0x255c3c)}});return _0x4744c5[_0x43ac58(0x7a)](_0x4987e8=>{const _0x13967e=_0x43ac58,_0x23da4a=_0x105a4b['find'](_0x439575=>_0x439575['id']===_0x4987e8['inviterUserId']),_0x208984=_0x105a4b[_0x13967e(0xbd)](_0x456dd1=>_0x456dd1['id']===_0x4987e8['inviteeUserId']),{username:_0x2c4845,email:_0x152440,avatar:_0x5e21b5}=_0x105a4b[_0x13967e(0xbd)](_0x409865=>_0x409865['id']===_0x4987e8[_0x13967e(0xa0)]);_0x4987e8['inviterUsername']=_0x23da4a===null||_0x23da4a===void 0x0?void 0x0:_0x23da4a[_0x13967e(0x95)],_0x4987e8[_0x13967e(0xa1)]=_0x23da4a===null||_0x23da4a===void 0x0?void 0x0:_0x23da4a[_0x13967e(0xc8)],_0x4987e8['inviterAvatar']=_0x23da4a===null||_0x23da4a===void 0x0?void 0x0:_0x23da4a[_0x13967e(0x9a)],_0x4987e8[_0x13967e(0xc3)]=_0x208984===null||_0x208984===void 0x0?void 0x0:_0x208984[_0x13967e(0x95)],_0x4987e8['inviteeEmail']=_0x208984===null||_0x208984===void 0x0?void 0x0:_0x208984[_0x13967e(0xc8)],_0x4987e8['inviteeAvatar']=_0x208984===null||_0x208984===void 0x0?void 0x0:_0x208984[_0x13967e(0x9a)];}),_0x7e1d5b[_0x43ac58(0xca)][_0x43ac58(0xaf)]!==_0x43ac58(0xc0)&&_0x4744c5['forEach'](_0x5336f9=>{const _0x5efaf2=_0x43ac58;_0x5336f9[_0x5efaf2(0xa1)]=_0x5336f9[_0x5efaf2(0xa1)]?(0x0,utils_1[_0x5efaf2(0xd1)])(_0x5336f9['inviterEmail']):'',_0x5336f9[_0x5efaf2(0xb8)]=_0x5336f9[_0x5efaf2(0xb8)]?(0x0,utils_1['hideString'])(_0x5336f9['inviteeEmail']):'';}),{'rows':(0x0,utils_1[_0x43ac58(0xb5)])(_0x4744c5),'count':_0x1c94a9};}catch(_0x294760){console[_0x43ac58(0xd0)](_0x43ac58(0x8d),_0x294760);}}async['creaetUserBaseSalesInfo'](_0x12fcd5){const _0xae39e3=_0x2e7fb0,{userId:_0xad8996,performanceRatio:_0x577fbc,salesOutletName:_0x13d2a8}=_0x12fcd5;return await this['salesUsersEntity'][_0xae39e3(0xb1)]({'userId':_0xad8996,'performanceRatio':_0x577fbc,'salesOutletName':_0x13d2a8});}async['changeUserBaseSalesInfo'](_0x4c655a){const _0x16862b=_0x2e7fb0;return await this[_0x16862b(0x7f)]['save'](_0x4c655a);}async[_0x2e7fb0(0xbf)](_0x218ff9){const _0x16f91e=_0x2e7fb0;return await this[_0x16f91e(0xa6)][_0x16f91e(0xb1)](_0x218ff9);}async[_0x2e7fb0(0x8c)](_0x1425e8,_0x8ca1ce){const _0xa3b6ba=_0x2e7fb0,_0x3cbba9=await this['salesUsersEntity'][_0xa3b6ba(0xd4)]({'where':{'userId':_0x1425e8}});if(!_0x3cbba9)return;const {totalAmount:_0x2e82c,distributionBalance:_0x1ad68e}=_0x3cbba9;return console[_0xa3b6ba(0xd0)](_0xa3b6ba(0xc5),_0x2e82c,_0x1ad68e),await this[_0xa3b6ba(0x7f)]['update']({'userId':_0x1425e8},{'totalAmount':new decimal_js_1['default'](_0x2e82c)[_0xa3b6ba(0xbb)](_0x8ca1ce)[_0xa3b6ba(0xb6)](),'distributionBalance':new decimal_js_1[(_0xa3b6ba(0xb4))](_0x1ad68e)[_0xa3b6ba(0xbb)](_0x8ca1ce)[_0xa3b6ba(0xb6)]()});}async[_0x2e7fb0(0xd3)](_0x4b4709,_0x5c752d){const _0x4efec7=_0x2e7fb0,{id:_0x191434}=_0x4b4709[_0x4efec7(0xca)],{withdrawalAmount:_0x1c03b3,withdrawalChannels:_0x2cd18d,contactInformation:_0x1dc47f,remark:_0x4995de}=_0x5c752d,_0x3f532f=await this['globalConfigService'][_0x4efec7(0xce)](['salesAllowDrawMoney'])||0xa;if(typeof _0x1c03b3!=='number'||_0x1c03b3<=0x0)throw new common_1['HttpException']('提现金额必须为数字且大于0',common_1[_0x4efec7(0x79)]['BAD_REQUEST']);if(Number(_0x1c03b3)<Number(_0x3f532f))throw new common_1[(_0x4efec7(0xae))](_0x4efec7(0xb3)+_0x3f532f+'元',common_1[_0x4efec7(0x79)][_0x4efec7(0x7b)]);const _0x48f04a=await this[_0x4efec7(0x7f)][_0x4efec7(0xd4)]({'where':{'userId':_0x191434}}),{distributionBalance:_0x39d7dd,drawMoneyIn:_0x33d8e2}=_0x48f04a;if(Number(_0x39d7dd)<Number(_0x1c03b3))throw new common_1['HttpException'](_0x4efec7(0x99),common_1[_0x4efec7(0x79)][_0x4efec7(0x7b)]);const _0x2cc04e=new decimal_js_1[(_0x4efec7(0xb4))](_0x39d7dd)[_0x4efec7(0x80)](_0x1c03b3)[_0x4efec7(0xb6)](),_0x5cae0f={'userId':_0x191434,'withdrawalAmount':_0x1c03b3,'orderStatus':0x0,'auditStatus':0x0,'withdrawalChannels':_0x2cd18d,'contactInformation':_0x1dc47f,'remark':_0x4995de};await this['createOrder'](_0x5cae0f);const _0x17ea70=await this[_0x4efec7(0x7f)][_0x4efec7(0xd8)]({'userId':_0x191434},{'distributionBalance':_0x2cc04e,'drawMoneyIn':new decimal_js_1['default'](_0x33d8e2)[_0x4efec7(0xbb)](_0x1c03b3)[_0x4efec7(0xb6)]()});}async[_0x2e7fb0(0x8a)](_0x3c6e1a,_0x272a82){const _0x293d55=_0x2e7fb0,{id:_0x4c6a4f}=_0x3c6e1a[_0x293d55(0xca)],{page:_0x395cb5,size:_0x4e1c30}=_0x272a82,[_0x2da6cb,_0x38956e]=await this[_0x293d55(0xdf)][_0x293d55(0xbc)]({'where':{'userId':_0x4c6a4f},'order':{'createdAt':'DESC'},'skip':(_0x395cb5-0x1)*_0x4e1c30,'take':_0x4e1c30}),_0x11dde3=_0x2da6cb[_0x293d55(0x89)](_0x2025fc=>_0x2025fc[_0x293d55(0xac)]),_0x2d17b8=await this[_0x293d55(0x97)][_0x293d55(0xbd)]({'where':{'id':(0x0,typeorm_2['In'])(_0x11dde3)}});return _0x2da6cb[_0x293d55(0x7a)](_0x405020=>{const _0x1187bd=_0x293d55,_0x5cb97e=_0x2d17b8[_0x1187bd(0xbd)](_0x303276=>_0x303276['id']===_0x405020['auditUserId']);_0x405020[_0x1187bd(0x7e)]=_0x5cb97e?_0x5cb97e[_0x1187bd(0x95)]:'';}),{'rows':(0x0,utils_1[_0x293d55(0xb5)])(_0x2da6cb),'count':_0x38956e};}async[_0x2e7fb0(0x7d)](_0x569dcb,_0xadb0ed){const _0x56bab7=_0x2e7fb0,{page:_0x52c0f9,size:_0x32da9c}=_0xadb0ed,_0x4914b6={};_0xadb0ed[_0x56bab7(0xdd)]!==undefined&&_0xadb0ed[_0x56bab7(0xdd)]!==''&&(_0x4914b6['orderStatus']=_0xadb0ed[_0x56bab7(0xdd)]),_0xadb0ed[_0x56bab7(0x94)]&&(_0x4914b6[_0x56bab7(0x94)]=_0xadb0ed[_0x56bab7(0x94)]);const [_0x2aa172,_0x3a4a9e]=await this['salesOrderEntity'][_0x56bab7(0xbc)]({'where':_0x4914b6,'order':{'createdAt':_0x56bab7(0xc9)},'skip':(_0x52c0f9-0x1)*_0x32da9c,'take':_0x32da9c}),_0x5bfca9=_0x2aa172['map'](_0x254280=>_0x254280[_0x56bab7(0x91)]),_0xf26330=await this['userEntity'][_0x56bab7(0xbd)]({'where':{'id':(0x0,typeorm_2['In'])(_0x5bfca9)}});return _0x2aa172[_0x56bab7(0x7a)](_0x58fc49=>{const _0x4aa4c3=_0x56bab7,_0x5a0feb=_0xf26330['find'](_0x2facc7=>_0x2facc7['id']===_0x58fc49[_0x4aa4c3(0x91)]);if(_0x5a0feb){const {username:_0x554da3,email:_0x3585af,avatar:_0xef3d3}=_0x5a0feb;_0x58fc49[_0x4aa4c3(0xd7)]={'username':_0x554da3,'avatar':_0xef3d3,'email':(0x0,utils_1['hideString'])(_0x3585af)};}}),{'rows':(0x0,utils_1[_0x56bab7(0xb5)])(_0x2aa172),'count':_0x3a4a9e};}async[_0x2e7fb0(0xb7)](_0xc52fcd){const _0x45d355=_0x2e7fb0;try{return await this[_0x45d355(0xdf)]['save'](_0xc52fcd);}catch(_0x229c95){console[_0x45d355(0xd0)](_0x45d355(0x8d),_0x229c95);throw new common_1[(_0x45d355(0xae))](_0x45d355(0x8e),common_1[_0x45d355(0x79)][_0x45d355(0x7b)]);}}async[_0x2e7fb0(0xb2)](_0x4d5301,_0x3f2ea6){const _0x29e3ba=_0x2e7fb0;try{const {id:_0xaf9a4e}=_0x4d5301['user'],{id:_0x3caa85,status:_0x8e20e1}=_0x3f2ea6;if(![0x1,-0x1][_0x29e3ba(0x9c)](_0x8e20e1))throw new common_1[(_0x29e3ba(0xae))](_0x29e3ba(0xe0),common_1[_0x29e3ba(0x79)][_0x29e3ba(0x7b)]);const _0x152520=await this[_0x29e3ba(0xdf)][_0x29e3ba(0xd4)]({'where':{'id':_0x3caa85}});if(_0x152520[_0x29e3ba(0xdd)]!==0x0)throw new common_1[(_0x29e3ba(0xae))](_0x29e3ba(0xdc),common_1[_0x29e3ba(0x79)]['BAD_REQUEST']);const _0xfece4f=await this[_0x29e3ba(0x7f)]['findOne']({'where':{'userId':_0x152520[_0x29e3ba(0x91)]}}),{withdrawalAmount:_0x3a02e4,drawMoneyIn:_0x10e862}=_0xfece4f,_0x1ee1e7=new decimal_js_1[(_0x29e3ba(0xb4))](_0x3a02e4)[_0x29e3ba(0xbb)](_0x152520[_0x29e3ba(0xb9)])[_0x29e3ba(0xb6)](),_0x1a69c5=new decimal_js_1[(_0x29e3ba(0xb4))](_0x10e862)[_0x29e3ba(0x80)](_0x152520[_0x29e3ba(0xb9)])[_0x29e3ba(0xb6)]();return await this[_0x29e3ba(0x7f)][_0x29e3ba(0xd8)]({'userId':_0x152520[_0x29e3ba(0x91)]},{'withdrawalAmount':_0x1ee1e7,'drawMoneyIn':_0x1a69c5}),await this['salesOrderEntity']['update']({'id':_0x3caa85},{'orderStatus':_0x8e20e1,'auditStatus':_0x8e20e1,'auditUserId':_0xaf9a4e,'paymentStatus':_0x8e20e1}),_0x29e3ba(0x9b);}catch(_0x1a3b2d){console[_0x29e3ba(0xd0)](_0x29e3ba(0x8d),_0x1a3b2d);throw new common_1['HttpException'](_0x29e3ba(0xa2),common_1[_0x29e3ba(0x79)]['BAD_REQUEST']);}}async['salesUserList'](_0x1f6e79,_0x1f59db){const _0x5256b6=_0x2e7fb0,{page:_0x14d4e1,size:_0x11822a,salesOutletName:_0xbe8458,performanceRatio:_0x49563d}=_0x1f59db,_0x4fdbb2={};_0xbe8458&&(_0x4fdbb2['salesOutletName']=(0x0,typeorm_2['Like'])('%'+_0xbe8458+'%')),_0x49563d&&(_0x4fdbb2[_0x5256b6(0xa3)]=_0x49563d);const [_0x21b92f,_0x1dec03]=await this['salesUsersEntity'][_0x5256b6(0xbc)]({'where':_0x4fdbb2,'order':{'id':'DESC'},'skip':(_0x14d4e1-0x1)*_0x11822a,'take':_0x11822a}),_0x21e52d=_0x21b92f[_0x5256b6(0x89)](_0x12da9e=>_0x12da9e[_0x5256b6(0x91)]),_0x44f84b=await this[_0x5256b6(0x97)][_0x5256b6(0xbd)]({'where':{'id':(0x0,typeorm_2['In'])(_0x21e52d)}});return _0x21b92f[_0x5256b6(0x7a)](_0x5f708f=>{const _0x229176=_0x5256b6,_0xfdb0a5=_0x44f84b[_0x229176(0xbd)](_0x1d1e2e=>_0x1d1e2e['id']===_0x5f708f[_0x229176(0x91)]);_0x5f708f['userInfo']=_0xfdb0a5?_0xfdb0a5:{};}),_0x1f6e79[_0x5256b6(0xca)][_0x5256b6(0xaf)]!=='super'&&_0x21b92f['forEach'](_0x5e7bbc=>{const _0xa97b21=_0x5256b6;var _0x54441a,_0x1ab2fa;_0x5e7bbc[_0xa97b21(0xd7)][_0xa97b21(0xc8)]=((_0x54441a=_0x5e7bbc[_0xa97b21(0xd7)])===null||_0x54441a===void 0x0?void 0x0:_0x54441a[_0xa97b21(0xc8)])?(0x0,utils_1[_0xa97b21(0xd1)])((_0x1ab2fa=_0x5e7bbc[_0xa97b21(0xd7)])===null||_0x1ab2fa===void 0x0?void 0x0:_0x1ab2fa[_0xa97b21(0xc8)]):'';}),{'rows':_0x21b92f,'count':_0x1dec03};}async['updateUserSales'](_0x1c98c6,_0x5ba649){const _0x369308=_0x2e7fb0,{performanceRatio:_0x8b7575,salesOutletName:_0x3923d8,userId:_0xc8dba}=_0x5ba649,_0xc885c0=await this[_0x369308(0x7f)]['findOne']({'where':{'userId':_0xc8dba}});if(!_0xc885c0)throw new common_1['HttpException'](_0x369308(0x90),common_1[_0x369308(0x79)][_0x369308(0x7b)]);const _0xcf6686=await this['salesUsersEntity'][_0x369308(0xd8)]({'userId':_0xc8dba},{'performanceRatio':_0x8b7575,'salesOutletName':_0x3923d8});if(_0xcf6686[_0x369308(0x98)]>0x0)return'修改成功';else throw new common_1[(_0x369308(0xae))]('修改失败',common_1[_0x369308(0x79)][_0x369308(0x7b)]);}};SalesService=__decorate([(0x0,common_1[_0x2e7fb0(0xcf)])(),__param(0x0,(0x0,typeorm_1['InjectRepository'])(salesUsers_entity_1['SalesUsersEntity'])),__param(0x1,(0x0,typeorm_1['InjectRepository'])(salesRecords_entity_1[_0x2e7fb0(0xcb)])),__param(0x2,(0x0,typeorm_1[_0x2e7fb0(0xd2)])(user_entity_1[_0x2e7fb0(0x8b)])),__param(0x3,(0x0,typeorm_1[_0x2e7fb0(0xd2)])(salesOrder_entity_1[_0x2e7fb0(0xa8)])),__metadata('design:paramtypes',[typeorm_2['Repository'],typeorm_2[_0x2e7fb0(0xb0)],typeorm_2['Repository'],typeorm_2['Repository'],globalConfig_service_1[_0x2e7fb0(0x92)]])],SalesService),exports[_0x2e7fb0(0xe1)]=SalesService;