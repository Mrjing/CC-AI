'use strict';const _0x12006a=_0xd1ae;(function(_0x2276f6,_0x25fb06){const _0x56fcb2=_0xd1ae,_0x153cb5=_0x2276f6();while(!![]){try{const _0x1ab172=parseInt(_0x56fcb2(0x1f6))/0x1+-parseInt(_0x56fcb2(0x230))/0x2+parseInt(_0x56fcb2(0x23b))/0x3+-parseInt(_0x56fcb2(0x238))/0x4+-parseInt(_0x56fcb2(0x1f8))/0x5*(-parseInt(_0x56fcb2(0x22b))/0x6)+-parseInt(_0x56fcb2(0x219))/0x7+parseInt(_0x56fcb2(0x24c))/0x8*(parseInt(_0x56fcb2(0x240))/0x9);if(_0x1ab172===_0x25fb06)break;else _0x153cb5['push'](_0x153cb5['shift']());}catch(_0x4cd228){_0x153cb5['push'](_0x153cb5['shift']());}}}(_0x186e,0x46c05));var __decorate=this&&this[_0x12006a(0x22a)]||function(_0x4a6212,_0x1eab64,_0x5038a9,_0x15c42e){const _0x393761=_0x12006a;var _0x2cfe07=arguments['length'],_0x295737=_0x2cfe07<0x3?_0x1eab64:_0x15c42e===null?_0x15c42e=Object['getOwnPropertyDescriptor'](_0x1eab64,_0x5038a9):_0x15c42e,_0x2a6f7c;if(typeof Reflect===_0x393761(0x1f2)&&typeof Reflect[_0x393761(0x21e)]===_0x393761(0x20f))_0x295737=Reflect[_0x393761(0x21e)](_0x4a6212,_0x1eab64,_0x5038a9,_0x15c42e);else{for(var _0x58eacc=_0x4a6212[_0x393761(0x22d)]-0x1;_0x58eacc>=0x0;_0x58eacc--)if(_0x2a6f7c=_0x4a6212[_0x58eacc])_0x295737=(_0x2cfe07<0x3?_0x2a6f7c(_0x295737):_0x2cfe07>0x3?_0x2a6f7c(_0x1eab64,_0x5038a9,_0x295737):_0x2a6f7c(_0x1eab64,_0x5038a9))||_0x295737;}return _0x2cfe07>0x3&&_0x295737&&Object[_0x393761(0x22f)](_0x1eab64,_0x5038a9,_0x295737),_0x295737;},__metadata=this&&this[_0x12006a(0x233)]||function(_0x33a4b8,_0x20aed1){const _0x37dc9f=_0x12006a;if(typeof Reflect===_0x37dc9f(0x1f2)&&typeof Reflect[_0x37dc9f(0x1f1)]===_0x37dc9f(0x20f))return Reflect[_0x37dc9f(0x1f1)](_0x33a4b8,_0x20aed1);},__param=this&&this[_0x12006a(0x208)]||function(_0x42723c,_0x113ee4){return function(_0x5b9f0c,_0x5c53f0){_0x113ee4(_0x5b9f0c,_0x5c53f0,_0x42723c);};};Object[_0x12006a(0x22f)](exports,_0x12006a(0x1f9),{'value':!![]}),exports['SalesService']=void 0x0;function _0xd1ae(_0x41636e,_0x29c47c){const _0x186e2c=_0x186e();return _0xd1ae=function(_0xd1ae7f,_0x4ba923){_0xd1ae7f=_0xd1ae7f-0x1e6;let _0x470762=_0x186e2c[_0xd1ae7f];return _0x470762;},_0xd1ae(_0x41636e,_0x29c47c);}function _0x186e(){const _0x357eed=['userInfo','appForMoney','salesOrderEntity','salesUserList','456795DwxSCm','email','avatar','assign','salesUsersEntity','find','./salesOrder.entity','save','map','updateUserSales','orderStatus','update','8idjcmj','inviterUserId','新秀分销商','HttpStatus','../user/user.entity','typeorm','user','HttpException','role','findOne','UserEntity','inviteeEmail','creaetUserBaseSalesInfo','metadata','object','salesOrder','salesRecordsEntity','auditUserName','476753oYIbEc','salesAllowDrawMoney','622165OxsEmS','__esModule','修改成功','inviteRecords','提现金额不足','createOrder','创建提现工单失败','username','globalConfigService','minus','../globalConfig/globalConfig.service','auditUserId','formatCreateOrUpdateDate','userId','toNumber','提现金额最低必须为','__param','./salesRecords.entity','该工单已审核过','withdrawalChannels','salesBaseRatio','@nestjs/typeorm','forEach','function','saveCommissionAmount','Repository','SalesRecordsEntity','SalesService','withdrawalAmount','performanceRatio','inviteeAvatar','inviterUsername','affected','3900624kgsjTI','log','DESC','number','default','decorate','findAndCount','getMineRecords','error:\x20','drawMoneyOrder','提现金额必须为数字且大于0','BAD_REQUEST','getConfigs','super','inviteeUserId','InjectRepository','审核失败','__decorate','18DlJFQl','plus','length','userEntity','defineProperty','167014JyHrun','hideString','push','__metadata','../../common/utils','inviterAvatar','inviterEmail','count','1799552OkxqMs','@nestjs/common','Injectable','1438851bCClCp'];_0x186e=function(){return _0x357eed;};return _0x186e();}const globalConfig_service_1=require(_0x12006a(0x202)),common_1=require(_0x12006a(0x239)),salesUsers_entity_1=require('./salesUsers.entity'),typeorm_1=require(_0x12006a(0x20d)),typeorm_2=require(_0x12006a(0x1e9)),salesRecords_entity_1=require(_0x12006a(0x209)),utils_1=require(_0x12006a(0x234)),user_entity_1=require(_0x12006a(0x1e8)),decimal_js_1=require('decimal.js'),salesOrder_entity_1=require(_0x12006a(0x246));let SalesService=class SalesService{constructor(_0x46f0bb,_0x390143,_0x224bdd,_0x4d1c4c,_0x5c068e){const _0x11a6d4=_0x12006a;this['salesUsersEntity']=_0x46f0bb,this['salesRecordsEntity']=_0x390143,this[_0x11a6d4(0x22e)]=_0x224bdd,this[_0x11a6d4(0x23e)]=_0x4d1c4c,this['globalConfigService']=_0x5c068e;}async['getMineAccount'](_0x3a0852){const _0xac4a4f=_0x12006a;try{const {id:_0xddf83}=_0x3a0852[_0xac4a4f(0x1ea)];let _0x592fc3=await this[_0xac4a4f(0x244)]['findOne']({'where':{'userId':_0xddf83}});if(!_0x592fc3){const {salesBaseRatio:salesBaseRatio=0xa,salesBaseTitle:salesBaseTitle=_0xac4a4f(0x1e6)}=await this[_0xac4a4f(0x200)][_0xac4a4f(0x225)]([_0xac4a4f(0x20c),'salesBaseTitle']);_0x592fc3=await this[_0xac4a4f(0x1f0)]({'userId':_0xddf83,'performanceRatio':Number(salesBaseRatio),'salesOutletName':salesBaseTitle});}const _0x2ef4aa=(0x0,utils_1[_0xac4a4f(0x204)])(_0x592fc3),_0x23fe5b=await this[_0xac4a4f(0x1f4)][_0xac4a4f(0x237)]({'where':{'inviterUserId':_0xddf83}}),_0xe8a648=await this[_0xac4a4f(0x22e)][_0xac4a4f(0x1ed)]({'where':{'id':_0xddf83}})||{'inviteLinkCount':0x0,'inviteCode':'xxxxxxx'},{inviteLinkCount:_0x44ff12,inviteCode:_0x350cb9}=_0xe8a648,_0x28f3e0=await this[_0xac4a4f(0x22e)][_0xac4a4f(0x237)]({'where':{'invitedBy':_0x350cb9}});return Object[_0xac4a4f(0x243)](Object[_0xac4a4f(0x243)]({},_0x2ef4aa),{'orderCount':_0x23fe5b,'inviteCount':_0x28f3e0,'inviteLinkCount':_0x44ff12});}catch(_0x377e32){console[_0xac4a4f(0x21a)]('error:\x20',_0x377e32);}}async[_0x12006a(0x220)](_0x43d0be,_0x38694){const _0xd4ebba=_0x12006a;try{const {id:_0x11a8a3}=_0x43d0be[_0xd4ebba(0x1ea)],{page:_0x125272,size:_0x431e7d}=_0x38694,[_0x21b277,_0x3adc3d]=await this[_0xd4ebba(0x1f4)]['findAndCount']({'where':{'inviterUserId':_0x11a8a3},'order':{'createdAt':'DESC'},'skip':(_0x125272-0x1)*_0x431e7d,'take':_0x431e7d});return{'rows':(0x0,utils_1[_0xd4ebba(0x204)])(_0x21b277),'count':_0x3adc3d};}catch(_0x45bff8){console[_0xd4ebba(0x21a)]('error:\x20',_0x45bff8);}}async[_0x12006a(0x1fb)](_0x1dcfdd,_0x1d4e06){const _0x1e988f=_0x12006a;try{const {page:_0x410b4c,size:_0xdb8c30,orderId:_0x49938d,orderPrice:_0xa9300f}=_0x1d4e06;let _0xa78e04={};_0x49938d&&(_0xa78e04={'orderId':_0x49938d}),_0xa9300f&&(_0xa78e04={'orderPrice':_0xa9300f});const [_0x5b5905,_0x39b848]=await this[_0x1e988f(0x1f4)][_0x1e988f(0x21f)]({'where':_0xa78e04,'order':{'createdAt':_0x1e988f(0x21b)},'skip':(_0x410b4c-0x1)*_0xdb8c30,'take':_0xdb8c30}),_0x5e3a64=[];_0x5b5905[_0x1e988f(0x248)](_0x176c8d=>{const _0x25ad1f=_0x1e988f;_0x5e3a64[_0x25ad1f(0x232)](_0x176c8d[_0x25ad1f(0x24d)]),_0x5e3a64[_0x25ad1f(0x232)](_0x176c8d[_0x25ad1f(0x227)]);});const _0x4195be=await this[_0x1e988f(0x22e)][_0x1e988f(0x245)]({'where':{'id':(0x0,typeorm_2['In'])(_0x5e3a64)}});return _0x5b5905[_0x1e988f(0x20e)](_0x2569d7=>{const _0x4e051d=_0x1e988f,_0x21e6e8=_0x4195be['find'](_0x173881=>_0x173881['id']===_0x2569d7[_0x4e051d(0x24d)]),_0x18b9cf=_0x4195be[_0x4e051d(0x245)](_0x3ba8d7=>_0x3ba8d7['id']===_0x2569d7['inviteeUserId']),{username:_0x161899,email:_0x269720,avatar:_0x48a402}=_0x4195be[_0x4e051d(0x245)](_0x16760d=>_0x16760d['id']===_0x2569d7[_0x4e051d(0x24d)]);_0x2569d7[_0x4e051d(0x217)]=_0x21e6e8===null||_0x21e6e8===void 0x0?void 0x0:_0x21e6e8[_0x4e051d(0x1ff)],_0x2569d7[_0x4e051d(0x236)]=_0x21e6e8===null||_0x21e6e8===void 0x0?void 0x0:_0x21e6e8[_0x4e051d(0x241)],_0x2569d7[_0x4e051d(0x235)]=_0x21e6e8===null||_0x21e6e8===void 0x0?void 0x0:_0x21e6e8[_0x4e051d(0x242)],_0x2569d7['inviteeUsername']=_0x18b9cf===null||_0x18b9cf===void 0x0?void 0x0:_0x18b9cf[_0x4e051d(0x1ff)],_0x2569d7['inviteeEmail']=_0x18b9cf===null||_0x18b9cf===void 0x0?void 0x0:_0x18b9cf[_0x4e051d(0x241)],_0x2569d7[_0x4e051d(0x216)]=_0x18b9cf===null||_0x18b9cf===void 0x0?void 0x0:_0x18b9cf[_0x4e051d(0x242)];}),_0x1dcfdd['user'][_0x1e988f(0x1ec)]!==_0x1e988f(0x226)&&_0x5b5905['forEach'](_0x4ed591=>{const _0x1f955b=_0x1e988f;_0x4ed591[_0x1f955b(0x236)]=_0x4ed591['inviterEmail']?(0x0,utils_1[_0x1f955b(0x231)])(_0x4ed591[_0x1f955b(0x236)]):'',_0x4ed591['inviteeEmail']=_0x4ed591[_0x1f955b(0x1ef)]?(0x0,utils_1['hideString'])(_0x4ed591[_0x1f955b(0x1ef)]):'';}),{'rows':(0x0,utils_1['formatCreateOrUpdateDate'])(_0x5b5905),'count':_0x39b848};}catch(_0x6e22bd){console[_0x1e988f(0x21a)](_0x1e988f(0x221),_0x6e22bd);}}async[_0x12006a(0x1f0)](_0x292b42){const _0x559190=_0x12006a,{userId:_0x29e097,performanceRatio:_0x22a793,salesOutletName:_0x3f564a}=_0x292b42;return await this['salesUsersEntity'][_0x559190(0x247)]({'userId':_0x29e097,'performanceRatio':_0x22a793,'salesOutletName':_0x3f564a});}async['changeUserBaseSalesInfo'](_0x1a5d28){const _0x3f3c23=_0x12006a;return await this[_0x3f3c23(0x244)]['save'](_0x1a5d28);}async['createSalesRecords'](_0x3d6a39){const _0x4b4336=_0x12006a;return await this['salesRecordsEntity'][_0x4b4336(0x247)](_0x3d6a39);}async[_0x12006a(0x210)](_0xf6146e,_0x9d264e){const _0x25689c=_0x12006a,_0x2966e9=await this[_0x25689c(0x244)][_0x25689c(0x1ed)]({'where':{'userId':_0xf6146e}});if(!_0x2966e9)return;const {totalAmount:_0x2e3c69,distributionBalance:_0x235280}=_0x2966e9;return console['log']('totalAmount,\x20distributionBalance:\x20',_0x2e3c69,_0x235280),await this[_0x25689c(0x244)]['update']({'userId':_0xf6146e},{'totalAmount':new decimal_js_1['default'](_0x2e3c69)['plus'](_0x9d264e)[_0x25689c(0x206)](),'distributionBalance':new decimal_js_1[(_0x25689c(0x21d))](_0x235280)[_0x25689c(0x22c)](_0x9d264e)[_0x25689c(0x206)]()});}async[_0x12006a(0x23d)](_0x130243,_0x4b0e83){const _0xdb277b=_0x12006a,{id:_0x323828}=_0x130243[_0xdb277b(0x1ea)],{withdrawalAmount:_0x3ca30d,withdrawalChannels:_0x3f1901,contactInformation:_0x55a49b,remark:_0x211012}=_0x4b0e83,_0x1d0c42=await this[_0xdb277b(0x200)]['getConfigs']([_0xdb277b(0x1f7)])||0xa;if(typeof _0x3ca30d!==_0xdb277b(0x21c)||_0x3ca30d<=0x0)throw new common_1['HttpException'](_0xdb277b(0x223),common_1[_0xdb277b(0x1e7)][_0xdb277b(0x224)]);if(Number(_0x3ca30d)<Number(_0x1d0c42))throw new common_1[(_0xdb277b(0x1eb))](_0xdb277b(0x207)+_0x1d0c42+'元',common_1['HttpStatus'][_0xdb277b(0x224)]);const _0x232d88=await this[_0xdb277b(0x244)]['findOne']({'where':{'userId':_0x323828}}),{distributionBalance:_0x3e183e,drawMoneyIn:_0x11c83a}=_0x232d88;if(Number(_0x3e183e)<Number(_0x3ca30d))throw new common_1[(_0xdb277b(0x1eb))](_0xdb277b(0x1fc),common_1['HttpStatus'][_0xdb277b(0x224)]);const _0x328975=new decimal_js_1[(_0xdb277b(0x21d))](_0x3e183e)[_0xdb277b(0x201)](_0x3ca30d)[_0xdb277b(0x206)](),_0x3e869e={'userId':_0x323828,'withdrawalAmount':_0x3ca30d,'orderStatus':0x0,'auditStatus':0x0,'withdrawalChannels':_0x3f1901,'contactInformation':_0x55a49b,'remark':_0x211012};await this[_0xdb277b(0x1fd)](_0x3e869e);const _0x39f725=await this[_0xdb277b(0x244)][_0xdb277b(0x24b)]({'userId':_0x323828},{'distributionBalance':_0x328975,'drawMoneyIn':new decimal_js_1[(_0xdb277b(0x21d))](_0x11c83a)['plus'](_0x3ca30d)[_0xdb277b(0x206)]()});}async[_0x12006a(0x222)](_0x3dfcb9,_0x51dc30){const _0x35dbad=_0x12006a,{id:_0xa73e9}=_0x3dfcb9[_0x35dbad(0x1ea)],{page:_0xcd4958,size:_0x196bd5}=_0x51dc30,[_0x4a53dc,_0x3208eb]=await this[_0x35dbad(0x23e)]['findAndCount']({'where':{'userId':_0xa73e9},'order':{'createdAt':_0x35dbad(0x21b)},'skip':(_0xcd4958-0x1)*_0x196bd5,'take':_0x196bd5}),_0x4c39ff=_0x4a53dc['map'](_0x33d60c=>_0x33d60c[_0x35dbad(0x203)]),_0x50e83f=await this['userEntity'][_0x35dbad(0x245)]({'where':{'id':(0x0,typeorm_2['In'])(_0x4c39ff)}});return _0x4a53dc[_0x35dbad(0x20e)](_0x43bad3=>{const _0x3a5173=_0x35dbad,_0x3f825b=_0x50e83f[_0x3a5173(0x245)](_0x22df97=>_0x22df97['id']===_0x43bad3[_0x3a5173(0x203)]);_0x43bad3[_0x3a5173(0x1f5)]=_0x3f825b?_0x3f825b['username']:'';}),{'rows':(0x0,utils_1[_0x35dbad(0x204)])(_0x4a53dc),'count':_0x3208eb};}async[_0x12006a(0x1f3)](_0x72255,_0x48c7c5){const _0x2f92bd=_0x12006a,{page:_0x5a5e91,size:_0x28b6e5}=_0x48c7c5,_0x22c26d={};_0x48c7c5[_0x2f92bd(0x24a)]!==undefined&&_0x48c7c5['orderStatus']!==''&&(_0x22c26d[_0x2f92bd(0x24a)]=_0x48c7c5[_0x2f92bd(0x24a)]),_0x48c7c5['withdrawalChannels']&&(_0x22c26d[_0x2f92bd(0x20b)]=_0x48c7c5[_0x2f92bd(0x20b)]);const [_0x4d7adc,_0x5084c7]=await this[_0x2f92bd(0x23e)]['findAndCount']({'where':_0x22c26d,'order':{'createdAt':'DESC'},'skip':(_0x5a5e91-0x1)*_0x28b6e5,'take':_0x28b6e5}),_0x3a692c=_0x4d7adc[_0x2f92bd(0x248)](_0x328ee0=>_0x328ee0[_0x2f92bd(0x205)]),_0x3d1c1f=await this[_0x2f92bd(0x22e)][_0x2f92bd(0x245)]({'where':{'id':(0x0,typeorm_2['In'])(_0x3a692c)}});return _0x4d7adc[_0x2f92bd(0x20e)](_0x3541c7=>{const _0x27b368=_0x2f92bd,_0x3809b9=_0x3d1c1f['find'](_0x246773=>_0x246773['id']===_0x3541c7[_0x27b368(0x205)]);if(_0x3809b9){const {username:_0x1068bb,email:_0x3ec392,avatar:_0x33f509}=_0x3809b9;_0x3541c7[_0x27b368(0x23c)]={'username':_0x1068bb,'avatar':_0x33f509,'email':(0x0,utils_1[_0x27b368(0x231)])(_0x3ec392)};}}),{'rows':(0x0,utils_1['formatCreateOrUpdateDate'])(_0x4d7adc),'count':_0x5084c7};}async[_0x12006a(0x1fd)](_0x3825a7){const _0x3cd0e=_0x12006a;try{return await this[_0x3cd0e(0x23e)][_0x3cd0e(0x247)](_0x3825a7);}catch(_0x254225){console[_0x3cd0e(0x21a)](_0x3cd0e(0x221),_0x254225);throw new common_1['HttpException'](_0x3cd0e(0x1fe),common_1[_0x3cd0e(0x1e7)][_0x3cd0e(0x224)]);}}async['auditOrder'](_0x97d0b7,_0x4a2794){const _0x579161=_0x12006a;try{const {id:_0x4c7de1}=_0x97d0b7[_0x579161(0x1ea)],{id:_0x52f4b2,status:_0xb4572}=_0x4a2794;if(![0x1,-0x1]['includes'](_0xb4572))throw new common_1[(_0x579161(0x1eb))]('审核状态错误',common_1[_0x579161(0x1e7)][_0x579161(0x224)]);const _0x31a9af=await this['salesOrderEntity'][_0x579161(0x1ed)]({'where':{'id':_0x52f4b2}});if(_0x31a9af[_0x579161(0x24a)]!==0x0)throw new common_1[(_0x579161(0x1eb))](_0x579161(0x20a),common_1['HttpStatus'][_0x579161(0x224)]);const _0x45590f=await this[_0x579161(0x244)][_0x579161(0x1ed)]({'where':{'userId':_0x31a9af[_0x579161(0x205)]}}),{withdrawalAmount:_0x29ee4f,drawMoneyIn:_0x55e03a}=_0x45590f,_0x26e8fd=new decimal_js_1[(_0x579161(0x21d))](_0x29ee4f)[_0x579161(0x22c)](_0x31a9af[_0x579161(0x214)])[_0x579161(0x206)](),_0x177b36=new decimal_js_1['default'](_0x55e03a)[_0x579161(0x201)](_0x31a9af[_0x579161(0x214)])['toNumber']();return await this[_0x579161(0x244)]['update']({'userId':_0x31a9af[_0x579161(0x205)]},{'withdrawalAmount':_0x26e8fd,'drawMoneyIn':_0x177b36}),await this[_0x579161(0x23e)][_0x579161(0x24b)]({'id':_0x52f4b2},{'orderStatus':_0xb4572,'auditStatus':_0xb4572,'auditUserId':_0x4c7de1,'paymentStatus':_0xb4572}),'审核完成';}catch(_0x365889){console[_0x579161(0x21a)]('error:\x20',_0x365889);throw new common_1[(_0x579161(0x1eb))](_0x579161(0x229),common_1[_0x579161(0x1e7)]['BAD_REQUEST']);}}async[_0x12006a(0x23f)](_0x25035a,_0x3cb1bd){const _0x4c7ceb=_0x12006a,{page:_0x29317e,size:_0x1a7c4e,salesOutletName:_0x535d1f,performanceRatio:_0x32ddd8}=_0x3cb1bd,_0x22f249={};_0x535d1f&&(_0x22f249['salesOutletName']=(0x0,typeorm_2['Like'])('%'+_0x535d1f+'%')),_0x32ddd8&&(_0x22f249[_0x4c7ceb(0x215)]=_0x32ddd8);const [_0x4d1052,_0xfc5122]=await this[_0x4c7ceb(0x244)][_0x4c7ceb(0x21f)]({'where':_0x22f249,'order':{'id':_0x4c7ceb(0x21b)},'skip':(_0x29317e-0x1)*_0x1a7c4e,'take':_0x1a7c4e}),_0x5b7484=_0x4d1052[_0x4c7ceb(0x248)](_0x51f82c=>_0x51f82c['userId']),_0x1e5794=await this[_0x4c7ceb(0x22e)][_0x4c7ceb(0x245)]({'where':{'id':(0x0,typeorm_2['In'])(_0x5b7484)}});return _0x4d1052[_0x4c7ceb(0x20e)](_0x2dba28=>{const _0x145b7e=_0x4c7ceb,_0x2d8ad7=_0x1e5794[_0x145b7e(0x245)](_0x445cfa=>_0x445cfa['id']===_0x2dba28[_0x145b7e(0x205)]);_0x2dba28[_0x145b7e(0x23c)]=_0x2d8ad7?_0x2d8ad7:{};}),_0x25035a['user'][_0x4c7ceb(0x1ec)]!==_0x4c7ceb(0x226)&&_0x4d1052[_0x4c7ceb(0x20e)](_0x2cd569=>{const _0x11e389=_0x4c7ceb;var _0x279b64,_0xa115d5;_0x2cd569[_0x11e389(0x23c)][_0x11e389(0x241)]=((_0x279b64=_0x2cd569[_0x11e389(0x23c)])===null||_0x279b64===void 0x0?void 0x0:_0x279b64[_0x11e389(0x241)])?(0x0,utils_1['hideString'])((_0xa115d5=_0x2cd569['userInfo'])===null||_0xa115d5===void 0x0?void 0x0:_0xa115d5['email']):'';}),{'rows':_0x4d1052,'count':_0xfc5122};}async[_0x12006a(0x249)](_0x3464a8,_0x16cf21){const _0x556b55=_0x12006a,{performanceRatio:_0x23005f,salesOutletName:_0x592bab,userId:_0x30e91c}=_0x16cf21,_0x3e8d5e=await this['salesUsersEntity'][_0x556b55(0x1ed)]({'where':{'userId':_0x30e91c}});if(!_0x3e8d5e)throw new common_1[(_0x556b55(0x1eb))]('用户不存在',common_1[_0x556b55(0x1e7)][_0x556b55(0x224)]);const _0x2e1e8d=await this[_0x556b55(0x244)]['update']({'userId':_0x30e91c},{'performanceRatio':_0x23005f,'salesOutletName':_0x592bab});if(_0x2e1e8d[_0x556b55(0x218)]>0x0)return _0x556b55(0x1fa);else throw new common_1['HttpException']('修改失败',common_1[_0x556b55(0x1e7)]['BAD_REQUEST']);}};SalesService=__decorate([(0x0,common_1[_0x12006a(0x23a)])(),__param(0x0,(0x0,typeorm_1['InjectRepository'])(salesUsers_entity_1['SalesUsersEntity'])),__param(0x1,(0x0,typeorm_1['InjectRepository'])(salesRecords_entity_1[_0x12006a(0x212)])),__param(0x2,(0x0,typeorm_1[_0x12006a(0x228)])(user_entity_1[_0x12006a(0x1ee)])),__param(0x3,(0x0,typeorm_1[_0x12006a(0x228)])(salesOrder_entity_1['SalesOrderEntity'])),__metadata('design:paramtypes',[typeorm_2[_0x12006a(0x211)],typeorm_2[_0x12006a(0x211)],typeorm_2[_0x12006a(0x211)],typeorm_2['Repository'],globalConfig_service_1['GlobalConfigService']])],SalesService),exports[_0x12006a(0x213)]=SalesService;