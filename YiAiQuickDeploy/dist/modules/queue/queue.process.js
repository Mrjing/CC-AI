'use strict';var _0xdbd66e=_0x4d65;(function(_0x5429f8,_0x27dd8c){var _0x4453ae=_0x4d65,_0x4dde48=_0x5429f8();while(!![]){try{var _0x5b1e52=parseInt(_0x4453ae(0x126))/0x1*(parseInt(_0x4453ae(0x14b))/0x2)+parseInt(_0x4453ae(0x12b))/0x3+parseInt(_0x4453ae(0x11e))/0x4*(parseInt(_0x4453ae(0x13a))/0x5)+parseInt(_0x4453ae(0x122))/0x6*(-parseInt(_0x4453ae(0x14a))/0x7)+parseInt(_0x4453ae(0x11f))/0x8*(parseInt(_0x4453ae(0x147))/0x9)+parseInt(_0x4453ae(0x10f))/0xa+-parseInt(_0x4453ae(0x138))/0xb;if(_0x5b1e52===_0x27dd8c)break;else _0x4dde48['push'](_0x4dde48['shift']());}catch(_0x36da7c){_0x4dde48['push'](_0x4dde48['shift']());}}}(_0x3818,0xe5dbf));var __decorate=this&&this['__decorate']||function(_0x2eec90,_0x1d95a9,_0x18af2f,_0x1370cc){var _0x58370e=_0x4d65,_0x10a8c3=arguments[_0x58370e(0x148)],_0x5e79ef=_0x10a8c3<0x3?_0x1d95a9:_0x1370cc===null?_0x1370cc=Object[_0x58370e(0x121)](_0x1d95a9,_0x18af2f):_0x1370cc,_0x44dbe9;if(typeof Reflect==='object'&&typeof Reflect[_0x58370e(0x145)]==='function')_0x5e79ef=Reflect[_0x58370e(0x145)](_0x2eec90,_0x1d95a9,_0x18af2f,_0x1370cc);else{for(var _0x4089ab=_0x2eec90['length']-0x1;_0x4089ab>=0x0;_0x4089ab--)if(_0x44dbe9=_0x2eec90[_0x4089ab])_0x5e79ef=(_0x10a8c3<0x3?_0x44dbe9(_0x5e79ef):_0x10a8c3>0x3?_0x44dbe9(_0x1d95a9,_0x18af2f,_0x5e79ef):_0x44dbe9(_0x1d95a9,_0x18af2f))||_0x5e79ef;}return _0x10a8c3>0x3&&_0x5e79ef&&Object[_0x58370e(0x134)](_0x1d95a9,_0x18af2f,_0x5e79ef),_0x5e79ef;},__metadata=this&&this[_0xdbd66e(0x144)]||function(_0x3914ef,_0x2cd336){var _0x14dbb4=_0xdbd66e;if(typeof Reflect==='object'&&typeof Reflect[_0x14dbb4(0x120)]===_0x14dbb4(0x146))return Reflect[_0x14dbb4(0x120)](_0x3914ef,_0x2cd336);},QueueProcessor_1;Object[_0xdbd66e(0x134)](exports,'__esModule',{'value':!![]}),exports[_0xdbd66e(0x11a)]=void 0x0;const bull_1=require(_0xdbd66e(0x13b)),common_1=require(_0xdbd66e(0x111)),midjourney_service_1=require(_0xdbd66e(0x12d));let QueueProcessor=QueueProcessor_1=class QueueProcessor{constructor(_0xb8194c){var _0x4e46ba=_0xdbd66e;this['midjourneyService']=_0xb8194c,this['logger']=new common_1[(_0x4e46ba(0x11d))](QueueProcessor_1['name']);}async['handleJob'](_0x5024a5){var _0xedd935=_0xdbd66e;const _0x169b76=await this[_0xedd935(0x10e)][_0xedd935(0x132)](_0x5024a5[_0xedd935(0x140)],_0x5024a5['id']);return _0x169b76;}[_0xdbd66e(0x116)](_0x3c124c){}[_0xdbd66e(0x125)](_0x36ca11){var _0x128733=_0xdbd66e;console['log'](_0x128733(0x12a),_0x36ca11);}['onQueueProgress'](_0x3bb296,_0x527bc9){var _0x1925a2=_0xdbd66e;console['log'](_0x1925a2(0x123),_0x3bb296['id'],_0x527bc9);}[_0xdbd66e(0x114)](_0x3dbe4e,_0xfddec8){}[_0xdbd66e(0x124)](_0x3db1dc,_0x3bd320){var _0x2e9e77=_0xdbd66e;common_1[_0x2e9e77(0x11d)][_0x2e9e77(0x11c)](_0x2e9e77(0x10d)+_0x3bd320[_0x2e9e77(0x128)]+_0x2e9e77(0x12f)+_0x3db1dc['id'],_0x2e9e77(0x11a)),this[_0x2e9e77(0x10e)][_0x2e9e77(0x119)](_0x3db1dc[_0x2e9e77(0x140)]);}[_0xdbd66e(0x141)](){var _0x2e6e58=_0xdbd66e;console[_0x2e6e58(0x131)]('队列暂停的时候调用');}[_0xdbd66e(0x143)](){var _0xea3e1=_0xdbd66e;console[_0xea3e1(0x131)](_0xea3e1(0x118));}[_0xdbd66e(0x113)](_0x4086c1,_0x65a58b){var _0x409af4=_0xdbd66e;common_1[_0x409af4(0x11d)][_0x409af4(0x131)](_0x409af4(0x142)+_0x4086c1[_0x409af4(0x148)]+_0x409af4(0x14c)+_0x65a58b+_0x409af4(0x110),_0x409af4(0x11a));}['onQueueDrained'](){}};function _0x4d65(_0x4c4f56,_0x3ac160){var _0x38183f=_0x3818();return _0x4d65=function(_0x4d6548,_0x5c604f){_0x4d6548=_0x4d6548-0x10d;var _0x21cf1a=_0x38183f[_0x4d6548];return _0x21cf1a;},_0x4d65(_0x4c4f56,_0x3ac160);}function _0x3818(){var _0xddfd3=['onQueueCompleted','onQueueProgress','onQueueActive','OnQueueProgress','队列恢复的时候调用','drawFailed','QueueProcessor','CONCURRENCY','error','Logger','105752DlilQY','81904SFtwOH','metadata','getOwnPropertyDescriptor','6nabhlJ','队列任务的一个回调用于通知当前进度','onQueueFailed','onQueueError','959489jHmPQk','prototype','message','design:paramtypes','队列发生错误','1198278hvaZDm','OnQueueError','../midjourney/midjourney.service','Processor',':\x20绘画失败\x20','OnQueueDrained','log','draw','OnQueuePaused','defineProperty','MJDRAW','OnQueueActive','OnQueueCleaned','36610596EyckJQ','env','315EOElID','@nestjs/bull','onQueueDrained','design:returntype','OnQueueCompleted','Process','data','onQueuePaused','Queue\x20cleaned:\x20','onQueueResumed','__metadata','decorate','function','1467yizEiW','length','design:type','12599734npatLC','2apTGLN','\x20jobs\x20of\x20type\x20','Queue\x20failed:\x20','midjourneyService','13763980JYfZaq','\x20were\x20cleaned.','@nestjs/common','MidjourneyService','onQueueCleaned'];_0x3818=function(){return _0xddfd3;};return _0x3818();}__decorate([(0x0,bull_1[_0xdbd66e(0x13f)])({'name':'mjDraw','concurrency':process[_0xdbd66e(0x139)]['CONCURRENCY']?+process['env'][_0xdbd66e(0x11b)]:0x3}),__metadata(_0xdbd66e(0x149),Function),__metadata(_0xdbd66e(0x129),[Object]),__metadata(_0xdbd66e(0x13d),Promise)],QueueProcessor[_0xdbd66e(0x127)],'handleJob',null),__decorate([(0x0,bull_1[_0xdbd66e(0x136)])(),__metadata(_0xdbd66e(0x149),Function),__metadata('design:paramtypes',[Object]),__metadata(_0xdbd66e(0x13d),void 0x0)],QueueProcessor[_0xdbd66e(0x127)],_0xdbd66e(0x116),null),__decorate([(0x0,bull_1[_0xdbd66e(0x12c)])(),__metadata(_0xdbd66e(0x149),Function),__metadata(_0xdbd66e(0x129),[Error]),__metadata(_0xdbd66e(0x13d),void 0x0)],QueueProcessor[_0xdbd66e(0x127)],_0xdbd66e(0x125),null),__decorate([(0x0,bull_1[_0xdbd66e(0x117)])(),__metadata(_0xdbd66e(0x149),Function),__metadata('design:paramtypes',[Object,Number]),__metadata(_0xdbd66e(0x13d),void 0x0)],QueueProcessor[_0xdbd66e(0x127)],_0xdbd66e(0x115),null),__decorate([(0x0,bull_1[_0xdbd66e(0x13e)])(),__metadata(_0xdbd66e(0x149),Function),__metadata('design:paramtypes',[Object,Object]),__metadata(_0xdbd66e(0x13d),void 0x0)],QueueProcessor[_0xdbd66e(0x127)],_0xdbd66e(0x114),null),__decorate([(0x0,bull_1['OnQueueFailed'])(),__metadata(_0xdbd66e(0x149),Function),__metadata('design:paramtypes',[Object,Error]),__metadata('design:returntype',void 0x0)],QueueProcessor['prototype'],_0xdbd66e(0x124),null),__decorate([(0x0,bull_1[_0xdbd66e(0x133)])(),__metadata(_0xdbd66e(0x149),Function),__metadata(_0xdbd66e(0x129),[]),__metadata(_0xdbd66e(0x13d),void 0x0)],QueueProcessor[_0xdbd66e(0x127)],_0xdbd66e(0x141),null),__decorate([(0x0,bull_1['OnQueueResumed'])(),__metadata(_0xdbd66e(0x149),Function),__metadata(_0xdbd66e(0x129),[]),__metadata(_0xdbd66e(0x13d),void 0x0)],QueueProcessor['prototype'],_0xdbd66e(0x143),null),__decorate([(0x0,bull_1[_0xdbd66e(0x137)])(),__metadata(_0xdbd66e(0x149),Function),__metadata('design:paramtypes',[Array,String]),__metadata(_0xdbd66e(0x13d),void 0x0)],QueueProcessor[_0xdbd66e(0x127)],_0xdbd66e(0x113),null),__decorate([(0x0,bull_1[_0xdbd66e(0x130)])(),__metadata(_0xdbd66e(0x149),Function),__metadata(_0xdbd66e(0x129),[]),__metadata(_0xdbd66e(0x13d),void 0x0)],QueueProcessor[_0xdbd66e(0x127)],_0xdbd66e(0x13c),null),QueueProcessor=QueueProcessor_1=__decorate([(0x0,bull_1[_0xdbd66e(0x12e)])(_0xdbd66e(0x135)),__metadata('design:paramtypes',[midjourney_service_1[_0xdbd66e(0x112)]])],QueueProcessor),exports[_0xdbd66e(0x11a)]=QueueProcessor;