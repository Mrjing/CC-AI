'use strict';function _0x3cad(){var _0x48be5d=['OnQueueActive','data','name','CONCURRENCY','onQueueFailed','onQueueResumed','OnQueueFailed','drawFailed','2375658tboqrh','队列发生错误','decorate','length','\x20were\x20cleaned.','@nestjs/common','队列恢复的时候调用','Process','design:type','234742BfSFCE','16XtOpdr','onQueueError','QueueProcessor','MidjourneyService','MJDRAW','handleJob','function','队列任务的一个回调用于通知当前进度','OnQueueProgress','__esModule','OnQueueDrained','44BsbCqs','design:paramtypes','__decorate','313270NhvPpi','env','onQueuePaused','log','1465611lrqiUA','OnQueueCompleted','@nestjs/bull','186205ZINIMp','OnQueueCleaned','Logger','onQueueCompleted','OnQueuePaused','onQueueProgress','onQueueCleaned','prototype','onQueueActive','OnQueueError','10gMgkyw','17448nsKbqT','logger','10824tMNEin','27Fofksq','Processor','\x20jobs\x20of\x20type\x20','object','队列暂停的时候调用','draw','midjourneyService','message','OnQueueResumed','../midjourney/midjourney.service','design:returntype','394037RHGKBy','defineProperty'];_0x3cad=function(){return _0x48be5d;};return _0x3cad();}var _0x43ae72=_0x4f8d;(function(_0x515e0b,_0x20d92d){var _0x17ba42=_0x4f8d,_0x1fc062=_0x515e0b();while(!![]){try{var _0x14055d=-parseInt(_0x17ba42(0x125))/0x1*(parseInt(_0x17ba42(0x145))/0x2)+-parseInt(_0x17ba42(0x138))/0x3+-parseInt(_0x17ba42(0x131))/0x4*(-parseInt(_0x17ba42(0x13b))/0x5)+parseInt(_0x17ba42(0x11c))/0x6+-parseInt(_0x17ba42(0x112))/0x7*(-parseInt(_0x17ba42(0x126))/0x8)+parseInt(_0x17ba42(0x149))/0x9*(-parseInt(_0x17ba42(0x134))/0xa)+-parseInt(_0x17ba42(0x148))/0xb*(-parseInt(_0x17ba42(0x146))/0xc);if(_0x14055d===_0x20d92d)break;else _0x1fc062['push'](_0x1fc062['shift']());}catch(_0x1916d){_0x1fc062['push'](_0x1fc062['shift']());}}}(_0x3cad,0x90b2c));var __decorate=this&&this[_0x43ae72(0x133)]||function(_0x25d6c4,_0x37e9e8,_0x1d9992,_0x1e3895){var _0xd3da0a=_0x43ae72,_0x5b9c24=arguments[_0xd3da0a(0x11f)],_0x43ec3b=_0x5b9c24<0x3?_0x37e9e8:_0x1e3895===null?_0x1e3895=Object['getOwnPropertyDescriptor'](_0x37e9e8,_0x1d9992):_0x1e3895,_0x11d618;if(typeof Reflect===_0xd3da0a(0x14c)&&typeof Reflect[_0xd3da0a(0x11e)]===_0xd3da0a(0x12c))_0x43ec3b=Reflect[_0xd3da0a(0x11e)](_0x25d6c4,_0x37e9e8,_0x1d9992,_0x1e3895);else{for(var _0x394059=_0x25d6c4['length']-0x1;_0x394059>=0x0;_0x394059--)if(_0x11d618=_0x25d6c4[_0x394059])_0x43ec3b=(_0x5b9c24<0x3?_0x11d618(_0x43ec3b):_0x5b9c24>0x3?_0x11d618(_0x37e9e8,_0x1d9992,_0x43ec3b):_0x11d618(_0x37e9e8,_0x1d9992))||_0x43ec3b;}return _0x5b9c24>0x3&&_0x43ec3b&&Object[_0xd3da0a(0x113)](_0x37e9e8,_0x1d9992,_0x43ec3b),_0x43ec3b;},__metadata=this&&this['__metadata']||function(_0x595bcc,_0xe0f4d3){var _0x318129=_0x43ae72;if(typeof Reflect===_0x318129(0x14c)&&typeof Reflect['metadata']===_0x318129(0x12c))return Reflect['metadata'](_0x595bcc,_0xe0f4d3);},QueueProcessor_1;Object['defineProperty'](exports,_0x43ae72(0x12f),{'value':!![]}),exports[_0x43ae72(0x128)]=void 0x0;function _0x4f8d(_0x31f101,_0x5b0291){var _0x3cad37=_0x3cad();return _0x4f8d=function(_0x4f8d0f,_0x36611a){_0x4f8d0f=_0x4f8d0f-0x10b;var _0x33b925=_0x3cad37[_0x4f8d0f];return _0x33b925;},_0x4f8d(_0x31f101,_0x5b0291);}const bull_1=require(_0x43ae72(0x13a)),common_1=require(_0x43ae72(0x121)),midjourney_service_1=require(_0x43ae72(0x110));let QueueProcessor=QueueProcessor_1=class QueueProcessor{constructor(_0x17c765){var _0x3935aa=_0x43ae72;this[_0x3935aa(0x10d)]=_0x17c765,this[_0x3935aa(0x147)]=new common_1['Logger'](QueueProcessor_1[_0x3935aa(0x116)]);}async[_0x43ae72(0x12b)](_0x3e9883){var _0x40244a=_0x43ae72;const _0x137fd4=await this[_0x40244a(0x10d)][_0x40244a(0x10c)](_0x3e9883[_0x40244a(0x115)],_0x3e9883['id']);return _0x137fd4;}[_0x43ae72(0x143)](_0x44ad9c){}[_0x43ae72(0x127)](_0x3c1cec){var _0x3db2f7=_0x43ae72;console[_0x3db2f7(0x137)](_0x3db2f7(0x11d),_0x3c1cec);}[_0x43ae72(0x140)](_0x32dcfe,_0x2c128a){var _0x42ec52=_0x43ae72;console[_0x42ec52(0x137)](_0x42ec52(0x12d),_0x32dcfe['id'],_0x2c128a);}[_0x43ae72(0x13e)](_0x3e9751,_0x259bef){}[_0x43ae72(0x118)](_0x4d9abf,_0x12f82c){var _0x4b38f1=_0x43ae72;common_1[_0x4b38f1(0x13d)]['error']('Queue\x20failed:\x20'+_0x12f82c[_0x4b38f1(0x10e)]+':\x20绘画失败\x20'+_0x4d9abf['id'],_0x4b38f1(0x128)),this[_0x4b38f1(0x10d)][_0x4b38f1(0x11b)](_0x4d9abf[_0x4b38f1(0x115)]);}['onQueuePaused'](){var _0x10fe41=_0x43ae72;console['log'](_0x10fe41(0x10b));}['onQueueResumed'](){var _0x4cecd3=_0x43ae72;console[_0x4cecd3(0x137)](_0x4cecd3(0x122));}['onQueueCleaned'](_0x1248d3,_0x18c08e){var _0x2e37e3=_0x43ae72;common_1['Logger']['log']('Queue\x20cleaned:\x20'+_0x1248d3[_0x2e37e3(0x11f)]+_0x2e37e3(0x14b)+_0x18c08e+_0x2e37e3(0x120),_0x2e37e3(0x128));}['onQueueDrained'](){}};__decorate([(0x0,bull_1[_0x43ae72(0x123)])({'name':'mjDraw','concurrency':process[_0x43ae72(0x135)]['CONCURRENCY']?+process[_0x43ae72(0x135)][_0x43ae72(0x117)]:0x3}),__metadata(_0x43ae72(0x124),Function),__metadata(_0x43ae72(0x132),[Object]),__metadata(_0x43ae72(0x111),Promise)],QueueProcessor[_0x43ae72(0x142)],_0x43ae72(0x12b),null),__decorate([(0x0,bull_1[_0x43ae72(0x114)])(),__metadata(_0x43ae72(0x124),Function),__metadata(_0x43ae72(0x132),[Object]),__metadata(_0x43ae72(0x111),void 0x0)],QueueProcessor[_0x43ae72(0x142)],_0x43ae72(0x143),null),__decorate([(0x0,bull_1[_0x43ae72(0x144)])(),__metadata('design:type',Function),__metadata('design:paramtypes',[Error]),__metadata(_0x43ae72(0x111),void 0x0)],QueueProcessor[_0x43ae72(0x142)],_0x43ae72(0x127),null),__decorate([(0x0,bull_1[_0x43ae72(0x12e)])(),__metadata(_0x43ae72(0x124),Function),__metadata('design:paramtypes',[Object,Number]),__metadata(_0x43ae72(0x111),void 0x0)],QueueProcessor[_0x43ae72(0x142)],_0x43ae72(0x140),null),__decorate([(0x0,bull_1[_0x43ae72(0x139)])(),__metadata(_0x43ae72(0x124),Function),__metadata('design:paramtypes',[Object,Object]),__metadata(_0x43ae72(0x111),void 0x0)],QueueProcessor[_0x43ae72(0x142)],_0x43ae72(0x13e),null),__decorate([(0x0,bull_1[_0x43ae72(0x11a)])(),__metadata(_0x43ae72(0x124),Function),__metadata('design:paramtypes',[Object,Error]),__metadata(_0x43ae72(0x111),void 0x0)],QueueProcessor[_0x43ae72(0x142)],_0x43ae72(0x118),null),__decorate([(0x0,bull_1[_0x43ae72(0x13f)])(),__metadata(_0x43ae72(0x124),Function),__metadata(_0x43ae72(0x132),[]),__metadata(_0x43ae72(0x111),void 0x0)],QueueProcessor[_0x43ae72(0x142)],_0x43ae72(0x136),null),__decorate([(0x0,bull_1[_0x43ae72(0x10f)])(),__metadata(_0x43ae72(0x124),Function),__metadata('design:paramtypes',[]),__metadata('design:returntype',void 0x0)],QueueProcessor[_0x43ae72(0x142)],_0x43ae72(0x119),null),__decorate([(0x0,bull_1[_0x43ae72(0x13c)])(),__metadata(_0x43ae72(0x124),Function),__metadata(_0x43ae72(0x132),[Array,String]),__metadata('design:returntype',void 0x0)],QueueProcessor['prototype'],_0x43ae72(0x141),null),__decorate([(0x0,bull_1[_0x43ae72(0x130)])(),__metadata(_0x43ae72(0x124),Function),__metadata(_0x43ae72(0x132),[]),__metadata('design:returntype',void 0x0)],QueueProcessor[_0x43ae72(0x142)],'onQueueDrained',null),QueueProcessor=QueueProcessor_1=__decorate([(0x0,bull_1[_0x43ae72(0x14a)])(_0x43ae72(0x12a)),__metadata('design:paramtypes',[midjourney_service_1[_0x43ae72(0x129)]])],QueueProcessor),exports[_0x43ae72(0x128)]=QueueProcessor;