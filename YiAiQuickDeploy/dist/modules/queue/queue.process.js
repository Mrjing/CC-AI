'use strict';var _0x2f9971=_0xe593;(function(_0x2f44c2,_0x4690a7){var _0x1775d9=_0xe593,_0x395660=_0x2f44c2();while(!![]){try{var _0x5ccb34=-parseInt(_0x1775d9(0x10b))/0x1*(-parseInt(_0x1775d9(0xe9))/0x2)+-parseInt(_0x1775d9(0xfa))/0x3*(-parseInt(_0x1775d9(0x110))/0x4)+-parseInt(_0x1775d9(0x11c))/0x5*(-parseInt(_0x1775d9(0x103))/0x6)+parseInt(_0x1775d9(0xe5))/0x7*(-parseInt(_0x1775d9(0xf3))/0x8)+-parseInt(_0x1775d9(0xec))/0x9+parseInt(_0x1775d9(0x121))/0xa+parseInt(_0x1775d9(0x118))/0xb*(-parseInt(_0x1775d9(0xe4))/0xc);if(_0x5ccb34===_0x4690a7)break;else _0x395660['push'](_0x395660['shift']());}catch(_0x598016){_0x395660['push'](_0x395660['shift']());}}}(_0x2b72,0x83d94));var __decorate=this&&this[_0x2f9971(0xe7)]||function(_0x531b5c,_0x39bf6e,_0x459a9a,_0x55bd8){var _0x17c3b8=_0x2f9971,_0x2adbb7=arguments[_0x17c3b8(0xef)],_0x1c7f73=_0x2adbb7<0x3?_0x39bf6e:_0x55bd8===null?_0x55bd8=Object[_0x17c3b8(0x106)](_0x39bf6e,_0x459a9a):_0x55bd8,_0x2e8e4d;if(typeof Reflect===_0x17c3b8(0x112)&&typeof Reflect[_0x17c3b8(0x11f)]===_0x17c3b8(0xf1))_0x1c7f73=Reflect[_0x17c3b8(0x11f)](_0x531b5c,_0x39bf6e,_0x459a9a,_0x55bd8);else{for(var _0x1d11b4=_0x531b5c[_0x17c3b8(0xef)]-0x1;_0x1d11b4>=0x0;_0x1d11b4--)if(_0x2e8e4d=_0x531b5c[_0x1d11b4])_0x1c7f73=(_0x2adbb7<0x3?_0x2e8e4d(_0x1c7f73):_0x2adbb7>0x3?_0x2e8e4d(_0x39bf6e,_0x459a9a,_0x1c7f73):_0x2e8e4d(_0x39bf6e,_0x459a9a))||_0x1c7f73;}return _0x2adbb7>0x3&&_0x1c7f73&&Object[_0x17c3b8(0x10e)](_0x39bf6e,_0x459a9a,_0x1c7f73),_0x1c7f73;},__metadata=this&&this[_0x2f9971(0x11b)]||function(_0x4a72d6,_0x5c204b){var _0x2b4165=_0x2f9971;if(typeof Reflect===_0x2b4165(0x112)&&typeof Reflect[_0x2b4165(0x11e)]===_0x2b4165(0xf1))return Reflect[_0x2b4165(0x11e)](_0x4a72d6,_0x5c204b);},QueueProcessor_1;Object[_0x2f9971(0x10e)](exports,'__esModule',{'value':!![]}),exports[_0x2f9971(0x105)]=void 0x0;function _0xe593(_0x4116b9,_0x215897){var _0x2b72fc=_0x2b72();return _0xe593=function(_0xe5938c,_0x507c62){_0xe5938c=_0xe5938c-0xe0;var _0x5e502f=_0x2b72fc[_0xe5938c];return _0x5e502f;},_0xe593(_0x4116b9,_0x215897);}const bull_1=require(_0x2f9971(0x113)),common_1=require(_0x2f9971(0x10c)),midjourney_service_1=require(_0x2f9971(0x11d));function _0x2b72(){var _0x2498e8=['队列暂停的时候调用','246EwWOSt','onQueueCleaned','log','1896408KrNkvV','CONCURRENCY','onQueueFailed','length','onQueueResumed','function','队列发生错误','8KocEWJ','onQueueError','design:returntype','message','design:paramtypes','midjourneyService','OnQueueCleaned','2550981cPVcNP','Queue\x20failed:\x20','mjDraw','OnQueuePaused','onQueueActive','OnQueueProgress','OnQueueResumed','env','prototype','12kSjwfH','MidjourneyService','QueueProcessor','getOwnPropertyDescriptor','Queue\x20cleaned:\x20','handleJob','onQueueCompleted','onQueuePaused','7527FgjzoM','@nestjs/common','draw','defineProperty','error','4MXugbi','\x20were\x20cleaned.','object','@nestjs/bull','OnQueueActive','队列恢复的时候调用','OnQueueFailed','MJDRAW','99qxumPV','\x20jobs\x20of\x20type\x20','design:type','__metadata','1178340BJGoLa','../midjourney/midjourney.service','metadata','decorate','队列任务的一个回调用于通知当前进度','575480yQoIxy','drawFailed','Logger','onQueueProgress','data','onQueueDrained','1486380PXQvhp','3076381IBQLdA','logger','__decorate'];_0x2b72=function(){return _0x2498e8;};return _0x2b72();}let QueueProcessor=QueueProcessor_1=class QueueProcessor{constructor(_0x32560d){var _0x44f8a5=_0x2f9971;this['midjourneyService']=_0x32560d,this[_0x44f8a5(0xe6)]=new common_1['Logger'](QueueProcessor_1['name']);}async['handleJob'](_0x5373c){var _0x3e3166=_0x2f9971;const _0x1c9eb8=await this[_0x3e3166(0xf8)][_0x3e3166(0x10d)](_0x5373c['data'],_0x5373c['id']);return _0x1c9eb8;}[_0x2f9971(0xfe)](_0x10d60e){}[_0x2f9971(0xf4)](_0x57bcfc){var _0x15e93c=_0x2f9971;console[_0x15e93c(0xeb)](_0x15e93c(0xf2),_0x57bcfc);}[_0x2f9971(0xe1)](_0x3d2d89,_0x4840ef){var _0x3ccbff=_0x2f9971;console[_0x3ccbff(0xeb)](_0x3ccbff(0x120),_0x3d2d89['id'],_0x4840ef);}[_0x2f9971(0x109)](_0x3ff70c,_0x487e38){}[_0x2f9971(0xee)](_0x1586ed,_0x54be83){var _0xc0f23e=_0x2f9971;common_1[_0xc0f23e(0xe0)][_0xc0f23e(0x10f)](_0xc0f23e(0xfb)+_0x54be83[_0xc0f23e(0xf6)]+':\x20绘画失败\x20'+_0x1586ed['id'],_0xc0f23e(0x105)),this[_0xc0f23e(0xf8)][_0xc0f23e(0x122)](_0x1586ed[_0xc0f23e(0xe2)]);}[_0x2f9971(0x10a)](){var _0x3e2094=_0x2f9971;console[_0x3e2094(0xeb)](_0x3e2094(0xe8));}[_0x2f9971(0xf0)](){var _0x156f98=_0x2f9971;console[_0x156f98(0xeb)](_0x156f98(0x115));}[_0x2f9971(0xea)](_0x2a07a2,_0x49738b){var _0x48248f=_0x2f9971;common_1[_0x48248f(0xe0)][_0x48248f(0xeb)](_0x48248f(0x107)+_0x2a07a2['length']+_0x48248f(0x119)+_0x49738b+_0x48248f(0x111),_0x48248f(0x105));}[_0x2f9971(0xe3)](){}};__decorate([(0x0,bull_1['Process'])({'name':_0x2f9971(0xfc),'concurrency':process[_0x2f9971(0x101)][_0x2f9971(0xed)]?+process[_0x2f9971(0x101)][_0x2f9971(0xed)]:0x3}),__metadata(_0x2f9971(0x11a),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x2f9971(0xf5),Promise)],QueueProcessor[_0x2f9971(0x102)],_0x2f9971(0x108),null),__decorate([(0x0,bull_1[_0x2f9971(0x114)])(),__metadata(_0x2f9971(0x11a),Function),__metadata(_0x2f9971(0xf7),[Object]),__metadata(_0x2f9971(0xf5),void 0x0)],QueueProcessor[_0x2f9971(0x102)],'onQueueActive',null),__decorate([(0x0,bull_1['OnQueueError'])(),__metadata('design:type',Function),__metadata('design:paramtypes',[Error]),__metadata(_0x2f9971(0xf5),void 0x0)],QueueProcessor['prototype'],_0x2f9971(0xf4),null),__decorate([(0x0,bull_1[_0x2f9971(0xff)])(),__metadata(_0x2f9971(0x11a),Function),__metadata(_0x2f9971(0xf7),[Object,Number]),__metadata(_0x2f9971(0xf5),void 0x0)],QueueProcessor[_0x2f9971(0x102)],_0x2f9971(0xe1),null),__decorate([(0x0,bull_1['OnQueueCompleted'])(),__metadata(_0x2f9971(0x11a),Function),__metadata(_0x2f9971(0xf7),[Object,Object]),__metadata(_0x2f9971(0xf5),void 0x0)],QueueProcessor[_0x2f9971(0x102)],_0x2f9971(0x109),null),__decorate([(0x0,bull_1[_0x2f9971(0x116)])(),__metadata('design:type',Function),__metadata(_0x2f9971(0xf7),[Object,Error]),__metadata(_0x2f9971(0xf5),void 0x0)],QueueProcessor[_0x2f9971(0x102)],_0x2f9971(0xee),null),__decorate([(0x0,bull_1[_0x2f9971(0xfd)])(),__metadata('design:type',Function),__metadata(_0x2f9971(0xf7),[]),__metadata('design:returntype',void 0x0)],QueueProcessor[_0x2f9971(0x102)],_0x2f9971(0x10a),null),__decorate([(0x0,bull_1[_0x2f9971(0x100)])(),__metadata(_0x2f9971(0x11a),Function),__metadata('design:paramtypes',[]),__metadata(_0x2f9971(0xf5),void 0x0)],QueueProcessor['prototype'],_0x2f9971(0xf0),null),__decorate([(0x0,bull_1[_0x2f9971(0xf9)])(),__metadata(_0x2f9971(0x11a),Function),__metadata(_0x2f9971(0xf7),[Array,String]),__metadata(_0x2f9971(0xf5),void 0x0)],QueueProcessor['prototype'],'onQueueCleaned',null),__decorate([(0x0,bull_1['OnQueueDrained'])(),__metadata(_0x2f9971(0x11a),Function),__metadata(_0x2f9971(0xf7),[]),__metadata('design:returntype',void 0x0)],QueueProcessor[_0x2f9971(0x102)],_0x2f9971(0xe3),null),QueueProcessor=QueueProcessor_1=__decorate([(0x0,bull_1['Processor'])(_0x2f9971(0x117)),__metadata(_0x2f9971(0xf7),[midjourney_service_1[_0x2f9971(0x104)]])],QueueProcessor),exports['QueueProcessor']=QueueProcessor;