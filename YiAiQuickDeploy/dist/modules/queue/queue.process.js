'use strict';var _0x128b49=_0x1c75;(function(_0x4297bb,_0xa56f24){var _0x5cf6e7=_0x1c75,_0x37b371=_0x4297bb();while(!![]){try{var _0x16c613=-parseInt(_0x5cf6e7(0x1f2))/0x1+-parseInt(_0x5cf6e7(0x1f4))/0x2*(parseInt(_0x5cf6e7(0x1b9))/0x3)+-parseInt(_0x5cf6e7(0x1ec))/0x4+parseInt(_0x5cf6e7(0x1e2))/0x5+-parseInt(_0x5cf6e7(0x1e9))/0x6*(parseInt(_0x5cf6e7(0x1bd))/0x7)+-parseInt(_0x5cf6e7(0x1da))/0x8*(parseInt(_0x5cf6e7(0x1e6))/0x9)+-parseInt(_0x5cf6e7(0x1be))/0xa*(-parseInt(_0x5cf6e7(0x1f3))/0xb);if(_0x16c613===_0xa56f24)break;else _0x37b371['push'](_0x37b371['shift']());}catch(_0x439de8){_0x37b371['push'](_0x37b371['shift']());}}}(_0xc1cc,0x321d6));var __decorate=this&&this['__decorate']||function(_0x5152b6,_0x285081,_0x4ebf93,_0x1cc135){var _0x1fafc8=_0x1c75,_0x4cb899=arguments[_0x1fafc8(0x1dc)],_0x22e572=_0x4cb899<0x3?_0x285081:_0x1cc135===null?_0x1cc135=Object[_0x1fafc8(0x1c1)](_0x285081,_0x4ebf93):_0x1cc135,_0xae549b;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x1fafc8(0x1de))_0x22e572=Reflect['decorate'](_0x5152b6,_0x285081,_0x4ebf93,_0x1cc135);else{for(var _0x4eae01=_0x5152b6[_0x1fafc8(0x1dc)]-0x1;_0x4eae01>=0x0;_0x4eae01--)if(_0xae549b=_0x5152b6[_0x4eae01])_0x22e572=(_0x4cb899<0x3?_0xae549b(_0x22e572):_0x4cb899>0x3?_0xae549b(_0x285081,_0x4ebf93,_0x22e572):_0xae549b(_0x285081,_0x4ebf93))||_0x22e572;}return _0x4cb899>0x3&&_0x22e572&&Object[_0x1fafc8(0x1e7)](_0x285081,_0x4ebf93,_0x22e572),_0x22e572;},__metadata=this&&this['__metadata']||function(_0x2a1083,_0x1833fc){var _0x15f1e5=_0x1c75;if(typeof Reflect===_0x15f1e5(0x1d9)&&typeof Reflect[_0x15f1e5(0x1c9)]===_0x15f1e5(0x1de))return Reflect[_0x15f1e5(0x1c9)](_0x2a1083,_0x1833fc);},QueueProcessor_1;function _0xc1cc(){var _0x5a4c52=['design:type','QueueProcessor','15379SpcCvh','430hdBbvK','onQueueActive','CONCURRENCY','getOwnPropertyDescriptor','design:paramtypes','\x20were\x20cleaned.','midjourneyService','Logger','onQueueCompleted','error','Queue\x20failed:\x20','metadata','onQueueProgress','message','OnQueueActive','队列任务的一个回调用于通知当前进度','队列发生错误','@nestjs/bull','\x20jobs\x20of\x20type\x20','handleJob','OnQueueCleaned','onQueueFailed','onQueuePaused','OnQueuePaused','onQueueDrained','OnQueueFailed','OnQueueDrained','object','8hLctfN','__esModule','length','onQueueCleaned','function','data','design:returntype','Process','1152890eMyLPz','log','onQueueResumed','name','880767gELogf','defineProperty','prototype','558YHAoSo','env','../midjourney/midjourney.service','761320SiRAYh','OnQueueCompleted','logger','Queue\x20cleaned:\x20','@nestjs/common','drawFailed','337093wEMGMf','286187lTyAmU','36992obxwgD','onQueueError','OnQueueResumed','MidjourneyService','51YRoUPn','Processor'];_0xc1cc=function(){return _0x5a4c52;};return _0xc1cc();}Object[_0x128b49(0x1e7)](exports,_0x128b49(0x1db),{'value':!![]}),exports[_0x128b49(0x1bc)]=void 0x0;const bull_1=require(_0x128b49(0x1cf)),common_1=require(_0x128b49(0x1f0)),midjourney_service_1=require(_0x128b49(0x1eb));let QueueProcessor=QueueProcessor_1=class QueueProcessor{constructor(_0x40b245){var _0x247a49=_0x128b49;this[_0x247a49(0x1c4)]=_0x40b245,this[_0x247a49(0x1ee)]=new common_1[(_0x247a49(0x1c5))](QueueProcessor_1[_0x247a49(0x1e5)]);}async[_0x128b49(0x1d1)](_0x443d1c){var _0x48c2d0=_0x128b49;const _0x27728a=await this['midjourneyService']['draw'](_0x443d1c[_0x48c2d0(0x1df)],_0x443d1c['id']);return _0x27728a;}[_0x128b49(0x1bf)](_0x58c119){}[_0x128b49(0x1f5)](_0x29a7cc){var _0x5b13e5=_0x128b49;console[_0x5b13e5(0x1e3)](_0x5b13e5(0x1ce),_0x29a7cc);}[_0x128b49(0x1ca)](_0x333e92,_0x510865){var _0x21f903=_0x128b49;console[_0x21f903(0x1e3)](_0x21f903(0x1cd),_0x333e92['id'],_0x510865);}['onQueueCompleted'](_0x3b5f1e,_0x3aac8a){}['onQueueFailed'](_0x587993,_0x401ef3){var _0x116919=_0x128b49;common_1[_0x116919(0x1c5)][_0x116919(0x1c7)](_0x116919(0x1c8)+_0x401ef3[_0x116919(0x1cb)]+':\x20绘画失败\x20'+_0x587993['id'],_0x116919(0x1bc)),this[_0x116919(0x1c4)][_0x116919(0x1f1)](_0x587993[_0x116919(0x1df)]);}[_0x128b49(0x1d4)](){console['log']('队列暂停的时候调用');}['onQueueResumed'](){var _0x158c33=_0x128b49;console[_0x158c33(0x1e3)]('队列恢复的时候调用');}[_0x128b49(0x1dd)](_0x407a86,_0x5390c4){var _0x3a6682=_0x128b49;common_1[_0x3a6682(0x1c5)][_0x3a6682(0x1e3)](_0x3a6682(0x1ef)+_0x407a86[_0x3a6682(0x1dc)]+_0x3a6682(0x1d0)+_0x5390c4+_0x3a6682(0x1c3),'QueueProcessor');}['onQueueDrained'](){}};function _0x1c75(_0x232c13,_0x50be4b){var _0xc1cc4a=_0xc1cc();return _0x1c75=function(_0x1c7594,_0x42b060){_0x1c7594=_0x1c7594-0x1b7;var _0x31ebf7=_0xc1cc4a[_0x1c7594];return _0x31ebf7;},_0x1c75(_0x232c13,_0x50be4b);}__decorate([(0x0,bull_1[_0x128b49(0x1e1)])({'name':'mjDraw','concurrency':process[_0x128b49(0x1ea)][_0x128b49(0x1c0)]?+process[_0x128b49(0x1ea)][_0x128b49(0x1c0)]:0x3}),__metadata(_0x128b49(0x1bb),Function),__metadata(_0x128b49(0x1c2),[Object]),__metadata('design:returntype',Promise)],QueueProcessor[_0x128b49(0x1e8)],_0x128b49(0x1d1),null),__decorate([(0x0,bull_1[_0x128b49(0x1cc)])(),__metadata(_0x128b49(0x1bb),Function),__metadata(_0x128b49(0x1c2),[Object]),__metadata(_0x128b49(0x1e0),void 0x0)],QueueProcessor[_0x128b49(0x1e8)],_0x128b49(0x1bf),null),__decorate([(0x0,bull_1['OnQueueError'])(),__metadata(_0x128b49(0x1bb),Function),__metadata(_0x128b49(0x1c2),[Error]),__metadata('design:returntype',void 0x0)],QueueProcessor[_0x128b49(0x1e8)],_0x128b49(0x1f5),null),__decorate([(0x0,bull_1['OnQueueProgress'])(),__metadata('design:type',Function),__metadata(_0x128b49(0x1c2),[Object,Number]),__metadata(_0x128b49(0x1e0),void 0x0)],QueueProcessor['prototype'],_0x128b49(0x1ca),null),__decorate([(0x0,bull_1[_0x128b49(0x1ed)])(),__metadata(_0x128b49(0x1bb),Function),__metadata(_0x128b49(0x1c2),[Object,Object]),__metadata(_0x128b49(0x1e0),void 0x0)],QueueProcessor[_0x128b49(0x1e8)],_0x128b49(0x1c6),null),__decorate([(0x0,bull_1[_0x128b49(0x1d7)])(),__metadata('design:type',Function),__metadata(_0x128b49(0x1c2),[Object,Error]),__metadata(_0x128b49(0x1e0),void 0x0)],QueueProcessor[_0x128b49(0x1e8)],_0x128b49(0x1d3),null),__decorate([(0x0,bull_1[_0x128b49(0x1d5)])(),__metadata(_0x128b49(0x1bb),Function),__metadata(_0x128b49(0x1c2),[]),__metadata(_0x128b49(0x1e0),void 0x0)],QueueProcessor[_0x128b49(0x1e8)],_0x128b49(0x1d4),null),__decorate([(0x0,bull_1[_0x128b49(0x1b7)])(),__metadata(_0x128b49(0x1bb),Function),__metadata('design:paramtypes',[]),__metadata(_0x128b49(0x1e0),void 0x0)],QueueProcessor[_0x128b49(0x1e8)],_0x128b49(0x1e4),null),__decorate([(0x0,bull_1[_0x128b49(0x1d2)])(),__metadata(_0x128b49(0x1bb),Function),__metadata(_0x128b49(0x1c2),[Array,String]),__metadata(_0x128b49(0x1e0),void 0x0)],QueueProcessor[_0x128b49(0x1e8)],_0x128b49(0x1dd),null),__decorate([(0x0,bull_1[_0x128b49(0x1d8)])(),__metadata(_0x128b49(0x1bb),Function),__metadata(_0x128b49(0x1c2),[]),__metadata(_0x128b49(0x1e0),void 0x0)],QueueProcessor[_0x128b49(0x1e8)],_0x128b49(0x1d6),null),QueueProcessor=QueueProcessor_1=__decorate([(0x0,bull_1[_0x128b49(0x1ba)])('MJDRAW'),__metadata('design:paramtypes',[midjourney_service_1[_0x128b49(0x1b8)]])],QueueProcessor),exports[_0x128b49(0x1bc)]=QueueProcessor;