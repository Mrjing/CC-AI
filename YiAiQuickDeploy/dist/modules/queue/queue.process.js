'use strict';function _0x3262(_0x37c07e,_0x3f3466){var _0x170c77=_0x170c();return _0x3262=function(_0x326282,_0x4dd94e){_0x326282=_0x326282-0x157;var _0x5aafbb=_0x170c77[_0x326282];return _0x5aafbb;},_0x3262(_0x37c07e,_0x3f3466);}var _0x453290=_0x3262;function _0x170c(){var _0x366133=['log','__esModule','OnQueueFailed','@nestjs/common','onQueueCleaned','Processor','onQueueResumed','队列暂停的时候调用','66RAUgMh','\x20were\x20cleaned.','OnQueueProgress','onQueueError','mjDraw','prototype','design:returntype','队列任务的一个回调用于通知当前进度','队列发生错误','Logger','1136154dfIWsZ','245ieQfol','727250EnOqQw','env','19978rwLNFB','49676HzgZOj','Process','@nestjs/bull','getOwnPropertyDescriptor','decorate','defineProperty','design:type','midjourneyService','__decorate','OnQueueError','handleJob','MJDRAW','function','onQueueProgress','QueueProcessor','OnQueueActive','26455776PksNsj','drawFailed','队列恢复的时候调用','OnQueueCompleted','1498514SDzfJl','Queue\x20cleaned:\x20','\x20jobs\x20of\x20type\x20','design:paramtypes','3ZpabhX','draw','metadata','error','data','257512iVbmcT','object','message','Queue\x20failed:\x20','onQueueFailed','OnQueueResumed','onQueueDrained','../midjourney/midjourney.service','294mdVsoB','onQueueCompleted','name','CONCURRENCY','486guYqfd'];_0x170c=function(){return _0x366133;};return _0x170c();}(function(_0x2b9d44,_0x1eea63){var _0x34c6d9=_0x3262,_0x4fc28a=_0x2b9d44();while(!![]){try{var _0x2961ca=-parseInt(_0x34c6d9(0x179))/0x1+-parseInt(_0x34c6d9(0x192))/0x2*(-parseInt(_0x34c6d9(0x196))/0x3)+parseInt(_0x34c6d9(0x17e))/0x4*(parseInt(_0x34c6d9(0x17a))/0x5)+-parseInt(_0x34c6d9(0x162))/0x6*(parseInt(_0x34c6d9(0x17d))/0x7)+parseInt(_0x34c6d9(0x15a))/0x8*(-parseInt(_0x34c6d9(0x166))/0x9)+parseInt(_0x34c6d9(0x17b))/0xa*(parseInt(_0x34c6d9(0x16f))/0xb)+parseInt(_0x34c6d9(0x18e))/0xc;if(_0x2961ca===_0x1eea63)break;else _0x4fc28a['push'](_0x4fc28a['shift']());}catch(_0x110e2e){_0x4fc28a['push'](_0x4fc28a['shift']());}}}(_0x170c,0xf0604));var __decorate=this&&this[_0x453290(0x186)]||function(_0x371270,_0x528159,_0x31257e,_0x1ee177){var _0x99633a=_0x453290,_0x355cf6=arguments['length'],_0x31a5a6=_0x355cf6<0x3?_0x528159:_0x1ee177===null?_0x1ee177=Object[_0x99633a(0x181)](_0x528159,_0x31257e):_0x1ee177,_0x425d16;if(typeof Reflect==='object'&&typeof Reflect[_0x99633a(0x182)]==='function')_0x31a5a6=Reflect[_0x99633a(0x182)](_0x371270,_0x528159,_0x31257e,_0x1ee177);else{for(var _0x1a50e3=_0x371270['length']-0x1;_0x1a50e3>=0x0;_0x1a50e3--)if(_0x425d16=_0x371270[_0x1a50e3])_0x31a5a6=(_0x355cf6<0x3?_0x425d16(_0x31a5a6):_0x355cf6>0x3?_0x425d16(_0x528159,_0x31257e,_0x31a5a6):_0x425d16(_0x528159,_0x31257e))||_0x31a5a6;}return _0x355cf6>0x3&&_0x31a5a6&&Object['defineProperty'](_0x528159,_0x31257e,_0x31a5a6),_0x31a5a6;},__metadata=this&&this['__metadata']||function(_0x49db04,_0x3e21e8){var _0x1cb7e4=_0x453290;if(typeof Reflect===_0x1cb7e4(0x15b)&&typeof Reflect[_0x1cb7e4(0x157)]===_0x1cb7e4(0x18a))return Reflect['metadata'](_0x49db04,_0x3e21e8);},QueueProcessor_1;Object[_0x453290(0x183)](exports,_0x453290(0x168),{'value':!![]}),exports['QueueProcessor']=void 0x0;const bull_1=require(_0x453290(0x180)),common_1=require(_0x453290(0x16a)),midjourney_service_1=require(_0x453290(0x161));let QueueProcessor=QueueProcessor_1=class QueueProcessor{constructor(_0x1a5423){var _0x25f380=_0x453290;this[_0x25f380(0x185)]=_0x1a5423,this['logger']=new common_1[(_0x25f380(0x178))](QueueProcessor_1[_0x25f380(0x164)]);}async['handleJob'](_0xc79212){var _0x585e02=_0x453290;const _0x267858=await this[_0x585e02(0x185)][_0x585e02(0x197)](_0xc79212['data'],_0xc79212['id']);return _0x267858;}['onQueueActive'](_0x6eef2){}['onQueueError'](_0x4af1f0){var _0x392f5c=_0x453290;console[_0x392f5c(0x167)](_0x392f5c(0x177),_0x4af1f0);}['onQueueProgress'](_0x5d349e,_0x18b2ad){var _0x3b9e88=_0x453290;console['log'](_0x3b9e88(0x176),_0x5d349e['id'],_0x18b2ad);}[_0x453290(0x163)](_0x28e042,_0x3dd067){}[_0x453290(0x15e)](_0x28a771,_0x3306c7){var _0x56ea1e=_0x453290;common_1[_0x56ea1e(0x178)][_0x56ea1e(0x158)](_0x56ea1e(0x15d)+_0x3306c7[_0x56ea1e(0x15c)]+':\x20绘画失败\x20'+_0x28a771['id'],'QueueProcessor'),this[_0x56ea1e(0x185)][_0x56ea1e(0x18f)](_0x28a771[_0x56ea1e(0x159)]);}['onQueuePaused'](){var _0x8c591b=_0x453290;console[_0x8c591b(0x167)](_0x8c591b(0x16e));}['onQueueResumed'](){var _0x269d0f=_0x453290;console[_0x269d0f(0x167)](_0x269d0f(0x190));}[_0x453290(0x16b)](_0x25dcb9,_0x8cddc5){var _0x2bc4e3=_0x453290;common_1[_0x2bc4e3(0x178)][_0x2bc4e3(0x167)](_0x2bc4e3(0x193)+_0x25dcb9['length']+_0x2bc4e3(0x194)+_0x8cddc5+_0x2bc4e3(0x170),_0x2bc4e3(0x18c));}[_0x453290(0x160)](){}};__decorate([(0x0,bull_1[_0x453290(0x17f)])({'name':_0x453290(0x173),'concurrency':process[_0x453290(0x17c)][_0x453290(0x165)]?+process[_0x453290(0x17c)][_0x453290(0x165)]:0x3}),__metadata(_0x453290(0x184),Function),__metadata(_0x453290(0x195),[Object]),__metadata('design:returntype',Promise)],QueueProcessor[_0x453290(0x174)],_0x453290(0x188),null),__decorate([(0x0,bull_1[_0x453290(0x18d)])(),__metadata(_0x453290(0x184),Function),__metadata(_0x453290(0x195),[Object]),__metadata(_0x453290(0x175),void 0x0)],QueueProcessor['prototype'],'onQueueActive',null),__decorate([(0x0,bull_1[_0x453290(0x187)])(),__metadata(_0x453290(0x184),Function),__metadata(_0x453290(0x195),[Error]),__metadata(_0x453290(0x175),void 0x0)],QueueProcessor[_0x453290(0x174)],_0x453290(0x172),null),__decorate([(0x0,bull_1[_0x453290(0x171)])(),__metadata(_0x453290(0x184),Function),__metadata(_0x453290(0x195),[Object,Number]),__metadata(_0x453290(0x175),void 0x0)],QueueProcessor[_0x453290(0x174)],_0x453290(0x18b),null),__decorate([(0x0,bull_1[_0x453290(0x191)])(),__metadata('design:type',Function),__metadata(_0x453290(0x195),[Object,Object]),__metadata('design:returntype',void 0x0)],QueueProcessor['prototype'],'onQueueCompleted',null),__decorate([(0x0,bull_1[_0x453290(0x169)])(),__metadata(_0x453290(0x184),Function),__metadata(_0x453290(0x195),[Object,Error]),__metadata(_0x453290(0x175),void 0x0)],QueueProcessor[_0x453290(0x174)],_0x453290(0x15e),null),__decorate([(0x0,bull_1['OnQueuePaused'])(),__metadata(_0x453290(0x184),Function),__metadata(_0x453290(0x195),[]),__metadata(_0x453290(0x175),void 0x0)],QueueProcessor[_0x453290(0x174)],'onQueuePaused',null),__decorate([(0x0,bull_1[_0x453290(0x15f)])(),__metadata(_0x453290(0x184),Function),__metadata(_0x453290(0x195),[]),__metadata(_0x453290(0x175),void 0x0)],QueueProcessor[_0x453290(0x174)],_0x453290(0x16d),null),__decorate([(0x0,bull_1['OnQueueCleaned'])(),__metadata(_0x453290(0x184),Function),__metadata(_0x453290(0x195),[Array,String]),__metadata('design:returntype',void 0x0)],QueueProcessor['prototype'],_0x453290(0x16b),null),__decorate([(0x0,bull_1['OnQueueDrained'])(),__metadata(_0x453290(0x184),Function),__metadata('design:paramtypes',[]),__metadata(_0x453290(0x175),void 0x0)],QueueProcessor['prototype'],_0x453290(0x160),null),QueueProcessor=QueueProcessor_1=__decorate([(0x0,bull_1[_0x453290(0x16c)])(_0x453290(0x189)),__metadata('design:paramtypes',[midjourney_service_1['MidjourneyService']])],QueueProcessor),exports['QueueProcessor']=QueueProcessor;