'use strict';const _0x258da2=_0x1a40;(function(_0x57b7f4,_0x34e539){const _0x2df227=_0x1a40,_0x1038a5=_0x57b7f4();while(!![]){try{const _0x2b8210=parseInt(_0x2df227(0x1c1))/0x1*(-parseInt(_0x2df227(0x1f6))/0x2)+parseInt(_0x2df227(0x1bd))/0x3+-parseInt(_0x2df227(0x1f7))/0x4+parseInt(_0x2df227(0x1bc))/0x5+parseInt(_0x2df227(0x1ea))/0x6+parseInt(_0x2df227(0x1e9))/0x7*(parseInt(_0x2df227(0x208))/0x8)+-parseInt(_0x2df227(0x1ee))/0x9;if(_0x2b8210===_0x34e539)break;else _0x1038a5['push'](_0x1038a5['shift']());}catch(_0x45f5ff){_0x1038a5['push'](_0x1038a5['shift']());}}}(_0x4290,0x4be52));function _0x1a40(_0xa029d6,_0x5d6177){const _0x42905b=_0x4290();return _0x1a40=function(_0x1a4006,_0x2d309f){_0x1a4006=_0x1a4006-0x1b9;let _0x4a8a10=_0x42905b[_0x1a4006];return _0x4a8a10;},_0x1a40(_0xa029d6,_0x5d6177);}var __decorate=this&&this['__decorate']||function(_0x30c360,_0x3b16aa,_0x4a3d27,_0xd5f6ac){const _0x130a80=_0x1a40;var _0x306f41=arguments[_0x130a80(0x1f1)],_0x1284e3=_0x306f41<0x3?_0x3b16aa:_0xd5f6ac===null?_0xd5f6ac=Object[_0x130a80(0x20d)](_0x3b16aa,_0x4a3d27):_0xd5f6ac,_0x50d547;if(typeof Reflect===_0x130a80(0x1c9)&&typeof Reflect['decorate']===_0x130a80(0x1e7))_0x1284e3=Reflect[_0x130a80(0x207)](_0x30c360,_0x3b16aa,_0x4a3d27,_0xd5f6ac);else{for(var _0xb8b302=_0x30c360[_0x130a80(0x1f1)]-0x1;_0xb8b302>=0x0;_0xb8b302--)if(_0x50d547=_0x30c360[_0xb8b302])_0x1284e3=(_0x306f41<0x3?_0x50d547(_0x1284e3):_0x306f41>0x3?_0x50d547(_0x3b16aa,_0x4a3d27,_0x1284e3):_0x50d547(_0x3b16aa,_0x4a3d27))||_0x1284e3;}return _0x306f41>0x3&&_0x1284e3&&Object['defineProperty'](_0x3b16aa,_0x4a3d27,_0x1284e3),_0x1284e3;},__metadata=this&&this[_0x258da2(0x1f0)]||function(_0x4587c3,_0x5afedc){const _0x57862f=_0x258da2;if(typeof Reflect===_0x57862f(0x1c9)&&typeof Reflect['metadata']===_0x57862f(0x1e7))return Reflect[_0x57862f(0x1fb)](_0x4587c3,_0x5afedc);},__param=this&&this['__param']||function(_0x7957e6,_0x318fc8){return function(_0x262ecf,_0x552f25){_0x318fc8(_0x262ecf,_0x552f25,_0x7957e6);};};Object['defineProperty'](exports,_0x258da2(0x1d7),{'value':!![]}),exports['OfficialController']=void 0x0;function _0x4290(){const _0x191055=['72554fdXVXQ','1353436TpmQoY','genXmlMsgByConfig','url','获取登录跳转地址','metadata','design:paramtypes','loginBySceneStr','officialService','content','获取绑定二维码的sceneStr','design:returntype','ApiOperation','verify','nonce','CLICK','JwtAuthGuard','decorate','15472XkpGah','subscribe','prototype','success','design:type','getOwnPropertyDescriptor','getQRSceneStrByBind','sceneStr:\x20','公众号静默登录','./official.service','status','get\x20通知>>>','ApiTags','OfficialController','./dto/getQrSceneStr.dto','SCAN','Post','officialSubscribeText','2721870TngVuz','1406715uyiqGU','timestamp','Get','sceneStr','11ejIVPp','./dto/getQrCode.dto','qrscene_','code','Req','loginByCode','getQRSceneStr','GetQrCodeDto','object','eventkey','officialScanLoginText','公众号通知接口GET','event','扫码绑定轮询查询','official','officialBindAccountText','getJsapiTicket','获取注册配置','GetQrSceneStrDto','scanBindWx','../../common/auth/jwtAuth.guard','UseGuards','__esModule','getQRCode','bindWxBySceneStr','notify','includes','log','getRedirectUrl','公众号通知接口POST','fromusername','signature','text','Res','TRUE','msgtype','Query','unsubscribe','function','split','1589VJqfLk','2063202XRcBQf','Controller','https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=','扫码登录轮询查询','6731028keSrGG','scan','__metadata','length','@nestjs/swagger','Body','send','notifyPost'];_0x4290=function(){return _0x191055;};return _0x4290();}const common_1=require('@nestjs/common'),swagger_1=require(_0x258da2(0x1f2)),jwtAuth_guard_1=require(_0x258da2(0x1d5)),official_service_1=require(_0x258da2(0x211)),getQrCode_dto_1=require(_0x258da2(0x1c2)),getQrSceneStr_dto_1=require(_0x258da2(0x216));let OfficialController=class OfficialController{constructor(_0x11d219){const _0x2420a0=_0x258da2;this[_0x2420a0(0x1fe)]=_0x11d219;}async[_0x258da2(0x1da)](_0xe5d9ed,_0x2b390d,_0x34e78f){const _0x5a6b82=_0x258da2;console['log'](_0x5a6b82(0x213),_0x2b390d,_0x34e78f);const _0x2e1dff=await this['officialService'][_0x5a6b82(0x203)](_0x2b390d[_0x5a6b82(0x1e0)],_0x2b390d[_0x5a6b82(0x204)],_0x2b390d[_0x5a6b82(0x1be)]);return _0x2e1dff?_0x2b390d['echostr']:'';}async[_0x258da2(0x1f5)](_0x58d274,_0x23ed7b,_0x532e8f,_0x472395){const _0x355d99=_0x258da2,{xml:_0x2bfa9b}=_0x532e8f;console[_0x355d99(0x1dc)]('xml:\x20',_0x2bfa9b);if(_0x2bfa9b[_0x355d99(0x1e4)][0x0]=='event'){if(_0x2bfa9b[_0x355d99(0x1cd)][0x0]=='VIEW'||_0x2bfa9b[_0x355d99(0x1cd)][0x0]==_0x355d99(0x205))return _0x472395['status'](0xc8)['send']('');if(_0x2bfa9b[_0x355d99(0x1cd)][0x0]==_0x355d99(0x1b9)){console[_0x355d99(0x1dc)]('扫码');const _0x226b69=_0x2bfa9b[_0x355d99(0x1ca)][0x0];if(_0x226b69[_0x355d99(0x1db)]('/')){this['officialService']['scanBindWx'](_0x2bfa9b[_0x355d99(0x1df)][0x0],_0x226b69);const _0x199823=await this['officialService'][_0x355d99(0x1f8)](_0x2bfa9b,_0x355d99(0x1d0));return _0x472395[_0x355d99(0x212)](0xc8)[_0x355d99(0x1f4)](_0x199823);}this[_0x355d99(0x1fe)][_0x355d99(0x1ef)](_0x2bfa9b[_0x355d99(0x1df)][0x0],_0x226b69);const _0x4b59a6=await this[_0x355d99(0x1fe)]['genXmlMsgByConfig'](_0x2bfa9b,_0x355d99(0x1cb));return _0x472395[_0x355d99(0x212)](0xc8)[_0x355d99(0x1f4)](_0x4b59a6);}if(_0x2bfa9b['event'][0x0]==_0x355d99(0x209)){console['log']('订阅',_0x2bfa9b[_0x355d99(0x1ca)][0x0]);const _0x5c4e25=_0x2bfa9b[_0x355d99(0x1ca)][0x0][_0x355d99(0x1e8)](_0x355d99(0x1c3))[0x1];console[_0x355d99(0x1dc)](_0x355d99(0x20f),_0x5c4e25);if(!_0x5c4e25){const _0x1a99c6=await this['officialService'][_0x355d99(0x1f8)](_0x2bfa9b,_0x355d99(0x1bb));return _0x472395[_0x355d99(0x212)](0xc8)['send'](_0x1a99c6);}if(_0x5c4e25[_0x355d99(0x1db)]('/')){this[_0x355d99(0x1fe)][_0x355d99(0x1d4)](_0x2bfa9b[_0x355d99(0x1df)][0x0],_0x5c4e25);const _0x72f211=await this[_0x355d99(0x1fe)][_0x355d99(0x1f8)](_0x2bfa9b,_0x355d99(0x1d0));return _0x472395['status'](0xc8)[_0x355d99(0x1f4)](_0x72f211);}this['officialService'][_0x355d99(0x1ef)](_0x2bfa9b[_0x355d99(0x1df)][0x0],_0x5c4e25);const _0x5d17d7=await this[_0x355d99(0x1fe)]['genXmlMsgByConfig'](_0x2bfa9b,_0x355d99(0x1bb));return _0x472395[_0x355d99(0x212)](0xc8)[_0x355d99(0x1f4)](_0x5d17d7);}if(_0x2bfa9b[_0x355d99(0x1cd)][0x0]==_0x355d99(0x1e6))return _0x472395[_0x355d99(0x212)](0xc8)[_0x355d99(0x1f4)]('');}if(_0x2bfa9b[_0x355d99(0x1e4)][0x0]==_0x355d99(0x1e1)){const _0x4df343=await this[_0x355d99(0x1fe)]['aotoPlay'](_0x2bfa9b[_0x355d99(0x1ff)][0x0]),_0x4aea7b=await this[_0x355d99(0x1fe)]['genXmlMsg'](_0x2bfa9b,_0x4df343);return _0x472395[_0x355d99(0x212)](0xc8)[_0x355d99(0x1f4)](_0x4aea7b);}return _0x355d99(0x20b);}async[_0x258da2(0x1c7)](_0x220762){const _0x5a9cd5=_0x258da2;return this[_0x5a9cd5(0x1fe)][_0x5a9cd5(0x1c7)](_0x220762);}async[_0x258da2(0x20e)](_0x2528ee){const _0x460dc4=_0x258da2;return this['officialService'][_0x460dc4(0x20e)](_0x2528ee);}async[_0x258da2(0x1d8)](_0x4e762b){const _0x5e8224=_0x258da2;if(process['env']['ISDEV']===_0x5e8224(0x1e3))return'';const _0x34d678=await this[_0x5e8224(0x1fe)]['getQRCodeTicket'](_0x4e762b[_0x5e8224(0x1c0)]);return _0x5e8224(0x1ec)+encodeURIComponent(_0x34d678);}async[_0x258da2(0x1fd)](_0x229c0a,_0x2dacdd){const _0x279c11=_0x258da2;return this['officialService']['loginBySceneStr'](_0x229c0a,_0x2dacdd[_0x279c11(0x1c0)]);}async[_0x258da2(0x1d9)](_0x457b7c,_0x1ea432){const _0x1c9cf9=_0x258da2;return this[_0x1c9cf9(0x1fe)][_0x1c9cf9(0x1d9)](_0x457b7c,_0x1ea432[_0x1c9cf9(0x1c0)]);}async[_0x258da2(0x1dd)](_0x3e590b){const _0x50c066=_0x258da2;return this[_0x50c066(0x1fe)]['getRedirectUrl'](_0x3e590b[_0x50c066(0x1f9)]);}async[_0x258da2(0x1d1)](_0x3adb45){const _0x28829b=_0x258da2;return this[_0x28829b(0x1fe)][_0x28829b(0x1d1)](_0x3adb45[_0x28829b(0x1f9)]);}async[_0x258da2(0x1c6)](_0x5c20ec,_0x171291){const _0x51546d=_0x258da2;return this[_0x51546d(0x1fe)]['loginByCode'](_0x5c20ec,_0x171291[_0x51546d(0x1c4)]);}};__decorate([(0x0,common_1[_0x258da2(0x1bf)])(_0x258da2(0x1da)),(0x0,swagger_1[_0x258da2(0x202)])({'summary':_0x258da2(0x1cc)}),__param(0x0,(0x0,common_1[_0x258da2(0x1c5)])()),__param(0x1,(0x0,common_1[_0x258da2(0x1e5)])()),__param(0x2,(0x0,common_1[_0x258da2(0x1f3)])()),__metadata(_0x258da2(0x20c),Function),__metadata(_0x258da2(0x1fc),[Object,Object,Object]),__metadata(_0x258da2(0x201),Promise)],OfficialController[_0x258da2(0x20a)],_0x258da2(0x1da),null),__decorate([(0x0,common_1['Post'])('notify'),(0x0,swagger_1['ApiOperation'])({'summary':_0x258da2(0x1de)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x258da2(0x1e5)])()),__param(0x2,(0x0,common_1['Body'])()),__param(0x3,(0x0,common_1[_0x258da2(0x1e2)])()),__metadata(_0x258da2(0x20c),Function),__metadata('design:paramtypes',[Object,Object,Object,Object]),__metadata('design:returntype',Promise)],OfficialController[_0x258da2(0x20a)],'notifyPost',null),__decorate([(0x0,common_1[_0x258da2(0x1ba)])(_0x258da2(0x1c7)),(0x0,swagger_1[_0x258da2(0x202)])({'summary':'获取登录二维码sceneStr'}),__param(0x0,(0x0,common_1[_0x258da2(0x1f3)])()),__metadata(_0x258da2(0x20c),Function),__metadata('design:paramtypes',[getQrSceneStr_dto_1[_0x258da2(0x1d3)]]),__metadata(_0x258da2(0x201),Promise)],OfficialController[_0x258da2(0x20a)],_0x258da2(0x1c7),null),__decorate([(0x0,common_1[_0x258da2(0x1ba)])(_0x258da2(0x20e)),(0x0,swagger_1[_0x258da2(0x202)])({'summary':_0x258da2(0x200)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x258da2(0x206)]),__param(0x0,(0x0,common_1[_0x258da2(0x1c5)])()),__metadata(_0x258da2(0x20c),Function),__metadata(_0x258da2(0x1fc),[Object]),__metadata(_0x258da2(0x201),Promise)],OfficialController[_0x258da2(0x20a)],_0x258da2(0x20e),null),__decorate([(0x0,common_1[_0x258da2(0x1bf)])(_0x258da2(0x1d8)),(0x0,swagger_1[_0x258da2(0x202)])({'summary':'获取二维码'}),__param(0x0,(0x0,common_1['Query'])()),__metadata(_0x258da2(0x20c),Function),__metadata(_0x258da2(0x1fc),[getQrCode_dto_1[_0x258da2(0x1c8)]]),__metadata(_0x258da2(0x201),Promise)],OfficialController[_0x258da2(0x20a)],_0x258da2(0x1d8),null),__decorate([(0x0,common_1[_0x258da2(0x1ba)])(_0x258da2(0x1fd)),(0x0,swagger_1['ApiOperation'])({'summary':_0x258da2(0x1ed)}),__param(0x0,(0x0,common_1[_0x258da2(0x1c5)])()),__param(0x1,(0x0,common_1[_0x258da2(0x1f3)])()),__metadata(_0x258da2(0x20c),Function),__metadata('design:paramtypes',[Object,getQrCode_dto_1['GetQrCodeDto']]),__metadata(_0x258da2(0x201),Promise)],OfficialController[_0x258da2(0x20a)],_0x258da2(0x1fd),null),__decorate([(0x0,common_1[_0x258da2(0x1ba)])('bindWxBySceneStr'),(0x0,swagger_1[_0x258da2(0x202)])({'summary':_0x258da2(0x1ce)}),(0x0,common_1[_0x258da2(0x1d6)])(jwtAuth_guard_1[_0x258da2(0x206)]),__param(0x0,(0x0,common_1[_0x258da2(0x1c5)])()),__param(0x1,(0x0,common_1['Body'])()),__metadata('design:type',Function),__metadata(_0x258da2(0x1fc),[Object,getQrCode_dto_1[_0x258da2(0x1c8)]]),__metadata(_0x258da2(0x201),Promise)],OfficialController[_0x258da2(0x20a)],_0x258da2(0x1d9),null),__decorate([(0x0,common_1[_0x258da2(0x1ba)])(_0x258da2(0x1dd)),(0x0,swagger_1[_0x258da2(0x202)])({'summary':_0x258da2(0x1fa)}),__param(0x0,(0x0,common_1['Body'])()),__metadata('design:type',Function),__metadata(_0x258da2(0x1fc),[Object]),__metadata('design:returntype',Promise)],OfficialController[_0x258da2(0x20a)],_0x258da2(0x1dd),null),__decorate([(0x0,common_1['Post'])(_0x258da2(0x1d1)),(0x0,swagger_1[_0x258da2(0x202)])({'summary':_0x258da2(0x1d2)}),__param(0x0,(0x0,common_1[_0x258da2(0x1f3)])()),__metadata('design:type',Function),__metadata(_0x258da2(0x1fc),[Object]),__metadata(_0x258da2(0x201),Promise)],OfficialController['prototype'],_0x258da2(0x1d1),null),__decorate([(0x0,common_1[_0x258da2(0x1ba)])(_0x258da2(0x1c6)),(0x0,swagger_1[_0x258da2(0x202)])({'summary':_0x258da2(0x210)}),__param(0x0,(0x0,common_1[_0x258da2(0x1c5)])()),__param(0x1,(0x0,common_1['Body'])()),__metadata(_0x258da2(0x20c),Function),__metadata(_0x258da2(0x1fc),[Object,Object]),__metadata(_0x258da2(0x201),Promise)],OfficialController['prototype'],_0x258da2(0x1c6),null),OfficialController=__decorate([(0x0,swagger_1[_0x258da2(0x214)])(_0x258da2(0x1cf)),(0x0,common_1[_0x258da2(0x1eb)])(_0x258da2(0x1cf)),__metadata(_0x258da2(0x1fc),[official_service_1['OfficialService']])],OfficialController),exports[_0x258da2(0x215)]=OfficialController;