'use strict';const _0x53af05=_0x46b0;(function(_0x137a62,_0x566a83){const _0x565f19=_0x46b0,_0x4a2eba=_0x137a62();while(!![]){try{const _0x10daa5=-parseInt(_0x565f19(0x147))/0x1*(parseInt(_0x565f19(0x12f))/0x2)+parseInt(_0x565f19(0x179))/0x3+parseInt(_0x565f19(0x13d))/0x4*(-parseInt(_0x565f19(0x13c))/0x5)+parseInt(_0x565f19(0x13e))/0x6*(-parseInt(_0x565f19(0x14d))/0x7)+parseInt(_0x565f19(0x15f))/0x8+parseInt(_0x565f19(0x12c))/0x9*(-parseInt(_0x565f19(0x146))/0xa)+parseInt(_0x565f19(0x17f))/0xb;if(_0x10daa5===_0x566a83)break;else _0x4a2eba['push'](_0x4a2eba['shift']());}catch(_0x16c1e9){_0x4a2eba['push'](_0x4a2eba['shift']());}}}(_0x211b,0x2eb49));var __decorate=this&&this[_0x53af05(0x151)]||function(_0x5e2f0c,_0x46db10,_0x3d7342,_0x4c59b2){const _0x16ca2a=_0x53af05;var _0x32c3ca=arguments[_0x16ca2a(0x158)],_0x3b6fc7=_0x32c3ca<0x3?_0x46db10:_0x4c59b2===null?_0x4c59b2=Object[_0x16ca2a(0x165)](_0x46db10,_0x3d7342):_0x4c59b2,_0x4d0b88;if(typeof Reflect==='object'&&typeof Reflect[_0x16ca2a(0x155)]===_0x16ca2a(0x142))_0x3b6fc7=Reflect[_0x16ca2a(0x155)](_0x5e2f0c,_0x46db10,_0x3d7342,_0x4c59b2);else{for(var _0x120cd2=_0x5e2f0c[_0x16ca2a(0x158)]-0x1;_0x120cd2>=0x0;_0x120cd2--)if(_0x4d0b88=_0x5e2f0c[_0x120cd2])_0x3b6fc7=(_0x32c3ca<0x3?_0x4d0b88(_0x3b6fc7):_0x32c3ca>0x3?_0x4d0b88(_0x46db10,_0x3d7342,_0x3b6fc7):_0x4d0b88(_0x46db10,_0x3d7342))||_0x3b6fc7;}return _0x32c3ca>0x3&&_0x3b6fc7&&Object[_0x16ca2a(0x169)](_0x46db10,_0x3d7342,_0x3b6fc7),_0x3b6fc7;},__metadata=this&&this['__metadata']||function(_0x5b63b5,_0x57c41f){const _0x531e2f=_0x53af05;if(typeof Reflect==='object'&&typeof Reflect[_0x531e2f(0x189)]===_0x531e2f(0x142))return Reflect[_0x531e2f(0x189)](_0x5b63b5,_0x57c41f);},__param=this&&this[_0x53af05(0x156)]||function(_0xb1be8e,_0x93119f){return function(_0x30ed1e,_0x41207f){_0x93119f(_0x30ed1e,_0x41207f,_0xb1be8e);};};Object['defineProperty'](exports,_0x53af05(0x162),{'value':!![]}),exports['OfficialController']=void 0x0;const common_1=require(_0x53af05(0x16a)),swagger_1=require(_0x53af05(0x188)),jwtAuth_guard_1=require(_0x53af05(0x18b)),official_service_1=require(_0x53af05(0x166)),getQrCode_dto_1=require(_0x53af05(0x141)),getQrSceneStr_dto_1=require(_0x53af05(0x160));function _0x46b0(_0x560342,_0xee12c0){const _0x211bb3=_0x211b();return _0x46b0=function(_0x46b05b,_0x4d79d5){_0x46b05b=_0x46b05b-0x12c;let _0x2a08e3=_0x211bb3[_0x46b05b];return _0x2a08e3;},_0x46b0(_0x560342,_0xee12c0);}let OfficialController=class OfficialController{constructor(_0x3ceb71){const _0xdf205d=_0x53af05;this[_0xdf205d(0x172)]=_0x3ceb71;}async[_0x53af05(0x14b)](_0x13a8d8,_0xd37d7d,_0x4440ba){const _0x15b595=_0x53af05;console[_0x15b595(0x15d)](_0x15b595(0x145),_0xd37d7d,_0x4440ba);const _0x114361=await this[_0x15b595(0x172)][_0x15b595(0x13a)](_0xd37d7d[_0x15b595(0x138)],_0xd37d7d[_0x15b595(0x187)],_0xd37d7d[_0x15b595(0x12e)]);return _0x114361?_0xd37d7d[_0x15b595(0x15c)]:'';}async['notifyPost'](_0xa9642c,_0xc38004,_0x4221ec,_0x442b5b){const _0x2285a5=_0x53af05,{xml:_0x1f7066}=_0x4221ec;console[_0x2285a5(0x15d)](_0x2285a5(0x131),_0x1f7066);if(_0x1f7066['msgtype'][0x0]==_0x2285a5(0x174)){if(_0x1f7066['event'][0x0]==_0x2285a5(0x154)||_0x1f7066[_0x2285a5(0x174)][0x0]==_0x2285a5(0x186))return _0x442b5b[_0x2285a5(0x15a)](0xc8)[_0x2285a5(0x173)]('');if(_0x1f7066[_0x2285a5(0x174)][0x0]==_0x2285a5(0x14c)){console[_0x2285a5(0x15d)]('扫码');const _0x4a232f=_0x1f7066[_0x2285a5(0x130)][0x0];if(_0x4a232f[_0x2285a5(0x176)]('/')){this['officialService'][_0x2285a5(0x15e)](_0x1f7066[_0x2285a5(0x175)][0x0],_0x4a232f);const _0x304ca4=await this[_0x2285a5(0x172)][_0x2285a5(0x134)](_0x1f7066,'officialBindAccountText');return _0x442b5b['status'](0xc8)[_0x2285a5(0x173)](_0x304ca4);}this['officialService'][_0x2285a5(0x17d)](_0x1f7066['fromusername'][0x0],_0x4a232f);const _0x4dec19=await this[_0x2285a5(0x172)][_0x2285a5(0x134)](_0x1f7066,_0x2285a5(0x181));return _0x442b5b[_0x2285a5(0x15a)](0xc8)[_0x2285a5(0x173)](_0x4dec19);}if(_0x1f7066[_0x2285a5(0x174)][0x0]==_0x2285a5(0x153)){console[_0x2285a5(0x15d)]('订阅',_0x1f7066[_0x2285a5(0x130)][0x0]);const _0x4e974e=_0x1f7066[_0x2285a5(0x130)][0x0]['split'](_0x2285a5(0x16b))[0x1];console[_0x2285a5(0x15d)](_0x2285a5(0x18a),_0x4e974e);if(!_0x4e974e){const _0x3295e9=await this['officialService']['genXmlMsgByConfig'](_0x1f7066,_0x2285a5(0x17b));return _0x442b5b[_0x2285a5(0x15a)](0xc8)[_0x2285a5(0x173)](_0x3295e9);}if(_0x4e974e[_0x2285a5(0x176)]('/')){this[_0x2285a5(0x172)][_0x2285a5(0x15e)](_0x1f7066[_0x2285a5(0x175)][0x0],_0x4e974e);const _0x38cef8=await this[_0x2285a5(0x172)][_0x2285a5(0x134)](_0x1f7066,_0x2285a5(0x140));return _0x442b5b[_0x2285a5(0x15a)](0xc8)[_0x2285a5(0x173)](_0x38cef8);}this[_0x2285a5(0x172)]['scan'](_0x1f7066[_0x2285a5(0x175)][0x0],_0x4e974e);const _0xa42acf=await this[_0x2285a5(0x172)]['genXmlMsgByConfig'](_0x1f7066,'officialSubscribeText');return _0x442b5b[_0x2285a5(0x15a)](0xc8)[_0x2285a5(0x173)](_0xa42acf);}if(_0x1f7066['event'][0x0]==_0x2285a5(0x185))return _0x442b5b[_0x2285a5(0x15a)](0xc8)[_0x2285a5(0x173)]('');}if(_0x1f7066[_0x2285a5(0x16f)][0x0]=='text'){const _0x36e2a8=await this[_0x2285a5(0x172)]['aotoPlay'](_0x1f7066[_0x2285a5(0x149)][0x0]),_0x2046c6=await this['officialService']['genXmlMsg'](_0x1f7066,_0x36e2a8);return _0x442b5b[_0x2285a5(0x15a)](0xc8)[_0x2285a5(0x173)](_0x2046c6);}return _0x2285a5(0x143);}async[_0x53af05(0x163)](_0x15d0b4){const _0x525118=_0x53af05;return this[_0x525118(0x172)][_0x525118(0x163)](_0x15d0b4);}async['getQRSceneStrByBind'](_0xc8898b){return this['officialService']['getQRSceneStrByBind'](_0xc8898b);}async['getQRCode'](_0x5d5604){const _0x47a924=_0x53af05;if(process[_0x47a924(0x148)][_0x47a924(0x17c)]==='TRUE')return'';const _0x450c7c=await this[_0x47a924(0x172)][_0x47a924(0x183)](_0x5d5604['sceneStr']);return'https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket='+encodeURIComponent(_0x450c7c);}async[_0x53af05(0x133)](_0x5112a5,_0x54dde3){const _0x50be52=_0x53af05;return this[_0x50be52(0x172)][_0x50be52(0x133)](_0x5112a5,_0x54dde3['sceneStr']);}async['bindWxBySceneStr'](_0x457b92,_0x47ddbb){const _0x111630=_0x53af05;return this[_0x111630(0x172)][_0x111630(0x182)](_0x457b92,_0x47ddbb[_0x111630(0x18c)]);}async[_0x53af05(0x16d)](_0x5ae674){const _0x155f86=_0x53af05;return this['officialService'][_0x155f86(0x16d)](_0x5ae674[_0x155f86(0x14a)]);}async[_0x53af05(0x159)](_0x1ad6d8){const _0x16fc9c=_0x53af05;return this[_0x16fc9c(0x172)][_0x16fc9c(0x159)](_0x1ad6d8[_0x16fc9c(0x14a)]);}async[_0x53af05(0x177)](_0x24b309,_0x3deb23){const _0x27487b=_0x53af05;return this[_0x27487b(0x172)][_0x27487b(0x177)](_0x24b309,_0x3deb23[_0x27487b(0x135)]);}};function _0x211b(){const _0x1f1993=['scanBindWx','2649536SVQnwq','./dto/getQrSceneStr.dto','Query','__esModule','getQRSceneStr','ApiOperation','getOwnPropertyDescriptor','./official.service','prototype','official','defineProperty','@nestjs/common','qrscene_','JwtAuthGuard','getRedirectUrl','OfficialController','msgtype','UseGuards','design:type','officialService','send','event','fromusername','includes','loginByCode','公众号通知接口GET','120768ulkWye','ApiTags','officialSubscribeText','ISDEV','scan','design:returntype','8683015HMUVkv','获取绑定二维码的sceneStr','officialScanLoginText','bindWxBySceneStr','getQRCodeTicket','design:paramtypes','unsubscribe','CLICK','nonce','@nestjs/swagger','metadata','sceneStr:\x20','../../common/auth/jwtAuth.guard','sceneStr','GetQrCodeDto','61290GaOVmD','Body','timestamp','2UZSXOs','eventkey','xml:\x20','getQRCode','loginBySceneStr','genXmlMsgByConfig','code','获取二维码','公众号通知接口POST','signature','Post','verify','获取注册配置','173995cYEZQf','28jXMwGG','25428EOTOEJ','扫码绑定轮询查询','officialBindAccountText','./dto/getQrCode.dto','function','success','获取登录二维码sceneStr','get\x20通知>>>','410dIazBn','311089mEBsoG','env','content','url','notify','SCAN','224VepOGC','GetQrSceneStrDto','Req','Get','__decorate','OfficialService','subscribe','VIEW','decorate','__param','getQRSceneStrByBind','length','getJsapiTicket','status','Res','echostr','log'];_0x211b=function(){return _0x1f1993;};return _0x211b();}__decorate([(0x0,common_1[_0x53af05(0x150)])('notify'),(0x0,swagger_1[_0x53af05(0x164)])({'summary':_0x53af05(0x178)}),__param(0x0,(0x0,common_1[_0x53af05(0x14f)])()),__param(0x1,(0x0,common_1[_0x53af05(0x161)])()),__param(0x2,(0x0,common_1[_0x53af05(0x12d)])()),__metadata(_0x53af05(0x171),Function),__metadata(_0x53af05(0x184),[Object,Object,Object]),__metadata(_0x53af05(0x17e),Promise)],OfficialController[_0x53af05(0x167)],_0x53af05(0x14b),null),__decorate([(0x0,common_1['Post'])(_0x53af05(0x14b)),(0x0,swagger_1['ApiOperation'])({'summary':_0x53af05(0x137)}),__param(0x0,(0x0,common_1[_0x53af05(0x14f)])()),__param(0x1,(0x0,common_1[_0x53af05(0x161)])()),__param(0x2,(0x0,common_1['Body'])()),__param(0x3,(0x0,common_1[_0x53af05(0x15b)])()),__metadata(_0x53af05(0x171),Function),__metadata(_0x53af05(0x184),[Object,Object,Object,Object]),__metadata('design:returntype',Promise)],OfficialController[_0x53af05(0x167)],'notifyPost',null),__decorate([(0x0,common_1[_0x53af05(0x139)])(_0x53af05(0x163)),(0x0,swagger_1[_0x53af05(0x164)])({'summary':_0x53af05(0x144)}),__param(0x0,(0x0,common_1[_0x53af05(0x12d)])()),__metadata(_0x53af05(0x171),Function),__metadata(_0x53af05(0x184),[getQrSceneStr_dto_1[_0x53af05(0x14e)]]),__metadata(_0x53af05(0x17e),Promise)],OfficialController['prototype'],_0x53af05(0x163),null),__decorate([(0x0,common_1[_0x53af05(0x139)])(_0x53af05(0x157)),(0x0,swagger_1[_0x53af05(0x164)])({'summary':_0x53af05(0x180)}),(0x0,common_1[_0x53af05(0x170)])(jwtAuth_guard_1['JwtAuthGuard']),__param(0x0,(0x0,common_1['Req'])()),__metadata('design:type',Function),__metadata(_0x53af05(0x184),[Object]),__metadata('design:returntype',Promise)],OfficialController[_0x53af05(0x167)],_0x53af05(0x157),null),__decorate([(0x0,common_1[_0x53af05(0x150)])(_0x53af05(0x132)),(0x0,swagger_1[_0x53af05(0x164)])({'summary':_0x53af05(0x136)}),__param(0x0,(0x0,common_1['Query'])()),__metadata(_0x53af05(0x171),Function),__metadata(_0x53af05(0x184),[getQrCode_dto_1[_0x53af05(0x18d)]]),__metadata('design:returntype',Promise)],OfficialController[_0x53af05(0x167)],_0x53af05(0x132),null),__decorate([(0x0,common_1[_0x53af05(0x139)])(_0x53af05(0x133)),(0x0,swagger_1[_0x53af05(0x164)])({'summary':'扫码登录轮询查询'}),__param(0x0,(0x0,common_1[_0x53af05(0x14f)])()),__param(0x1,(0x0,common_1['Body'])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,getQrCode_dto_1[_0x53af05(0x18d)]]),__metadata('design:returntype',Promise)],OfficialController[_0x53af05(0x167)],_0x53af05(0x133),null),__decorate([(0x0,common_1['Post'])(_0x53af05(0x182)),(0x0,swagger_1[_0x53af05(0x164)])({'summary':_0x53af05(0x13f)}),(0x0,common_1[_0x53af05(0x170)])(jwtAuth_guard_1[_0x53af05(0x16c)]),__param(0x0,(0x0,common_1[_0x53af05(0x14f)])()),__param(0x1,(0x0,common_1[_0x53af05(0x12d)])()),__metadata('design:type',Function),__metadata(_0x53af05(0x184),[Object,getQrCode_dto_1[_0x53af05(0x18d)]]),__metadata(_0x53af05(0x17e),Promise)],OfficialController['prototype'],_0x53af05(0x182),null),__decorate([(0x0,common_1['Post'])(_0x53af05(0x16d)),(0x0,swagger_1['ApiOperation'])({'summary':'获取登录跳转地址'}),__param(0x0,(0x0,common_1[_0x53af05(0x12d)])()),__metadata(_0x53af05(0x171),Function),__metadata(_0x53af05(0x184),[Object]),__metadata(_0x53af05(0x17e),Promise)],OfficialController[_0x53af05(0x167)],_0x53af05(0x16d),null),__decorate([(0x0,common_1[_0x53af05(0x139)])('getJsapiTicket'),(0x0,swagger_1['ApiOperation'])({'summary':_0x53af05(0x13b)}),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x53af05(0x171),Function),__metadata(_0x53af05(0x184),[Object]),__metadata(_0x53af05(0x17e),Promise)],OfficialController[_0x53af05(0x167)],'getJsapiTicket',null),__decorate([(0x0,common_1[_0x53af05(0x139)])('loginByCode'),(0x0,swagger_1[_0x53af05(0x164)])({'summary':'公众号静默登录'}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1['Body'])()),__metadata(_0x53af05(0x171),Function),__metadata('design:paramtypes',[Object,Object]),__metadata(_0x53af05(0x17e),Promise)],OfficialController[_0x53af05(0x167)],_0x53af05(0x177),null),OfficialController=__decorate([(0x0,swagger_1[_0x53af05(0x17a)])(_0x53af05(0x168)),(0x0,common_1['Controller'])(_0x53af05(0x168)),__metadata(_0x53af05(0x184),[official_service_1[_0x53af05(0x152)]])],OfficialController),exports[_0x53af05(0x16e)]=OfficialController;