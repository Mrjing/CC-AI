'use strict';const _0x3e411b=_0x5f1d;(function(_0x3f519f,_0x4ce4fe){const _0x254127=_0x5f1d,_0x32c8a0=_0x3f519f();while(!![]){try{const _0x3839f3=-parseInt(_0x254127(0x131))/0x1+parseInt(_0x254127(0xfb))/0x2+-parseInt(_0x254127(0x118))/0x3+-parseInt(_0x254127(0x114))/0x4+-parseInt(_0x254127(0x13a))/0x5+parseInt(_0x254127(0xef))/0x6*(-parseInt(_0x254127(0x105))/0x7)+parseInt(_0x254127(0x116))/0x8*(parseInt(_0x254127(0x135))/0x9);if(_0x3839f3===_0x4ce4fe)break;else _0x32c8a0['push'](_0x32c8a0['shift']());}catch(_0x45737d){_0x32c8a0['push'](_0x32c8a0['shift']());}}}(_0x1f22,0xbaaf1));function _0x5f1d(_0x57855f,_0x1fe44c){const _0x1f22ae=_0x1f22();return _0x5f1d=function(_0x5f1d5f,_0x33fb38){_0x5f1d5f=_0x5f1d5f-0xd4;let _0x331658=_0x1f22ae[_0x5f1d5f];return _0x331658;},_0x5f1d(_0x57855f,_0x1fe44c);}var __decorate=this&&this[_0x3e411b(0x12a)]||function(_0x25f908,_0x226030,_0x4e3d32,_0x1cc375){const _0x1ad677=_0x3e411b;var _0x1056bb=arguments[_0x1ad677(0xf4)],_0x577188=_0x1056bb<0x3?_0x226030:_0x1cc375===null?_0x1cc375=Object[_0x1ad677(0x12e)](_0x226030,_0x4e3d32):_0x1cc375,_0x38babe;if(typeof Reflect==='object'&&typeof Reflect[_0x1ad677(0x128)]===_0x1ad677(0xe8))_0x577188=Reflect[_0x1ad677(0x128)](_0x25f908,_0x226030,_0x4e3d32,_0x1cc375);else{for(var _0x1b2eb0=_0x25f908[_0x1ad677(0xf4)]-0x1;_0x1b2eb0>=0x0;_0x1b2eb0--)if(_0x38babe=_0x25f908[_0x1b2eb0])_0x577188=(_0x1056bb<0x3?_0x38babe(_0x577188):_0x1056bb>0x3?_0x38babe(_0x226030,_0x4e3d32,_0x577188):_0x38babe(_0x226030,_0x4e3d32))||_0x577188;}return _0x1056bb>0x3&&_0x577188&&Object['defineProperty'](_0x226030,_0x4e3d32,_0x577188),_0x577188;},__metadata=this&&this[_0x3e411b(0xec)]||function(_0x2e762b,_0xc22360){const _0x3cdbd4=_0x3e411b;if(typeof Reflect===_0x3cdbd4(0x113)&&typeof Reflect[_0x3cdbd4(0xe2)]===_0x3cdbd4(0xe8))return Reflect[_0x3cdbd4(0xe2)](_0x2e762b,_0xc22360);},__param=this&&this[_0x3e411b(0xff)]||function(_0x52d4ad,_0x4f412d){return function(_0x1517ca,_0xe2702e){_0x4f412d(_0x1517ca,_0xe2702e,_0x52d4ad);};};Object[_0x3e411b(0xfa)](exports,_0x3e411b(0x12f),{'value':!![]}),exports['OfficialController']=void 0x0;const common_1=require('@nestjs/common'),swagger_1=require(_0x3e411b(0x110)),jwtAuth_guard_1=require(_0x3e411b(0x137)),official_service_1=require(_0x3e411b(0xe3)),getQrCode_dto_1=require(_0x3e411b(0x129)),getQrSceneStr_dto_1=require('./dto/getQrSceneStr.dto');let OfficialController=class OfficialController{constructor(_0x1f5c43){const _0x2a08f6=_0x3e411b;this[_0x2a08f6(0xd7)]=_0x1f5c43;}async[_0x3e411b(0x12c)](_0x379f64,_0x5c5bd3,_0x260537){const _0x5a0448=_0x3e411b;console[_0x5a0448(0x10b)](_0x5a0448(0x103),_0x5c5bd3,_0x260537);const _0x4987fc=await this[_0x5a0448(0xd7)][_0x5a0448(0xee)](_0x5c5bd3[_0x5a0448(0xdc)],_0x5c5bd3['nonce'],_0x5c5bd3['timestamp']);return _0x4987fc?_0x5c5bd3[_0x5a0448(0xd9)]:'';}async[_0x3e411b(0xde)](_0x226aad,_0xb45118,_0x4b229b,_0x3f4445){const _0x5058e7=_0x3e411b,{xml:_0x4cc95f}=_0x4b229b;console[_0x5058e7(0x10b)](_0x5058e7(0xd6),_0x4cc95f);if(_0x4cc95f[_0x5058e7(0x11e)][0x0]==_0x5058e7(0x120)){if(_0x4cc95f[_0x5058e7(0x120)][0x0]==_0x5058e7(0xf8)||_0x4cc95f[_0x5058e7(0x120)][0x0]==_0x5058e7(0x122))return _0x3f4445[_0x5058e7(0xe7)](0xc8)[_0x5058e7(0x100)]('');if(_0x4cc95f['event'][0x0]==_0x5058e7(0x12b)){console[_0x5058e7(0x10b)]('扫码');const _0x58f07a=_0x4cc95f[_0x5058e7(0x133)][0x0];if(_0x58f07a[_0x5058e7(0x101)]('/')){this[_0x5058e7(0xd7)]['scanBindWx'](_0x4cc95f[_0x5058e7(0xe1)][0x0],_0x58f07a);const _0x50c81c=await this[_0x5058e7(0xd7)]['genXmlMsgByConfig'](_0x4cc95f,'officialBindAccountText');return _0x3f4445[_0x5058e7(0xe7)](0xc8)['send'](_0x50c81c);}this['officialService']['scan'](_0x4cc95f[_0x5058e7(0xe1)][0x0],_0x58f07a);const _0x2a91de=await this['officialService'][_0x5058e7(0x112)](_0x4cc95f,_0x5058e7(0xd5));return _0x3f4445[_0x5058e7(0xe7)](0xc8)[_0x5058e7(0x100)](_0x2a91de);}if(_0x4cc95f[_0x5058e7(0x120)][0x0]=='subscribe'){console['log']('订阅',_0x4cc95f[_0x5058e7(0x133)][0x0]);const _0x1aba01=_0x4cc95f['eventkey'][0x0][_0x5058e7(0xf9)](_0x5058e7(0x127))[0x1];console[_0x5058e7(0x10b)]('sceneStr:\x20',_0x1aba01);if(!_0x1aba01){const _0x2a449c=await this['officialService'][_0x5058e7(0x112)](_0x4cc95f,_0x5058e7(0xe0));return _0x3f4445[_0x5058e7(0xe7)](0xc8)[_0x5058e7(0x100)](_0x2a449c);}if(_0x1aba01[_0x5058e7(0x101)]('/')){this[_0x5058e7(0xd7)][_0x5058e7(0x106)](_0x4cc95f[_0x5058e7(0xe1)][0x0],_0x1aba01);const _0x1df669=await this[_0x5058e7(0xd7)][_0x5058e7(0x112)](_0x4cc95f,_0x5058e7(0x107));return _0x3f4445[_0x5058e7(0xe7)](0xc8)['send'](_0x1df669);}this[_0x5058e7(0xd7)][_0x5058e7(0x117)](_0x4cc95f['fromusername'][0x0],_0x1aba01);const _0x5b5f35=await this['officialService'][_0x5058e7(0x112)](_0x4cc95f,_0x5058e7(0xe0));return _0x3f4445[_0x5058e7(0xe7)](0xc8)[_0x5058e7(0x100)](_0x5b5f35);}if(_0x4cc95f[_0x5058e7(0x120)][0x0]==_0x5058e7(0xf0))return _0x3f4445[_0x5058e7(0xe7)](0xc8)['send']('');}if(_0x4cc95f[_0x5058e7(0x11e)][0x0]==_0x5058e7(0xdf)){const _0x5d856f=await this['officialService'][_0x5058e7(0x139)](_0x4cc95f[_0x5058e7(0xda)][0x0]),_0x548dab=await this[_0x5058e7(0xd7)][_0x5058e7(0xdd)](_0x4cc95f,_0x5d856f);return _0x3f4445[_0x5058e7(0xe7)](0xc8)['send'](_0x548dab);}return _0x5058e7(0x115);}async[_0x3e411b(0x11d)](_0x4ee1ec){const _0x1a4333=_0x3e411b;return this[_0x1a4333(0xd7)]['getQRSceneStr'](_0x4ee1ec);}async[_0x3e411b(0xeb)](_0x4c4749){const _0x281d07=_0x3e411b;return this[_0x281d07(0xd7)][_0x281d07(0xeb)](_0x4c4749);}async[_0x3e411b(0xd4)](_0xddaeb5){const _0x2cec90=_0x3e411b;if(process[_0x2cec90(0x111)][_0x2cec90(0xd8)]===_0x2cec90(0x126))return'';const _0x3a5a21=await this[_0x2cec90(0xd7)][_0x2cec90(0xf5)](_0xddaeb5[_0x2cec90(0x11c)]);return _0x2cec90(0x12d)+encodeURIComponent(_0x3a5a21);}async[_0x3e411b(0x121)](_0x3e1554,_0x46e65f){const _0x10cfc4=_0x3e411b;return this[_0x10cfc4(0xd7)][_0x10cfc4(0x121)](_0x3e1554,_0x46e65f['sceneStr']);}async[_0x3e411b(0x109)](_0x2c1306,_0x314a6b){const _0x1b7d61=_0x3e411b;return this[_0x1b7d61(0xd7)][_0x1b7d61(0x109)](_0x2c1306,_0x314a6b['sceneStr']);}async[_0x3e411b(0xfc)](_0x4fc996){const _0x251422=_0x3e411b;return this[_0x251422(0xd7)][_0x251422(0xfc)](_0x4fc996[_0x251422(0xe5)]);}async[_0x3e411b(0x124)](_0x23a1f1){const _0xbf53d=_0x3e411b;return this[_0xbf53d(0xd7)][_0xbf53d(0x124)](_0x23a1f1[_0xbf53d(0xe5)]);}async[_0x3e411b(0xf2)](_0x1093b6,_0x5667f5){const _0x2df5b4=_0x3e411b;return this[_0x2df5b4(0xd7)][_0x2df5b4(0xf2)](_0x1093b6,_0x5667f5[_0x2df5b4(0x10a)]);}};function _0x1f22(){const _0x1e3419=['decorate','./dto/getQrCode.dto','__decorate','SCAN','notify','https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=','getOwnPropertyDescriptor','__esModule','design:paramtypes','454318HrEysK','扫码绑定轮询查询','eventkey','Controller','54rjBcSU','OfficialService','../../common/auth/jwtAuth.guard','获取登录二维码sceneStr','aotoPlay','5886380sZgAuU','getQRCode','officialScanLoginText','xml:\x20','officialService','ISDEV','echostr','content','ApiOperation','signature','genXmlMsg','notifyPost','text','officialSubscribeText','fromusername','metadata','./official.service','prototype','url','GetQrCodeDto','status','function','OfficialController','JwtAuthGuard','getQRSceneStrByBind','__metadata','获取二维码','verify','6205170cdeezZ','unsubscribe','design:type','loginByCode','Body','length','getQRCodeTicket','ApiTags','Req','VIEW','split','defineProperty','216538BpCfSY','getRedirectUrl','GetQrSceneStrDto','获取登录跳转地址','__param','send','includes','UseGuards','get\x20通知>>>','获取绑定二维码的sceneStr','7DTONmo','scanBindWx','officialBindAccountText','Get','bindWxBySceneStr','code','log','公众号静默登录','Query','公众号通知接口GET','Post','@nestjs/swagger','env','genXmlMsgByConfig','object','2882048qTiFbk','success','6837032CnViVl','scan','3255255pgmLNc','获取注册配置','公众号通知接口POST','design:returntype','sceneStr','getQRSceneStr','msgtype','official','event','loginBySceneStr','CLICK','扫码登录轮询查询','getJsapiTicket','Res','TRUE','qrscene_'];_0x1f22=function(){return _0x1e3419;};return _0x1f22();}__decorate([(0x0,common_1[_0x3e411b(0x108)])(_0x3e411b(0x12c)),(0x0,swagger_1['ApiOperation'])({'summary':_0x3e411b(0x10e)}),__param(0x0,(0x0,common_1[_0x3e411b(0xf7)])()),__param(0x1,(0x0,common_1[_0x3e411b(0x10d)])()),__param(0x2,(0x0,common_1['Body'])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,Object,Object]),__metadata(_0x3e411b(0x11b),Promise)],OfficialController[_0x3e411b(0xe4)],_0x3e411b(0x12c),null),__decorate([(0x0,common_1[_0x3e411b(0x10f)])(_0x3e411b(0x12c)),(0x0,swagger_1[_0x3e411b(0xdb)])({'summary':_0x3e411b(0x11a)}),__param(0x0,(0x0,common_1[_0x3e411b(0xf7)])()),__param(0x1,(0x0,common_1[_0x3e411b(0x10d)])()),__param(0x2,(0x0,common_1[_0x3e411b(0xf3)])()),__param(0x3,(0x0,common_1[_0x3e411b(0x125)])()),__metadata(_0x3e411b(0xf1),Function),__metadata(_0x3e411b(0x130),[Object,Object,Object,Object]),__metadata(_0x3e411b(0x11b),Promise)],OfficialController[_0x3e411b(0xe4)],_0x3e411b(0xde),null),__decorate([(0x0,common_1['Post'])(_0x3e411b(0x11d)),(0x0,swagger_1[_0x3e411b(0xdb)])({'summary':_0x3e411b(0x138)}),__param(0x0,(0x0,common_1[_0x3e411b(0xf3)])()),__metadata('design:type',Function),__metadata(_0x3e411b(0x130),[getQrSceneStr_dto_1[_0x3e411b(0xfd)]]),__metadata(_0x3e411b(0x11b),Promise)],OfficialController[_0x3e411b(0xe4)],_0x3e411b(0x11d),null),__decorate([(0x0,common_1[_0x3e411b(0x10f)])(_0x3e411b(0xeb)),(0x0,swagger_1[_0x3e411b(0xdb)])({'summary':_0x3e411b(0x104)}),(0x0,common_1[_0x3e411b(0x102)])(jwtAuth_guard_1[_0x3e411b(0xea)]),__param(0x0,(0x0,common_1[_0x3e411b(0xf7)])()),__metadata(_0x3e411b(0xf1),Function),__metadata(_0x3e411b(0x130),[Object]),__metadata(_0x3e411b(0x11b),Promise)],OfficialController['prototype'],_0x3e411b(0xeb),null),__decorate([(0x0,common_1[_0x3e411b(0x108)])(_0x3e411b(0xd4)),(0x0,swagger_1['ApiOperation'])({'summary':_0x3e411b(0xed)}),__param(0x0,(0x0,common_1[_0x3e411b(0x10d)])()),__metadata(_0x3e411b(0xf1),Function),__metadata('design:paramtypes',[getQrCode_dto_1[_0x3e411b(0xe6)]]),__metadata(_0x3e411b(0x11b),Promise)],OfficialController['prototype'],_0x3e411b(0xd4),null),__decorate([(0x0,common_1[_0x3e411b(0x10f)])(_0x3e411b(0x121)),(0x0,swagger_1[_0x3e411b(0xdb)])({'summary':_0x3e411b(0x123)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x3e411b(0xf3)])()),__metadata(_0x3e411b(0xf1),Function),__metadata('design:paramtypes',[Object,getQrCode_dto_1[_0x3e411b(0xe6)]]),__metadata(_0x3e411b(0x11b),Promise)],OfficialController[_0x3e411b(0xe4)],_0x3e411b(0x121),null),__decorate([(0x0,common_1[_0x3e411b(0x10f)])(_0x3e411b(0x109)),(0x0,swagger_1['ApiOperation'])({'summary':_0x3e411b(0x132)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x3e411b(0xea)]),__param(0x0,(0x0,common_1[_0x3e411b(0xf7)])()),__param(0x1,(0x0,common_1[_0x3e411b(0xf3)])()),__metadata('design:type',Function),__metadata(_0x3e411b(0x130),[Object,getQrCode_dto_1[_0x3e411b(0xe6)]]),__metadata(_0x3e411b(0x11b),Promise)],OfficialController['prototype'],_0x3e411b(0x109),null),__decorate([(0x0,common_1[_0x3e411b(0x10f)])(_0x3e411b(0xfc)),(0x0,swagger_1[_0x3e411b(0xdb)])({'summary':_0x3e411b(0xfe)}),__param(0x0,(0x0,common_1[_0x3e411b(0xf3)])()),__metadata(_0x3e411b(0xf1),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x3e411b(0x11b),Promise)],OfficialController[_0x3e411b(0xe4)],_0x3e411b(0xfc),null),__decorate([(0x0,common_1[_0x3e411b(0x10f)])(_0x3e411b(0x124)),(0x0,swagger_1[_0x3e411b(0xdb)])({'summary':_0x3e411b(0x119)}),__param(0x0,(0x0,common_1[_0x3e411b(0xf3)])()),__metadata(_0x3e411b(0xf1),Function),__metadata(_0x3e411b(0x130),[Object]),__metadata('design:returntype',Promise)],OfficialController[_0x3e411b(0xe4)],_0x3e411b(0x124),null),__decorate([(0x0,common_1[_0x3e411b(0x10f)])(_0x3e411b(0xf2)),(0x0,swagger_1[_0x3e411b(0xdb)])({'summary':_0x3e411b(0x10c)}),__param(0x0,(0x0,common_1[_0x3e411b(0xf7)])()),__param(0x1,(0x0,common_1[_0x3e411b(0xf3)])()),__metadata(_0x3e411b(0xf1),Function),__metadata('design:paramtypes',[Object,Object]),__metadata('design:returntype',Promise)],OfficialController['prototype'],'loginByCode',null),OfficialController=__decorate([(0x0,swagger_1[_0x3e411b(0xf6)])(_0x3e411b(0x11f)),(0x0,common_1[_0x3e411b(0x134)])('official'),__metadata(_0x3e411b(0x130),[official_service_1[_0x3e411b(0x136)]])],OfficialController),exports[_0x3e411b(0xe9)]=OfficialController;