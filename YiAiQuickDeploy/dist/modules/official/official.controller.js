'use strict';function _0x17fc(){const _0xb82d55=['scan','742005rtZUMa','../../common/auth/jwtAuth.guard','getQRSceneStrByBind','split','qrscene_','18hIGLNd','11218wwdKxN','subscribe','扫码绑定轮询查询','notifyPost','fromusername','prototype','bindWxBySceneStr','send','CLICK','Post','officialBindAccountText','6AHfEGn','xml:\x20','length','notify','ApiTags','event','Get','getJsapiTicket','ApiOperation','OfficialService','officialSubscribeText','./dto/getQrCode.dto','decorate','OfficialController','公众号通知接口GET','loginByCode','公众号通知接口POST','signature','sceneStr','aotoPlay','sceneStr:\x20','getQRCode','log','content','获取登录跳转地址','JwtAuthGuard','url','488HKCKxZ','genXmlMsg','design:returntype','1996328MqcjSf','officialScanLoginText','includes','12PTHVwQ','eventkey','officialService','50953ycWcuL','env','scanBindWx','getQRSceneStr','GetQrCodeDto','msgtype','313379CXdUZn','UseGuards','loginBySceneStr','获取绑定二维码的sceneStr','8961576bMJguI','./dto/getQrSceneStr.dto','status','5288742aYXzdF','Body','nonce','function','获取注册配置','getOwnPropertyDescriptor','GetQrSceneStrDto','./official.service','getRedirectUrl','@nestjs/common','获取登录二维码sceneStr','official','genXmlMsgByConfig','250xGyMOB','design:paramtypes','Query','echostr','metadata','80ilSTIA','TRUE','success','Req','design:type','timestamp'];_0x17fc=function(){return _0xb82d55;};return _0x17fc();}const _0x229f13=_0x1c36;(function(_0x5a66b8,_0x121481){const _0x213a6c=_0x1c36,_0x5269e4=_0x5a66b8();while(!![]){try{const _0xa469d2=parseInt(_0x213a6c(0x94))/0x1*(parseInt(_0x213a6c(0x87))/0x2)+parseInt(_0x213a6c(0x9f))/0x3*(-parseInt(_0x213a6c(0xbd))/0x4)+parseInt(_0x213a6c(0x8e))/0x5*(-parseInt(_0x213a6c(0x93))/0x6)+-parseInt(_0x213a6c(0xc3))/0x7*(parseInt(_0x213a6c(0xba))/0x8)+parseInt(_0x213a6c(0xd0))/0x9+-parseInt(_0x213a6c(0x82))/0xa*(-parseInt(_0x213a6c(0xc9))/0xb)+-parseInt(_0x213a6c(0xc0))/0xc*(-parseInt(_0x213a6c(0xcd))/0xd);if(_0xa469d2===_0x121481)break;else _0x5269e4['push'](_0x5269e4['shift']());}catch(_0x41c59c){_0x5269e4['push'](_0x5269e4['shift']());}}}(_0x17fc,0x86695));var __decorate=this&&this['__decorate']||function(_0x358fdc,_0x56896d,_0x2c18cd,_0x34c24c){const _0x323f62=_0x1c36;var _0x17dbd9=arguments[_0x323f62(0xa1)],_0x589c93=_0x17dbd9<0x3?_0x56896d:_0x34c24c===null?_0x34c24c=Object[_0x323f62(0xd5)](_0x56896d,_0x2c18cd):_0x34c24c,_0x442efa;if(typeof Reflect==='object'&&typeof Reflect[_0x323f62(0xab)]===_0x323f62(0xd3))_0x589c93=Reflect['decorate'](_0x358fdc,_0x56896d,_0x2c18cd,_0x34c24c);else{for(var _0x236946=_0x358fdc[_0x323f62(0xa1)]-0x1;_0x236946>=0x0;_0x236946--)if(_0x442efa=_0x358fdc[_0x236946])_0x589c93=(_0x17dbd9<0x3?_0x442efa(_0x589c93):_0x17dbd9>0x3?_0x442efa(_0x56896d,_0x2c18cd,_0x589c93):_0x442efa(_0x56896d,_0x2c18cd))||_0x589c93;}return _0x17dbd9>0x3&&_0x589c93&&Object['defineProperty'](_0x56896d,_0x2c18cd,_0x589c93),_0x589c93;},__metadata=this&&this['__metadata']||function(_0x5848c1,_0x2c98f3){const _0x19508b=_0x1c36;if(typeof Reflect==='object'&&typeof Reflect[_0x19508b(0x86)]==='function')return Reflect[_0x19508b(0x86)](_0x5848c1,_0x2c98f3);},__param=this&&this['__param']||function(_0x2e982a,_0x6728ae){return function(_0x2e2272,_0x499129){_0x6728ae(_0x2e2272,_0x499129,_0x2e982a);};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[_0x229f13(0xac)]=void 0x0;const common_1=require(_0x229f13(0xd9)),swagger_1=require('@nestjs/swagger'),jwtAuth_guard_1=require(_0x229f13(0x8f)),official_service_1=require(_0x229f13(0xd7)),getQrCode_dto_1=require(_0x229f13(0xaa)),getQrSceneStr_dto_1=require(_0x229f13(0xce));function _0x1c36(_0x3e7d3f,_0x3a5358){const _0x17fc04=_0x17fc();return _0x1c36=function(_0x1c36d1,_0x7ae8ca){_0x1c36d1=_0x1c36d1-0x81;let _0x21f2d6=_0x17fc04[_0x1c36d1];return _0x21f2d6;},_0x1c36(_0x3e7d3f,_0x3a5358);}let OfficialController=class OfficialController{constructor(_0x183fee){this['officialService']=_0x183fee;}async[_0x229f13(0xa2)](_0x1e0bf3,_0x4df68c,_0x49dde7){const _0x3fb940=_0x229f13;console[_0x3fb940(0xb5)]('get\x20通知>>>',_0x4df68c,_0x49dde7);const _0x569639=await this[_0x3fb940(0xc2)]['verify'](_0x4df68c[_0x3fb940(0xb0)],_0x4df68c[_0x3fb940(0xd2)],_0x4df68c[_0x3fb940(0x8c)]);return _0x569639?_0x4df68c[_0x3fb940(0x85)]:'';}async[_0x229f13(0x97)](_0x3befda,_0x984281,_0x38e49e,_0x12cd0a){const _0x5d3ec9=_0x229f13,{xml:_0x24e719}=_0x38e49e;console[_0x5d3ec9(0xb5)](_0x5d3ec9(0xa0),_0x24e719);if(_0x24e719['msgtype'][0x0]==_0x5d3ec9(0xa4)){if(_0x24e719['event'][0x0]=='VIEW'||_0x24e719[_0x5d3ec9(0xa4)][0x0]==_0x5d3ec9(0x9c))return _0x12cd0a['status'](0xc8)[_0x5d3ec9(0x9b)]('');if(_0x24e719['event'][0x0]=='SCAN'){console[_0x5d3ec9(0xb5)]('扫码');const _0x558447=_0x24e719[_0x5d3ec9(0xc1)][0x0];if(_0x558447[_0x5d3ec9(0xbf)]('/')){this[_0x5d3ec9(0xc2)]['scanBindWx'](_0x24e719[_0x5d3ec9(0x98)][0x0],_0x558447);const _0x4d3a9f=await this[_0x5d3ec9(0xc2)][_0x5d3ec9(0x81)](_0x24e719,_0x5d3ec9(0x9e));return _0x12cd0a[_0x5d3ec9(0xcf)](0xc8)['send'](_0x4d3a9f);}this[_0x5d3ec9(0xc2)]['scan'](_0x24e719[_0x5d3ec9(0x98)][0x0],_0x558447);const _0x45dc14=await this[_0x5d3ec9(0xc2)][_0x5d3ec9(0x81)](_0x24e719,_0x5d3ec9(0xbe));return _0x12cd0a[_0x5d3ec9(0xcf)](0xc8)[_0x5d3ec9(0x9b)](_0x45dc14);}if(_0x24e719['event'][0x0]==_0x5d3ec9(0x95)){console['log']('订阅',_0x24e719[_0x5d3ec9(0xc1)][0x0]);const _0x33a4e7=_0x24e719[_0x5d3ec9(0xc1)][0x0][_0x5d3ec9(0x91)](_0x5d3ec9(0x92))[0x1];console[_0x5d3ec9(0xb5)](_0x5d3ec9(0xb3),_0x33a4e7);if(!_0x33a4e7){const _0x4aa862=await this[_0x5d3ec9(0xc2)][_0x5d3ec9(0x81)](_0x24e719,'officialSubscribeText');return _0x12cd0a['status'](0xc8)[_0x5d3ec9(0x9b)](_0x4aa862);}if(_0x33a4e7[_0x5d3ec9(0xbf)]('/')){this[_0x5d3ec9(0xc2)][_0x5d3ec9(0xc5)](_0x24e719[_0x5d3ec9(0x98)][0x0],_0x33a4e7);const _0x4a98b0=await this[_0x5d3ec9(0xc2)][_0x5d3ec9(0x81)](_0x24e719,_0x5d3ec9(0x9e));return _0x12cd0a[_0x5d3ec9(0xcf)](0xc8)[_0x5d3ec9(0x9b)](_0x4a98b0);}this[_0x5d3ec9(0xc2)][_0x5d3ec9(0x8d)](_0x24e719[_0x5d3ec9(0x98)][0x0],_0x33a4e7);const _0x1c7f86=await this[_0x5d3ec9(0xc2)]['genXmlMsgByConfig'](_0x24e719,_0x5d3ec9(0xa9));return _0x12cd0a[_0x5d3ec9(0xcf)](0xc8)[_0x5d3ec9(0x9b)](_0x1c7f86);}if(_0x24e719[_0x5d3ec9(0xa4)][0x0]=='unsubscribe')return _0x12cd0a[_0x5d3ec9(0xcf)](0xc8)[_0x5d3ec9(0x9b)]('');}if(_0x24e719[_0x5d3ec9(0xc8)][0x0]=='text'){const _0x44dcc8=await this[_0x5d3ec9(0xc2)][_0x5d3ec9(0xb2)](_0x24e719[_0x5d3ec9(0xb6)][0x0]),_0x14f169=await this[_0x5d3ec9(0xc2)][_0x5d3ec9(0xbb)](_0x24e719,_0x44dcc8);return _0x12cd0a['status'](0xc8)[_0x5d3ec9(0x9b)](_0x14f169);}return _0x5d3ec9(0x89);}async[_0x229f13(0xc6)](_0x38703e){return this['officialService']['getQRSceneStr'](_0x38703e);}async[_0x229f13(0x90)](_0x1f01be){const _0x4fa0f6=_0x229f13;return this[_0x4fa0f6(0xc2)][_0x4fa0f6(0x90)](_0x1f01be);}async['getQRCode'](_0x5806ec){const _0x53b878=_0x229f13;if(process[_0x53b878(0xc4)]['ISDEV']===_0x53b878(0x88))return'';const _0x27c22e=await this[_0x53b878(0xc2)]['getQRCodeTicket'](_0x5806ec[_0x53b878(0xb1)]);return'https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket='+encodeURIComponent(_0x27c22e);}async[_0x229f13(0xcb)](_0x3c100d,_0x218fef){const _0x4f2065=_0x229f13;return this[_0x4f2065(0xc2)]['loginBySceneStr'](_0x3c100d,_0x218fef[_0x4f2065(0xb1)]);}async[_0x229f13(0x9a)](_0x46b15c,_0x2b5782){const _0x35d02f=_0x229f13;return this[_0x35d02f(0xc2)][_0x35d02f(0x9a)](_0x46b15c,_0x2b5782['sceneStr']);}async['getRedirectUrl'](_0x56347e){const _0x21ac13=_0x229f13;return this[_0x21ac13(0xc2)]['getRedirectUrl'](_0x56347e[_0x21ac13(0xb9)]);}async[_0x229f13(0xa6)](_0x594c5d){const _0x59815e=_0x229f13;return this[_0x59815e(0xc2)][_0x59815e(0xa6)](_0x594c5d[_0x59815e(0xb9)]);}async[_0x229f13(0xae)](_0x105530,_0x1a4416){const _0x53ff0e=_0x229f13;return this[_0x53ff0e(0xc2)][_0x53ff0e(0xae)](_0x105530,_0x1a4416['code']);}};__decorate([(0x0,common_1[_0x229f13(0xa5)])(_0x229f13(0xa2)),(0x0,swagger_1[_0x229f13(0xa7)])({'summary':_0x229f13(0xad)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x229f13(0x84)])()),__param(0x2,(0x0,common_1[_0x229f13(0xd1)])()),__metadata('design:type',Function),__metadata(_0x229f13(0x83),[Object,Object,Object]),__metadata(_0x229f13(0xbc),Promise)],OfficialController[_0x229f13(0x99)],_0x229f13(0xa2),null),__decorate([(0x0,common_1[_0x229f13(0x9d)])(_0x229f13(0xa2)),(0x0,swagger_1[_0x229f13(0xa7)])({'summary':_0x229f13(0xaf)}),__param(0x0,(0x0,common_1[_0x229f13(0x8a)])()),__param(0x1,(0x0,common_1['Query'])()),__param(0x2,(0x0,common_1[_0x229f13(0xd1)])()),__param(0x3,(0x0,common_1['Res'])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,Object,Object,Object]),__metadata(_0x229f13(0xbc),Promise)],OfficialController[_0x229f13(0x99)],_0x229f13(0x97),null),__decorate([(0x0,common_1['Post'])('getQRSceneStr'),(0x0,swagger_1[_0x229f13(0xa7)])({'summary':_0x229f13(0xda)}),__param(0x0,(0x0,common_1[_0x229f13(0xd1)])()),__metadata(_0x229f13(0x8b),Function),__metadata(_0x229f13(0x83),[getQrSceneStr_dto_1[_0x229f13(0xd6)]]),__metadata('design:returntype',Promise)],OfficialController[_0x229f13(0x99)],_0x229f13(0xc6),null),__decorate([(0x0,common_1[_0x229f13(0x9d)])(_0x229f13(0x90)),(0x0,swagger_1[_0x229f13(0xa7)])({'summary':_0x229f13(0xcc)}),(0x0,common_1[_0x229f13(0xca)])(jwtAuth_guard_1[_0x229f13(0xb8)]),__param(0x0,(0x0,common_1[_0x229f13(0x8a)])()),__metadata('design:type',Function),__metadata(_0x229f13(0x83),[Object]),__metadata(_0x229f13(0xbc),Promise)],OfficialController['prototype'],_0x229f13(0x90),null),__decorate([(0x0,common_1[_0x229f13(0xa5)])('getQRCode'),(0x0,swagger_1[_0x229f13(0xa7)])({'summary':'获取二维码'}),__param(0x0,(0x0,common_1[_0x229f13(0x84)])()),__metadata(_0x229f13(0x8b),Function),__metadata(_0x229f13(0x83),[getQrCode_dto_1['GetQrCodeDto']]),__metadata(_0x229f13(0xbc),Promise)],OfficialController[_0x229f13(0x99)],_0x229f13(0xb4),null),__decorate([(0x0,common_1[_0x229f13(0x9d)])(_0x229f13(0xcb)),(0x0,swagger_1[_0x229f13(0xa7)])({'summary':'扫码登录轮询查询'}),__param(0x0,(0x0,common_1[_0x229f13(0x8a)])()),__param(0x1,(0x0,common_1[_0x229f13(0xd1)])()),__metadata('design:type',Function),__metadata(_0x229f13(0x83),[Object,getQrCode_dto_1[_0x229f13(0xc7)]]),__metadata('design:returntype',Promise)],OfficialController['prototype'],_0x229f13(0xcb),null),__decorate([(0x0,common_1[_0x229f13(0x9d)])(_0x229f13(0x9a)),(0x0,swagger_1[_0x229f13(0xa7)])({'summary':_0x229f13(0x96)}),(0x0,common_1[_0x229f13(0xca)])(jwtAuth_guard_1[_0x229f13(0xb8)]),__param(0x0,(0x0,common_1[_0x229f13(0x8a)])()),__param(0x1,(0x0,common_1['Body'])()),__metadata('design:type',Function),__metadata(_0x229f13(0x83),[Object,getQrCode_dto_1[_0x229f13(0xc7)]]),__metadata('design:returntype',Promise)],OfficialController['prototype'],_0x229f13(0x9a),null),__decorate([(0x0,common_1[_0x229f13(0x9d)])(_0x229f13(0xd8)),(0x0,swagger_1[_0x229f13(0xa7)])({'summary':_0x229f13(0xb7)}),__param(0x0,(0x0,common_1[_0x229f13(0xd1)])()),__metadata(_0x229f13(0x8b),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x229f13(0xbc),Promise)],OfficialController[_0x229f13(0x99)],_0x229f13(0xd8),null),__decorate([(0x0,common_1[_0x229f13(0x9d)])('getJsapiTicket'),(0x0,swagger_1[_0x229f13(0xa7)])({'summary':_0x229f13(0xd4)}),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x229f13(0x8b),Function),__metadata(_0x229f13(0x83),[Object]),__metadata(_0x229f13(0xbc),Promise)],OfficialController[_0x229f13(0x99)],'getJsapiTicket',null),__decorate([(0x0,common_1[_0x229f13(0x9d)])('loginByCode'),(0x0,swagger_1[_0x229f13(0xa7)])({'summary':'公众号静默登录'}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x229f13(0xd1)])()),__metadata(_0x229f13(0x8b),Function),__metadata(_0x229f13(0x83),[Object,Object]),__metadata(_0x229f13(0xbc),Promise)],OfficialController[_0x229f13(0x99)],_0x229f13(0xae),null),OfficialController=__decorate([(0x0,swagger_1[_0x229f13(0xa3)])('official'),(0x0,common_1['Controller'])(_0x229f13(0xdb)),__metadata('design:paramtypes',[official_service_1[_0x229f13(0xa8)]])],OfficialController),exports[_0x229f13(0xac)]=OfficialController;