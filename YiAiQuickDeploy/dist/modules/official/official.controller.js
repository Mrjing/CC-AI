'use strict';const _0x47881c=_0x52d2;(function(_0x1394ff,_0x539af0){const _0x516324=_0x52d2,_0x2cdbb5=_0x1394ff();while(!![]){try{const _0x21850d=-parseInt(_0x516324(0xf9))/0x1+parseInt(_0x516324(0xc7))/0x2*(parseInt(_0x516324(0xb6))/0x3)+parseInt(_0x516324(0xf5))/0x4+parseInt(_0x516324(0xce))/0x5+-parseInt(_0x516324(0xda))/0x6+parseInt(_0x516324(0xd2))/0x7+parseInt(_0x516324(0xe8))/0x8;if(_0x21850d===_0x539af0)break;else _0x2cdbb5['push'](_0x2cdbb5['shift']());}catch(_0xaf6acd){_0x2cdbb5['push'](_0x2cdbb5['shift']());}}}(_0x51c6,0x21ac3));var __decorate=this&&this[_0x47881c(0xc6)]||function(_0x2140a7,_0x2018c4,_0x5def54,_0x583fb5){const _0x3f303a=_0x47881c;var _0x1d9bac=arguments[_0x3f303a(0xbe)],_0x4ae886=_0x1d9bac<0x3?_0x2018c4:_0x583fb5===null?_0x583fb5=Object[_0x3f303a(0xbd)](_0x2018c4,_0x5def54):_0x583fb5,_0x20f072;if(typeof Reflect===_0x3f303a(0xc0)&&typeof Reflect[_0x3f303a(0xa5)]===_0x3f303a(0xa6))_0x4ae886=Reflect[_0x3f303a(0xa5)](_0x2140a7,_0x2018c4,_0x5def54,_0x583fb5);else{for(var _0x114c00=_0x2140a7[_0x3f303a(0xbe)]-0x1;_0x114c00>=0x0;_0x114c00--)if(_0x20f072=_0x2140a7[_0x114c00])_0x4ae886=(_0x1d9bac<0x3?_0x20f072(_0x4ae886):_0x1d9bac>0x3?_0x20f072(_0x2018c4,_0x5def54,_0x4ae886):_0x20f072(_0x2018c4,_0x5def54))||_0x4ae886;}return _0x1d9bac>0x3&&_0x4ae886&&Object[_0x3f303a(0xb3)](_0x2018c4,_0x5def54,_0x4ae886),_0x4ae886;},__metadata=this&&this[_0x47881c(0xb5)]||function(_0x597417,_0x54162f){const _0x4d1b18=_0x47881c;if(typeof Reflect===_0x4d1b18(0xc0)&&typeof Reflect[_0x4d1b18(0xeb)]===_0x4d1b18(0xa6))return Reflect[_0x4d1b18(0xeb)](_0x597417,_0x54162f);},__param=this&&this[_0x47881c(0xaf)]||function(_0x5af8d1,_0x51b212){return function(_0x709cfc,_0x300deb){_0x51b212(_0x709cfc,_0x300deb,_0x5af8d1);};};function _0x51c6(){const _0x4052f2=['119342jusNZd','scanBindWx','./official.service','TRUE','officialService','url','Req','event','SCAN','decorate','function','__esModule','./dto/getQrSceneStr.dto','../../common/auth/jwtAuth.guard','@nestjs/swagger','loginByCode','获取二维码','signature','qrscene_','__param','officialSubscribeText','Controller','echostr','defineProperty','getQRSceneStr','__metadata','3dQdBIs','OfficialService','timestamp','success','获取注册配置','ApiOperation','split','getOwnPropertyDescriptor','length','Body','object','genXmlMsg','code','sceneStr','genXmlMsgByConfig','@nestjs/common','__decorate','380604mdDDCd','send','log','getQRCode','scan','loginBySceneStr','Query','37780fZAsuW','Get','status','ApiTags','76727zalMqD','get\x20通知>>>','aotoPlay','CLICK','bindWxBySceneStr','ISDEV','eventkey','扫码绑定轮询查询','394890HOmhnF','design:paramtypes','officialScanLoginText','getQRSceneStrByBind','VIEW','env','GetQrCodeDto','fromusername','verify','UseGuards','OfficialController','获取登录跳转地址','getJsapiTicket','公众号通知接口GET','28544QhBthA','officialBindAccountText','includes','metadata','Post','notify','getRedirectUrl','official','design:type','sceneStr:\x20','JwtAuthGuard','design:returntype','nonce','442772HeYZVL','prototype','./dto/getQrCode.dto','xml:\x20'];_0x51c6=function(){return _0x4052f2;};return _0x51c6();}Object['defineProperty'](exports,_0x47881c(0xa7),{'value':!![]}),exports[_0x47881c(0xe4)]=void 0x0;function _0x52d2(_0xcdaaae,_0x121198){const _0x51c68f=_0x51c6();return _0x52d2=function(_0x52d298,_0x12578a){_0x52d298=_0x52d298-0x9f;let _0x4039fe=_0x51c68f[_0x52d298];return _0x4039fe;},_0x52d2(_0xcdaaae,_0x121198);}const common_1=require(_0x47881c(0xc5)),swagger_1=require(_0x47881c(0xaa)),jwtAuth_guard_1=require(_0x47881c(0xa9)),official_service_1=require(_0x47881c(0xfb)),getQrCode_dto_1=require(_0x47881c(0xf7)),getQrSceneStr_dto_1=require(_0x47881c(0xa8));let OfficialController=class OfficialController{constructor(_0xbd46a4){const _0x5f073d=_0x47881c;this[_0x5f073d(0xa0)]=_0xbd46a4;}async[_0x47881c(0xed)](_0x206367,_0x5ef9e,_0x58b69d){const _0x19d420=_0x47881c;console[_0x19d420(0xc9)](_0x19d420(0xd3),_0x5ef9e,_0x58b69d);const _0x3aff03=await this[_0x19d420(0xa0)][_0x19d420(0xe2)](_0x5ef9e[_0x19d420(0xad)],_0x5ef9e[_0x19d420(0xf4)],_0x5ef9e[_0x19d420(0xb8)]);return _0x3aff03?_0x5ef9e[_0x19d420(0xb2)]:'';}async['notifyPost'](_0x37014f,_0x36f6be,_0x39755d,_0x5bb6cc){const _0x421c1b=_0x47881c,{xml:_0x320aaf}=_0x39755d;console[_0x421c1b(0xc9)](_0x421c1b(0xf8),_0x320aaf);if(_0x320aaf['msgtype'][0x0]==_0x421c1b(0xa3)){if(_0x320aaf[_0x421c1b(0xa3)][0x0]==_0x421c1b(0xde)||_0x320aaf[_0x421c1b(0xa3)][0x0]==_0x421c1b(0xd5))return _0x5bb6cc[_0x421c1b(0xd0)](0xc8)[_0x421c1b(0xc8)]('');if(_0x320aaf[_0x421c1b(0xa3)][0x0]==_0x421c1b(0xa4)){console[_0x421c1b(0xc9)]('扫码');const _0x4fe74d=_0x320aaf[_0x421c1b(0xd8)][0x0];if(_0x4fe74d[_0x421c1b(0xea)]('/')){this[_0x421c1b(0xa0)][_0x421c1b(0xfa)](_0x320aaf['fromusername'][0x0],_0x4fe74d);const _0xf0c65b=await this[_0x421c1b(0xa0)][_0x421c1b(0xc4)](_0x320aaf,'officialBindAccountText');return _0x5bb6cc['status'](0xc8)[_0x421c1b(0xc8)](_0xf0c65b);}this[_0x421c1b(0xa0)][_0x421c1b(0xcb)](_0x320aaf[_0x421c1b(0xe1)][0x0],_0x4fe74d);const _0x62193b=await this[_0x421c1b(0xa0)][_0x421c1b(0xc4)](_0x320aaf,_0x421c1b(0xdc));return _0x5bb6cc[_0x421c1b(0xd0)](0xc8)[_0x421c1b(0xc8)](_0x62193b);}if(_0x320aaf[_0x421c1b(0xa3)][0x0]=='subscribe'){console[_0x421c1b(0xc9)]('订阅',_0x320aaf[_0x421c1b(0xd8)][0x0]);const _0x183329=_0x320aaf[_0x421c1b(0xd8)][0x0][_0x421c1b(0xbc)](_0x421c1b(0xae))[0x1];console['log'](_0x421c1b(0xf1),_0x183329);if(!_0x183329){const _0x4b7503=await this['officialService'][_0x421c1b(0xc4)](_0x320aaf,_0x421c1b(0xb0));return _0x5bb6cc[_0x421c1b(0xd0)](0xc8)[_0x421c1b(0xc8)](_0x4b7503);}if(_0x183329[_0x421c1b(0xea)]('/')){this['officialService'][_0x421c1b(0xfa)](_0x320aaf[_0x421c1b(0xe1)][0x0],_0x183329);const _0x59e47d=await this[_0x421c1b(0xa0)][_0x421c1b(0xc4)](_0x320aaf,_0x421c1b(0xe9));return _0x5bb6cc[_0x421c1b(0xd0)](0xc8)['send'](_0x59e47d);}this[_0x421c1b(0xa0)][_0x421c1b(0xcb)](_0x320aaf[_0x421c1b(0xe1)][0x0],_0x183329);const _0x405b87=await this[_0x421c1b(0xa0)][_0x421c1b(0xc4)](_0x320aaf,_0x421c1b(0xb0));return _0x5bb6cc[_0x421c1b(0xd0)](0xc8)['send'](_0x405b87);}if(_0x320aaf['event'][0x0]=='unsubscribe')return _0x5bb6cc[_0x421c1b(0xd0)](0xc8)['send']('');}if(_0x320aaf['msgtype'][0x0]=='text'){const _0x3d5e78=await this[_0x421c1b(0xa0)][_0x421c1b(0xd4)](_0x320aaf['content'][0x0]),_0x2d2610=await this[_0x421c1b(0xa0)][_0x421c1b(0xc1)](_0x320aaf,_0x3d5e78);return _0x5bb6cc[_0x421c1b(0xd0)](0xc8)['send'](_0x2d2610);}return _0x421c1b(0xb9);}async[_0x47881c(0xb4)](_0x48f6f1){const _0x3bf57e=_0x47881c;return this[_0x3bf57e(0xa0)][_0x3bf57e(0xb4)](_0x48f6f1);}async['getQRSceneStrByBind'](_0x18ecb0){const _0x552fcc=_0x47881c;return this[_0x552fcc(0xa0)][_0x552fcc(0xdd)](_0x18ecb0);}async[_0x47881c(0xca)](_0x9cddc9){const _0x28d5f4=_0x47881c;if(process[_0x28d5f4(0xdf)][_0x28d5f4(0xd7)]===_0x28d5f4(0x9f))return'';const _0x5e91d7=await this[_0x28d5f4(0xa0)]['getQRCodeTicket'](_0x9cddc9['sceneStr']);return'https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket='+encodeURIComponent(_0x5e91d7);}async['loginBySceneStr'](_0x10504d,_0x15d94c){const _0x48f799=_0x47881c;return this[_0x48f799(0xa0)][_0x48f799(0xcc)](_0x10504d,_0x15d94c[_0x48f799(0xc3)]);}async['bindWxBySceneStr'](_0x327005,_0xafc36e){const _0x4ebd25=_0x47881c;return this[_0x4ebd25(0xa0)][_0x4ebd25(0xd6)](_0x327005,_0xafc36e['sceneStr']);}async[_0x47881c(0xee)](_0xac1ad4){const _0x167e74=_0x47881c;return this[_0x167e74(0xa0)][_0x167e74(0xee)](_0xac1ad4[_0x167e74(0xa1)]);}async['getJsapiTicket'](_0x2259ec){const _0x2f6818=_0x47881c;return this[_0x2f6818(0xa0)][_0x2f6818(0xe6)](_0x2259ec[_0x2f6818(0xa1)]);}async[_0x47881c(0xab)](_0x8d51be,_0x2573e4){const _0x1f1ede=_0x47881c;return this['officialService'][_0x1f1ede(0xab)](_0x8d51be,_0x2573e4[_0x1f1ede(0xc2)]);}};__decorate([(0x0,common_1['Get'])(_0x47881c(0xed)),(0x0,swagger_1[_0x47881c(0xbb)])({'summary':_0x47881c(0xe7)}),__param(0x0,(0x0,common_1[_0x47881c(0xa2)])()),__param(0x1,(0x0,common_1['Query'])()),__param(0x2,(0x0,common_1[_0x47881c(0xbf)])()),__metadata(_0x47881c(0xf0),Function),__metadata(_0x47881c(0xdb),[Object,Object,Object]),__metadata('design:returntype',Promise)],OfficialController[_0x47881c(0xf6)],_0x47881c(0xed),null),__decorate([(0x0,common_1['Post'])(_0x47881c(0xed)),(0x0,swagger_1[_0x47881c(0xbb)])({'summary':'公众号通知接口POST'}),__param(0x0,(0x0,common_1[_0x47881c(0xa2)])()),__param(0x1,(0x0,common_1[_0x47881c(0xcd)])()),__param(0x2,(0x0,common_1[_0x47881c(0xbf)])()),__param(0x3,(0x0,common_1['Res'])()),__metadata(_0x47881c(0xf0),Function),__metadata(_0x47881c(0xdb),[Object,Object,Object,Object]),__metadata(_0x47881c(0xf3),Promise)],OfficialController[_0x47881c(0xf6)],'notifyPost',null),__decorate([(0x0,common_1[_0x47881c(0xec)])(_0x47881c(0xb4)),(0x0,swagger_1['ApiOperation'])({'summary':'获取登录二维码sceneStr'}),__param(0x0,(0x0,common_1[_0x47881c(0xbf)])()),__metadata(_0x47881c(0xf0),Function),__metadata(_0x47881c(0xdb),[getQrSceneStr_dto_1['GetQrSceneStrDto']]),__metadata('design:returntype',Promise)],OfficialController[_0x47881c(0xf6)],_0x47881c(0xb4),null),__decorate([(0x0,common_1[_0x47881c(0xec)])(_0x47881c(0xdd)),(0x0,swagger_1[_0x47881c(0xbb)])({'summary':'获取绑定二维码的sceneStr'}),(0x0,common_1[_0x47881c(0xe3)])(jwtAuth_guard_1[_0x47881c(0xf2)]),__param(0x0,(0x0,common_1[_0x47881c(0xa2)])()),__metadata(_0x47881c(0xf0),Function),__metadata(_0x47881c(0xdb),[Object]),__metadata(_0x47881c(0xf3),Promise)],OfficialController[_0x47881c(0xf6)],_0x47881c(0xdd),null),__decorate([(0x0,common_1[_0x47881c(0xcf)])(_0x47881c(0xca)),(0x0,swagger_1[_0x47881c(0xbb)])({'summary':_0x47881c(0xac)}),__param(0x0,(0x0,common_1[_0x47881c(0xcd)])()),__metadata(_0x47881c(0xf0),Function),__metadata(_0x47881c(0xdb),[getQrCode_dto_1[_0x47881c(0xe0)]]),__metadata(_0x47881c(0xf3),Promise)],OfficialController[_0x47881c(0xf6)],_0x47881c(0xca),null),__decorate([(0x0,common_1['Post'])(_0x47881c(0xcc)),(0x0,swagger_1[_0x47881c(0xbb)])({'summary':'扫码登录轮询查询'}),__param(0x0,(0x0,common_1[_0x47881c(0xa2)])()),__param(0x1,(0x0,common_1[_0x47881c(0xbf)])()),__metadata(_0x47881c(0xf0),Function),__metadata('design:paramtypes',[Object,getQrCode_dto_1[_0x47881c(0xe0)]]),__metadata('design:returntype',Promise)],OfficialController[_0x47881c(0xf6)],'loginBySceneStr',null),__decorate([(0x0,common_1['Post'])(_0x47881c(0xd6)),(0x0,swagger_1[_0x47881c(0xbb)])({'summary':_0x47881c(0xd9)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1['JwtAuthGuard']),__param(0x0,(0x0,common_1[_0x47881c(0xa2)])()),__param(0x1,(0x0,common_1[_0x47881c(0xbf)])()),__metadata(_0x47881c(0xf0),Function),__metadata('design:paramtypes',[Object,getQrCode_dto_1[_0x47881c(0xe0)]]),__metadata(_0x47881c(0xf3),Promise)],OfficialController[_0x47881c(0xf6)],_0x47881c(0xd6),null),__decorate([(0x0,common_1['Post'])('getRedirectUrl'),(0x0,swagger_1['ApiOperation'])({'summary':_0x47881c(0xe5)}),__param(0x0,(0x0,common_1[_0x47881c(0xbf)])()),__metadata(_0x47881c(0xf0),Function),__metadata(_0x47881c(0xdb),[Object]),__metadata(_0x47881c(0xf3),Promise)],OfficialController['prototype'],_0x47881c(0xee),null),__decorate([(0x0,common_1[_0x47881c(0xec)])(_0x47881c(0xe6)),(0x0,swagger_1[_0x47881c(0xbb)])({'summary':_0x47881c(0xba)}),__param(0x0,(0x0,common_1[_0x47881c(0xbf)])()),__metadata('design:type',Function),__metadata(_0x47881c(0xdb),[Object]),__metadata(_0x47881c(0xf3),Promise)],OfficialController[_0x47881c(0xf6)],_0x47881c(0xe6),null),__decorate([(0x0,common_1['Post'])('loginByCode'),(0x0,swagger_1[_0x47881c(0xbb)])({'summary':'公众号静默登录'}),__param(0x0,(0x0,common_1[_0x47881c(0xa2)])()),__param(0x1,(0x0,common_1[_0x47881c(0xbf)])()),__metadata('design:type',Function),__metadata(_0x47881c(0xdb),[Object,Object]),__metadata(_0x47881c(0xf3),Promise)],OfficialController['prototype'],_0x47881c(0xab),null),OfficialController=__decorate([(0x0,swagger_1[_0x47881c(0xd1)])(_0x47881c(0xef)),(0x0,common_1[_0x47881c(0xb1)])('official'),__metadata(_0x47881c(0xdb),[official_service_1[_0x47881c(0xb7)]])],OfficialController),exports[_0x47881c(0xe4)]=OfficialController;