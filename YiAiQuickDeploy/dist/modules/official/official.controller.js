'use strict';const _0xf867b4=_0x2903;(function(_0x180c96,_0x1d609d){const _0x2e38a6=_0x2903,_0x3a1b77=_0x180c96();while(!![]){try{const _0x4442de=parseInt(_0x2e38a6(0xdd))/0x1+-parseInt(_0x2e38a6(0xeb))/0x2*(-parseInt(_0x2e38a6(0xde))/0x3)+-parseInt(_0x2e38a6(0xf1))/0x4*(parseInt(_0x2e38a6(0xab))/0x5)+parseInt(_0x2e38a6(0x9f))/0x6*(-parseInt(_0x2e38a6(0xd3))/0x7)+-parseInt(_0x2e38a6(0x9b))/0x8+-parseInt(_0x2e38a6(0x9c))/0x9*(parseInt(_0x2e38a6(0xa5))/0xa)+parseInt(_0x2e38a6(0xc1))/0xb*(parseInt(_0x2e38a6(0xa2))/0xc);if(_0x4442de===_0x1d609d)break;else _0x3a1b77['push'](_0x3a1b77['shift']());}catch(_0x4b7671){_0x3a1b77['push'](_0x3a1b77['shift']());}}}(_0x808f,0x6fe48));var __decorate=this&&this[_0xf867b4(0xd6)]||function(_0x434ccd,_0x1f7639,_0x4acdea,_0x3da30f){const _0x7a980d=_0xf867b4;var _0x250d6d=arguments[_0x7a980d(0x90)],_0x24cb97=_0x250d6d<0x3?_0x1f7639:_0x3da30f===null?_0x3da30f=Object[_0x7a980d(0xc5)](_0x1f7639,_0x4acdea):_0x3da30f,_0x3e8ca6;if(typeof Reflect==='object'&&typeof Reflect[_0x7a980d(0x96)]===_0x7a980d(0xda))_0x24cb97=Reflect['decorate'](_0x434ccd,_0x1f7639,_0x4acdea,_0x3da30f);else{for(var _0x2702fb=_0x434ccd[_0x7a980d(0x90)]-0x1;_0x2702fb>=0x0;_0x2702fb--)if(_0x3e8ca6=_0x434ccd[_0x2702fb])_0x24cb97=(_0x250d6d<0x3?_0x3e8ca6(_0x24cb97):_0x250d6d>0x3?_0x3e8ca6(_0x1f7639,_0x4acdea,_0x24cb97):_0x3e8ca6(_0x1f7639,_0x4acdea))||_0x24cb97;}return _0x250d6d>0x3&&_0x24cb97&&Object[_0x7a980d(0x9e)](_0x1f7639,_0x4acdea,_0x24cb97),_0x24cb97;},__metadata=this&&this[_0xf867b4(0xca)]||function(_0x55f0bd,_0x373e3c){const _0x14b889=_0xf867b4;if(typeof Reflect===_0x14b889(0xc4)&&typeof Reflect[_0x14b889(0xc8)]===_0x14b889(0xda))return Reflect['metadata'](_0x55f0bd,_0x373e3c);},__param=this&&this[_0xf867b4(0xb7)]||function(_0x4ac899,_0x4922af){return function(_0x3a5d8a,_0x2b6c14){_0x4922af(_0x3a5d8a,_0x2b6c14,_0x4ac899);};};Object['defineProperty'](exports,_0xf867b4(0xb5),{'value':!![]}),exports[_0xf867b4(0xd4)]=void 0x0;function _0x808f(){const _0x593151=['sceneStr','status','loginBySceneStr','@nestjs/swagger','4dabkeZ','Post','@nestjs/common','length','Query','Get','VIEW','official','ApiOperation','decorate','notify','../../common/auth/jwtAuth.guard','get\x20通知>>>','loginByCode','205344rktkeS','239598nFytpF','content','defineProperty','3012WHAJAr','code','timestamp','12ajnXOq','design:paramtypes','getQRCode','110EqfdBI','prototype','xml:\x20','./dto/getQrSceneStr.dto','扫码登录轮询查询','genXmlMsgByConfig','2492565MVOEvE','split','subscribe','getRedirectUrl','./official.service','event','GetQrCodeDto','notifyPost','bindWxBySceneStr','officialBindAccountText','__esModule','获取绑定二维码的sceneStr','__param','send','msgtype','getJsapiTicket','signature','scanBindWx','公众号通知接口POST','design:returntype','env','Controller','9252793xIMNMJ','officialSubscribeText','获取登录跳转地址','object','getOwnPropertyDescriptor','qrscene_','OfficialService','metadata','公众号通知接口GET','__metadata','echostr','design:type','SCAN','log','fromusername','text','getQRCodeTicket','officialScanLoginText','11375qiKsvK','OfficialController','UseGuards','__decorate','Body','genXmlMsg','TRUE','function','getQRSceneStr','nonce','421144aTYaUX','2486334wuWfFR','CLICK','getQRSceneStrByBind','success','获取登录二维码sceneStr','eventkey','aotoPlay','officialService','includes','获取二维码','JwtAuthGuard','GetQrSceneStrDto','scan','2BpWuSF','Req'];_0x808f=function(){return _0x593151;};return _0x808f();}const common_1=require(_0xf867b4(0x8f)),swagger_1=require(_0xf867b4(0xf0)),jwtAuth_guard_1=require(_0xf867b4(0x98)),official_service_1=require(_0xf867b4(0xaf)),getQrCode_dto_1=require('./dto/getQrCode.dto'),getQrSceneStr_dto_1=require(_0xf867b4(0xa8));let OfficialController=class OfficialController{constructor(_0x2f86a0){const _0x48cbdf=_0xf867b4;this[_0x48cbdf(0xe5)]=_0x2f86a0;}async[_0xf867b4(0x97)](_0x44c3fd,_0x4aeeeb,_0x4acf89){const _0x22b79a=_0xf867b4;console[_0x22b79a(0xce)](_0x22b79a(0x99),_0x4aeeeb,_0x4acf89);const _0xb63571=await this[_0x22b79a(0xe5)]['verify'](_0x4aeeeb[_0x22b79a(0xbb)],_0x4aeeeb[_0x22b79a(0xdc)],_0x4aeeeb[_0x22b79a(0xa1)]);return _0xb63571?_0x4aeeeb[_0x22b79a(0xcb)]:'';}async[_0xf867b4(0xb2)](_0x17cfc8,_0x612957,_0x551917,_0x4ba056){const _0x120818=_0xf867b4,{xml:_0x3ec5ac}=_0x551917;console[_0x120818(0xce)](_0x120818(0xa7),_0x3ec5ac);if(_0x3ec5ac[_0x120818(0xb9)][0x0]=='event'){if(_0x3ec5ac[_0x120818(0xb0)][0x0]==_0x120818(0x93)||_0x3ec5ac['event'][0x0]==_0x120818(0xdf))return _0x4ba056[_0x120818(0xee)](0xc8)['send']('');if(_0x3ec5ac[_0x120818(0xb0)][0x0]==_0x120818(0xcd)){console[_0x120818(0xce)]('扫码');const _0x4043eb=_0x3ec5ac[_0x120818(0xe3)][0x0];if(_0x4043eb['includes']('/')){this[_0x120818(0xe5)][_0x120818(0xbc)](_0x3ec5ac[_0x120818(0xcf)][0x0],_0x4043eb);const _0xaec948=await this[_0x120818(0xe5)][_0x120818(0xaa)](_0x3ec5ac,_0x120818(0xb4));return _0x4ba056[_0x120818(0xee)](0xc8)[_0x120818(0xb8)](_0xaec948);}this[_0x120818(0xe5)]['scan'](_0x3ec5ac['fromusername'][0x0],_0x4043eb);const _0x241753=await this[_0x120818(0xe5)][_0x120818(0xaa)](_0x3ec5ac,_0x120818(0xd2));return _0x4ba056[_0x120818(0xee)](0xc8)['send'](_0x241753);}if(_0x3ec5ac[_0x120818(0xb0)][0x0]==_0x120818(0xad)){console['log']('订阅',_0x3ec5ac['eventkey'][0x0]);const _0x26678b=_0x3ec5ac[_0x120818(0xe3)][0x0][_0x120818(0xac)](_0x120818(0xc6))[0x1];console[_0x120818(0xce)]('sceneStr:\x20',_0x26678b);if(!_0x26678b){const _0x394b84=await this[_0x120818(0xe5)][_0x120818(0xaa)](_0x3ec5ac,'officialSubscribeText');return _0x4ba056[_0x120818(0xee)](0xc8)[_0x120818(0xb8)](_0x394b84);}if(_0x26678b[_0x120818(0xe6)]('/')){this['officialService'][_0x120818(0xbc)](_0x3ec5ac[_0x120818(0xcf)][0x0],_0x26678b);const _0x31a2ab=await this[_0x120818(0xe5)][_0x120818(0xaa)](_0x3ec5ac,'officialBindAccountText');return _0x4ba056[_0x120818(0xee)](0xc8)[_0x120818(0xb8)](_0x31a2ab);}this[_0x120818(0xe5)][_0x120818(0xea)](_0x3ec5ac['fromusername'][0x0],_0x26678b);const _0x3fdf83=await this[_0x120818(0xe5)][_0x120818(0xaa)](_0x3ec5ac,_0x120818(0xc2));return _0x4ba056['status'](0xc8)[_0x120818(0xb8)](_0x3fdf83);}if(_0x3ec5ac[_0x120818(0xb0)][0x0]=='unsubscribe')return _0x4ba056[_0x120818(0xee)](0xc8)[_0x120818(0xb8)]('');}if(_0x3ec5ac[_0x120818(0xb9)][0x0]==_0x120818(0xd0)){const _0x370e84=await this[_0x120818(0xe5)][_0x120818(0xe4)](_0x3ec5ac[_0x120818(0x9d)][0x0]),_0x5976f8=await this['officialService'][_0x120818(0xd8)](_0x3ec5ac,_0x370e84);return _0x4ba056['status'](0xc8)[_0x120818(0xb8)](_0x5976f8);}return _0x120818(0xe1);}async[_0xf867b4(0xdb)](_0x3982f3){const _0x3b894d=_0xf867b4;return this[_0x3b894d(0xe5)][_0x3b894d(0xdb)](_0x3982f3);}async[_0xf867b4(0xe0)](_0x2d2f60){const _0x5462ff=_0xf867b4;return this[_0x5462ff(0xe5)][_0x5462ff(0xe0)](_0x2d2f60);}async[_0xf867b4(0xa4)](_0x564e71){const _0x4accc9=_0xf867b4;if(process[_0x4accc9(0xbf)]['ISDEV']===_0x4accc9(0xd9))return'';const _0x2c5a48=await this[_0x4accc9(0xe5)][_0x4accc9(0xd1)](_0x564e71['sceneStr']);return'https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket='+encodeURIComponent(_0x2c5a48);}async[_0xf867b4(0xef)](_0x2703aa,_0x28e4ad){const _0x5ac549=_0xf867b4;return this[_0x5ac549(0xe5)][_0x5ac549(0xef)](_0x2703aa,_0x28e4ad['sceneStr']);}async[_0xf867b4(0xb3)](_0x2b25ff,_0x2d8f41){const _0xc4ccb0=_0xf867b4;return this[_0xc4ccb0(0xe5)]['bindWxBySceneStr'](_0x2b25ff,_0x2d8f41[_0xc4ccb0(0xed)]);}async[_0xf867b4(0xae)](_0x1bd853){const _0xa5d727=_0xf867b4;return this[_0xa5d727(0xe5)][_0xa5d727(0xae)](_0x1bd853['url']);}async[_0xf867b4(0xba)](_0x505a8d){const _0x38f982=_0xf867b4;return this[_0x38f982(0xe5)][_0x38f982(0xba)](_0x505a8d['url']);}async['loginByCode'](_0x217f7f,_0x2ae6c0){const _0x154eed=_0xf867b4;return this['officialService'][_0x154eed(0x9a)](_0x217f7f,_0x2ae6c0[_0x154eed(0xa0)]);}};function _0x2903(_0x16ea9f,_0x39bd2b){const _0x808fcd=_0x808f();return _0x2903=function(_0x290381,_0x24bbc1){_0x290381=_0x290381-0x8f;let _0x8a0a68=_0x808fcd[_0x290381];return _0x8a0a68;},_0x2903(_0x16ea9f,_0x39bd2b);}__decorate([(0x0,common_1[_0xf867b4(0x92)])(_0xf867b4(0x97)),(0x0,swagger_1[_0xf867b4(0x95)])({'summary':_0xf867b4(0xc9)}),__param(0x0,(0x0,common_1[_0xf867b4(0xec)])()),__param(0x1,(0x0,common_1[_0xf867b4(0x91)])()),__param(0x2,(0x0,common_1[_0xf867b4(0xd7)])()),__metadata(_0xf867b4(0xcc),Function),__metadata(_0xf867b4(0xa3),[Object,Object,Object]),__metadata(_0xf867b4(0xbe),Promise)],OfficialController[_0xf867b4(0xa6)],_0xf867b4(0x97),null),__decorate([(0x0,common_1['Post'])(_0xf867b4(0x97)),(0x0,swagger_1[_0xf867b4(0x95)])({'summary':_0xf867b4(0xbd)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0xf867b4(0x91)])()),__param(0x2,(0x0,common_1[_0xf867b4(0xd7)])()),__param(0x3,(0x0,common_1['Res'])()),__metadata('design:type',Function),__metadata(_0xf867b4(0xa3),[Object,Object,Object,Object]),__metadata('design:returntype',Promise)],OfficialController['prototype'],'notifyPost',null),__decorate([(0x0,common_1[_0xf867b4(0xf2)])(_0xf867b4(0xdb)),(0x0,swagger_1[_0xf867b4(0x95)])({'summary':_0xf867b4(0xe2)}),__param(0x0,(0x0,common_1[_0xf867b4(0xd7)])()),__metadata(_0xf867b4(0xcc),Function),__metadata(_0xf867b4(0xa3),[getQrSceneStr_dto_1[_0xf867b4(0xe9)]]),__metadata(_0xf867b4(0xbe),Promise)],OfficialController[_0xf867b4(0xa6)],_0xf867b4(0xdb),null),__decorate([(0x0,common_1['Post'])(_0xf867b4(0xe0)),(0x0,swagger_1['ApiOperation'])({'summary':_0xf867b4(0xb6)}),(0x0,common_1[_0xf867b4(0xd5)])(jwtAuth_guard_1['JwtAuthGuard']),__param(0x0,(0x0,common_1['Req'])()),__metadata(_0xf867b4(0xcc),Function),__metadata(_0xf867b4(0xa3),[Object]),__metadata('design:returntype',Promise)],OfficialController[_0xf867b4(0xa6)],'getQRSceneStrByBind',null),__decorate([(0x0,common_1[_0xf867b4(0x92)])('getQRCode'),(0x0,swagger_1[_0xf867b4(0x95)])({'summary':_0xf867b4(0xe7)}),__param(0x0,(0x0,common_1[_0xf867b4(0x91)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[getQrCode_dto_1[_0xf867b4(0xb1)]]),__metadata(_0xf867b4(0xbe),Promise)],OfficialController[_0xf867b4(0xa6)],_0xf867b4(0xa4),null),__decorate([(0x0,common_1[_0xf867b4(0xf2)])(_0xf867b4(0xef)),(0x0,swagger_1['ApiOperation'])({'summary':_0xf867b4(0xa9)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0xf867b4(0xd7)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,getQrCode_dto_1[_0xf867b4(0xb1)]]),__metadata('design:returntype',Promise)],OfficialController[_0xf867b4(0xa6)],'loginBySceneStr',null),__decorate([(0x0,common_1[_0xf867b4(0xf2)])('bindWxBySceneStr'),(0x0,swagger_1[_0xf867b4(0x95)])({'summary':'扫码绑定轮询查询'}),(0x0,common_1[_0xf867b4(0xd5)])(jwtAuth_guard_1[_0xf867b4(0xe8)]),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0xf867b4(0xd7)])()),__metadata(_0xf867b4(0xcc),Function),__metadata(_0xf867b4(0xa3),[Object,getQrCode_dto_1['GetQrCodeDto']]),__metadata(_0xf867b4(0xbe),Promise)],OfficialController[_0xf867b4(0xa6)],_0xf867b4(0xb3),null),__decorate([(0x0,common_1[_0xf867b4(0xf2)])('getRedirectUrl'),(0x0,swagger_1['ApiOperation'])({'summary':_0xf867b4(0xc3)}),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0xf867b4(0xcc),Function),__metadata(_0xf867b4(0xa3),[Object]),__metadata('design:returntype',Promise)],OfficialController[_0xf867b4(0xa6)],_0xf867b4(0xae),null),__decorate([(0x0,common_1[_0xf867b4(0xf2)])(_0xf867b4(0xba)),(0x0,swagger_1[_0xf867b4(0x95)])({'summary':'获取注册配置'}),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0xf867b4(0xcc),Function),__metadata('design:paramtypes',[Object]),__metadata(_0xf867b4(0xbe),Promise)],OfficialController[_0xf867b4(0xa6)],'getJsapiTicket',null),__decorate([(0x0,common_1['Post'])('loginByCode'),(0x0,swagger_1[_0xf867b4(0x95)])({'summary':'公众号静默登录'}),__param(0x0,(0x0,common_1[_0xf867b4(0xec)])()),__param(0x1,(0x0,common_1[_0xf867b4(0xd7)])()),__metadata('design:type',Function),__metadata(_0xf867b4(0xa3),[Object,Object]),__metadata(_0xf867b4(0xbe),Promise)],OfficialController['prototype'],'loginByCode',null),OfficialController=__decorate([(0x0,swagger_1['ApiTags'])('official'),(0x0,common_1[_0xf867b4(0xc0)])(_0xf867b4(0x94)),__metadata(_0xf867b4(0xa3),[official_service_1[_0xf867b4(0xc7)]])],OfficialController),exports[_0xf867b4(0xd4)]=OfficialController;