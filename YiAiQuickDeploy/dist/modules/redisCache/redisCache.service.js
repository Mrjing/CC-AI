'use strict';const _0x3bab28=_0x1441;(function(_0x2d3bc8,_0x1c577f){const _0x502bed=_0x1441,_0x486465=_0x2d3bc8();while(!![]){try{const _0x2b0cfe=parseInt(_0x502bed(0x94))/0x1*(-parseInt(_0x502bed(0x83))/0x2)+parseInt(_0x502bed(0x90))/0x3*(-parseInt(_0x502bed(0x84))/0x4)+parseInt(_0x502bed(0x8d))/0x5*(parseInt(_0x502bed(0x8a))/0x6)+-parseInt(_0x502bed(0x78))/0x7*(-parseInt(_0x502bed(0x85))/0x8)+parseInt(_0x502bed(0x6a))/0x9+parseInt(_0x502bed(0x8c))/0xa*(-parseInt(_0x502bed(0x92))/0xb)+parseInt(_0x502bed(0x75))/0xc;if(_0x2b0cfe===_0x1c577f)break;else _0x486465['push'](_0x486465['shift']());}catch(_0x192326){_0x486465['push'](_0x486465['shift']());}}}(_0x1ccd,0x4c309));function _0x1ccd(){const _0x14919a=['admin','expire','152404dMbspU','20LFZUVs','494656rZIVdc','HttpStatus','tokens:','function','RedisCacheService','6jlyhOa','redisClient','533010wRNGKt','266275AOIJzj','REDIS_CLIENT','object','239511BDtWnI','ttl','88hUnGRS','metadata','3ahccwM','test','user','onModuleInit','3545379dCIKlX','invalidateTokens','set','length','decorate','del','HttpException','zRange','super','aaa','design:paramtypes','4351176MrCbEE','__esModule','Injectable','63azZoxK','__param','get','BAD_REQUEST','token:','checkTokenAuth','您已在其他设备覆盖登录、请您重新登录！','defineProperty','UNAUTHORIZED'];_0x1ccd=function(){return _0x14919a;};return _0x1ccd();}var __decorate=this&&this['__decorate']||function(_0x597a9b,_0x4f5f7c,_0x241294,_0x4723a2){const _0x354910=_0x1441;var _0xd77f5c=arguments['length'],_0x3f7be7=_0xd77f5c<0x3?_0x4f5f7c:_0x4723a2===null?_0x4723a2=Object['getOwnPropertyDescriptor'](_0x4f5f7c,_0x241294):_0x4723a2,_0x1608cd;if(typeof Reflect===_0x354910(0x8f)&&typeof Reflect[_0x354910(0x6e)]==='function')_0x3f7be7=Reflect[_0x354910(0x6e)](_0x597a9b,_0x4f5f7c,_0x241294,_0x4723a2);else{for(var _0x2a4773=_0x597a9b[_0x354910(0x6d)]-0x1;_0x2a4773>=0x0;_0x2a4773--)if(_0x1608cd=_0x597a9b[_0x2a4773])_0x3f7be7=(_0xd77f5c<0x3?_0x1608cd(_0x3f7be7):_0xd77f5c>0x3?_0x1608cd(_0x4f5f7c,_0x241294,_0x3f7be7):_0x1608cd(_0x4f5f7c,_0x241294))||_0x3f7be7;}return _0xd77f5c>0x3&&_0x3f7be7&&Object['defineProperty'](_0x4f5f7c,_0x241294,_0x3f7be7),_0x3f7be7;},__metadata=this&&this['__metadata']||function(_0x41704f,_0x331242){const _0x3a5396=_0x1441;if(typeof Reflect===_0x3a5396(0x8f)&&typeof Reflect[_0x3a5396(0x93)]===_0x3a5396(0x88))return Reflect[_0x3a5396(0x93)](_0x41704f,_0x331242);},__param=this&&this[_0x3bab28(0x79)]||function(_0x3c771d,_0x3d8443){return function(_0x3d96fe,_0x1522e7){_0x3d8443(_0x3d96fe,_0x1522e7,_0x3c771d);};};Object[_0x3bab28(0x7f)](exports,_0x3bab28(0x76),{'value':!![]}),exports[_0x3bab28(0x89)]=void 0x0;const common_1=require('@nestjs/common');function _0x1441(_0x4070dd,_0x349ad5){const _0x1ccdfa=_0x1ccd();return _0x1441=function(_0x14414c,_0x55c35c){_0x14414c=_0x14414c-0x69;let _0x1d315e=_0x1ccdfa[_0x14414c];return _0x1d315e;},_0x1441(_0x4070dd,_0x349ad5);}let RedisCacheService=class RedisCacheService{constructor(_0x3d1026){const _0x20e765=_0x3bab28;this[_0x20e765(0x8b)]=_0x3d1026;}async[_0x3bab28(0x69)](){}[_0x3bab28(0x95)](){const _0x5673f3=_0x3bab28;return this['redisClient'][_0x5673f3(0x6c)](_0x5673f3(0x73),0x6f),0x1;}async['get'](_0x549915){const _0x15e83d=_0x3bab28,{key:_0x476130}=_0x549915,_0x2a9218=await this[_0x15e83d(0x8b)][_0x15e83d(0x7a)](_0x476130);return await this[_0x15e83d(0x8b)]['get'](_0x476130);}async[_0x3bab28(0x6c)](_0x244917,_0x108ce7){const _0x36946f=_0x3bab28;try{const {key:_0x667789,val:_0x1ab1f1}=_0x244917;await this[_0x36946f(0x8b)][_0x36946f(0x6c)](_0x667789,_0x1ab1f1),_0x108ce7&&await this[_0x36946f(0x8b)][_0x36946f(0x82)](_0x667789,_0x108ce7);return;}catch(_0x5d287b){throw new common_1[(_0x36946f(0x70))](_0x5d287b,common_1[_0x36946f(0x86)][_0x36946f(0x7b)]);}}async[_0x3bab28(0x91)](_0x1730e8){const _0x670d2d=_0x3bab28;return await this[_0x670d2d(0x8b)]['ttl'](_0x1730e8);}async[_0x3bab28(0x6f)](_0x2be7db){const _0x41636b=_0x3bab28,{key:_0x27e139}=_0x2be7db;await this[_0x41636b(0x8b)][_0x41636b(0x6f)](_0x27e139);return;}async['saveToken'](_0x580384,_0x4410ca){const _0x45ba7d=_0x3bab28,_0xc6781a=await this[_0x45ba7d(0x8b)][_0x45ba7d(0x71)](_0x45ba7d(0x87)+_0x580384,0x0,-0x1);await this[_0x45ba7d(0x6b)](_0x580384,_0xc6781a),this[_0x45ba7d(0x8b)][_0x45ba7d(0x6c)](_0x45ba7d(0x7c)+_0x580384,_0x4410ca);}async[_0x3bab28(0x6b)](_0x1868ea,_0x427dd4){_0x427dd4['forEach'](_0x48d1ef=>{const _0x26a679=_0x1441;this[_0x26a679(0x8b)][_0x26a679(0x6f)](_0x26a679(0x7c)+_0x1868ea+':'+_0x48d1ef);});}async[_0x3bab28(0x7d)](_0x5e533a,_0x40d17c){const _0x4ddef5=_0x3bab28,{id:_0x1288a3,role:_0x50eb75}=_0x40d17c[_0x4ddef5(0x96)];if(_0x50eb75==='visitor')return!![];const _0x2ac1bf=await this['redisClient']['get'](_0x4ddef5(0x7c)+_0x1288a3);if(_0x2ac1bf===null)return await this[_0x4ddef5(0x8b)][_0x4ddef5(0x6c)](_0x4ddef5(0x7c)+_0x1288a3,_0x5e533a),!![];if(_0x2ac1bf!==_0x5e533a){if([_0x4ddef5(0x72),_0x4ddef5(0x81)]['includes'](_0x50eb75))return!![];throw new common_1[(_0x4ddef5(0x70))](_0x4ddef5(0x7e),common_1[_0x4ddef5(0x86)][_0x4ddef5(0x80)]);}}};RedisCacheService=__decorate([(0x0,common_1[_0x3bab28(0x77)])(),__param(0x0,(0x0,common_1['Inject'])(_0x3bab28(0x8e))),__metadata(_0x3bab28(0x74),[Object])],RedisCacheService),exports['RedisCacheService']=RedisCacheService;