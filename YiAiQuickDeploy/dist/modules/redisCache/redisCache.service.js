'use strict';const _0x1b79b6=_0xd2ea;(function(_0xc4dae0,_0x5a3819){const _0x2fa5b5=_0xd2ea,_0x5836e7=_0xc4dae0();while(!![]){try{const _0xf21ec1=parseInt(_0x2fa5b5(0xcf))/0x1*(-parseInt(_0x2fa5b5(0xd8))/0x2)+parseInt(_0x2fa5b5(0xd4))/0x3*(parseInt(_0x2fa5b5(0xc6))/0x4)+parseInt(_0x2fa5b5(0xda))/0x5+parseInt(_0x2fa5b5(0xbf))/0x6+-parseInt(_0x2fa5b5(0xb9))/0x7+parseInt(_0x2fa5b5(0xc0))/0x8+-parseInt(_0x2fa5b5(0xb3))/0x9*(parseInt(_0x2fa5b5(0xb0))/0xa);if(_0xf21ec1===_0x5a3819)break;else _0x5836e7['push'](_0x5836e7['shift']());}catch(_0x1ab189){_0x5836e7['push'](_0x5836e7['shift']());}}}(_0x23ff,0xf2346));var __decorate=this&&this[_0x1b79b6(0xb2)]||function(_0x311cde,_0xd71fe7,_0x51e444,_0x11c84c){const _0x1527db=_0x1b79b6;var _0x41df9a=arguments['length'],_0x49bae1=_0x41df9a<0x3?_0xd71fe7:_0x11c84c===null?_0x11c84c=Object['getOwnPropertyDescriptor'](_0xd71fe7,_0x51e444):_0x11c84c,_0x4fb372;if(typeof Reflect===_0x1527db(0xc7)&&typeof Reflect[_0x1527db(0xb4)]==='function')_0x49bae1=Reflect[_0x1527db(0xb4)](_0x311cde,_0xd71fe7,_0x51e444,_0x11c84c);else{for(var _0x8b4e97=_0x311cde[_0x1527db(0xb8)]-0x1;_0x8b4e97>=0x0;_0x8b4e97--)if(_0x4fb372=_0x311cde[_0x8b4e97])_0x49bae1=(_0x41df9a<0x3?_0x4fb372(_0x49bae1):_0x41df9a>0x3?_0x4fb372(_0xd71fe7,_0x51e444,_0x49bae1):_0x4fb372(_0xd71fe7,_0x51e444))||_0x49bae1;}return _0x41df9a>0x3&&_0x49bae1&&Object[_0x1527db(0xd6)](_0xd71fe7,_0x51e444,_0x49bae1),_0x49bae1;},__metadata=this&&this['__metadata']||function(_0x24e731,_0x117909){const _0x2decf6=_0x1b79b6;if(typeof Reflect==='object'&&typeof Reflect[_0x2decf6(0xba)]===_0x2decf6(0xd7))return Reflect[_0x2decf6(0xba)](_0x24e731,_0x117909);},__param=this&&this[_0x1b79b6(0xd0)]||function(_0x22bb37,_0x47599a){return function(_0x1cc88f,_0xc68b2b){_0x47599a(_0x1cc88f,_0xc68b2b,_0x22bb37);};};Object[_0x1b79b6(0xd6)](exports,'__esModule',{'value':!![]}),exports[_0x1b79b6(0xc1)]=void 0x0;function _0x23ff(){const _0x154176=['tokens:','5724560wzZwwp','HttpException','20109410aLUBRi','checkTokenAuth','__decorate','9XfmgbX','decorate','visitor','user','design:paramtypes','length','5418616nzCXFs','metadata','includes','Injectable','invalidateTokens','token:','1172946eDxLfy','9359648DXxeEO','RedisCacheService','del','ttl','您已在其他设备覆盖登录、请您重新登录！','zRange','36992gzTyjJ','object','@nestjs/common','set','redisClient','test','HttpStatus','expire','UNAUTHORIZED','1rmRKsK','__param','forEach','get','aaa','603QuTidm','admin','defineProperty','function','1184216XFSwxH'];_0x23ff=function(){return _0x154176;};return _0x23ff();}const common_1=require(_0x1b79b6(0xc8));function _0xd2ea(_0x4d2c8f,_0x1c3dc2){const _0x23ffce=_0x23ff();return _0xd2ea=function(_0xd2eaf8,_0xaa558a){_0xd2eaf8=_0xd2eaf8-0xb0;let _0x7aab22=_0x23ffce[_0xd2eaf8];return _0x7aab22;},_0xd2ea(_0x4d2c8f,_0x1c3dc2);}let RedisCacheService=class RedisCacheService{constructor(_0x4ea552){this['redisClient']=_0x4ea552;}async['onModuleInit'](){}[_0x1b79b6(0xcb)](){const _0x559aa3=_0x1b79b6;return this[_0x559aa3(0xca)][_0x559aa3(0xc9)](_0x559aa3(0xd3),0x6f),0x1;}async[_0x1b79b6(0xd2)](_0x12132d){const _0x38fb84=_0x1b79b6,{key:_0x36c3ff}=_0x12132d,_0x269692=await this[_0x38fb84(0xca)][_0x38fb84(0xd2)](_0x36c3ff);return await this['redisClient'][_0x38fb84(0xd2)](_0x36c3ff);}async['set'](_0xc7e496,_0xd27f29){const _0x4e26d6=_0x1b79b6;try{const {key:_0x354217,val:_0x138b4a}=_0xc7e496;await this[_0x4e26d6(0xca)][_0x4e26d6(0xc9)](_0x354217,_0x138b4a),_0xd27f29&&await this['redisClient'][_0x4e26d6(0xcd)](_0x354217,_0xd27f29);return;}catch(_0x5adfa9){throw new common_1[(_0x4e26d6(0xdb))](_0x5adfa9,common_1[_0x4e26d6(0xcc)]['BAD_REQUEST']);}}async[_0x1b79b6(0xc3)](_0x55f3bc){const _0x554331=_0x1b79b6;return await this[_0x554331(0xca)][_0x554331(0xc3)](_0x55f3bc);}async[_0x1b79b6(0xc2)](_0x5be843){const _0x2f61ab=_0x1b79b6,{key:_0x16341d}=_0x5be843;await this[_0x2f61ab(0xca)][_0x2f61ab(0xc2)](_0x16341d);return;}async['saveToken'](_0x2921d3,_0x1d50d5){const _0x104957=_0x1b79b6,_0x8a333a=await this[_0x104957(0xca)][_0x104957(0xc5)](_0x104957(0xd9)+_0x2921d3,0x0,-0x1);await this['invalidateTokens'](_0x2921d3,_0x8a333a),this[_0x104957(0xca)][_0x104957(0xc9)](_0x104957(0xbe)+_0x2921d3,_0x1d50d5);}async[_0x1b79b6(0xbd)](_0x77d8e8,_0x50fec5){const _0x311073=_0x1b79b6;_0x50fec5[_0x311073(0xd1)](_0x49d83f=>{const _0x5d532a=_0x311073;this[_0x5d532a(0xca)][_0x5d532a(0xc2)](_0x5d532a(0xbe)+_0x77d8e8+':'+_0x49d83f);});}async[_0x1b79b6(0xb1)](_0x245da7,_0x4c75af){const _0x47d8d5=_0x1b79b6,{id:_0x51c64e,role:_0x284b50}=_0x4c75af[_0x47d8d5(0xb6)];if(_0x284b50===_0x47d8d5(0xb5))return!![];const _0xd12ffc=await this[_0x47d8d5(0xca)][_0x47d8d5(0xd2)](_0x47d8d5(0xbe)+_0x51c64e);if(_0xd12ffc===null)return await this['redisClient'][_0x47d8d5(0xc9)](_0x47d8d5(0xbe)+_0x51c64e,_0x245da7),!![];if(_0xd12ffc!==_0x245da7){if(['super',_0x47d8d5(0xd5)][_0x47d8d5(0xbb)](_0x284b50))return!![];throw new common_1[(_0x47d8d5(0xdb))](_0x47d8d5(0xc4),common_1[_0x47d8d5(0xcc)][_0x47d8d5(0xce)]);}}};RedisCacheService=__decorate([(0x0,common_1[_0x1b79b6(0xbc)])(),__param(0x0,(0x0,common_1['Inject'])('REDIS_CLIENT')),__metadata(_0x1b79b6(0xb7),[Object])],RedisCacheService),exports[_0x1b79b6(0xc1)]=RedisCacheService;