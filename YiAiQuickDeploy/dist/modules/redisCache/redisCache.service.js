'use strict';function _0x34b5(_0x51ba91,_0x24c02c){const _0x3e35ed=_0x3e35();return _0x34b5=function(_0x34b525,_0x4dc4c8){_0x34b525=_0x34b525-0x72;let _0x3a6f63=_0x3e35ed[_0x34b525];return _0x3a6f63;},_0x34b5(_0x51ba91,_0x24c02c);}function _0x3e35(){const _0x572fdc=['super','object','UNAUTHORIZED','90AhHyiK','del','visitor','set','Injectable','redisClient','user','tokens:','includes','length','decorate','1057315EgTqOy','token:','aaa','1443932jlqCCs','function','invalidateTokens','您已在其他设备覆盖登录、请您重新登录！','test','ttl','@nestjs/common','REDIS_CLIENT','362981hhYZzs','get','defineProperty','HttpException','metadata','zRange','HttpStatus','5202925roXSdg','2kWVBNU','onModuleInit','RedisCacheService','__decorate','admin','forEach','2363745hjnpFU','Inject','6286734ovlJaq','getOwnPropertyDescriptor','BAD_REQUEST','__metadata','saveToken','870152FClsYr'];_0x3e35=function(){return _0x572fdc;};return _0x3e35();}const _0x4ead87=_0x34b5;(function(_0x49cbc6,_0x2eb474){const _0x59caec=_0x34b5,_0x2f48cb=_0x49cbc6();while(!![]){try{const _0x500646=-parseInt(_0x59caec(0x94))/0x1*(-parseInt(_0x59caec(0x9c))/0x2)+parseInt(_0x59caec(0x73))/0x3+parseInt(_0x59caec(0x8c))/0x4+-parseInt(_0x59caec(0x89))/0x5+-parseInt(_0x59caec(0x75))/0x6+-parseInt(_0x59caec(0x9b))/0x7+parseInt(_0x59caec(0x7a))/0x8*(parseInt(_0x59caec(0x7e))/0x9);if(_0x500646===_0x2eb474)break;else _0x2f48cb['push'](_0x2f48cb['shift']());}catch(_0x12978f){_0x2f48cb['push'](_0x2f48cb['shift']());}}}(_0x3e35,0x91c32));var __decorate=this&&this[_0x4ead87(0x9f)]||function(_0x30d58f,_0x5cc42d,_0x15d44e,_0x2f8861){const _0x3fca64=_0x4ead87;var _0x2d5cdf=arguments['length'],_0x4e39b5=_0x2d5cdf<0x3?_0x5cc42d:_0x2f8861===null?_0x2f8861=Object[_0x3fca64(0x76)](_0x5cc42d,_0x15d44e):_0x2f8861,_0x35756b;if(typeof Reflect===_0x3fca64(0x7c)&&typeof Reflect[_0x3fca64(0x88)]===_0x3fca64(0x8d))_0x4e39b5=Reflect[_0x3fca64(0x88)](_0x30d58f,_0x5cc42d,_0x15d44e,_0x2f8861);else{for(var _0xa3573a=_0x30d58f[_0x3fca64(0x87)]-0x1;_0xa3573a>=0x0;_0xa3573a--)if(_0x35756b=_0x30d58f[_0xa3573a])_0x4e39b5=(_0x2d5cdf<0x3?_0x35756b(_0x4e39b5):_0x2d5cdf>0x3?_0x35756b(_0x5cc42d,_0x15d44e,_0x4e39b5):_0x35756b(_0x5cc42d,_0x15d44e))||_0x4e39b5;}return _0x2d5cdf>0x3&&_0x4e39b5&&Object[_0x3fca64(0x96)](_0x5cc42d,_0x15d44e,_0x4e39b5),_0x4e39b5;},__metadata=this&&this[_0x4ead87(0x78)]||function(_0x5c4c5e,_0x2e4252){const _0x41eaff=_0x4ead87;if(typeof Reflect==='object'&&typeof Reflect[_0x41eaff(0x98)]===_0x41eaff(0x8d))return Reflect[_0x41eaff(0x98)](_0x5c4c5e,_0x2e4252);},__param=this&&this['__param']||function(_0x1d56f6,_0x4e771c){return function(_0x53a8ce,_0x1c5edb){_0x4e771c(_0x53a8ce,_0x1c5edb,_0x1d56f6);};};Object[_0x4ead87(0x96)](exports,'__esModule',{'value':!![]}),exports[_0x4ead87(0x9e)]=void 0x0;const common_1=require(_0x4ead87(0x92));let RedisCacheService=class RedisCacheService{constructor(_0xe2bf91){const _0x837a3a=_0x4ead87;this[_0x837a3a(0x83)]=_0xe2bf91;}async[_0x4ead87(0x9d)](){}[_0x4ead87(0x90)](){const _0x4ac8c4=_0x4ead87;return this[_0x4ac8c4(0x83)][_0x4ac8c4(0x81)](_0x4ac8c4(0x8b),0x6f),0x1;}async[_0x4ead87(0x95)](_0x318dc4){const _0x561610=_0x4ead87,{key:_0x272965}=_0x318dc4,_0x5dd53d=await this[_0x561610(0x83)][_0x561610(0x95)](_0x272965);return await this['redisClient'][_0x561610(0x95)](_0x272965);}async[_0x4ead87(0x81)](_0x565c43,_0x67d33f){const _0xcb9ec0=_0x4ead87;try{const {key:_0x1d71ee,val:_0x50c39e}=_0x565c43;await this['redisClient']['set'](_0x1d71ee,_0x50c39e),_0x67d33f&&await this[_0xcb9ec0(0x83)]['expire'](_0x1d71ee,_0x67d33f);return;}catch(_0x552867){throw new common_1[(_0xcb9ec0(0x97))](_0x552867,common_1[_0xcb9ec0(0x9a)][_0xcb9ec0(0x77)]);}}async[_0x4ead87(0x91)](_0xba71d0){const _0x412b5d=_0x4ead87;return await this['redisClient'][_0x412b5d(0x91)](_0xba71d0);}async[_0x4ead87(0x7f)](_0x56000c){const _0x5e26ce=_0x4ead87,{key:_0x203dac}=_0x56000c;await this[_0x5e26ce(0x83)][_0x5e26ce(0x7f)](_0x203dac);return;}async[_0x4ead87(0x79)](_0x515765,_0x509440){const _0x1f647e=_0x4ead87,_0x4a7bc0=await this[_0x1f647e(0x83)][_0x1f647e(0x99)](_0x1f647e(0x85)+_0x515765,0x0,-0x1);await this['invalidateTokens'](_0x515765,_0x4a7bc0),this[_0x1f647e(0x83)][_0x1f647e(0x81)](_0x1f647e(0x8a)+_0x515765,_0x509440);}async[_0x4ead87(0x8e)](_0x504ed7,_0x1dfa90){const _0xd6edd7=_0x4ead87;_0x1dfa90[_0xd6edd7(0x72)](_0x3ec0e9=>{const _0x350f66=_0xd6edd7;this[_0x350f66(0x83)][_0x350f66(0x7f)](_0x350f66(0x8a)+_0x504ed7+':'+_0x3ec0e9);});}async['checkTokenAuth'](_0x16dd92,_0x451764){const _0x386a23=_0x4ead87,{id:_0x1410b5,role:_0x446dde}=_0x451764[_0x386a23(0x84)];if(_0x446dde===_0x386a23(0x80))return!![];const _0x3cb86e=await this[_0x386a23(0x83)][_0x386a23(0x95)](_0x386a23(0x8a)+_0x1410b5);if(_0x3cb86e===null)return await this[_0x386a23(0x83)][_0x386a23(0x81)](_0x386a23(0x8a)+_0x1410b5,_0x16dd92),!![];if(_0x3cb86e!==_0x16dd92){if([_0x386a23(0x7b),_0x386a23(0xa0)][_0x386a23(0x86)](_0x446dde))return!![];throw new common_1[(_0x386a23(0x97))](_0x386a23(0x8f),common_1['HttpStatus'][_0x386a23(0x7d)]);}}};RedisCacheService=__decorate([(0x0,common_1[_0x4ead87(0x82)])(),__param(0x0,(0x0,common_1[_0x4ead87(0x74)])(_0x4ead87(0x93))),__metadata('design:paramtypes',[Object])],RedisCacheService),exports['RedisCacheService']=RedisCacheService;