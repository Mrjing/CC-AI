'use strict';const _0x4db576=_0x2751;(function(_0x27fb3a,_0x400109){const _0x3fde77=_0x2751,_0x3cfd98=_0x27fb3a();while(!![]){try{const _0x2b012c=-parseInt(_0x3fde77(0x16f))/0x1+parseInt(_0x3fde77(0x154))/0x2*(-parseInt(_0x3fde77(0x15e))/0x3)+-parseInt(_0x3fde77(0x163))/0x4+parseInt(_0x3fde77(0x179))/0x5+parseInt(_0x3fde77(0x171))/0x6*(-parseInt(_0x3fde77(0x178))/0x7)+-parseInt(_0x3fde77(0x150))/0x8+parseInt(_0x3fde77(0x166))/0x9;if(_0x2b012c===_0x400109)break;else _0x3cfd98['push'](_0x3cfd98['shift']());}catch(_0x4410ef){_0x3cfd98['push'](_0x3cfd98['shift']());}}}(_0x356a,0x2dd1e));function _0x2751(_0x34a805,_0x18c147){const _0x356ae4=_0x356a();return _0x2751=function(_0x2751fd,_0x399756){_0x2751fd=_0x2751fd-0x150;let _0x381254=_0x356ae4[_0x2751fd];return _0x381254;},_0x2751(_0x34a805,_0x18c147);}function _0x356a(){const _0x308ffc=['onModuleInit','redisClient','tokens:','Injectable','RedisCacheService','15afjlCS','decorate','visitor','aaa','HttpException','415064OUMsnT','function','defineProperty','7529463KfWuWe','forEach','get','zRange','set','__esModule','length','UNAUTHORIZED','HttpStatus','252541aEDYbI','__param','42CRzSzA','user','saveToken','design:paramtypes','invalidateTokens','您已在其他设备覆盖登录、请您重新登录！','test','262164nakkSj','1737685TmuydN','1796080BTTNAX','includes','metadata','object','61394XiWUtO','token:','BAD_REQUEST','__decorate','del'];_0x356a=function(){return _0x308ffc;};return _0x356a();}var __decorate=this&&this[_0x4db576(0x157)]||function(_0x378b56,_0x1ec1d6,_0x91f791,_0x10eb26){const _0x2715d9=_0x4db576;var _0x252e4a=arguments[_0x2715d9(0x16c)],_0x197e58=_0x252e4a<0x3?_0x1ec1d6:_0x10eb26===null?_0x10eb26=Object['getOwnPropertyDescriptor'](_0x1ec1d6,_0x91f791):_0x10eb26,_0x389b5a;if(typeof Reflect===_0x2715d9(0x153)&&typeof Reflect[_0x2715d9(0x15f)]===_0x2715d9(0x164))_0x197e58=Reflect['decorate'](_0x378b56,_0x1ec1d6,_0x91f791,_0x10eb26);else{for(var _0x195eb7=_0x378b56[_0x2715d9(0x16c)]-0x1;_0x195eb7>=0x0;_0x195eb7--)if(_0x389b5a=_0x378b56[_0x195eb7])_0x197e58=(_0x252e4a<0x3?_0x389b5a(_0x197e58):_0x252e4a>0x3?_0x389b5a(_0x1ec1d6,_0x91f791,_0x197e58):_0x389b5a(_0x1ec1d6,_0x91f791))||_0x197e58;}return _0x252e4a>0x3&&_0x197e58&&Object[_0x2715d9(0x165)](_0x1ec1d6,_0x91f791,_0x197e58),_0x197e58;},__metadata=this&&this['__metadata']||function(_0x5019dc,_0xd4a3dd){const _0x20613b=_0x4db576;if(typeof Reflect==='object'&&typeof Reflect[_0x20613b(0x152)]===_0x20613b(0x164))return Reflect['metadata'](_0x5019dc,_0xd4a3dd);},__param=this&&this[_0x4db576(0x170)]||function(_0x4f2933,_0x269679){return function(_0x22260e,_0x225051){_0x269679(_0x22260e,_0x225051,_0x4f2933);};};Object[_0x4db576(0x165)](exports,_0x4db576(0x16b),{'value':!![]}),exports['RedisCacheService']=void 0x0;const common_1=require('@nestjs/common');let RedisCacheService=class RedisCacheService{constructor(_0x36d33c){const _0x5256fa=_0x4db576;this[_0x5256fa(0x15a)]=_0x36d33c;}async[_0x4db576(0x159)](){}[_0x4db576(0x177)](){const _0x31057f=_0x4db576;return this[_0x31057f(0x15a)][_0x31057f(0x16a)](_0x31057f(0x161),0x6f),0x1;}async[_0x4db576(0x168)](_0x171b71){const _0xc38c98=_0x4db576,{key:_0x50c0f8}=_0x171b71,_0x4eb84c=await this[_0xc38c98(0x15a)][_0xc38c98(0x168)](_0x50c0f8);return await this[_0xc38c98(0x15a)][_0xc38c98(0x168)](_0x50c0f8);}async[_0x4db576(0x16a)](_0xe13186,_0x341c77){const _0x59e36c=_0x4db576;try{const {key:_0x566d50,val:_0x345e86}=_0xe13186;await this[_0x59e36c(0x15a)][_0x59e36c(0x16a)](_0x566d50,_0x345e86),_0x341c77&&await this[_0x59e36c(0x15a)]['expire'](_0x566d50,_0x341c77);return;}catch(_0x223d03){throw new common_1[(_0x59e36c(0x162))](_0x223d03,common_1[_0x59e36c(0x16e)][_0x59e36c(0x156)]);}}async['ttl'](_0x542f32){return await this['redisClient']['ttl'](_0x542f32);}async[_0x4db576(0x158)](_0x48d10a){const _0x442b41=_0x4db576,{key:_0x46c6f8}=_0x48d10a;await this[_0x442b41(0x15a)]['del'](_0x46c6f8);return;}async[_0x4db576(0x173)](_0x5b63c4,_0x45b0a6){const _0x56f81d=_0x4db576,_0x5d63fb=await this[_0x56f81d(0x15a)][_0x56f81d(0x169)](_0x56f81d(0x15b)+_0x5b63c4,0x0,-0x1);await this[_0x56f81d(0x175)](_0x5b63c4,_0x5d63fb),this[_0x56f81d(0x15a)]['set'](_0x56f81d(0x155)+_0x5b63c4,_0x45b0a6);}async[_0x4db576(0x175)](_0x1ff472,_0x6492e7){const _0x2df4ea=_0x4db576;_0x6492e7[_0x2df4ea(0x167)](_0x3f31b5=>{const _0x589630=_0x2df4ea;this[_0x589630(0x15a)]['del'](_0x589630(0x155)+_0x1ff472+':'+_0x3f31b5);});}async['checkTokenAuth'](_0xb60c16,_0x5d5231){const _0x1fa23b=_0x4db576,{id:_0x5f1355,role:_0x29a218}=_0x5d5231[_0x1fa23b(0x172)];if(_0x29a218===_0x1fa23b(0x160))return!![];const _0x2c25e9=await this['redisClient'][_0x1fa23b(0x168)](_0x1fa23b(0x155)+_0x5f1355);if(_0x2c25e9===null)return await this['redisClient'][_0x1fa23b(0x16a)](_0x1fa23b(0x155)+_0x5f1355,_0xb60c16),!![];if(_0x2c25e9!==_0xb60c16){if(['super','admin'][_0x1fa23b(0x151)](_0x29a218))return!![];throw new common_1[(_0x1fa23b(0x162))](_0x1fa23b(0x176),common_1[_0x1fa23b(0x16e)][_0x1fa23b(0x16d)]);}}};RedisCacheService=__decorate([(0x0,common_1[_0x4db576(0x15c)])(),__param(0x0,(0x0,common_1['Inject'])('REDIS_CLIENT')),__metadata(_0x4db576(0x174),[Object])],RedisCacheService),exports[_0x4db576(0x15d)]=RedisCacheService;