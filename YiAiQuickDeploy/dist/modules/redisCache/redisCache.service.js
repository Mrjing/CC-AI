'use strict';const _0x4eb1c9=_0x5162;(function(_0x3986fe,_0x2d8033){const _0x34ed48=_0x5162,_0x59d05a=_0x3986fe();while(!![]){try{const _0x454200=-parseInt(_0x34ed48(0x75))/0x1+-parseInt(_0x34ed48(0x89))/0x2+-parseInt(_0x34ed48(0x71))/0x3*(-parseInt(_0x34ed48(0x8f))/0x4)+parseInt(_0x34ed48(0x7b))/0x5+-parseInt(_0x34ed48(0x73))/0x6+parseInt(_0x34ed48(0x8d))/0x7*(parseInt(_0x34ed48(0x90))/0x8)+-parseInt(_0x34ed48(0x92))/0x9*(-parseInt(_0x34ed48(0x77))/0xa);if(_0x454200===_0x2d8033)break;else _0x59d05a['push'](_0x59d05a['shift']());}catch(_0x313325){_0x59d05a['push'](_0x59d05a['shift']());}}}(_0x293f,0xd6172));var __decorate=this&&this[_0x4eb1c9(0x7a)]||function(_0x1714ad,_0x49bb99,_0x1f5b83,_0x47976d){const _0x4e6c5b=_0x4eb1c9;var _0xd65dd2=arguments[_0x4e6c5b(0x8e)],_0x5d057b=_0xd65dd2<0x3?_0x49bb99:_0x47976d===null?_0x47976d=Object[_0x4e6c5b(0x99)](_0x49bb99,_0x1f5b83):_0x47976d,_0x2aea88;if(typeof Reflect===_0x4e6c5b(0x96)&&typeof Reflect[_0x4e6c5b(0x87)]===_0x4e6c5b(0x6a))_0x5d057b=Reflect['decorate'](_0x1714ad,_0x49bb99,_0x1f5b83,_0x47976d);else{for(var _0x4d6608=_0x1714ad['length']-0x1;_0x4d6608>=0x0;_0x4d6608--)if(_0x2aea88=_0x1714ad[_0x4d6608])_0x5d057b=(_0xd65dd2<0x3?_0x2aea88(_0x5d057b):_0xd65dd2>0x3?_0x2aea88(_0x49bb99,_0x1f5b83,_0x5d057b):_0x2aea88(_0x49bb99,_0x1f5b83))||_0x5d057b;}return _0xd65dd2>0x3&&_0x5d057b&&Object[_0x4e6c5b(0x82)](_0x49bb99,_0x1f5b83,_0x5d057b),_0x5d057b;},__metadata=this&&this[_0x4eb1c9(0x81)]||function(_0x37a36e,_0x467398){const _0x2adf17=_0x4eb1c9;if(typeof Reflect==='object'&&typeof Reflect[_0x2adf17(0x72)]===_0x2adf17(0x6a))return Reflect[_0x2adf17(0x72)](_0x37a36e,_0x467398);},__param=this&&this['__param']||function(_0x42ec5b,_0x452954){return function(_0x4b9bb0,_0x308218){_0x452954(_0x4b9bb0,_0x308218,_0x42ec5b);};};Object[_0x4eb1c9(0x82)](exports,_0x4eb1c9(0x6c),{'value':!![]}),exports[_0x4eb1c9(0x8c)]=void 0x0;function _0x293f(){const _0x380d5b=['2996882CGhKrH','tokens:','Injectable','RedisCacheService','2933naCEFv','length','8PZXoGp','25096upopkK','您已在其他设备覆盖登录、请您重新登录！','36keTRjz','zRange','set','HttpException','object','saveToken','forEach','getOwnPropertyDescriptor','visitor','function','Inject','__esModule','test','onModuleInit','UNAUTHORIZED','design:paramtypes','18789LQNVHE','metadata','1783248aLzIoJ','BAD_REQUEST','1385894vTMtbh','del','3982940HNgRkK','includes','@nestjs/common','__decorate','5691760ydoSBP','redisClient','get','user','admin','ttl','__metadata','defineProperty','HttpStatus','invalidateTokens','token:','expire','decorate','REDIS_CLIENT'];_0x293f=function(){return _0x380d5b;};return _0x293f();}const common_1=require(_0x4eb1c9(0x79));let RedisCacheService=class RedisCacheService{constructor(_0x135778){const _0x2fe1ea=_0x4eb1c9;this[_0x2fe1ea(0x7c)]=_0x135778;}async[_0x4eb1c9(0x6e)](){}[_0x4eb1c9(0x6d)](){const _0x57953d=_0x4eb1c9;return this['redisClient'][_0x57953d(0x94)]('aaa',0x6f),0x1;}async[_0x4eb1c9(0x7d)](_0x3af7b6){const _0x1fa974=_0x4eb1c9,{key:_0x395131}=_0x3af7b6,_0x1f9474=await this[_0x1fa974(0x7c)]['get'](_0x395131);return await this[_0x1fa974(0x7c)][_0x1fa974(0x7d)](_0x395131);}async[_0x4eb1c9(0x94)](_0x2f18ce,_0x3d0b55){const _0x3afa24=_0x4eb1c9;try{const {key:_0x1192a0,val:_0x285afb}=_0x2f18ce;await this[_0x3afa24(0x7c)][_0x3afa24(0x94)](_0x1192a0,_0x285afb),_0x3d0b55&&await this[_0x3afa24(0x7c)][_0x3afa24(0x86)](_0x1192a0,_0x3d0b55);return;}catch(_0xd0fae1){throw new common_1[(_0x3afa24(0x95))](_0xd0fae1,common_1['HttpStatus'][_0x3afa24(0x74)]);}}async[_0x4eb1c9(0x80)](_0x137af4){const _0x574d43=_0x4eb1c9;return await this[_0x574d43(0x7c)][_0x574d43(0x80)](_0x137af4);}async[_0x4eb1c9(0x76)](_0x392132){const _0x33a4d7=_0x4eb1c9,{key:_0x525d1b}=_0x392132;await this['redisClient'][_0x33a4d7(0x76)](_0x525d1b);return;}async[_0x4eb1c9(0x97)](_0x21d5eb,_0x18c972){const _0x3e0065=_0x4eb1c9,_0x288b3d=await this[_0x3e0065(0x7c)][_0x3e0065(0x93)](_0x3e0065(0x8a)+_0x21d5eb,0x0,-0x1);await this[_0x3e0065(0x84)](_0x21d5eb,_0x288b3d),this[_0x3e0065(0x7c)][_0x3e0065(0x94)](_0x3e0065(0x85)+_0x21d5eb,_0x18c972);}async['invalidateTokens'](_0x183081,_0x4e211d){const _0x363460=_0x4eb1c9;_0x4e211d[_0x363460(0x98)](_0x350851=>{const _0x1976c6=_0x363460;this[_0x1976c6(0x7c)][_0x1976c6(0x76)]('token:'+_0x183081+':'+_0x350851);});}async['checkTokenAuth'](_0x20599b,_0x4009cf){const _0xf95c10=_0x4eb1c9,{id:_0x4f4e47,role:_0x22a680}=_0x4009cf[_0xf95c10(0x7e)];if(_0x22a680===_0xf95c10(0x69))return!![];const _0x30c0d1=await this[_0xf95c10(0x7c)][_0xf95c10(0x7d)]('token:'+_0x4f4e47);if(_0x30c0d1===null)return await this[_0xf95c10(0x7c)]['set'](_0xf95c10(0x85)+_0x4f4e47,_0x20599b),!![];if(_0x30c0d1!==_0x20599b){if(['super',_0xf95c10(0x7f)][_0xf95c10(0x78)](_0x22a680))return!![];throw new common_1['HttpException'](_0xf95c10(0x91),common_1[_0xf95c10(0x83)][_0xf95c10(0x6f)]);}}};function _0x5162(_0x36898f,_0x5bcb0a){const _0x293fea=_0x293f();return _0x5162=function(_0x51620d,_0x378c4e){_0x51620d=_0x51620d-0x69;let _0x3c54af=_0x293fea[_0x51620d];return _0x3c54af;},_0x5162(_0x36898f,_0x5bcb0a);}RedisCacheService=__decorate([(0x0,common_1[_0x4eb1c9(0x8b)])(),__param(0x0,(0x0,common_1[_0x4eb1c9(0x6b)])(_0x4eb1c9(0x88))),__metadata(_0x4eb1c9(0x70),[Object])],RedisCacheService),exports[_0x4eb1c9(0x8c)]=RedisCacheService;