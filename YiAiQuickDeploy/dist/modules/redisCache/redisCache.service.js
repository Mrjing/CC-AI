'use strict';const _0xff2f0c=_0x3443;(function(_0x1d520a,_0x4cc8f6){const _0x15be16=_0x3443,_0x288304=_0x1d520a();while(!![]){try{const _0x49b937=parseInt(_0x15be16(0x15e))/0x1*(-parseInt(_0x15be16(0x152))/0x2)+-parseInt(_0x15be16(0x166))/0x3+parseInt(_0x15be16(0x13a))/0x4+-parseInt(_0x15be16(0x15c))/0x5*(-parseInt(_0x15be16(0x153))/0x6)+parseInt(_0x15be16(0x165))/0x7*(parseInt(_0x15be16(0x161))/0x8)+parseInt(_0x15be16(0x14e))/0x9*(-parseInt(_0x15be16(0x14c))/0xa)+parseInt(_0x15be16(0x142))/0xb;if(_0x49b937===_0x4cc8f6)break;else _0x288304['push'](_0x288304['shift']());}catch(_0x1a69f1){_0x288304['push'](_0x288304['shift']());}}}(_0x3f6e,0xb262c));var __decorate=this&&this[_0xff2f0c(0x151)]||function(_0x40f7ca,_0x1fef85,_0x13822c,_0x166281){const _0x2c25a5=_0xff2f0c;var _0x5ca3ee=arguments[_0x2c25a5(0x148)],_0x2b2b19=_0x5ca3ee<0x3?_0x1fef85:_0x166281===null?_0x166281=Object['getOwnPropertyDescriptor'](_0x1fef85,_0x13822c):_0x166281,_0x48265a;if(typeof Reflect===_0x2c25a5(0x15a)&&typeof Reflect['decorate']===_0x2c25a5(0x167))_0x2b2b19=Reflect[_0x2c25a5(0x139)](_0x40f7ca,_0x1fef85,_0x13822c,_0x166281);else{for(var _0x501b2f=_0x40f7ca[_0x2c25a5(0x148)]-0x1;_0x501b2f>=0x0;_0x501b2f--)if(_0x48265a=_0x40f7ca[_0x501b2f])_0x2b2b19=(_0x5ca3ee<0x3?_0x48265a(_0x2b2b19):_0x5ca3ee>0x3?_0x48265a(_0x1fef85,_0x13822c,_0x2b2b19):_0x48265a(_0x1fef85,_0x13822c))||_0x2b2b19;}return _0x5ca3ee>0x3&&_0x2b2b19&&Object['defineProperty'](_0x1fef85,_0x13822c,_0x2b2b19),_0x2b2b19;},__metadata=this&&this['__metadata']||function(_0x3b1c57,_0x51efe5){const _0x7caa33=_0xff2f0c;if(typeof Reflect===_0x7caa33(0x15a)&&typeof Reflect[_0x7caa33(0x158)]==='function')return Reflect[_0x7caa33(0x158)](_0x3b1c57,_0x51efe5);},__param=this&&this[_0xff2f0c(0x15b)]||function(_0x38b1df,_0x1e44c8){return function(_0x1567c8,_0x45bd9a){_0x1e44c8(_0x1567c8,_0x45bd9a,_0x38b1df);};};function _0x3443(_0x1330fc,_0x12fcff){const _0x3f6ea9=_0x3f6e();return _0x3443=function(_0x3443a3,_0x5d9569){_0x3443a3=_0x3443a3-0x138;let _0xc9bb45=_0x3f6ea9[_0x3443a3];return _0xc9bb45;},_0x3443(_0x1330fc,_0x12fcff);}Object[_0xff2f0c(0x154)](exports,_0xff2f0c(0x15f),{'value':!![]}),exports[_0xff2f0c(0x168)]=void 0x0;const common_1=require(_0xff2f0c(0x146));let RedisCacheService=class RedisCacheService{constructor(_0xcdacbd){const _0x41dd19=_0xff2f0c;this[_0x41dd19(0x13d)]=_0xcdacbd;}async[_0xff2f0c(0x162)](){}[_0xff2f0c(0x163)](){const _0x447f3f=_0xff2f0c;return this[_0x447f3f(0x13d)][_0x447f3f(0x14a)](_0x447f3f(0x15d),0x6f),0x1;}async[_0xff2f0c(0x156)](_0x199f1b){const _0x3180f7=_0xff2f0c,{key:_0x290966}=_0x199f1b,_0x52e0a1=await this[_0x3180f7(0x13d)][_0x3180f7(0x156)](_0x290966);return await this['redisClient'][_0x3180f7(0x156)](_0x290966);}async['set'](_0x2bc72f,_0x338ebc){const _0x398c2d=_0xff2f0c;try{const {key:_0xbe1def,val:_0x2eea3e}=_0x2bc72f;await this[_0x398c2d(0x13d)][_0x398c2d(0x14a)](_0xbe1def,_0x2eea3e),_0x338ebc&&await this['redisClient'][_0x398c2d(0x164)](_0xbe1def,_0x338ebc);return;}catch(_0x31b9b3){throw new common_1['HttpException'](_0x31b9b3,common_1[_0x398c2d(0x143)][_0x398c2d(0x160)]);}}async[_0xff2f0c(0x140)](_0xf90e49){const _0x237272=_0xff2f0c;return await this['redisClient'][_0x237272(0x140)](_0xf90e49);}async[_0xff2f0c(0x169)](_0x116a2b){const _0x26f16d=_0xff2f0c,{key:_0x30c557}=_0x116a2b;await this[_0x26f16d(0x13d)]['del'](_0x30c557);return;}async[_0xff2f0c(0x159)](_0x49ac95,_0x483cbb){const _0x814a8a=_0xff2f0c,_0x158dc6=await this[_0x814a8a(0x13d)][_0x814a8a(0x13f)](_0x814a8a(0x14b)+_0x49ac95,0x0,-0x1);await this[_0x814a8a(0x149)](_0x49ac95,_0x158dc6),this['redisClient'][_0x814a8a(0x14a)](_0x814a8a(0x14d)+_0x49ac95,_0x483cbb);}async['invalidateTokens'](_0x48e664,_0x13569f){const _0xd64eea=_0xff2f0c;_0x13569f[_0xd64eea(0x144)](_0x20f79d=>{const _0x4f0daf=_0xd64eea;this['redisClient']['del'](_0x4f0daf(0x14d)+_0x48e664+':'+_0x20f79d);});}async[_0xff2f0c(0x13b)](_0x392540,_0x560a25){const _0x525c49=_0xff2f0c,{id:_0x211b35,role:_0x1a1f0d}=_0x560a25[_0x525c49(0x147)];if(_0x1a1f0d===_0x525c49(0x145))return!![];const _0x4c9892=await this[_0x525c49(0x13d)][_0x525c49(0x156)]('token:'+_0x211b35);if(_0x4c9892===null)return await this[_0x525c49(0x13d)][_0x525c49(0x14a)]('token:'+_0x211b35,_0x392540),!![];if(_0x4c9892!==_0x392540){if([_0x525c49(0x13c),_0x525c49(0x13e)]['includes'](_0x1a1f0d))return!![];throw new common_1[(_0x525c49(0x141))](_0x525c49(0x16a),common_1[_0x525c49(0x143)][_0x525c49(0x150)]);}}};function _0x3f6e(){const _0x3741df=['checkTokenAuth','super','redisClient','admin','zRange','ttl','HttpException','8173517HNBhKu','HttpStatus','forEach','visitor','@nestjs/common','user','length','invalidateTokens','set','tokens:','10kIfrlF','token:','4622823sYdTSF','REDIS_CLIENT','UNAUTHORIZED','__decorate','8uWihRR','611010nxEoAJ','defineProperty','Injectable','get','design:paramtypes','metadata','saveToken','object','__param','15lgPMSq','aaa','63982ffmPmk','__esModule','BAD_REQUEST','392NVEfjo','onModuleInit','test','expire','101325OvHsZm','1512084AGUcmT','function','RedisCacheService','del','您已在其他设备覆盖登录、请您重新登录！','Inject','decorate','985776SnRtzl'];_0x3f6e=function(){return _0x3741df;};return _0x3f6e();}RedisCacheService=__decorate([(0x0,common_1[_0xff2f0c(0x155)])(),__param(0x0,(0x0,common_1[_0xff2f0c(0x138)])(_0xff2f0c(0x14f))),__metadata(_0xff2f0c(0x157),[Object])],RedisCacheService),exports[_0xff2f0c(0x168)]=RedisCacheService;