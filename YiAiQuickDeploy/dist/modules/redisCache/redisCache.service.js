'use strict';const _0x5c39bb=_0x4f0c;(function(_0x159c73,_0x64cf4a){const _0x557f70=_0x4f0c,_0x2696af=_0x159c73();while(!![]){try{const _0x47f21b=parseInt(_0x557f70(0x12a))/0x1*(parseInt(_0x557f70(0x12f))/0x2)+-parseInt(_0x557f70(0x13f))/0x3+-parseInt(_0x557f70(0x133))/0x4+parseInt(_0x557f70(0x134))/0x5*(-parseInt(_0x557f70(0x14b))/0x6)+-parseInt(_0x557f70(0x12c))/0x7*(parseInt(_0x557f70(0x127))/0x8)+parseInt(_0x557f70(0x139))/0x9*(-parseInt(_0x557f70(0x144))/0xa)+parseInt(_0x557f70(0x14d))/0xb;if(_0x47f21b===_0x64cf4a)break;else _0x2696af['push'](_0x2696af['shift']());}catch(_0x5ec1cd){_0x2696af['push'](_0x2696af['shift']());}}}(_0xb6d9,0xdcc90));function _0x4f0c(_0x4c9d94,_0x47c6a5){const _0xb6d99e=_0xb6d9();return _0x4f0c=function(_0x4f0c80,_0x359b87){_0x4f0c80=_0x4f0c80-0x123;let _0x4dc62e=_0xb6d99e[_0x4f0c80];return _0x4dc62e;},_0x4f0c(_0x4c9d94,_0x47c6a5);}var __decorate=this&&this[_0x5c39bb(0x13a)]||function(_0x92a99b,_0xe47884,_0x60d2fa,_0x32c100){const _0x3ddd1b=_0x5c39bb;var _0x1f6363=arguments[_0x3ddd1b(0x129)],_0x3ce09d=_0x1f6363<0x3?_0xe47884:_0x32c100===null?_0x32c100=Object[_0x3ddd1b(0x13e)](_0xe47884,_0x60d2fa):_0x32c100,_0x53c922;if(typeof Reflect==='object'&&typeof Reflect['decorate']==='function')_0x3ce09d=Reflect[_0x3ddd1b(0x124)](_0x92a99b,_0xe47884,_0x60d2fa,_0x32c100);else{for(var _0x5573bc=_0x92a99b[_0x3ddd1b(0x129)]-0x1;_0x5573bc>=0x0;_0x5573bc--)if(_0x53c922=_0x92a99b[_0x5573bc])_0x3ce09d=(_0x1f6363<0x3?_0x53c922(_0x3ce09d):_0x1f6363>0x3?_0x53c922(_0xe47884,_0x60d2fa,_0x3ce09d):_0x53c922(_0xe47884,_0x60d2fa))||_0x3ce09d;}return _0x1f6363>0x3&&_0x3ce09d&&Object['defineProperty'](_0xe47884,_0x60d2fa,_0x3ce09d),_0x3ce09d;},__metadata=this&&this[_0x5c39bb(0x149)]||function(_0xffdd40,_0x4c5d74){const _0x29234b=_0x5c39bb;if(typeof Reflect===_0x29234b(0x145)&&typeof Reflect['metadata']==='function')return Reflect[_0x29234b(0x131)](_0xffdd40,_0x4c5d74);},__param=this&&this['__param']||function(_0x4d1bc6,_0x56c09d){return function(_0x1fe051,_0x5839de){_0x56c09d(_0x1fe051,_0x5839de,_0x4d1bc6);};};function _0xb6d9(){const _0x89adb3=['1115722sANctR','admin','metadata','@nestjs/common','1215744BUNCbH','14330nBBPkE','REDIS_CLIENT','HttpException','redisClient','RedisCacheService','757161nApopc','__decorate','get','invalidateTokens','tokens:','getOwnPropertyDescriptor','4023153IcByBj','token:','expire','zRange','您已在其他设备覆盖登录、请您重新登录！','10BtuBXb','object','del','design:paramtypes','HttpStatus','__metadata','visitor','3318zvmxGs','UNAUTHORIZED','58149828FobyvQ','saveToken','set','onModuleInit','decorate','forEach','ttl','481736kYRwNf','checkTokenAuth','length','1PkNqvh','BAD_REQUEST','189lItPmF','includes','test'];_0xb6d9=function(){return _0x89adb3;};return _0xb6d9();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['RedisCacheService']=void 0x0;const common_1=require(_0x5c39bb(0x132));let RedisCacheService=class RedisCacheService{constructor(_0x564e8d){const _0x1a8ed9=_0x5c39bb;this[_0x1a8ed9(0x137)]=_0x564e8d;}async[_0x5c39bb(0x123)](){}[_0x5c39bb(0x12e)](){const _0x4480d3=_0x5c39bb;return this[_0x4480d3(0x137)]['set']('aaa',0x6f),0x1;}async[_0x5c39bb(0x13b)](_0x4777bc){const _0x143d4b=_0x5c39bb,{key:_0x5738e0}=_0x4777bc,_0x358800=await this[_0x143d4b(0x137)][_0x143d4b(0x13b)](_0x5738e0);return await this[_0x143d4b(0x137)][_0x143d4b(0x13b)](_0x5738e0);}async[_0x5c39bb(0x14f)](_0x42b9f4,_0x5180eb){const _0x121b2c=_0x5c39bb;try{const {key:_0x41f85f,val:_0x5c9f02}=_0x42b9f4;await this[_0x121b2c(0x137)][_0x121b2c(0x14f)](_0x41f85f,_0x5c9f02),_0x5180eb&&await this['redisClient'][_0x121b2c(0x141)](_0x41f85f,_0x5180eb);return;}catch(_0x388b89){throw new common_1[(_0x121b2c(0x136))](_0x388b89,common_1['HttpStatus'][_0x121b2c(0x12b)]);}}async['ttl'](_0x4e7ccf){const _0x59e870=_0x5c39bb;return await this['redisClient'][_0x59e870(0x126)](_0x4e7ccf);}async[_0x5c39bb(0x146)](_0x3eee0f){const _0x1f9b86=_0x5c39bb,{key:_0x45e420}=_0x3eee0f;await this['redisClient'][_0x1f9b86(0x146)](_0x45e420);return;}async[_0x5c39bb(0x14e)](_0x2add4b,_0x3fe955){const _0x4ec04c=_0x5c39bb,_0x588d9d=await this[_0x4ec04c(0x137)][_0x4ec04c(0x142)](_0x4ec04c(0x13d)+_0x2add4b,0x0,-0x1);await this[_0x4ec04c(0x13c)](_0x2add4b,_0x588d9d),this[_0x4ec04c(0x137)]['set']('token:'+_0x2add4b,_0x3fe955);}async[_0x5c39bb(0x13c)](_0x1ee189,_0x45faa7){const _0x1d48c0=_0x5c39bb;_0x45faa7[_0x1d48c0(0x125)](_0x250c95=>{const _0x4c284f=_0x1d48c0;this[_0x4c284f(0x137)][_0x4c284f(0x146)](_0x4c284f(0x140)+_0x1ee189+':'+_0x250c95);});}async[_0x5c39bb(0x128)](_0x23cd05,_0x10f5e0){const _0x166f23=_0x5c39bb,{id:_0x1bd717,role:_0x36acb2}=_0x10f5e0['user'];if(_0x36acb2===_0x166f23(0x14a))return!![];const _0x56c7f0=await this['redisClient']['get']('token:'+_0x1bd717);if(_0x56c7f0===null)return await this[_0x166f23(0x137)][_0x166f23(0x14f)](_0x166f23(0x140)+_0x1bd717,_0x23cd05),!![];if(_0x56c7f0!==_0x23cd05){if(['super',_0x166f23(0x130)][_0x166f23(0x12d)](_0x36acb2))return!![];throw new common_1['HttpException'](_0x166f23(0x143),common_1[_0x166f23(0x148)][_0x166f23(0x14c)]);}}};RedisCacheService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,common_1['Inject'])(_0x5c39bb(0x135))),__metadata(_0x5c39bb(0x147),[Object])],RedisCacheService),exports[_0x5c39bb(0x138)]=RedisCacheService;