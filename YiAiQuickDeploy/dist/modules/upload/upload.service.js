'use strict';const _0x2e3da0=_0x52be;(function(_0x555711,_0x30b22f){const _0x3c96bc=_0x52be,_0x3558df=_0x555711();while(!![]){try{const _0x53f42b=parseInt(_0x3c96bc(0x264))/0x1+parseInt(_0x3c96bc(0x1f2))/0x2*(parseInt(_0x3c96bc(0x236))/0x3)+-parseInt(_0x3c96bc(0x215))/0x4+-parseInt(_0x3c96bc(0x1f9))/0x5*(-parseInt(_0x3c96bc(0x219))/0x6)+-parseInt(_0x3c96bc(0x22e))/0x7*(-parseInt(_0x3c96bc(0x24d))/0x8)+parseInt(_0x3c96bc(0x21b))/0x9*(parseInt(_0x3c96bc(0x204))/0xa)+-parseInt(_0x3c96bc(0x260))/0xb*(parseInt(_0x3c96bc(0x1fb))/0xc);if(_0x53f42b===_0x30b22f)break;else _0x3558df['push'](_0x3558df['shift']());}catch(_0x2d3bba){_0x3558df['push'](_0x3558df['shift']());}}}(_0x4697,0xca04f));var __decorate=this&&this[_0x2e3da0(0x20e)]||function(_0xab2fd9,_0x329986,_0x124341,_0x5c1142){const _0x41ef05=_0x2e3da0;var _0x203fb5=arguments[_0x41ef05(0x1f7)],_0x87452e=_0x203fb5<0x3?_0x329986:_0x5c1142===null?_0x5c1142=Object[_0x41ef05(0x228)](_0x329986,_0x124341):_0x5c1142,_0x465f1b;if(typeof Reflect===_0x41ef05(0x22b)&&typeof Reflect[_0x41ef05(0x234)]==='function')_0x87452e=Reflect[_0x41ef05(0x234)](_0xab2fd9,_0x329986,_0x124341,_0x5c1142);else{for(var _0x1b5c23=_0xab2fd9[_0x41ef05(0x1f7)]-0x1;_0x1b5c23>=0x0;_0x1b5c23--)if(_0x465f1b=_0xab2fd9[_0x1b5c23])_0x87452e=(_0x203fb5<0x3?_0x465f1b(_0x87452e):_0x203fb5>0x3?_0x465f1b(_0x329986,_0x124341,_0x87452e):_0x465f1b(_0x329986,_0x124341))||_0x87452e;}return _0x203fb5>0x3&&_0x87452e&&Object[_0x41ef05(0x23a)](_0x329986,_0x124341,_0x87452e),_0x87452e;},__metadata=this&&this[_0x2e3da0(0x1ee)]||function(_0x28f099,_0x2647fb){const _0x41debb=_0x2e3da0;if(typeof Reflect===_0x41debb(0x22b)&&typeof Reflect['metadata']===_0x41debb(0x1ed))return Reflect[_0x41debb(0x1fa)](_0x28f099,_0x2647fb);};function _0x52be(_0xfcf997,_0x25ad7b){const _0x4697e2=_0x4697();return _0x52be=function(_0x52bef7,_0xd33d5f){_0x52bef7=_0x52bef7-0x1ea;let _0x53b9fc=_0x4697e2[_0x52bef7];return _0x53b9fc;},_0x52be(_0xfcf997,_0x25ad7b);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[_0x2e3da0(0x1f5)]=void 0x0;const common_1=require('@nestjs/common'),TENCENTCOS=require(_0x2e3da0(0x213)),ALIOSS=require(_0x2e3da0(0x22a)),axios_1=require('axios'),streamToBuffer=require(_0x2e3da0(0x21d)),utils_1=require(_0x2e3da0(0x256)),globalConfig_service_1=require(_0x2e3da0(0x22c)),FormData=require('form-data');function _0x4697(){const _0x4303fe=['get','403599sQKPGG','使用腾讯云COS上传','png','uploadFileByAliOssFromUrl','debug','上传图片失败[Chevereto]','decorate','上传图片失败[Chevereto|buffer]\x20-->\x20','10629NiWnkY','uploadFileByCheveretoFromUrl','HttpStatus','cheveretoKey','defineProperty','aliOssStatus','cosBucket','请先前往后台配置上传图片的方式','globalConfigService','message','Injectable','uploadFileFromUrl','ISDEV','onModuleInit','TODO->error:\x20\x20','HttpException','aliOssRegion','cos\x20->\x20err:\x20','ali','http://172.247.48.137:8000','base64','removeSpecialCharacters','createRandomUid','152CMkrxo','cheveretoUploadPath','mjProxy','Logger','tencentCos','Chevereto\x20--->\x20res','上传图片失败[ali]','error','split','../../common/utils',',\x20类型:\x20','tencent','cosRegion','上传图片失败[Chevereto][url]','error:\x20','uploadFileByAliOss','data','GlobalConfigService','putObject','1056lAYzvh','source','chevereto','test','748523SbxRxZ','post','https://$2','put','stream','function','__metadata','getBufferFromUrl','getUploadConfig','上传图片失败[ten][url]','190WmPycM','上传图片失败[ten]','STANDARD','UploadService','BAD_REQUEST','length','mjtest.png','137945mBcglw','metadata','204576UsKQDN','uploadFileByTencentCos','getConfigs','endsWith','ali\x20开始上传',',\x20Chevereto:\x20','cheveretoStatus','uploadFileByChevereto','mjdev','3920410olgOjU','url','aliOssAccessKeyId','/mj/replaceUpload','slice','design:paramtypes','log','status','mjProxyUrl','上传图片失败[ALI][url]','__decorate','使用阿里云OSS上传','env','response','使用Chevereto上传','cos-nodejs-sdk-v5','res:\x20','6283080SjWsiu','code','上传失败:\x20','key','318avdeLc','cosSecretId','9JMBAAe','uploadFile','stream-to-buffer','stringify','default','tencentCosAcceleratedDomain','cosSecretKey',',\x20阿里云:\x20','uploadFileByTencentCosFromUrl','append','上传配置状态\x20-\x20腾讯云:\x20','aliOssAccessKeySecret','tencentCosStatus','getOwnPropertyDescriptor','replace','ali-oss','object','../globalConfig/globalConfig.service'];_0x4697=function(){return _0x4303fe;};return _0x4697();}let UploadService=class UploadService{constructor(_0x1f73c6){this['globalConfigService']=_0x1f73c6;}[_0x2e3da0(0x243)](){}async[_0x2e3da0(0x21c)](_0x410cfe){const _0x5cd117=_0x2e3da0,{filename:_0x5b4926,originalname:_0xe5c3e1,buffer:_0x49419e,dir:dir='ai',mimetype:_0x24889f}=_0x410cfe,_0x35b1e7=_0x24889f?_0x24889f[_0x5cd117(0x255)]('/')[0x1]:'',_0x4c95c9=_0xe5c3e1||_0x5b4926;common_1['Logger'][_0x5cd117(0x232)]('准备上传文件:\x20'+_0x4c95c9+_0x5cd117(0x257)+_0x35b1e7,'UploadService');const {tencentCosStatus:tencentCosStatus=0x0,aliOssStatus:aliOssStatus=0x0,cheveretoStatus:cheveretoStatus=0x0}=await this['globalConfigService'][_0x5cd117(0x1fd)]([_0x5cd117(0x227),_0x5cd117(0x23b),'cheveretoStatus']);common_1[_0x5cd117(0x250)]['debug'](_0x5cd117(0x225)+tencentCosStatus+_0x5cd117(0x222)+aliOssStatus+_0x5cd117(0x200)+cheveretoStatus,_0x5cd117(0x1f5));if(!Number(tencentCosStatus)&&!Number(aliOssStatus)&&!Number(cheveretoStatus))throw new common_1[(_0x5cd117(0x245))](_0x5cd117(0x23d),common_1['HttpStatus'][_0x5cd117(0x1f6)]);try{if(Number(tencentCosStatus))return common_1[_0x5cd117(0x250)][_0x5cd117(0x232)](_0x5cd117(0x22f),_0x5cd117(0x1f5)),await this['uploadFileByTencentCos']({'filename':_0x4c95c9,'buffer':_0x49419e,'dir':dir,'fileTyle':_0x35b1e7});if(Number(aliOssStatus))return common_1[_0x5cd117(0x250)][_0x5cd117(0x232)](_0x5cd117(0x20f),_0x5cd117(0x1f5)),await this[_0x5cd117(0x25c)]({'filename':_0x4c95c9,'buffer':_0x49419e,'dir':dir,'fileTyle':_0x35b1e7});if(Number(cheveretoStatus)){common_1['Logger'][_0x5cd117(0x232)](_0x5cd117(0x212),_0x5cd117(0x1f5));const {filename:_0x2d827c,buffer:_0x147848,dir:_0x9582f3}=_0x410cfe;return await this[_0x5cd117(0x202)]({'filename':_0x2d827c,'buffer':_0x147848['toString'](_0x5cd117(0x24a)),'dir':_0x9582f3,'fileTyle':_0x35b1e7});}}catch(_0x2700ad){common_1['Logger']['error'](_0x5cd117(0x217)+_0x2700ad[_0x5cd117(0x23f)],_0x5cd117(0x1f5));throw _0x2700ad;}}async['getUploadType'](){const _0x2bdd55=_0x2e3da0,{tencentCosStatus:tencentCosStatus=0x0,aliOssStatus:aliOssStatus=0x0,cheveretoStatus:cheveretoStatus=0x0}=await this[_0x2bdd55(0x23e)]['getConfigs']([_0x2bdd55(0x227),'aliOssStatus','cheveretoStatus']);if(Number(tencentCosStatus))return _0x2bdd55(0x258);if(Number(aliOssStatus))return _0x2bdd55(0x248);if(Number(cheveretoStatus))return _0x2bdd55(0x262);}async[_0x2e3da0(0x241)]({filename:_0x2816a1,url:_0x7783d4,dir:dir='mj'}){const _0xc3369a=_0x2e3da0;dir=process[_0xc3369a(0x210)][_0xc3369a(0x242)]?_0xc3369a(0x203):dir;const {tencentCosStatus:tencentCosStatus=0x0,aliOssStatus:aliOssStatus=0x0,cheveretoStatus:cheveretoStatus=0x0}=await this[_0xc3369a(0x23e)][_0xc3369a(0x1fd)]([_0xc3369a(0x227),'aliOssStatus',_0xc3369a(0x201)]);if(!Number(tencentCosStatus)&&!Number(aliOssStatus)&&!Number(cheveretoStatus))throw new common_1[(_0xc3369a(0x245))](_0xc3369a(0x23d),common_1[_0xc3369a(0x238)][_0xc3369a(0x1f6)]);if(Number(tencentCosStatus))return this[_0xc3369a(0x223)]({'filename':_0x2816a1,'url':_0x7783d4,'dir':dir});if(Number(aliOssStatus)){const _0x559ede=await this[_0xc3369a(0x231)]({'filename':_0x2816a1,'url':_0x7783d4,'dir':dir});return _0x559ede;}if(Number(cheveretoStatus))return await this[_0xc3369a(0x237)]({'filename':_0x2816a1,'url':_0x7783d4,'dir':dir});}async['uploadFileByTencentCos']({filename:_0x51a71a,buffer:_0x11cf48,dir:_0x528ac,fileTyle:_0x55d820}){const _0x55e439=_0x2e3da0,{Bucket:_0x52caa6,Region:_0x474104,SecretId:_0xc77b98,SecretKey:_0x1ffaa6}=await this[_0x55e439(0x1f0)](_0x55e439(0x258));this[_0x55e439(0x251)]=new TENCENTCOS({'SecretId':_0xc77b98,'SecretKey':_0x1ffaa6,'FileParallelLimit':0xa});try{return new Promise(async(_0xcad87e,_0x112c11)=>{const _0x1a8e6b=_0x55e439,_0x49b591=_0x55d820||_0x1a8e6b(0x230);this[_0x1a8e6b(0x251)][_0x1a8e6b(0x25f)]({'Bucket':(0x0,utils_1[_0x1a8e6b(0x24b)])(_0x52caa6),'Region':(0x0,utils_1[_0x1a8e6b(0x24b)])(_0x474104),'Key':_0x528ac+'/'+(_0x51a71a||(0x0,utils_1[_0x1a8e6b(0x24c)])()+'.'+_0x55d820),'StorageClass':_0x1a8e6b(0x1f4),'Body':_0x11cf48},async(_0x21c5f9,_0x2a4939)=>{const _0x3ed640=_0x1a8e6b;if(_0x21c5f9)return console[_0x3ed640(0x20a)](_0x3ed640(0x247),_0x21c5f9),_0x112c11(_0x21c5f9);let _0xf0be2b=_0x2a4939['Location']['replace'](/^(http:\/\/|https:\/\/|\/\/|)(.*)/,_0x3ed640(0x1ea));const {acceleratedDomain:_0x5890fc}=await this['getUploadConfig'](_0x3ed640(0x258));return _0x5890fc&&(_0xf0be2b=_0xf0be2b[_0x3ed640(0x229)](/^(https:\/\/[^/]+)(\/.*)$/,'https://'+_0x5890fc+'$2'),console[_0x3ed640(0x20a)]('当前已开启全球加速----------------->',_0xf0be2b)),_0xcad87e(_0xf0be2b);});});}catch(_0x1668d2){console[_0x55e439(0x20a)]('error:\x20',_0x1668d2);throw new common_1['HttpException'](_0x55e439(0x1f3),common_1[_0x55e439(0x238)][_0x55e439(0x1f6)]);}}async['uploadFileByTencentCosFromUrl']({filename:_0x12986f,url:_0x345a6f,dir:_0x11654f}){const _0x3f307c=_0x2e3da0,{Bucket:_0x2b9e57,Region:_0x3d8633,SecretId:_0x7fc39b,SecretKey:_0x21d2d3}=await this[_0x3f307c(0x1f0)](_0x3f307c(0x258));this[_0x3f307c(0x251)]=new TENCENTCOS({'SecretId':_0x7fc39b,'SecretKey':_0x21d2d3,'FileParallelLimit':0xa});try{const _0x24c6ff=await this['globalConfigService'][_0x3f307c(0x1fd)]([_0x3f307c(0x24f)])||0x0,_0x27135b=await this['getBufferFromUrl'](_0x345a6f);return await this[_0x3f307c(0x1fc)]({'filename':_0x12986f,'buffer':_0x27135b,'dir':_0x11654f,'fileTyle':''});}catch(_0x560a10){console[_0x3f307c(0x20a)](_0x3f307c(0x244),_0x560a10);throw new common_1[(_0x3f307c(0x245))](_0x3f307c(0x1f1),common_1[_0x3f307c(0x238)][_0x3f307c(0x1f6)]);}}async[_0x2e3da0(0x25c)]({filename:_0x4f5373,buffer:_0x32a299,dir:_0x1a310d,fileTyle:fileTyle=_0x2e3da0(0x230)}){const _0x24fe39=_0x2e3da0,{region:_0x399217,bucket:_0x8ccbc8,accessKeyId:_0x36e028,accessKeySecret:_0x3a2907}=await this[_0x24fe39(0x1f0)]('ali'),_0x1a958e=new ALIOSS({'region':(0x0,utils_1['removeSpecialCharacters'])(_0x399217),'accessKeyId':_0x36e028,'accessKeySecret':_0x3a2907,'bucket':(0x0,utils_1['removeSpecialCharacters'])(_0x8ccbc8)});try{return console[_0x24fe39(0x20a)](_0x24fe39(0x1ff)),new Promise((_0x1fb127,_0x24c0c6)=>{const _0x304efe=_0x24fe39;_0x1a958e[_0x304efe(0x1eb)](_0x1a310d+'/'+(_0x4f5373||(0x0,utils_1[_0x304efe(0x24c)])()+'.'+fileTyle),_0x32a299)['then'](_0x5004e9=>{const _0x1a9006=_0x304efe;_0x1fb127(_0x5004e9[_0x1a9006(0x205)]);})['catch'](_0x1cbedd=>{_0x24c0c6(_0x1cbedd);});});}catch(_0x2cdd92){throw new common_1[(_0x24fe39(0x245))](_0x24fe39(0x253),common_1[_0x24fe39(0x238)]['BAD_REQUEST']);}}async['uploadFileByAliOssFromUrl']({filename:_0x54b09e,url:_0x2226e1,dir:_0x32da8e}){const _0x1e7447=_0x2e3da0,{region:_0x52fd34,bucket:_0xa51657,accessKeyId:_0x18864d,accessKeySecret:_0x3e6369}=await this[_0x1e7447(0x1f0)](_0x1e7447(0x248)),_0x5d1304=new ALIOSS({'region':_0x52fd34,'accessKeyId':_0x18864d,'accessKeySecret':_0x3e6369,'bucket':_0xa51657});try{const _0x502328=await this['globalConfigService'][_0x1e7447(0x1fd)]([_0x1e7447(0x24f)])||0x0;if(Number(_0x502328)===0x1){const _0x4c79b0={'url':_0x2226e1,'cosParams':{'region':_0x52fd34,'bucket':_0xa51657,'accessKeyId':_0x18864d,'accessKeySecret':_0x3e6369},'cosType':'aliyun'},_0x577e80=await this['globalConfigService'][_0x1e7447(0x1fd)]([_0x1e7447(0x20c)])||_0x1e7447(0x249),_0x35d07e=await axios_1['default'][_0x1e7447(0x265)](_0x577e80+_0x1e7447(0x207),_0x4c79b0);if(!(_0x35d07e===null||_0x35d07e===void 0x0?void 0x0:_0x35d07e['data']))throw new common_1[(_0x1e7447(0x245))](_0x1e7447(0x20d),common_1[_0x1e7447(0x238)][_0x1e7447(0x1f6)]);return _0x35d07e[_0x1e7447(0x25d)];}else{const _0x482c2f=await this[_0x1e7447(0x1ef)](_0x2226e1);return await this['uploadFileByAliOss']({'filename':_0x54b09e,'buffer':_0x482c2f,'dir':_0x32da8e});}}catch(_0x59fcc4){throw new common_1[(_0x1e7447(0x245))](_0x1e7447(0x20d),common_1[_0x1e7447(0x238)]['BAD_REQUEST']);}}async['uploadFileByChevereto']({filename:filename='',buffer:_0x4777c4,dir:dir='ai',fileTyle:fileTyle=_0x2e3da0(0x230)}){const _0x4877a9=_0x2e3da0;var _0x3f29ab;const {key:_0x584d12,uploadPath:_0x532d1a}=await this[_0x4877a9(0x1f0)]('chevereto');let _0x68cbbd=_0x532d1a['endsWith']('/')?_0x532d1a[_0x4877a9(0x208)](0x0,-0x1):_0x532d1a;const _0x2824d8=new FormData();_0x2824d8[_0x4877a9(0x224)](_0x4877a9(0x261),_0x4777c4),_0x2824d8[_0x4877a9(0x224)](_0x4877a9(0x218),_0x584d12);try{const _0x48a8da=await axios_1['default']['post'](_0x68cbbd,_0x2824d8,{'headers':{'X-API-Key':_0x584d12}});if((_0x48a8da===null||_0x48a8da===void 0x0?void 0x0:_0x48a8da[_0x4877a9(0x20b)])===0xc8)return _0x48a8da[_0x4877a9(0x25d)]['image']['url'];else console[_0x4877a9(0x20a)](_0x4877a9(0x252),_0x48a8da===null||_0x48a8da===void 0x0?void 0x0:_0x48a8da['data'][_0x4877a9(0x216)],_0x48a8da===null||_0x48a8da===void 0x0?void 0x0:_0x48a8da[_0x4877a9(0x25d)][_0x4877a9(0x254)][_0x4877a9(0x23f)]),common_1[_0x4877a9(0x250)]['error'](_0x4877a9(0x233),JSON[_0x4877a9(0x21e)](_0x48a8da['data']));}catch(_0x1786d8){console[_0x4877a9(0x20a)](_0x4877a9(0x25b),_0x1786d8);throw new common_1[(_0x4877a9(0x245))](_0x4877a9(0x235)+((_0x3f29ab=_0x1786d8[_0x4877a9(0x211)])===null||_0x3f29ab===void 0x0?void 0x0:_0x3f29ab[_0x4877a9(0x25d)]['error'][_0x4877a9(0x23f)]),common_1[_0x4877a9(0x238)][_0x4877a9(0x1f6)]);}}async[_0x2e3da0(0x237)]({filename:_0x481b80,url:_0x365b9d,dir:_0x3012bc}){const _0x516c80=_0x2e3da0;try{const _0x46bb3d=await this[_0x516c80(0x23e)][_0x516c80(0x1fd)](['mjProxy'])||0x0;if(Number(_0x46bb3d)===0x1){const {key:_0x59337c,uploadPath:_0x54f73}=await this[_0x516c80(0x1f0)](_0x516c80(0x262));let _0xecf3b8=_0x54f73[_0x516c80(0x1fe)]('/')?_0x54f73['slice'](0x0,-0x1):_0x54f73;const _0x211926={'cosType':'chevereto','url':_0x365b9d,'cosParams':{'key':_0x59337c,'uploadPath':_0xecf3b8}},_0x3fda0f=await this[_0x516c80(0x23e)][_0x516c80(0x1fd)](['mjProxyUrl'])||'http://172.247.48.137:8000',_0xf78dd=await axios_1[_0x516c80(0x21f)]['post'](_0x3fda0f+_0x516c80(0x207),_0x211926);if(!_0xf78dd[_0x516c80(0x25d)])throw new common_1['HttpException'](_0x516c80(0x25a),common_1['HttpStatus']['BAD_REQUEST']);return _0xf78dd[_0x516c80(0x25d)];}else{const _0x522607=await this[_0x516c80(0x1ef)](_0x365b9d);return await this[_0x516c80(0x202)]({'filename':_0x481b80,'buffer':_0x522607,'dir':_0x3012bc});}}catch(_0xbf1204){console['log'](_0x516c80(0x25b),_0xbf1204);throw new common_1[(_0x516c80(0x245))](_0xbf1204[_0x516c80(0x211)],common_1[_0x516c80(0x238)]['BAD_REQUEST']);}}async[_0x2e3da0(0x1f0)](_0x36e0c0){const _0x295739=_0x2e3da0;if(_0x36e0c0===_0x295739(0x248)){const {aliOssRegion:_0x3acaf0,aliOssBucket:_0x1d2914,aliOssAccessKeyId:_0x24b2e9,aliOssAccessKeySecret:_0x17f2a7}=await this['globalConfigService'][_0x295739(0x1fd)]([_0x295739(0x246),'aliOssBucket',_0x295739(0x206),_0x295739(0x226)]);return{'region':_0x3acaf0,'bucket':_0x1d2914,'accessKeyId':_0x24b2e9,'accessKeySecret':_0x17f2a7};}if(_0x36e0c0===_0x295739(0x258)){const {cosBucket:_0x3b26dd,cosRegion:_0x25d17f,cosSecretId:_0xb1727c,cosSecretKey:_0x2a6f79,tencentCosAcceleratedDomain:_0x5d27a8}=await this[_0x295739(0x23e)][_0x295739(0x1fd)]([_0x295739(0x23c),_0x295739(0x259),_0x295739(0x21a),_0x295739(0x221),_0x295739(0x220)]);return{'Bucket':_0x3b26dd,'Region':_0x25d17f,'SecretId':_0xb1727c,'SecretKey':_0x2a6f79,'acceleratedDomain':_0x5d27a8};}if(_0x36e0c0===_0x295739(0x262)){const {cheveretoKey:_0x2f730d,cheveretoUploadPath:_0x21d4ba}=await this[_0x295739(0x23e)]['getConfigs']([_0x295739(0x239),_0x295739(0x24e)]);return{'key':_0x2f730d,'uploadPath':_0x21d4ba};}}async[_0x2e3da0(0x263)](){const _0x12c5d6=_0x2e3da0,_0x1019c8={'filename':_0x12c5d6(0x1f8),'dir':'mj','url':'https://cdn.discordapp.com/attachments/1097409128491651135/1169910551275638855/snine_60b5c001b_A_young_girl_smiles_brightly_in_the_pure_blue_f_8a41fe5f-5101-4c1e-b948-a748a0583577.png?ex=65571f1b&is=6544aa1b&hm=b82f2d88224eb7942e24c63a8e519c7693de12a2b96daa0f327dfb8f691b1480&'},_0x2ad682=await this[_0x12c5d6(0x241)](_0x1019c8);return console[_0x12c5d6(0x20a)](_0x12c5d6(0x214),_0x2ad682),_0x2ad682;}async['getBufferFromUrl'](_0x5a1a15){const _0x276365=_0x2e3da0,_0x5e0bd6=await this[_0x276365(0x23e)][_0x276365(0x1fd)]([_0x276365(0x24f)])||0x0,_0x37bc5f=await axios_1[_0x276365(0x21f)][_0x276365(0x22d)](_0x5a1a15,{'responseType':_0x276365(0x1ec)});return new Promise((_0x22a6fe,_0x1660b4)=>{const _0x5ab958=_0x276365;streamToBuffer(_0x37bc5f[_0x5ab958(0x25d)],(_0x5c69f1,_0x356abc)=>{const _0x1e5b33=_0x5ab958;if(_0x5c69f1)throw new common_1[(_0x1e5b33(0x245))]('获取图片资源失败、请重新试试吧！',common_1[_0x1e5b33(0x238)][_0x1e5b33(0x1f6)]);else _0x22a6fe(_0x356abc);});});}};UploadService=__decorate([(0x0,common_1[_0x2e3da0(0x240)])(),__metadata(_0x2e3da0(0x209),[globalConfig_service_1[_0x2e3da0(0x25e)]])],UploadService),exports[_0x2e3da0(0x1f5)]=UploadService;