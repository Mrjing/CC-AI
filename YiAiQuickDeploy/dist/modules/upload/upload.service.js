'use strict';function _0xd568(_0x4ee61d,_0x384e5f){const _0x22f960=_0x22f9();return _0xd568=function(_0xd568e8,_0x18259b){_0xd568e8=_0xd568e8-0x193;let _0x5075cf=_0x22f960[_0xd568e8];return _0x5075cf;},_0xd568(_0x4ee61d,_0x384e5f);}const _0xa75a22=_0xd568;(function(_0xb73b0f,_0x487400){const _0x41492b=_0xd568,_0x480427=_0xb73b0f();while(!![]){try{const _0x1d7f05=parseInt(_0x41492b(0x1c3))/0x1*(-parseInt(_0x41492b(0x1b1))/0x2)+parseInt(_0x41492b(0x1df))/0x3+parseInt(_0x41492b(0x199))/0x4*(parseInt(_0x41492b(0x1ab))/0x5)+-parseInt(_0x41492b(0x1ae))/0x6+parseInt(_0x41492b(0x19f))/0x7*(-parseInt(_0x41492b(0x1e6))/0x8)+parseInt(_0x41492b(0x1fe))/0x9*(-parseInt(_0x41492b(0x19d))/0xa)+parseInt(_0x41492b(0x1b3))/0xb*(parseInt(_0x41492b(0x1c9))/0xc);if(_0x1d7f05===_0x487400)break;else _0x480427['push'](_0x480427['shift']());}catch(_0xf6862b){_0x480427['push'](_0x480427['shift']());}}}(_0x22f9,0x45650));function _0x22f9(){const _0x2aa311=['stream','onModuleInit','10clfaaO','base64','385CMOiCJ','ali','cosBucket','catch','上传失败:\x20','上传图片失败[ALI][url]','上传图片失败[ten]','uploadFile','uploadFileByAliOss','Injectable','mjProxyUrl','使用Chevereto上传','当前已开启全球加速----------------->','endsWith','uploadFileByAliOssFromUrl','debug','35087XZHOwA','TODO->error:\x20\x20','STANDARD','uploadFileByTencentCosFromUrl','cheveretoStatus','cosRegion','322500LNPkvQ','准备上传文件:\x20','post','tencentCosStatus','removeSpecialCharacters','decorate','mjProxy','cheveretoKey','length','image','使用腾讯云COS上传','上传配置状态\x20-\x20腾讯云:\x20','uploadFileByTencentCos','object',',\x20类型:\x20','../../common/utils','stringify','aliOssStatus','HttpStatus','globalConfigService','url','mjdev','504405AJTFMd','slice','res:\x20','GlobalConfigService','https://','Chevereto\x20--->\x20res','getConfigs','1213736HSXwZN','cosSecretKey','log','png','getBufferFromUrl','message','env','tencent','chevereto','getOwnPropertyDescriptor','stream-to-buffer','defineProperty','aliOssAccessKeySecret','请先前往后台配置上传图片的方式','get','@nestjs/common','uploadFileByChevereto','form-data','Logger','function','https://cdn.discordapp.com/attachments/1097409128491651135/1169910551275638855/snine_60b5c001b_A_young_girl_smiles_brightly_in_the_pure_blue_f_8a41fe5f-5101-4c1e-b948-a748a0583577.png?ex=65571f1b&is=6544aa1b&hm=b82f2d88224eb7942e24c63a8e519c7693de12a2b96daa0f327dfb8f691b1480&','axios','getUploadConfig','__esModule','153xlyiAp','append','tencentCos','source','toString','code','uploadFileByCheveretoFromUrl','aliyun','error','replace','cos-nodejs-sdk-v5',',\x20Chevereto:\x20',',\x20阿里云:\x20','上传图片失败[Chevereto]','tencentCosAcceleratedDomain','aliOssBucket','design:paramtypes','uploadFileFromUrl','上传图片失败[Chevereto|buffer]\x20-->\x20','then','4szyZDD','createRandomUid','metadata','BAD_REQUEST','311770HocbOs','error:\x20','7GQUYgf','__decorate','putObject','aliOssAccessKeyId','cheveretoUploadPath','使用阿里云OSS上传','UploadService','response','/mj/replaceUpload','data','default','https://$2','649085dFswqm','HttpException','cosSecretId','583056fgLVII'];_0x22f9=function(){return _0x2aa311;};return _0x22f9();}var __decorate=this&&this[_0xa75a22(0x1a0)]||function(_0x2b8cbf,_0x483032,_0x2fe25a,_0x32b6b0){const _0x3840b1=_0xa75a22;var _0x5bc222=arguments[_0x3840b1(0x1d1)],_0x12fdc8=_0x5bc222<0x3?_0x483032:_0x32b6b0===null?_0x32b6b0=Object[_0x3840b1(0x1ef)](_0x483032,_0x2fe25a):_0x32b6b0,_0xce9f4e;if(typeof Reflect===_0x3840b1(0x1d6)&&typeof Reflect[_0x3840b1(0x1ce)]===_0x3840b1(0x1f9))_0x12fdc8=Reflect['decorate'](_0x2b8cbf,_0x483032,_0x2fe25a,_0x32b6b0);else{for(var _0x1bd2b8=_0x2b8cbf[_0x3840b1(0x1d1)]-0x1;_0x1bd2b8>=0x0;_0x1bd2b8--)if(_0xce9f4e=_0x2b8cbf[_0x1bd2b8])_0x12fdc8=(_0x5bc222<0x3?_0xce9f4e(_0x12fdc8):_0x5bc222>0x3?_0xce9f4e(_0x483032,_0x2fe25a,_0x12fdc8):_0xce9f4e(_0x483032,_0x2fe25a))||_0x12fdc8;}return _0x5bc222>0x3&&_0x12fdc8&&Object[_0x3840b1(0x1f1)](_0x483032,_0x2fe25a,_0x12fdc8),_0x12fdc8;},__metadata=this&&this['__metadata']||function(_0x8e8f76,_0x1675b0){const _0x56e662=_0xa75a22;if(typeof Reflect===_0x56e662(0x1d6)&&typeof Reflect[_0x56e662(0x19b)]==='function')return Reflect[_0x56e662(0x19b)](_0x8e8f76,_0x1675b0);};Object[_0xa75a22(0x1f1)](exports,_0xa75a22(0x1fd),{'value':!![]}),exports[_0xa75a22(0x1a5)]=void 0x0;const common_1=require(_0xa75a22(0x1f5)),TENCENTCOS=require(_0xa75a22(0x208)),ALIOSS=require('ali-oss'),axios_1=require(_0xa75a22(0x1fb)),streamToBuffer=require(_0xa75a22(0x1f0)),utils_1=require(_0xa75a22(0x1d8)),globalConfig_service_1=require('../globalConfig/globalConfig.service'),FormData=require(_0xa75a22(0x1f7));let UploadService=class UploadService{constructor(_0x25869a){const _0x5aa9d2=_0xa75a22;this[_0x5aa9d2(0x1dc)]=_0x25869a;}[_0xa75a22(0x1b0)](){}async[_0xa75a22(0x1ba)](_0x186162){const _0x1ff56b=_0xa75a22,{filename:_0x5c1a59,originalname:_0x4e327e,buffer:_0xe26f50,dir:dir='ai',mimetype:_0x43fa9a}=_0x186162,_0x3127fa=_0x43fa9a?_0x43fa9a['split']('/')[0x1]:'',_0x2a364c=_0x4e327e||_0x5c1a59;common_1[_0x1ff56b(0x1f8)]['debug'](_0x1ff56b(0x1ca)+_0x2a364c+_0x1ff56b(0x1d7)+_0x3127fa,_0x1ff56b(0x1a5));const {tencentCosStatus:tencentCosStatus=0x0,aliOssStatus:aliOssStatus=0x0,cheveretoStatus:cheveretoStatus=0x0}=await this[_0x1ff56b(0x1dc)][_0x1ff56b(0x1e5)](['tencentCosStatus',_0x1ff56b(0x1da),_0x1ff56b(0x1c7)]);common_1[_0x1ff56b(0x1f8)]['debug'](_0x1ff56b(0x1d4)+tencentCosStatus+_0x1ff56b(0x20a)+aliOssStatus+_0x1ff56b(0x209)+cheveretoStatus,_0x1ff56b(0x1a5));if(!Number(tencentCosStatus)&&!Number(aliOssStatus)&&!Number(cheveretoStatus))throw new common_1[(_0x1ff56b(0x1ac))](_0x1ff56b(0x1f3),common_1[_0x1ff56b(0x1db)][_0x1ff56b(0x19c)]);try{if(Number(tencentCosStatus))return common_1['Logger'][_0x1ff56b(0x1c2)](_0x1ff56b(0x1d3),'UploadService'),await this[_0x1ff56b(0x1d5)]({'filename':_0x2a364c,'buffer':_0xe26f50,'dir':dir,'fileTyle':_0x3127fa});if(Number(aliOssStatus))return common_1['Logger'][_0x1ff56b(0x1c2)](_0x1ff56b(0x1a4),_0x1ff56b(0x1a5)),await this[_0x1ff56b(0x1bb)]({'filename':_0x2a364c,'buffer':_0xe26f50,'dir':dir,'fileTyle':_0x3127fa});if(Number(cheveretoStatus)){common_1[_0x1ff56b(0x1f8)][_0x1ff56b(0x1c2)](_0x1ff56b(0x1be),_0x1ff56b(0x1a5));const {filename:_0x39a6e3,buffer:_0x1c9c6c,dir:_0x5bea1e}=_0x186162;return await this[_0x1ff56b(0x1f6)]({'filename':_0x39a6e3,'buffer':_0x1c9c6c[_0x1ff56b(0x202)](_0x1ff56b(0x1b2)),'dir':_0x5bea1e,'fileTyle':_0x3127fa});}}catch(_0x201b5b){common_1['Logger'][_0x1ff56b(0x206)](_0x1ff56b(0x1b7)+_0x201b5b[_0x1ff56b(0x1eb)],_0x1ff56b(0x1a5));throw _0x201b5b;}}async['getUploadType'](){const _0x2988d4=_0xa75a22,{tencentCosStatus:tencentCosStatus=0x0,aliOssStatus:aliOssStatus=0x0,cheveretoStatus:cheveretoStatus=0x0}=await this[_0x2988d4(0x1dc)][_0x2988d4(0x1e5)]([_0x2988d4(0x1cc),_0x2988d4(0x1da),_0x2988d4(0x1c7)]);if(Number(tencentCosStatus))return'tencent';if(Number(aliOssStatus))return _0x2988d4(0x1b4);if(Number(cheveretoStatus))return _0x2988d4(0x1ee);}async[_0xa75a22(0x196)]({filename:_0x2ac80b,url:_0x475811,dir:dir='mj'}){const _0x1fb33d=_0xa75a22;dir=process[_0x1fb33d(0x1ec)]['ISDEV']?_0x1fb33d(0x1de):dir;const {tencentCosStatus:tencentCosStatus=0x0,aliOssStatus:aliOssStatus=0x0,cheveretoStatus:cheveretoStatus=0x0}=await this[_0x1fb33d(0x1dc)][_0x1fb33d(0x1e5)]([_0x1fb33d(0x1cc),_0x1fb33d(0x1da),'cheveretoStatus']);if(!Number(tencentCosStatus)&&!Number(aliOssStatus)&&!Number(cheveretoStatus))throw new common_1['HttpException'](_0x1fb33d(0x1f3),common_1[_0x1fb33d(0x1db)]['BAD_REQUEST']);if(Number(tencentCosStatus))return this[_0x1fb33d(0x1c6)]({'filename':_0x2ac80b,'url':_0x475811,'dir':dir});if(Number(aliOssStatus)){const _0x173d1a=await this['uploadFileByAliOssFromUrl']({'filename':_0x2ac80b,'url':_0x475811,'dir':dir});return _0x173d1a;}if(Number(cheveretoStatus))return await this['uploadFileByCheveretoFromUrl']({'filename':_0x2ac80b,'url':_0x475811,'dir':dir});}async[_0xa75a22(0x1d5)]({filename:_0x54858b,buffer:_0x426194,dir:_0x239a6d,fileTyle:_0x1ff218}){const _0xe3266=_0xa75a22,{Bucket:_0x213824,Region:_0x1cc8d6,SecretId:_0x2b68de,SecretKey:_0x4d0512}=await this[_0xe3266(0x1fc)]('tencent');this[_0xe3266(0x200)]=new TENCENTCOS({'SecretId':_0x2b68de,'SecretKey':_0x4d0512,'FileParallelLimit':0xa});try{return new Promise(async(_0x570c4a,_0x3f87d8)=>{const _0x53fcff=_0xe3266,_0x576811=_0x1ff218||'png';this['tencentCos'][_0x53fcff(0x1a1)]({'Bucket':(0x0,utils_1['removeSpecialCharacters'])(_0x213824),'Region':(0x0,utils_1['removeSpecialCharacters'])(_0x1cc8d6),'Key':_0x239a6d+'/'+(_0x54858b||(0x0,utils_1['createRandomUid'])()+'.'+_0x1ff218),'StorageClass':_0x53fcff(0x1c5),'Body':_0x426194},async(_0x5ba3bd,_0x2666d7)=>{const _0x352dc5=_0x53fcff;if(_0x5ba3bd)return console['log']('cos\x20->\x20err:\x20',_0x5ba3bd),_0x3f87d8(_0x5ba3bd);let _0x248a06=_0x2666d7['Location']['replace'](/^(http:\/\/|https:\/\/|\/\/|)(.*)/,_0x352dc5(0x1aa));const {acceleratedDomain:_0x19fdc2}=await this[_0x352dc5(0x1fc)]('tencent');return _0x19fdc2&&(_0x248a06=_0x248a06[_0x352dc5(0x207)](/^(https:\/\/[^/]+)(\/.*)$/,_0x352dc5(0x1e3)+_0x19fdc2+'$2'),console[_0x352dc5(0x1e8)](_0x352dc5(0x1bf),_0x248a06)),_0x570c4a(_0x248a06);});});}catch(_0x2dd485){console['log'](_0xe3266(0x19e),_0x2dd485);throw new common_1[(_0xe3266(0x1ac))](_0xe3266(0x1b9),common_1[_0xe3266(0x1db)][_0xe3266(0x19c)]);}}async[_0xa75a22(0x1c6)]({filename:_0x5378c9,url:_0x24a840,dir:_0x15d530}){const _0x1f7b46=_0xa75a22,{Bucket:_0x5d90d6,Region:_0x3420c9,SecretId:_0x37d24e,SecretKey:_0x22117a}=await this[_0x1f7b46(0x1fc)](_0x1f7b46(0x1ed));this[_0x1f7b46(0x200)]=new TENCENTCOS({'SecretId':_0x37d24e,'SecretKey':_0x22117a,'FileParallelLimit':0xa});try{const _0x44ab7a=await this[_0x1f7b46(0x1dc)]['getConfigs'](['mjProxy'])||0x0,_0x27f140=await this['getBufferFromUrl'](_0x24a840);return await this[_0x1f7b46(0x1d5)]({'filename':_0x5378c9,'buffer':_0x27f140,'dir':_0x15d530,'fileTyle':''});}catch(_0x1ed081){console[_0x1f7b46(0x1e8)](_0x1f7b46(0x1c4),_0x1ed081);throw new common_1[(_0x1f7b46(0x1ac))]('上传图片失败[ten][url]',common_1[_0x1f7b46(0x1db)][_0x1f7b46(0x19c)]);}}async[_0xa75a22(0x1bb)]({filename:_0x5e4032,buffer:_0x194b09,dir:_0x1a1b57,fileTyle:fileTyle='png'}){const _0x7dc2d5=_0xa75a22,{region:_0x16f8b2,bucket:_0x4c40e4,accessKeyId:_0x24a6fd,accessKeySecret:_0x35e811}=await this['getUploadConfig'](_0x7dc2d5(0x1b4)),_0xdf1b19=new ALIOSS({'region':(0x0,utils_1[_0x7dc2d5(0x1cd)])(_0x16f8b2),'accessKeyId':_0x24a6fd,'accessKeySecret':_0x35e811,'bucket':(0x0,utils_1['removeSpecialCharacters'])(_0x4c40e4)});try{return console[_0x7dc2d5(0x1e8)]('ali\x20开始上传'),new Promise((_0xbda0e5,_0x1c89dd)=>{const _0x5e976a=_0x7dc2d5;_0xdf1b19['put'](_0x1a1b57+'/'+(_0x5e4032||(0x0,utils_1[_0x5e976a(0x19a)])()+'.'+fileTyle),_0x194b09)[_0x5e976a(0x198)](_0xdeb83d=>{const _0x5d30c1=_0x5e976a;_0xbda0e5(_0xdeb83d[_0x5d30c1(0x1dd)]);})[_0x5e976a(0x1b6)](_0x4d05bd=>{_0x1c89dd(_0x4d05bd);});});}catch(_0x192b38){throw new common_1[(_0x7dc2d5(0x1ac))]('上传图片失败[ali]',common_1[_0x7dc2d5(0x1db)][_0x7dc2d5(0x19c)]);}}async[_0xa75a22(0x1c1)]({filename:_0x30ab5d,url:_0x558585,dir:_0x44876e}){const _0x266cb1=_0xa75a22,{region:_0x4c79bd,bucket:_0x363ca5,accessKeyId:_0x1cf7db,accessKeySecret:_0x5ba7a9}=await this[_0x266cb1(0x1fc)](_0x266cb1(0x1b4)),_0x33f951=new ALIOSS({'region':_0x4c79bd,'accessKeyId':_0x1cf7db,'accessKeySecret':_0x5ba7a9,'bucket':_0x363ca5});try{const _0x15fe2f=await this[_0x266cb1(0x1dc)][_0x266cb1(0x1e5)](['mjProxy'])||0x0;if(Number(_0x15fe2f)===0x1){const _0x4b3952={'url':_0x558585,'cosParams':{'region':_0x4c79bd,'bucket':_0x363ca5,'accessKeyId':_0x1cf7db,'accessKeySecret':_0x5ba7a9},'cosType':_0x266cb1(0x205)},_0x4490ba=await this[_0x266cb1(0x1dc)][_0x266cb1(0x1e5)]([_0x266cb1(0x1bd)])||'http://172.247.48.137:8000',_0x1096bd=await axios_1['default'][_0x266cb1(0x1cb)](_0x4490ba+'/mj/replaceUpload',_0x4b3952);if(!(_0x1096bd===null||_0x1096bd===void 0x0?void 0x0:_0x1096bd[_0x266cb1(0x1a8)]))throw new common_1['HttpException'](_0x266cb1(0x1b8),common_1[_0x266cb1(0x1db)]['BAD_REQUEST']);return _0x1096bd[_0x266cb1(0x1a8)];}else{const _0xc5d8f0=await this[_0x266cb1(0x1ea)](_0x558585);return await this['uploadFileByAliOss']({'filename':_0x30ab5d,'buffer':_0xc5d8f0,'dir':_0x44876e});}}catch(_0x46fdaf){throw new common_1['HttpException']('上传图片失败[ALI][url]',common_1['HttpStatus']['BAD_REQUEST']);}}async['uploadFileByChevereto']({filename:filename='',buffer:_0x578a0b,dir:dir='ai',fileTyle:fileTyle=_0xa75a22(0x1e9)}){const _0x3e4e2b=_0xa75a22;var _0x3f6fb7;const {key:_0x558ec4,uploadPath:_0x339966}=await this[_0x3e4e2b(0x1fc)](_0x3e4e2b(0x1ee));let _0x29acb5=_0x339966[_0x3e4e2b(0x1c0)]('/')?_0x339966[_0x3e4e2b(0x1e0)](0x0,-0x1):_0x339966;const _0x14dba0=new FormData();_0x14dba0[_0x3e4e2b(0x1ff)](_0x3e4e2b(0x201),_0x578a0b),_0x14dba0[_0x3e4e2b(0x1ff)]('key',_0x558ec4);try{const _0x5d9107=await axios_1['default'][_0x3e4e2b(0x1cb)](_0x29acb5,_0x14dba0,{'headers':{'X-API-Key':_0x558ec4}});if((_0x5d9107===null||_0x5d9107===void 0x0?void 0x0:_0x5d9107['status'])===0xc8)return _0x5d9107[_0x3e4e2b(0x1a8)][_0x3e4e2b(0x1d2)][_0x3e4e2b(0x1dd)];else console[_0x3e4e2b(0x1e8)](_0x3e4e2b(0x1e4),_0x5d9107===null||_0x5d9107===void 0x0?void 0x0:_0x5d9107['data'][_0x3e4e2b(0x203)],_0x5d9107===null||_0x5d9107===void 0x0?void 0x0:_0x5d9107[_0x3e4e2b(0x1a8)][_0x3e4e2b(0x206)][_0x3e4e2b(0x1eb)]),common_1[_0x3e4e2b(0x1f8)][_0x3e4e2b(0x206)](_0x3e4e2b(0x20b),JSON[_0x3e4e2b(0x1d9)](_0x5d9107['data']));}catch(_0x53879b){console['log'](_0x3e4e2b(0x19e),_0x53879b);throw new common_1['HttpException'](_0x3e4e2b(0x197)+((_0x3f6fb7=_0x53879b['response'])===null||_0x3f6fb7===void 0x0?void 0x0:_0x3f6fb7[_0x3e4e2b(0x1a8)][_0x3e4e2b(0x206)]['message']),common_1['HttpStatus']['BAD_REQUEST']);}}async[_0xa75a22(0x204)]({filename:_0x5702e9,url:_0x17c222,dir:_0xe56e25}){const _0x1146d7=_0xa75a22;try{const _0x41c013=await this['globalConfigService'][_0x1146d7(0x1e5)]([_0x1146d7(0x1cf)])||0x0;if(Number(_0x41c013)===0x1){const {key:_0x5c02ff,uploadPath:_0x5c9ef8}=await this['getUploadConfig'](_0x1146d7(0x1ee));let _0x3a9758=_0x5c9ef8['endsWith']('/')?_0x5c9ef8['slice'](0x0,-0x1):_0x5c9ef8;const _0x405333={'cosType':_0x1146d7(0x1ee),'url':_0x17c222,'cosParams':{'key':_0x5c02ff,'uploadPath':_0x3a9758}},_0x36bdf7=await this['globalConfigService'][_0x1146d7(0x1e5)]([_0x1146d7(0x1bd)])||'http://172.247.48.137:8000',_0x2842d7=await axios_1['default'][_0x1146d7(0x1cb)](_0x36bdf7+_0x1146d7(0x1a7),_0x405333);if(!_0x2842d7[_0x1146d7(0x1a8)])throw new common_1[(_0x1146d7(0x1ac))]('上传图片失败[Chevereto][url]',common_1[_0x1146d7(0x1db)]['BAD_REQUEST']);return _0x2842d7[_0x1146d7(0x1a8)];}else{const _0xce68ae=await this[_0x1146d7(0x1ea)](_0x17c222);return await this[_0x1146d7(0x1f6)]({'filename':_0x5702e9,'buffer':_0xce68ae,'dir':_0xe56e25});}}catch(_0x2ad17a){console[_0x1146d7(0x1e8)](_0x1146d7(0x19e),_0x2ad17a);throw new common_1['HttpException'](_0x2ad17a[_0x1146d7(0x1a6)],common_1[_0x1146d7(0x1db)][_0x1146d7(0x19c)]);}}async['getUploadConfig'](_0x3dcfdc){const _0x57bb87=_0xa75a22;if(_0x3dcfdc===_0x57bb87(0x1b4)){const {aliOssRegion:_0x557a4e,aliOssBucket:_0x3e62c9,aliOssAccessKeyId:_0x521956,aliOssAccessKeySecret:_0xf8a65d}=await this[_0x57bb87(0x1dc)][_0x57bb87(0x1e5)](['aliOssRegion',_0x57bb87(0x194),_0x57bb87(0x1a2),_0x57bb87(0x1f2)]);return{'region':_0x557a4e,'bucket':_0x3e62c9,'accessKeyId':_0x521956,'accessKeySecret':_0xf8a65d};}if(_0x3dcfdc===_0x57bb87(0x1ed)){const {cosBucket:_0xc67126,cosRegion:_0x2169d4,cosSecretId:_0x3155fb,cosSecretKey:_0x3860e2,tencentCosAcceleratedDomain:_0x111355}=await this[_0x57bb87(0x1dc)][_0x57bb87(0x1e5)]([_0x57bb87(0x1b5),_0x57bb87(0x1c8),_0x57bb87(0x1ad),_0x57bb87(0x1e7),_0x57bb87(0x193)]);return{'Bucket':_0xc67126,'Region':_0x2169d4,'SecretId':_0x3155fb,'SecretKey':_0x3860e2,'acceleratedDomain':_0x111355};}if(_0x3dcfdc===_0x57bb87(0x1ee)){const {cheveretoKey:_0x47e3fe,cheveretoUploadPath:_0x2663fa}=await this['globalConfigService'][_0x57bb87(0x1e5)]([_0x57bb87(0x1d0),_0x57bb87(0x1a3)]);return{'key':_0x47e3fe,'uploadPath':_0x2663fa};}}async['test'](){const _0x13512c=_0xa75a22,_0x59c2f4={'filename':'mjtest.png','dir':'mj','url':_0x13512c(0x1fa)},_0x5e8706=await this[_0x13512c(0x196)](_0x59c2f4);return console[_0x13512c(0x1e8)](_0x13512c(0x1e1),_0x5e8706),_0x5e8706;}async[_0xa75a22(0x1ea)](_0xcebbd5){const _0x18500c=_0xa75a22,_0x4eb141=await this[_0x18500c(0x1dc)][_0x18500c(0x1e5)]([_0x18500c(0x1cf)])||0x0,_0x172ab2=await axios_1[_0x18500c(0x1a9)][_0x18500c(0x1f4)](_0xcebbd5,{'responseType':_0x18500c(0x1af)});return new Promise((_0x27d550,_0x3a240d)=>{const _0x16347a=_0x18500c;streamToBuffer(_0x172ab2[_0x16347a(0x1a8)],(_0x1e139d,_0x332f9f)=>{const _0x4afa2f=_0x16347a;if(_0x1e139d)throw new common_1[(_0x4afa2f(0x1ac))]('获取图片资源失败、请重新试试吧！',common_1[_0x4afa2f(0x1db)][_0x4afa2f(0x19c)]);else _0x27d550(_0x332f9f);});});}};UploadService=__decorate([(0x0,common_1[_0xa75a22(0x1bc)])(),__metadata(_0xa75a22(0x195),[globalConfig_service_1[_0xa75a22(0x1e2)]])],UploadService),exports[_0xa75a22(0x1a5)]=UploadService;