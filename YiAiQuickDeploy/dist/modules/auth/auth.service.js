'use strict';const _0x5051db=_0xb0bb;(function(_0xa75150,_0x24d621){const _0x2d8eee=_0xb0bb,_0x624049=_0xa75150();while(!![]){try{const _0x4a55c0=parseInt(_0x2d8eee(0x1d0))/0x1*(-parseInt(_0x2d8eee(0x1e7))/0x2)+-parseInt(_0x2d8eee(0x224))/0x3+parseInt(_0x2d8eee(0x1d6))/0x4+parseInt(_0x2d8eee(0x1f8))/0x5*(parseInt(_0x2d8eee(0x1c5))/0x6)+-parseInt(_0x2d8eee(0x228))/0x7*(-parseInt(_0x2d8eee(0x1c2))/0x8)+-parseInt(_0x2d8eee(0x1c7))/0x9*(parseInt(_0x2d8eee(0x204))/0xa)+-parseInt(_0x2d8eee(0x1f9))/0xb;if(_0x4a55c0===_0x24d621)break;else _0x624049['push'](_0x624049['shift']());}catch(_0x479d68){_0x624049['push'](_0x624049['shift']());}}}(_0x3e6c,0xa84ff));var __decorate=this&&this['__decorate']||function(_0x405b9d,_0x30fa31,_0x59ba61,_0x17e844){const _0x17527a=_0xb0bb;var _0x51b0bd=arguments[_0x17527a(0x1e1)],_0x2dd92c=_0x51b0bd<0x3?_0x30fa31:_0x17e844===null?_0x17e844=Object[_0x17527a(0x21f)](_0x30fa31,_0x59ba61):_0x17e844,_0x2d0cb1;if(typeof Reflect==='object'&&typeof Reflect[_0x17527a(0x203)]==='function')_0x2dd92c=Reflect[_0x17527a(0x203)](_0x405b9d,_0x30fa31,_0x59ba61,_0x17e844);else{for(var _0x5ba18d=_0x405b9d[_0x17527a(0x1e1)]-0x1;_0x5ba18d>=0x0;_0x5ba18d--)if(_0x2d0cb1=_0x405b9d[_0x5ba18d])_0x2dd92c=(_0x51b0bd<0x3?_0x2d0cb1(_0x2dd92c):_0x51b0bd>0x3?_0x2d0cb1(_0x30fa31,_0x59ba61,_0x2dd92c):_0x2d0cb1(_0x30fa31,_0x59ba61))||_0x2dd92c;}return _0x51b0bd>0x3&&_0x2dd92c&&Object[_0x17527a(0x19b)](_0x30fa31,_0x59ba61,_0x2dd92c),_0x2dd92c;},__metadata=this&&this[_0x5051db(0x1c1)]||function(_0xeaa924,_0xe6f96e){const _0x24cc75=_0x5051db;if(typeof Reflect===_0x24cc75(0x1b6)&&typeof Reflect['metadata']===_0x24cc75(0x221))return Reflect[_0x24cc75(0x1e5)](_0xeaa924,_0xe6f96e);},__param=this&&this[_0x5051db(0x1f4)]||function(_0x34a04a,_0x1b99cd){return function(_0x294700,_0x5066ff){_0x1b99cd(_0x294700,_0x5066ff,_0x34a04a);};};function _0x3e6c(){const _0x5f1201=['registerSuccessEmailTitle','padStart','updatePassByOther','verifyUserPassword','updatePassword','verifyUserRegisterByPhone','ttl','HttpException',':CAPTCHA:','验证码已过期、请重新发送！','ACTIVE','code','../globalConfig/globalConfig.service','用户登录异常，请联系管理员处理','getOwnPropertyDescriptor','UserStatusEnum','function','/api/auth/registerSuccess?id=','verificationService','910908DJsxWb','&registerSuccessEmailTitle=','register','../verification/verification.service','1433089RTtKhT','BAD_REQUEST','userBalanceService','无权此操作！','loginByOpenId','非法操作、请联系管理员！','registerSuccessEmaileAppend','createUserAndVerifycation','verifyCaptcha','getInfo','keys','../../common/utils','/api/auth/registerError?message=','defineProperty','UserService','response','UserBalanceService','../../common/constants/user.constant','密码修改成功','saveToken','updateUserPassword','@nestjs/jwt','../globalConfig/config.entity','AuthService','queryUserInfoByPhone','svg-captcha','&registerSuccessEmaileAppend=','getClientIp','design:paramtypes','getIp','registerFailEmailTitle','MailerService','getNamespace','JwtService','loginOrRegisterByPhone','@nestjs/common','127.0.0.1','@nestjs/typeorm','user','registerByPhone','object','createUser','账户已被激活过','sendPhoneCode','login','activateAccount','VerificationService','InjectRepository','getConfigs','UserStatusErrMsg','ipAddress','__metadata','40kqoLko','set','#fff','61818uItrxF','createMathExpr','3031191BiZBKw','internal','addBalanceToNewUser','get','queryUserInfoById','getUserStatus','VerificationEnum','globalConfigService','无权此操作、请联系管理员！','1YXwYFS','IPv4','旧密码错误、请检查提交','oldPassword','loginByPhone','Injectable','4815840RzPnMd','verifyUserCredentials','text','游客小C','验证码填写错误、请重新输入！','address','HttpStatus','getUserInfo','sign','toString','userService','length','userDefautlAvatar','family','onModuleInit','metadata','forEach','631042waPihW',':PHONECODE:','data','registerSuccessEmailTeamName','client','@nine.com','savaLoginIp','createRandomUid','error:\x20','avatar','../user/user.service','configEntity','../userBalance/userBalance.service','__param','秒内不得重复发送短信！','find','password','615cYrzRw','12934933HdsoRB','registerFailEmailTeamName','RedisCacheService','bcryptjs','verifyCode','&registerFailEmailTitle=','captcha','&registerFailEmailTeamName=','&email=','../../common/constants/verification.constant','decorate','30uFGQYp','createTokenFromFingerprint','jwtService','configKey','GlobalConfigService','updateUserStatus','log','qureyUserInfoByInviteCode','typeorm','userId','Registration','redisCacheService','验证码类型错误'];_0x3e6c=function(){return _0x5f1201;};return _0x3e6c();}Object[_0x5051db(0x19b)](exports,'__esModule',{'value':!![]}),exports[_0x5051db(0x1a5)]=void 0x0;function _0xb0bb(_0x17a8c9,_0x7d8248){const _0x3e6c4d=_0x3e6c();return _0xb0bb=function(_0xb0bb94,_0xff4e5a){_0xb0bb94=_0xb0bb94-0x190;let _0x5f7a2b=_0x3e6c4d[_0xb0bb94];return _0x5f7a2b;},_0xb0bb(_0x17a8c9,_0x7d8248);}const globalConfig_service_1=require(_0x5051db(0x21d)),verification_constant_1=require(_0x5051db(0x202)),verification_service_1=require(_0x5051db(0x227)),common_1=require(_0x5051db(0x1b1)),jwt_1=require(_0x5051db(0x1a3)),user_service_1=require(_0x5051db(0x1f1)),mailer_service_1=require('../mailer/mailer.service'),user_constant_1=require(_0x5051db(0x19f)),userBalance_service_1=require(_0x5051db(0x1f3)),config_entity_1=require(_0x5051db(0x1a4)),typeorm_1=require(_0x5051db(0x20c)),typeorm_2=require(_0x5051db(0x1b3)),utils_1=require(_0x5051db(0x199)),os=require('os'),redisCache_service_1=require('../redisCache/redisCache.service'),svgCaptcha=require(_0x5051db(0x1a7)),bcrypt=require(_0x5051db(0x1fc));let AuthService=class AuthService{constructor(_0x1e9a2b,_0xec6dcd,_0x4ba563,_0x1949f5,_0x394cfa,_0x1a92a6,_0x48dc14,_0x51f5da){const _0x23cd06=_0x5051db;this[_0x23cd06(0x1f2)]=_0x1e9a2b,this[_0x23cd06(0x1e0)]=_0xec6dcd,this['jwtService']=_0x4ba563,this['mailerService']=_0x1949f5,this[_0x23cd06(0x223)]=_0x394cfa,this[_0x23cd06(0x190)]=_0x1a92a6,this[_0x23cd06(0x20f)]=_0x48dc14,this['globalConfigService']=_0x51f5da;}async[_0x5051db(0x1e4)](){const _0x27dc10=_0x5051db;this[_0x27dc10(0x1ab)]();}async[_0x5051db(0x226)](_0x37a21c,_0x4ab31d){const _0x1ead89=_0x5051db;await this[_0x1ead89(0x223)][_0x1ead89(0x196)](_0x37a21c);const _0x2c1d85=await this[_0x1ead89(0x1e0)][_0x1ead89(0x195)](_0x37a21c,_0x4ab31d),{username:_0x5242f7,email:_0xe17eb9,client:_0x25c002,id:_0x59d231}=_0x2c1d85,_0x8005fb={'username':_0x5242f7,'email':_0xe17eb9,'id':_0x59d231};return _0x25c002&&(_0x8005fb[_0x1ead89(0x1eb)]=_0x25c002),_0x8005fb;}async[_0x5051db(0x1b5)](_0x1a16a5,_0x1dc065){const _0x487d12=_0x5051db,{username:_0xe95841,password:_0x3495de,phone:_0x3c2df,phoneCode:_0x40de26,invitedBy:_0x24ed7b}=_0x1a16a5;await this[_0x487d12(0x1e0)][_0x487d12(0x216)](_0x1a16a5);const _0x31fd7d=await this[_0x487d12(0x1ce)][_0x487d12(0x1ae)](),_0x2ab2c1=_0x31fd7d+_0x487d12(0x1e8)+_0x3c2df,_0x170025=await this['redisCacheService']['get']({'key':_0x2ab2c1});if(!_0x170025)throw new common_1[(_0x487d12(0x218))](_0x487d12(0x21a),common_1[_0x487d12(0x1dc)][_0x487d12(0x229)]);if(_0x40de26!==_0x170025)throw new common_1[(_0x487d12(0x218))](_0x487d12(0x1da),common_1[_0x487d12(0x1dc)][_0x487d12(0x229)]);const _0x868752=(0x0,utils_1['createRandomUid'])()+_0x487d12(0x1ec),_0x198bce={'username':_0xe95841,'password':_0x3495de,'phone':_0x3c2df,'invitedBy':_0x24ed7b,'email':_0x868752,'status':user_constant_1[_0x487d12(0x220)][_0x487d12(0x21b)]},_0x53b433=await this[_0x487d12(0x1ce)]['getConfigs'](['userDefautlAvatar']);_0x198bce[_0x487d12(0x1f0)]=_0x53b433;const _0x4c34df=bcrypt['hashSync'](_0x3495de,0xa);_0x198bce[_0x487d12(0x1f7)]=_0x4c34df;const _0x29465f=await this[_0x487d12(0x1e0)][_0x487d12(0x1b7)](_0x198bce);let _0x12712c;_0x24ed7b&&(_0x12712c=await this['userService']['qureyUserInfoByInviteCode'](_0x24ed7b));await this[_0x487d12(0x190)][_0x487d12(0x1c9)](_0x29465f['id'],_0x12712c===null||_0x12712c===void 0x0?void 0x0:_0x12712c['id']);return;}async[_0x5051db(0x1ba)](_0x2d39f1,_0x429230){const _0x324b3c=_0x5051db,_0x2e8778=await this[_0x324b3c(0x1e0)][_0x324b3c(0x1d7)](_0x2d39f1),{username:_0x51ff9b,id:_0x246982,email:_0x1af57c,role:_0x8f9905,openId:_0x2071b3,client:_0x568692}=_0x2e8778,_0x590f30=(0x0,utils_1[_0x324b3c(0x1a9)])(_0x429230);await this['userService'][_0x324b3c(0x1ed)](_0x246982,_0x590f30);const _0x1a0809=await this[_0x324b3c(0x206)]['sign']({'username':_0x51ff9b,'id':_0x246982,'email':_0x1af57c,'role':_0x8f9905,'openId':_0x2071b3,'client':_0x568692});return await this[_0x324b3c(0x20f)]['saveToken'](_0x246982,_0x1a0809),_0x1a0809;}async[_0x5051db(0x1d4)](_0xf5123,_0x13ccab){const _0x47598e=_0x5051db,_0x3e61ea=await this['userService'][_0x47598e(0x1d7)](_0xf5123),{username:_0xedd7f,id:_0xa9de49,email:_0x1a6f6d,role:_0x3c89ce,openId:_0xbc6c3d,client:_0x37718f}=_0x3e61ea,_0x54fd16=(0x0,utils_1[_0x47598e(0x1a9)])(_0x13ccab);await this['userService'][_0x47598e(0x1ed)](_0xa9de49,_0x54fd16);const {phone:_0x2fea73}=_0xf5123,_0x5bc1a9=await this['jwtService'][_0x47598e(0x1de)]({'username':_0xedd7f,'id':_0xa9de49,'email':_0x1a6f6d,'role':_0x3c89ce,'openId':_0xbc6c3d,'client':_0x37718f,'phone':_0x2fea73});return await this['redisCacheService'][_0x47598e(0x1a1)](_0xa9de49,_0x5bc1a9),_0x5bc1a9;}async[_0x5051db(0x1b0)](_0x49c894,_0x2310b8){const _0x2f779f=_0x5051db,{phone:_0x2a6d6f,code:_0x516731}=_0x49c894,_0x53dae0=await this['globalConfigService'][_0x2f779f(0x1ae)](),_0x39f8fe=_0x53dae0+_0x2f779f(0x1e8)+_0x2a6d6f,_0x4161da=await this[_0x2f779f(0x20f)][_0x2f779f(0x1ca)]({'key':_0x39f8fe});if(!_0x4161da)throw new common_1[(_0x2f779f(0x218))](_0x2f779f(0x21a),common_1[_0x2f779f(0x1dc)]['BAD_REQUEST']);if(_0x516731!==_0x4161da)throw new common_1[(_0x2f779f(0x218))](_0x2f779f(0x1da),common_1[_0x2f779f(0x1dc)][_0x2f779f(0x229)]);try{let _0x4a8a1d=await this[_0x2f779f(0x1e0)][_0x2f779f(0x1a6)](_0x2a6d6f);if(!_0x4a8a1d){const _0x22c59a='',_0x20e724={'username':_0x2f779f(0x1d9),'phone':_0x2a6d6f,'email':_0x22c59a,'status':user_constant_1[_0x2f779f(0x220)][_0x2f779f(0x21b)]},_0x148482=await this[_0x2f779f(0x1ce)][_0x2f779f(0x1be)]([_0x2f779f(0x1e2)]);_0x20e724['avatar']=_0x148482,_0x4a8a1d=await this[_0x2f779f(0x1e0)][_0x2f779f(0x1b7)](_0x20e724);}console[_0x2f779f(0x20a)](_0x2f779f(0x1b4),_0x4a8a1d);const {username:_0x2cbacc,id:_0x4b3005,email:_0x2836d2,role:_0x4327b3,openId:_0x23180c,client:_0x40d437}=_0x4a8a1d,_0x16262a=(0x0,utils_1['getClientIp'])(_0x2310b8);await this[_0x2f779f(0x1e0)]['savaLoginIp'](_0x4b3005,_0x16262a);const _0x2884e0=await this['jwtService'][_0x2f779f(0x1de)]({'username':_0x2cbacc,'id':_0x4b3005,'email':_0x2836d2,'role':_0x4327b3,'openId':_0x23180c,'client':_0x40d437,'phone':_0x2a6d6f});return await this['redisCacheService']['saveToken'](_0x4b3005,_0x2884e0),_0x2884e0;}catch(_0x511da4){console[_0x2f779f(0x20a)]('createUser\x20error:\x20',_0x511da4);throw new common_1['HttpException'](_0x2f779f(0x21e),0x1f4);}}async[_0x5051db(0x192)](_0x4c082d,_0x6c575f){const _0x1e641a=_0x5051db,{status:_0x519906}=_0x4c082d;if(_0x519906!==user_constant_1[_0x1e641a(0x220)]['ACTIVE'])throw new common_1[(_0x1e641a(0x218))](user_constant_1[_0x1e641a(0x1bf)][_0x519906],common_1[_0x1e641a(0x1dc)][_0x1e641a(0x229)]);const {username:_0x5f04d4,id:_0x4dd070,email:_0x5f22c9,role:_0x54cfde,openId:_0x5c75cc,client:_0x465cf9}=_0x4c082d,_0xf54c93=(0x0,utils_1[_0x1e641a(0x1a9)])(_0x6c575f);await this['userService']['savaLoginIp'](_0x4dd070,_0xf54c93);const _0x41d4ea=await this[_0x1e641a(0x206)]['sign']({'username':_0x5f04d4,'id':_0x4dd070,'email':_0x5f22c9,'role':_0x54cfde,'openId':_0x5c75cc,'client':_0x465cf9});return await this[_0x1e641a(0x20f)][_0x1e641a(0x1a1)](_0x4dd070,_0x41d4ea),_0x41d4ea;}async[_0x5051db(0x197)](_0x382205){const _0x5c57f7=_0x5051db,{id:_0x38b199}=_0x382205[_0x5c57f7(0x1b4)];return await this[_0x5c57f7(0x1e0)][_0x5c57f7(0x1dd)](_0x38b199);}async[_0x5051db(0x1bb)](_0xbbec98,_0x252c72){const _0x426c2c=_0x5051db,_0x1ec1ec=await this['configEntity'][_0x426c2c(0x1f6)]({'where':{'configKey':(0x0,typeorm_1['In'])([_0x426c2c(0x211),_0x426c2c(0x1ea),'registerSuccessEmaileAppend',_0x426c2c(0x1ac),'registerFailEmailTeamName'])}}),_0x422400=_0x1ec1ec['reduce']((_0x4a79d7,_0x48a0db)=>{const _0x2e151e=_0x426c2c;return _0x4a79d7[_0x48a0db[_0x2e151e(0x207)]]=_0x48a0db['configVal'],_0x4a79d7;},{});try{const _0x3d5b7d=await this[_0x426c2c(0x223)][_0x426c2c(0x1fd)](_0xbbec98,verification_constant_1[_0x426c2c(0x1cd)][_0x426c2c(0x20e)]),{type:_0x150682,userId:_0x7115bc}=_0x3d5b7d;if(_0x150682!==verification_constant_1[_0x426c2c(0x1cd)]['Registration'])throw new common_1[(_0x426c2c(0x218))](_0x426c2c(0x210),common_1[_0x426c2c(0x1dc)]['BAD_REQUEST']);const _0x319707=await this[_0x426c2c(0x1e0)][_0x426c2c(0x1cc)](_0x7115bc);if(_0x319707===user_constant_1['UserStatusEnum']['ACTIVE'])throw new common_1['HttpException'](_0x426c2c(0x1b8),common_1['HttpStatus'][_0x426c2c(0x229)]);await this[_0x426c2c(0x1e0)][_0x426c2c(0x209)](_0x3d5b7d[_0x426c2c(0x20d)],user_constant_1[_0x426c2c(0x220)][_0x426c2c(0x21b)]);const _0x35f0e8=await this[_0x426c2c(0x1e0)][_0x426c2c(0x1cb)](_0x3d5b7d[_0x426c2c(0x20d)]),{username:_0x47c982,email:_0x44c106,id:_0x15393f,invitedBy:_0x406998}=_0x35f0e8;let _0x5101d0;_0x406998&&(_0x5101d0=await this['userService'][_0x426c2c(0x20b)](_0x406998)),await this['userBalanceService'][_0x426c2c(0x1c9)](_0x15393f,_0x5101d0===null||_0x5101d0===void 0x0?void 0x0:_0x5101d0['id']),_0x252c72['redirect'](_0x426c2c(0x222)+_0x15393f[_0x426c2c(0x1df)]()[_0x426c2c(0x212)](0x4,'0')+'&username='+_0x47c982+_0x426c2c(0x201)+_0x44c106+_0x426c2c(0x225)+_0x422400[_0x426c2c(0x211)]+'&registerSuccessEmailTeamName='+_0x422400[_0x426c2c(0x1ea)]+_0x426c2c(0x1a8)+_0x422400[_0x426c2c(0x194)]);}catch(_0x42686d){console[_0x426c2c(0x20a)](_0x426c2c(0x1ef),_0x42686d);const _0x2a0500=_0x42686d[_0x426c2c(0x19d)];_0x252c72['redirect'](_0x426c2c(0x19a)+_0x2a0500+_0x426c2c(0x1fe)+_0x422400[_0x426c2c(0x1ac)]+_0x426c2c(0x200)+_0x422400[_0x426c2c(0x1fa)]);}}async[_0x5051db(0x215)](_0x307dda,_0x1c82c6){const _0x368709=_0x5051db,{id:_0x5de1c0,client:_0x2e912a,role:_0x31a245}=_0x307dda[_0x368709(0x1b4)];if(_0x2e912a&&Number(_0x2e912a)>0x0)throw new common_1[(_0x368709(0x218))](_0x368709(0x1cf),common_1[_0x368709(0x1dc)][_0x368709(0x229)]);if(_0x31a245==='admin')throw new common_1[(_0x368709(0x218))](_0x368709(0x193),common_1[_0x368709(0x1dc)]['BAD_REQUEST']);const _0x2230ea=await this['userService'][_0x368709(0x214)](_0x5de1c0,_0x1c82c6[_0x368709(0x1d3)]);if(!_0x2230ea)throw new common_1[(_0x368709(0x218))](_0x368709(0x1d2),common_1[_0x368709(0x1dc)][_0x368709(0x229)]);return this[_0x368709(0x1e0)][_0x368709(0x1a2)](_0x5de1c0,_0x1c82c6[_0x368709(0x1f7)]),_0x368709(0x1a0);}async[_0x5051db(0x213)](_0x1c9a9d,_0x1789f4){const _0x174404=_0x5051db,{id:_0x1b3fc,client:_0x1c44ca}=_0x1c9a9d[_0x174404(0x1b4)];if(!_0x1c44ca)throw new common_1['HttpException'](_0x174404(0x191),common_1[_0x174404(0x1dc)]['BAD_REQUEST']);return this[_0x174404(0x1e0)][_0x174404(0x1a2)](_0x1b3fc,_0x1789f4[_0x174404(0x1f7)]),'密码修改成功';}[_0x5051db(0x1ab)](){const _0x2aed9c=_0x5051db;let _0x4db2f1;const _0xf9dfc6=os['networkInterfaces']();Object[_0x2aed9c(0x198)](_0xf9dfc6)[_0x2aed9c(0x1e6)](_0x3c5f78=>{const _0x328f0d=_0x2aed9c,_0x5a10a1=_0xf9dfc6[_0x3c5f78];for(let _0x18f614=0x0;_0x18f614<_0x5a10a1[_0x328f0d(0x1e1)];_0x18f614++){const _0x60778a=_0x5a10a1[_0x18f614];if(_0x60778a[_0x328f0d(0x1e3)]===_0x328f0d(0x1d1)&&_0x60778a[_0x328f0d(0x1db)]!==_0x328f0d(0x1b2)&&!_0x60778a[_0x328f0d(0x1c8)]){_0x4db2f1=_0x60778a[_0x328f0d(0x1db)];break;}}}),this[_0x2aed9c(0x1c0)]=_0x4db2f1;}async[_0x5051db(0x1ff)](_0x48e9e0){const _0x211b51=_0x5051db,_0x1b44b6=await this[_0x211b51(0x1ce)][_0x211b51(0x1ae)](),{color:color=_0x211b51(0x1c4)}=_0x48e9e0,_0x5c9273=svgCaptcha[_0x211b51(0x1c6)]({'background':color,'height':0x22,'width':0x78,'noise':0x3}),_0x106727=_0x5c9273[_0x211b51(0x1d8)],_0x24fdb1=(0x0,utils_1[_0x211b51(0x1ee)])(),_0x197dc7=_0x1b44b6+_0x211b51(0x219)+_0x24fdb1;return await this[_0x211b51(0x20f)][_0x211b51(0x1c3)]({'key':_0x197dc7,'val':_0x5c9273[_0x211b51(0x1d8)]},0x5*0x3c),{'svgCode':_0x5c9273[_0x211b51(0x1e9)],'code':_0x24fdb1};}async[_0x5051db(0x1b9)](_0x46a8ee){const _0x58727c=_0x5051db,{phone:_0x442d9c}=_0x46a8ee,_0x41f66e=await this['globalConfigService'][_0x58727c(0x1ae)](),_0x1ba49f=_0x41f66e+':PHONECODE:'+_0x442d9c,_0x374d16=await this[_0x58727c(0x20f)][_0x58727c(0x217)](_0x1ba49f);if(_0x374d16&&_0x374d16>0x0)throw new common_1[(_0x58727c(0x218))](_0x374d16+_0x58727c(0x1f5),common_1[_0x58727c(0x1dc)][_0x58727c(0x229)]);const _0x6ba735=(0x0,utils_1['createRandomCode'])();console[_0x58727c(0x20a)](_0x58727c(0x21c),_0x6ba735);const _0x43ed75={'phone':_0x442d9c,'code':_0x6ba735};return await this['verificationService']['sendPhoneCodeWithQcloud'](_0x43ed75),await this[_0x58727c(0x20f)][_0x58727c(0x1c3)]({'key':_0x1ba49f,'val':_0x6ba735},0x1*0x3c),'验证码发送成功、请填写验证码完成注册！';}[_0x5051db(0x205)](_0x125055){const _0x265ebc=_0x5051db,_0xea33d1=this[_0x265ebc(0x206)][_0x265ebc(0x1de)]({'username':'游客'+_0x125055,'id':_0x125055,'email':_0x125055+_0x265ebc(0x1ec),'role':'visitor','openId':null,'client':null});return _0xea33d1;}};AuthService=__decorate([(0x0,common_1[_0x5051db(0x1d5)])(),__param(0x0,(0x0,typeorm_2[_0x5051db(0x1bd)])(config_entity_1['ConfigEntity'])),__metadata(_0x5051db(0x1aa),[typeorm_1['Repository'],user_service_1[_0x5051db(0x19c)],jwt_1[_0x5051db(0x1af)],mailer_service_1[_0x5051db(0x1ad)],verification_service_1[_0x5051db(0x1bc)],userBalance_service_1[_0x5051db(0x19e)],redisCache_service_1[_0x5051db(0x1fb)],globalConfig_service_1[_0x5051db(0x208)]])],AuthService),exports[_0x5051db(0x1a5)]=AuthService;