'use strict';const _0x364d71=_0x2847;function _0x2847(_0x5881f9,_0x197f88){const _0x10250c=_0x1025();return _0x2847=function(_0x284713,_0x26a952){_0x284713=_0x284713-0x143;let _0x5b0ca5=_0x10250c[_0x284713];return _0x5b0ca5;},_0x2847(_0x5881f9,_0x197f88);}(function(_0x40060f,_0x20dbe4){const _0x820eff=_0x2847,_0x261b96=_0x40060f();while(!![]){try{const _0x353dfa=parseInt(_0x820eff(0x1a2))/0x1+parseInt(_0x820eff(0x15e))/0x2+-parseInt(_0x820eff(0x163))/0x3*(-parseInt(_0x820eff(0x185))/0x4)+-parseInt(_0x820eff(0x166))/0x5+-parseInt(_0x820eff(0x18c))/0x6+parseInt(_0x820eff(0x168))/0x7*(parseInt(_0x820eff(0x160))/0x8)+-parseInt(_0x820eff(0x172))/0x9;if(_0x353dfa===_0x20dbe4)break;else _0x261b96['push'](_0x261b96['shift']());}catch(_0x4516b4){_0x261b96['push'](_0x261b96['shift']());}}}(_0x1025,0x4d80a));var __decorate=this&&this['__decorate']||function(_0x98163f,_0x345e90,_0x5215f3,_0xaed76a){const _0x1dec6e=_0x2847;var _0x1e3e5b=arguments['length'],_0x203615=_0x1e3e5b<0x3?_0x345e90:_0xaed76a===null?_0xaed76a=Object['getOwnPropertyDescriptor'](_0x345e90,_0x5215f3):_0xaed76a,_0x1ede07;if(typeof Reflect===_0x1dec6e(0x17f)&&typeof Reflect['decorate']===_0x1dec6e(0x170))_0x203615=Reflect[_0x1dec6e(0x153)](_0x98163f,_0x345e90,_0x5215f3,_0xaed76a);else{for(var _0x5d9b00=_0x98163f['length']-0x1;_0x5d9b00>=0x0;_0x5d9b00--)if(_0x1ede07=_0x98163f[_0x5d9b00])_0x203615=(_0x1e3e5b<0x3?_0x1ede07(_0x203615):_0x1e3e5b>0x3?_0x1ede07(_0x345e90,_0x5215f3,_0x203615):_0x1ede07(_0x345e90,_0x5215f3))||_0x203615;}return _0x1e3e5b>0x3&&_0x203615&&Object[_0x1dec6e(0x175)](_0x345e90,_0x5215f3,_0x203615),_0x203615;},__metadata=this&&this[_0x364d71(0x14c)]||function(_0x54d742,_0x3311d0){const _0x2433fd=_0x364d71;if(typeof Reflect===_0x2433fd(0x17f)&&typeof Reflect[_0x2433fd(0x151)]===_0x2433fd(0x170))return Reflect[_0x2433fd(0x151)](_0x54d742,_0x3311d0);};function _0x1025(){const _0x4a514e=['registerSendStatus','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','firstRregisterSendModel4Count','buyCramiAddress','object','HelloWordYi819','public','connection','checkSiteBaseConfig','registerSendDrawMjCount','72904xxMoYP','初始化创建','invitedGuestSendModel3Count','\x0a####\x20YiAi\x20欢迎您\x0a\x20-\x20欢迎使用YiAi\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','DatabaseService','insertId','invitedGuestSendModel4Count','266418hhxyry',']\x20==============>\x20请注意查阅','log','replace','\x27,\x20\x27','userDefautlAvatar','用户成功、用户名为[','isVerifyEmail','registerVerifyEmailDesc','checkSuperAdmin','https://api.openai.com','registerVerifyExpir','openaiBaseUrl','length','firstRregisterSendModel3Count','@nestjs/common','HttpException','Injectable','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','Yi\x20Ai账号激活失败','join','57475xiXWEc','registerSuccessEmaileAppend','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','Connection','__esModule','siteName','Yi\x20Ai','design:paramtypes','registerVerifyEmailTitle',',请妥善保管您的账号，祝您使用愉快','createDefaultUser','123456','vxNumber','registerSuccessEmailTeamName','super','Yi\x20Ai团队','805239273','__metadata','invitedGuestSendDrawMjCount','1800','HttpStatus','count','metadata','inviteGiveSendModel3Count','decorate','qqNumber','Yi\x20Ai账号激活成功','inviteGiveSendModel4Count','query','noticeInfo','baiduToken','\x27,\x200,\x201000,\x20100)','欢迎使用Yi\x20Ai团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','firstRregisterSendDrawMjCount','defaultAdmin@cooper.com','1074750YLmTBp','map','8giqoBA','INTERNAL_SERVER_ERROR','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','21wtFurY','configVal','baiduCode','1230120FIrYKf','robotAvatar','6062DIqNkf','firstRegisterSendStatus','hashSync','registerSendModel4Count','nine-super','inviteSendStatus',']、初始密码为[','encry','function','500','1038789CEmwhi','firstRegisterSendRank','createBaseSiteConfig','defineProperty','Logger','typeorm','bcryptjs','inviteGiveSendDrawMjCount','admin'];_0x1025=function(){return _0x4a514e;};return _0x1025();}Object[_0x364d71(0x175)](exports,_0x364d71(0x1a6),{'value':!![]}),exports[_0x364d71(0x189)]=void 0x0;const common_1=require(_0x364d71(0x19b)),typeorm_1=require(_0x364d71(0x177)),bcrypt=require(_0x364d71(0x178));let DatabaseService=class DatabaseService{constructor(_0x4e06c5){this['connection']=_0x4e06c5;}async['onModuleInit'](){const _0x2712c6=_0x364d71;await this[_0x2712c6(0x195)](),await this['checkSiteBaseConfig']();}async[_0x364d71(0x195)](){const _0x54ff34=_0x364d71,_0x563f16=await this[_0x54ff34(0x182)][_0x54ff34(0x157)](_0x54ff34(0x162));if(!_0x563f16||_0x563f16[_0x54ff34(0x199)]===0x0){const _0x549752=bcrypt['hashSync']('123456',0xa),_0x441fdb=bcrypt[_0x54ff34(0x16a)](_0x54ff34(0x146),0xa),_0x4db67d='default@cooper.com',_0x373b55=_0x54ff34(0x15d),_0x1bbe72={'username':'super','password':_0x549752,'status':0x1,'email':_0x4db67d,'sex':0x1,'role':_0x54ff34(0x149)},_0x1d4633={'username':_0x54ff34(0x17a),'password':_0x441fdb,'status':0x1,'email':_0x373b55,'sex':0x1,'role':_0x54ff34(0x17a)};await this[_0x54ff34(0x145)](_0x1bbe72),await this[_0x54ff34(0x145)](_0x1d4633);}}async[_0x364d71(0x145)](_0x4ff092){const _0x49d776=_0x364d71;try{const {username:_0x42dd51,password:_0x3a0c61,status:_0x10c31d,email:_0x360d3e,role:_0x5a0474}=_0x4ff092,_0x26f638=await this[_0x49d776(0x182)][_0x49d776(0x157)]('INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27'+_0x42dd51+_0x49d776(0x190)+_0x3a0c61+_0x49d776(0x190)+_0x10c31d+_0x49d776(0x190)+_0x360d3e+_0x49d776(0x190)+_0x5a0474+'\x27)'),_0x1bc1dc=_0x26f638[_0x49d776(0x18a)],_0x794e1b=await this[_0x49d776(0x182)][_0x49d776(0x157)](_0x49d776(0x19f)+_0x1bc1dc+_0x49d776(0x15a));common_1[_0x49d776(0x176)][_0x49d776(0x18e)](_0x49d776(0x186)+_0x5a0474+_0x49d776(0x192)+_0x42dd51+_0x49d776(0x16e)+(_0x42dd51===_0x49d776(0x149)?_0x49d776(0x16c):_0x49d776(0x146))+_0x49d776(0x18d),_0x49d776(0x189));}catch(_0x3216ad){console[_0x49d776(0x18e)]('error:\x20',_0x3216ad);throw new common_1[(_0x49d776(0x19c))]('创建默认超级管理员失败！',common_1['HttpStatus']['INTERNAL_SERVER_ERROR']);}}async[_0x364d71(0x183)](){const _0x2d7b78=_0x364d71,_0x20658f=[_0x2d7b78(0x1a7),_0x2d7b78(0x154),_0x2d7b78(0x147),_0x2d7b78(0x167),'userDefautlAvatar'],_0x520482=await this[_0x2d7b78(0x182)]['query'](_0x2d7b78(0x19e)+_0x20658f[_0x2d7b78(0x15f)](_0xbb68b1=>'\x27'+_0xbb68b1+'\x27')[_0x2d7b78(0x1a1)](',')+')\x0a'),_0x3e6776=parseInt(_0x520482[0x0][_0x2d7b78(0x150)]);_0x3e6776===0x0&&await this[_0x2d7b78(0x174)]();}async[_0x364d71(0x174)](){const _0x5ed510=_0x364d71;try{const _0x240a9c='',_0x39fdf9=_0x5ed510(0x188),_0x24e8d5=[{'configKey':_0x5ed510(0x1a7),'configVal':_0x5ed510(0x1a8),'public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x154),'configVal':_0x5ed510(0x14b),'public':0x1,'encry':0x0},{'configKey':'vxNumber','configVal':_0x5ed510(0x180),'public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x167),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x191),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x5ed510(0x165),'configVal':_0x240a9c,'public':0x1,'encry':0x0},{'configKey':'baiduSiteId','configVal':'','public':0x0,'encry':0x0},{'configKey':_0x5ed510(0x159),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x5ed510(0x17e),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x198),'configVal':_0x5ed510(0x196),'public':0x0,'encry':0x0},{'configKey':_0x5ed510(0x158),'configVal':_0x39fdf9,'public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x143),'configVal':'Yi\x20Ai团队账号验证','public':0x0,'encry':0x0},{'configKey':_0x5ed510(0x194),'configVal':_0x5ed510(0x15b),'public':0x0,'encry':0x0},{'configKey':'registerVerifyEmailFrom','configVal':_0x5ed510(0x14a),'public':0x0,'encry':0x0},{'configKey':_0x5ed510(0x197),'configVal':_0x5ed510(0x14e),'public':0x0,'encry':0x0},{'configKey':'registerSuccessEmailTitle','configVal':_0x5ed510(0x155),'public':0x0,'encry':0x0},{'configKey':_0x5ed510(0x148),'configVal':_0x5ed510(0x1a8),'public':0x0,'encry':0x0},{'configKey':_0x5ed510(0x1a3),'configVal':_0x5ed510(0x144),'public':0x0,'encry':0x0},{'configKey':'registerFailEmailTitle','configVal':_0x5ed510(0x1a0),'public':0x0,'encry':0x0},{'configKey':'registerFailEmailTeamName','configVal':_0x5ed510(0x14a),'public':0x0,'encry':0x0},{'configKey':_0x5ed510(0x17b),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'registerSendModel3Count','configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x16b),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x184),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x169),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x173),'configVal':_0x5ed510(0x171),'public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x19a),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x17d),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x15c),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x16d),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x152),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x156),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x179),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x187),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x18b),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x14d),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x5ed510(0x193),'configVal':'1','public':0x1,'encry':0x0}],_0x3ca4fa=await this[_0x5ed510(0x182)]['query'](_0x5ed510(0x1a4)+_0x24e8d5[_0x5ed510(0x15f)](_0x3503cd=>'(\x27'+_0x3503cd['configKey']+_0x5ed510(0x190)+_0x3503cd[_0x5ed510(0x164)][_0x5ed510(0x18f)](/'/g,'\x5c\x27')+_0x5ed510(0x190)+_0x3503cd[_0x5ed510(0x181)]+_0x5ed510(0x190)+_0x3503cd[_0x5ed510(0x16f)]+'\x27)')[_0x5ed510(0x1a1)](',\x20'));common_1[_0x5ed510(0x176)]['log'](_0x5ed510(0x17c),'DatabaseService');}catch(_0x745b4d){console[_0x5ed510(0x18e)]('error:\x20',_0x745b4d);throw new common_1['HttpException']('创建默认网站配置失败！',common_1[_0x5ed510(0x14f)][_0x5ed510(0x161)]);}}};DatabaseService=__decorate([(0x0,common_1[_0x364d71(0x19d)])(),__metadata(_0x364d71(0x1a9),[typeorm_1[_0x364d71(0x1a5)]])],DatabaseService),exports[_0x364d71(0x189)]=DatabaseService;