'use strict';const _0x2682e4=_0x39ac;function _0x1c85(){const _0x4caede=['default@cooper.com','registerSendStatus','public','createDefaultUser',']\x20==============>\x20请注意查阅','Connection','registerSendModel4Count','Yi\x20Ai团队','query',',请妥善保管您的账号，祝您使用愉快','Injectable','486048RKvzSr','defaultAdmin@cooper.com','registerVerifyExpir','openaiBaseUrl','siteName','Yi\x20Ai团队账号验证','firstRegisterSendRank','27640SwpeZZ','__decorate','invitedGuestSendModel4Count','registerSuccessEmailTeamName','inviteSendStatus','baiduSiteId','vxNumber','firstRregisterSendModel4Count','noticeInfo','190165HJqorA','nine-super','bcryptjs','userDefautlAvatar','connection','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','qqNumber','admin','typeorm','map','error:\x20','20njxPqJ','\x0a####\x20YiAi\x20欢迎您\x0a\x20-\x20欢迎使用YiAi\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','805239273','2379568JBzrEx','__metadata','log','checkSiteBaseConfig','encry','809834kycfpj','buyCramiAddress','hashSync','Yi\x20Ai账号激活失败','__esModule','join','super','configVal','1561jDwyZV','design:paramtypes','\x27,\x200,\x201000,\x20100)','用户成功、用户名为[','HttpStatus','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','object','firstRregisterSendDrawMjCount','registerVerifyEmailTitle','insertId','function','DatabaseService','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','创建默认网站配置失败！','HttpException','registerSendModel3Count','\x27,\x20\x27','firstRegisterSendStatus','138zTjZFz','4215861QMlezv','registerVerifyEmailFrom','checkSuperAdmin','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','onModuleInit','configKey','Yi\x20Ai账号激活成功','Logger','replace','length','isVerifyEmail','metadata','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','defineProperty','registerSendDrawMjCount','robotAvatar','INTERNAL_SERVER_ERROR','registerSuccessEmailTitle','3188835qKCHMd','Yi\x20Ai','500',']、初始密码为[','@nestjs/common','123456','https://api.openai.com','欢迎使用Yi\x20Ai团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','decorate'];_0x1c85=function(){return _0x4caede;};return _0x1c85();}(function(_0x53bf94,_0x2d4776){const _0xbae4bc=_0x39ac,_0x5ee884=_0x53bf94();while(!![]){try{const _0x3847ac=-parseInt(_0xbae4bc(0x22a))/0x1+parseInt(_0xbae4bc(0x207))/0x2+parseInt(_0xbae4bc(0x1f2))/0x3+-parseInt(_0xbae4bc(0x225))/0x4+parseInt(_0xbae4bc(0x217))/0x5*(-parseInt(_0xbae4bc(0x1df))/0x6)+parseInt(_0xbae4bc(0x232))/0x7*(parseInt(_0xbae4bc(0x20e))/0x8)+parseInt(_0xbae4bc(0x1e0))/0x9*(parseInt(_0xbae4bc(0x222))/0xa);if(_0x3847ac===_0x2d4776)break;else _0x5ee884['push'](_0x5ee884['shift']());}catch(_0x536fd9){_0x5ee884['push'](_0x5ee884['shift']());}}}(_0x1c85,0xb326f));function _0x39ac(_0x106f21,_0x17b3b2){const _0x1c855b=_0x1c85();return _0x39ac=function(_0x39acf2,_0x1b4a98){_0x39acf2=_0x39acf2-0x1d7;let _0x543c79=_0x1c855b[_0x39acf2];return _0x543c79;},_0x39ac(_0x106f21,_0x17b3b2);}var __decorate=this&&this[_0x2682e4(0x20f)]||function(_0x6c45bd,_0x4e1ad3,_0xc1d675,_0x9dbb1f){const _0x50cfdf=_0x2682e4;var _0x5554d9=arguments[_0x50cfdf(0x1e9)],_0x252557=_0x5554d9<0x3?_0x4e1ad3:_0x9dbb1f===null?_0x9dbb1f=Object['getOwnPropertyDescriptor'](_0x4e1ad3,_0xc1d675):_0x9dbb1f,_0x4b2a2e;if(typeof Reflect===_0x50cfdf(0x238)&&typeof Reflect[_0x50cfdf(0x1fb)]===_0x50cfdf(0x1d7))_0x252557=Reflect[_0x50cfdf(0x1fb)](_0x6c45bd,_0x4e1ad3,_0xc1d675,_0x9dbb1f);else{for(var _0x1d237f=_0x6c45bd[_0x50cfdf(0x1e9)]-0x1;_0x1d237f>=0x0;_0x1d237f--)if(_0x4b2a2e=_0x6c45bd[_0x1d237f])_0x252557=(_0x5554d9<0x3?_0x4b2a2e(_0x252557):_0x5554d9>0x3?_0x4b2a2e(_0x4e1ad3,_0xc1d675,_0x252557):_0x4b2a2e(_0x4e1ad3,_0xc1d675))||_0x252557;}return _0x5554d9>0x3&&_0x252557&&Object[_0x50cfdf(0x1ed)](_0x4e1ad3,_0xc1d675,_0x252557),_0x252557;},__metadata=this&&this[_0x2682e4(0x226)]||function(_0x3fb9b9,_0x559d18){const _0x56d6aa=_0x2682e4;if(typeof Reflect===_0x56d6aa(0x238)&&typeof Reflect[_0x56d6aa(0x1eb)]==='function')return Reflect[_0x56d6aa(0x1eb)](_0x3fb9b9,_0x559d18);};Object[_0x2682e4(0x1ed)](exports,_0x2682e4(0x22e),{'value':!![]}),exports[_0x2682e4(0x1d8)]=void 0x0;const common_1=require(_0x2682e4(0x1f6)),typeorm_1=require(_0x2682e4(0x21f)),bcrypt=require(_0x2682e4(0x219));let DatabaseService=class DatabaseService{constructor(_0x325f79){const _0x1d4563=_0x2682e4;this[_0x1d4563(0x21b)]=_0x325f79;}async[_0x2682e4(0x1e4)](){const _0x558a4b=_0x2682e4;await this[_0x558a4b(0x1e2)](),await this[_0x558a4b(0x228)]();}async[_0x2682e4(0x1e2)](){const _0x20f9eb=_0x2682e4,_0x570b44=await this[_0x20f9eb(0x21b)][_0x20f9eb(0x204)](_0x20f9eb(0x1d9));if(!_0x570b44||_0x570b44[_0x20f9eb(0x1e9)]===0x0){const _0x4450e2=bcrypt['hashSync'](_0x20f9eb(0x1f7),0xa),_0x3f0580=bcrypt[_0x20f9eb(0x22c)](_0x20f9eb(0x1f7),0xa),_0x60400b=_0x20f9eb(0x1fc),_0x55772b=_0x20f9eb(0x208),_0x5c05c9={'username':_0x20f9eb(0x230),'password':_0x4450e2,'status':0x1,'email':_0x60400b,'sex':0x1,'role':_0x20f9eb(0x230)},_0x4c0b15={'username':_0x20f9eb(0x21e),'password':_0x3f0580,'status':0x1,'email':_0x55772b,'sex':0x1,'role':_0x20f9eb(0x21e)};await this[_0x20f9eb(0x1ff)](_0x5c05c9),await this[_0x20f9eb(0x1ff)](_0x4c0b15);}}async[_0x2682e4(0x1ff)](_0x244e3e){const _0x8a82bc=_0x2682e4;try{const {username:_0x11d422,password:_0x59933d,status:_0x3ca7d9,email:_0x24cb3f,role:_0x222f22}=_0x244e3e,_0x494b72=await this[_0x8a82bc(0x21b)][_0x8a82bc(0x204)](_0x8a82bc(0x237)+_0x11d422+_0x8a82bc(0x1dd)+_0x59933d+_0x8a82bc(0x1dd)+_0x3ca7d9+_0x8a82bc(0x1dd)+_0x24cb3f+_0x8a82bc(0x1dd)+_0x222f22+'\x27)'),_0x4aa346=_0x494b72[_0x8a82bc(0x23b)],_0x57975b=await this['connection']['query'](_0x8a82bc(0x1fa)+_0x4aa346+_0x8a82bc(0x234));common_1[_0x8a82bc(0x1e7)]['log']('初始化创建'+_0x222f22+_0x8a82bc(0x235)+_0x11d422+_0x8a82bc(0x1f5)+(_0x11d422===_0x8a82bc(0x230)?_0x8a82bc(0x218):_0x8a82bc(0x1f7))+_0x8a82bc(0x200),_0x8a82bc(0x1d8));}catch(_0x4b20e0){console[_0x8a82bc(0x227)](_0x8a82bc(0x221),_0x4b20e0);throw new common_1[(_0x8a82bc(0x1db))]('创建默认超级管理员失败！',common_1['HttpStatus'][_0x8a82bc(0x1f0)]);}}async[_0x2682e4(0x228)](){const _0x2597b9=_0x2682e4,_0x7f895=[_0x2597b9(0x20b),'qqNumber',_0x2597b9(0x214),_0x2597b9(0x1ef),'userDefautlAvatar'],_0x323018=await this[_0x2597b9(0x21b)]['query'](_0x2597b9(0x1e3)+_0x7f895[_0x2597b9(0x220)](_0x93a9b0=>'\x27'+_0x93a9b0+'\x27')[_0x2597b9(0x22f)](',')+')\x0a'),_0x5ef0b3=parseInt(_0x323018[0x0]['count']);_0x5ef0b3===0x0&&await this['createBaseSiteConfig']();}async['createBaseSiteConfig'](){const _0x87838d=_0x2682e4;try{const _0x3ebe32='',_0x118a9d=_0x87838d(0x223),_0x19e2a5=[{'configKey':_0x87838d(0x20b),'configVal':_0x87838d(0x1f3),'public':0x1,'encry':0x0},{'configKey':_0x87838d(0x21d),'configVal':_0x87838d(0x224),'public':0x1,'encry':0x0},{'configKey':_0x87838d(0x214),'configVal':'HelloWordYi819','public':0x1,'encry':0x0},{'configKey':_0x87838d(0x1ef),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x87838d(0x21a),'configVal':'','public':0x0,'encry':0x0},{'configKey':'baiduCode','configVal':_0x3ebe32,'public':0x1,'encry':0x0},{'configKey':_0x87838d(0x213),'configVal':'','public':0x0,'encry':0x0},{'configKey':'baiduToken','configVal':'','public':0x0,'encry':0x0},{'configKey':_0x87838d(0x22b),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x87838d(0x20a),'configVal':_0x87838d(0x1f8),'public':0x0,'encry':0x0},{'configKey':_0x87838d(0x216),'configVal':_0x118a9d,'public':0x1,'encry':0x0},{'configKey':_0x87838d(0x23a),'configVal':_0x87838d(0x20c),'public':0x0,'encry':0x0},{'configKey':'registerVerifyEmailDesc','configVal':_0x87838d(0x1f9),'public':0x0,'encry':0x0},{'configKey':_0x87838d(0x1e1),'configVal':'Yi\x20Ai团队','public':0x0,'encry':0x0},{'configKey':_0x87838d(0x209),'configVal':'1800','public':0x0,'encry':0x0},{'configKey':_0x87838d(0x1f1),'configVal':_0x87838d(0x1e6),'public':0x0,'encry':0x0},{'configKey':_0x87838d(0x211),'configVal':_0x87838d(0x1f3),'public':0x0,'encry':0x0},{'configKey':'registerSuccessEmaileAppend','configVal':_0x87838d(0x205),'public':0x0,'encry':0x0},{'configKey':'registerFailEmailTitle','configVal':_0x87838d(0x22d),'public':0x0,'encry':0x0},{'configKey':'registerFailEmailTeamName','configVal':_0x87838d(0x203),'public':0x0,'encry':0x0},{'configKey':_0x87838d(0x1fd),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x87838d(0x1dc),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x87838d(0x202),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x87838d(0x1ee),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x87838d(0x1de),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x87838d(0x20d),'configVal':_0x87838d(0x1f4),'public':0x1,'encry':0x0},{'configKey':'firstRregisterSendModel3Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x87838d(0x215),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x87838d(0x239),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x87838d(0x212),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'inviteGiveSendModel3Count','configVal':'0','public':0x1,'encry':0x0},{'configKey':'inviteGiveSendModel4Count','configVal':'0','public':0x1,'encry':0x0},{'configKey':'inviteGiveSendDrawMjCount','configVal':'0','public':0x1,'encry':0x0},{'configKey':'invitedGuestSendModel3Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x87838d(0x210),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'invitedGuestSendDrawMjCount','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x87838d(0x1ea),'configVal':'1','public':0x1,'encry':0x0}],_0x5e3e30=await this[_0x87838d(0x21b)]['query'](_0x87838d(0x21c)+_0x19e2a5['map'](_0x2eb3c2=>'(\x27'+_0x2eb3c2[_0x87838d(0x1e5)]+'\x27,\x20\x27'+_0x2eb3c2[_0x87838d(0x231)][_0x87838d(0x1e8)](/'/g,'\x5c\x27')+'\x27,\x20\x27'+_0x2eb3c2[_0x87838d(0x1fe)]+'\x27,\x20\x27'+_0x2eb3c2[_0x87838d(0x229)]+'\x27)')[_0x87838d(0x22f)](',\x20'));common_1[_0x87838d(0x1e7)][_0x87838d(0x227)](_0x87838d(0x1ec),_0x87838d(0x1d8));}catch(_0x35666d){console['log'](_0x87838d(0x221),_0x35666d);throw new common_1[(_0x87838d(0x1db))](_0x87838d(0x1da),common_1[_0x87838d(0x236)][_0x87838d(0x1f0)]);}}};DatabaseService=__decorate([(0x0,common_1[_0x2682e4(0x206)])(),__metadata(_0x2682e4(0x233),[typeorm_1[_0x2682e4(0x201)]])],DatabaseService),exports[_0x2682e4(0x1d8)]=DatabaseService;