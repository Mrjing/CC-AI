'use strict';const _0x4ebd7d=_0x57cc;(function(_0x3f4de3,_0x68c350){const _0x4d7da0=_0x57cc,_0x192527=_0x3f4de3();while(!![]){try{const _0x171c98=parseInt(_0x4d7da0(0x17e))/0x1+-parseInt(_0x4d7da0(0x1ac))/0x2*(-parseInt(_0x4d7da0(0x17b))/0x3)+parseInt(_0x4d7da0(0x18e))/0x4*(parseInt(_0x4d7da0(0x184))/0x5)+parseInt(_0x4d7da0(0x172))/0x6+parseInt(_0x4d7da0(0x1bd))/0x7+-parseInt(_0x4d7da0(0x1be))/0x8*(-parseInt(_0x4d7da0(0x1b1))/0x9)+-parseInt(_0x4d7da0(0x1c2))/0xa*(parseInt(_0x4d7da0(0x1b4))/0xb);if(_0x171c98===_0x68c350)break;else _0x192527['push'](_0x192527['shift']());}catch(_0x5386ad){_0x192527['push'](_0x192527['shift']());}}}(_0x1cff,0x49629));function _0x1cff(){const _0x29ec2c=['error:\x20','typeorm','buyCramiAddress','defaultAdmin@cooper.com','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','1800','registerVerifyEmailFrom','3144470FpAlJu','123832XkmAJC','createDefaultUser','registerVerifyExpir','registerFailEmailTitle','20WUXjeE','INTERNAL_SERVER_ERROR','baiduToken','configVal','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','isVerifyEmail','https://api.openai.com','Connection','join','用户成功、用户名为[','inviteSendStatus','firstRegisterSendStatus','registerSendDrawMjCount','checkSiteBaseConfig','super','2139180ncRnQB','registerVerifyEmailTitle','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','noticeInfo','firstRegisterSendRank','HttpStatus','firstRregisterSendDrawMjCount',']、初始密码为[','vxNumber','12975UJKjdU','checkSuperAdmin','registerSendStatus','258326zQotCl','qqNumber','log','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','configKey','\x27,\x20\x27','1655OYuqJP','invitedGuestSendModel3Count','connection','hashSync','registerSuccessEmaileAppend','Yi\x20Ai','defineProperty',']\x20==============>\x20请注意查阅','创建默认网站配置失败！','admin','3956oZcDis','public','DatabaseService','初始化创建','\x27,\x200,\x201000,\x20100)','decorate','inviteGiveSendModel4Count','inviteGiveSendModel3Count','\x0a####\x20YiAi\x20欢迎您\x0a\x20-\x20欢迎使用YiAi\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','Yi\x20Ai团队','registerSendModel4Count','registerVerifyEmailDesc','metadata','createBaseSiteConfig',',请妥善保管您的账号，祝您使用愉快','userDefautlAvatar','robotAvatar','encry','inviteGiveSendDrawMjCount','805239273','HelloWordYi819','bcryptjs','__esModule','openaiBaseUrl','firstRregisterSendModel3Count','replace','default@cooper.com','HttpException','length','siteName','80XJQhMI','123456','object','query','invitedGuestSendModel4Count','54nYPlbz','Yi\x20Ai账号激活成功','map','7461927vVqGep','registerSuccessEmailTitle'];_0x1cff=function(){return _0x29ec2c;};return _0x1cff();}var __decorate=this&&this['__decorate']||function(_0x54302b,_0x2ffb8a,_0x217b4b,_0x5a7b82){const _0x117423=_0x57cc;var _0x10b530=arguments[_0x117423(0x1aa)],_0x1d0415=_0x10b530<0x3?_0x2ffb8a:_0x5a7b82===null?_0x5a7b82=Object['getOwnPropertyDescriptor'](_0x2ffb8a,_0x217b4b):_0x5a7b82,_0x564b19;if(typeof Reflect===_0x117423(0x1ae)&&typeof Reflect[_0x117423(0x193)]==='function')_0x1d0415=Reflect[_0x117423(0x193)](_0x54302b,_0x2ffb8a,_0x217b4b,_0x5a7b82);else{for(var _0x1cb43f=_0x54302b[_0x117423(0x1aa)]-0x1;_0x1cb43f>=0x0;_0x1cb43f--)if(_0x564b19=_0x54302b[_0x1cb43f])_0x1d0415=(_0x10b530<0x3?_0x564b19(_0x1d0415):_0x10b530>0x3?_0x564b19(_0x2ffb8a,_0x217b4b,_0x1d0415):_0x564b19(_0x2ffb8a,_0x217b4b))||_0x1d0415;}return _0x10b530>0x3&&_0x1d0415&&Object[_0x117423(0x18a)](_0x2ffb8a,_0x217b4b,_0x1d0415),_0x1d0415;},__metadata=this&&this['__metadata']||function(_0x951968,_0x29489b){const _0x27783b=_0x57cc;if(typeof Reflect==='object'&&typeof Reflect['metadata']==='function')return Reflect[_0x27783b(0x19a)](_0x951968,_0x29489b);};Object[_0x4ebd7d(0x18a)](exports,_0x4ebd7d(0x1a4),{'value':!![]}),exports['DatabaseService']=void 0x0;const common_1=require('@nestjs/common'),typeorm_1=require(_0x4ebd7d(0x1b7)),bcrypt=require(_0x4ebd7d(0x1a3));function _0x57cc(_0x53cf02,_0x5d7cea){const _0x1cff32=_0x1cff();return _0x57cc=function(_0x57ccbe,_0x45581e){_0x57ccbe=_0x57ccbe-0x172;let _0x5ae53d=_0x1cff32[_0x57ccbe];return _0x5ae53d;},_0x57cc(_0x53cf02,_0x5d7cea);}let DatabaseService=class DatabaseService{constructor(_0x4a227f){const _0xa1c2f3=_0x4ebd7d;this[_0xa1c2f3(0x186)]=_0x4a227f;}async['onModuleInit'](){const _0x26d396=_0x4ebd7d;await this[_0x26d396(0x17c)](),await this[_0x26d396(0x1cf)]();}async[_0x4ebd7d(0x17c)](){const _0xa6972c=_0x4ebd7d,_0x10f606=await this[_0xa6972c(0x186)]['query'](_0xa6972c(0x181));if(!_0x10f606||_0x10f606[_0xa6972c(0x1aa)]===0x0){const _0x3417cd=bcrypt[_0xa6972c(0x187)](_0xa6972c(0x1ad),0xa),_0xe9d4e1=bcrypt[_0xa6972c(0x187)](_0xa6972c(0x1ad),0xa),_0x3f5209=_0xa6972c(0x1a8),_0x18e1f4=_0xa6972c(0x1b9),_0x3ffcdd={'username':_0xa6972c(0x1d0),'password':_0x3417cd,'status':0x1,'email':_0x3f5209,'sex':0x1,'role':_0xa6972c(0x1d0)},_0x29ba86={'username':_0xa6972c(0x18d),'password':_0xe9d4e1,'status':0x1,'email':_0x18e1f4,'sex':0x1,'role':'admin'};await this['createDefaultUser'](_0x3ffcdd),await this[_0xa6972c(0x1bf)](_0x29ba86);}}async[_0x4ebd7d(0x1bf)](_0x1b9984){const _0x411fce=_0x4ebd7d;try{const {username:_0x3ae0b0,password:_0x2a4f23,status:_0x3af683,email:_0x2e677e,role:_0x18c8af}=_0x1b9984,_0x5f5bd1=await this['connection']['query'](_0x411fce(0x1c6)+_0x3ae0b0+_0x411fce(0x183)+_0x2a4f23+_0x411fce(0x183)+_0x3af683+_0x411fce(0x183)+_0x2e677e+_0x411fce(0x183)+_0x18c8af+'\x27)'),_0x1651ab=_0x5f5bd1['insertId'],_0x4e8d86=await this[_0x411fce(0x186)][_0x411fce(0x1af)](_0x411fce(0x174)+_0x1651ab+_0x411fce(0x192));common_1['Logger']['log'](_0x411fce(0x191)+_0x18c8af+_0x411fce(0x1cb)+_0x3ae0b0+_0x411fce(0x179)+(_0x3ae0b0===_0x411fce(0x1d0)?'nine-super':_0x411fce(0x1ad))+_0x411fce(0x18b),_0x411fce(0x190));}catch(_0x2090fa){console[_0x411fce(0x180)]('error:\x20',_0x2090fa);throw new common_1[(_0x411fce(0x1a9))]('创建默认超级管理员失败！',common_1[_0x411fce(0x177)][_0x411fce(0x1c3)]);}}async[_0x4ebd7d(0x1cf)](){const _0xd00e32=_0x4ebd7d,_0x30b399=[_0xd00e32(0x1ab),_0xd00e32(0x17f),_0xd00e32(0x17a),_0xd00e32(0x19e),_0xd00e32(0x19d)],_0x224e43=await this[_0xd00e32(0x186)][_0xd00e32(0x1af)](_0xd00e32(0x1ba)+_0x30b399['map'](_0x1b4dc6=>'\x27'+_0x1b4dc6+'\x27')[_0xd00e32(0x1ca)](',')+')\x0a'),_0x511ce6=parseInt(_0x224e43[0x0]['count']);_0x511ce6===0x0&&await this[_0xd00e32(0x19b)]();}async[_0x4ebd7d(0x19b)](){const _0x5e4de3=_0x4ebd7d;try{const _0x131cdf='',_0x3e144c=_0x5e4de3(0x196),_0x387dcc=[{'configKey':_0x5e4de3(0x1ab),'configVal':_0x5e4de3(0x189),'public':0x1,'encry':0x0},{'configKey':'qqNumber','configVal':_0x5e4de3(0x1a1),'public':0x1,'encry':0x0},{'configKey':'vxNumber','configVal':_0x5e4de3(0x1a2),'public':0x1,'encry':0x0},{'configKey':_0x5e4de3(0x19e),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x5e4de3(0x19d),'configVal':'','public':0x0,'encry':0x0},{'configKey':'baiduCode','configVal':_0x131cdf,'public':0x1,'encry':0x0},{'configKey':'baiduSiteId','configVal':'','public':0x0,'encry':0x0},{'configKey':_0x5e4de3(0x1c4),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x5e4de3(0x1b8),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x5e4de3(0x1a5),'configVal':_0x5e4de3(0x1c8),'public':0x0,'encry':0x0},{'configKey':_0x5e4de3(0x175),'configVal':_0x3e144c,'public':0x1,'encry':0x0},{'configKey':_0x5e4de3(0x173),'configVal':'Yi\x20Ai团队账号验证','public':0x0,'encry':0x0},{'configKey':_0x5e4de3(0x199),'configVal':'欢迎使用Yi\x20Ai团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','public':0x0,'encry':0x0},{'configKey':_0x5e4de3(0x1bc),'configVal':_0x5e4de3(0x197),'public':0x0,'encry':0x0},{'configKey':_0x5e4de3(0x1c0),'configVal':_0x5e4de3(0x1bb),'public':0x0,'encry':0x0},{'configKey':_0x5e4de3(0x1b5),'configVal':_0x5e4de3(0x1b2),'public':0x0,'encry':0x0},{'configKey':'registerSuccessEmailTeamName','configVal':'Yi\x20Ai','public':0x0,'encry':0x0},{'configKey':_0x5e4de3(0x188),'configVal':_0x5e4de3(0x19c),'public':0x0,'encry':0x0},{'configKey':_0x5e4de3(0x1c1),'configVal':'Yi\x20Ai账号激活失败','public':0x0,'encry':0x0},{'configKey':'registerFailEmailTeamName','configVal':_0x5e4de3(0x197),'public':0x0,'encry':0x0},{'configKey':_0x5e4de3(0x17d),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'registerSendModel3Count','configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x5e4de3(0x198),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x5e4de3(0x1ce),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x5e4de3(0x1cd),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x5e4de3(0x176),'configVal':'500','public':0x1,'encry':0x0},{'configKey':_0x5e4de3(0x1a6),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendModel4Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x5e4de3(0x178),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x5e4de3(0x1cc),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x5e4de3(0x195),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x5e4de3(0x194),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x5e4de3(0x1a0),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x5e4de3(0x185),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x5e4de3(0x1b0),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'invitedGuestSendDrawMjCount','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x5e4de3(0x1c7),'configVal':'1','public':0x1,'encry':0x0}],_0x11cfa8=await this[_0x5e4de3(0x186)]['query']('INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20'+_0x387dcc[_0x5e4de3(0x1b3)](_0x16e4de=>'(\x27'+_0x16e4de[_0x5e4de3(0x182)]+_0x5e4de3(0x183)+_0x16e4de[_0x5e4de3(0x1c5)][_0x5e4de3(0x1a7)](/'/g,'\x5c\x27')+_0x5e4de3(0x183)+_0x16e4de[_0x5e4de3(0x18f)]+_0x5e4de3(0x183)+_0x16e4de[_0x5e4de3(0x19f)]+'\x27)')[_0x5e4de3(0x1ca)](',\x20'));common_1['Logger'][_0x5e4de3(0x180)]('初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅',_0x5e4de3(0x190));}catch(_0x367d9e){console['log'](_0x5e4de3(0x1b6),_0x367d9e);throw new common_1['HttpException'](_0x5e4de3(0x18c),common_1[_0x5e4de3(0x177)]['INTERNAL_SERVER_ERROR']);}}};DatabaseService=__decorate([(0x0,common_1['Injectable'])(),__metadata('design:paramtypes',[typeorm_1[_0x4ebd7d(0x1c9)]])],DatabaseService),exports[_0x4ebd7d(0x190)]=DatabaseService;