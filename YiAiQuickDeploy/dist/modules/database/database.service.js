'use strict';const _0x4c72b2=_0x1fb5;function _0x1fb5(_0x15c596,_0x4b6d14){const _0x36cf4f=_0x36cf();return _0x1fb5=function(_0x1fb5e6,_0x2542e3){_0x1fb5e6=_0x1fb5e6-0x178;let _0x243dda=_0x36cf4f[_0x1fb5e6];return _0x243dda;},_0x1fb5(_0x15c596,_0x4b6d14);}(function(_0x2d7e52,_0x169541){const _0x28b64c=_0x1fb5,_0x2c4908=_0x2d7e52();while(!![]){try{const _0xb3823e=parseInt(_0x28b64c(0x1ae))/0x1+parseInt(_0x28b64c(0x181))/0x2+parseInt(_0x28b64c(0x186))/0x3+parseInt(_0x28b64c(0x1a4))/0x4+-parseInt(_0x28b64c(0x1b7))/0x5+parseInt(_0x28b64c(0x196))/0x6*(parseInt(_0x28b64c(0x193))/0x7)+parseInt(_0x28b64c(0x1be))/0x8*(-parseInt(_0x28b64c(0x1bd))/0x9);if(_0xb3823e===_0x169541)break;else _0x2c4908['push'](_0x2c4908['shift']());}catch(_0x3b5795){_0x2c4908['push'](_0x2c4908['shift']());}}}(_0x36cf,0x84197));var __decorate=this&&this[_0x4c72b2(0x1cf)]||function(_0x2899ee,_0x33c3a2,_0x3e8ce3,_0x268af4){const _0x1a34f9=_0x4c72b2;var _0x2c9d0e=arguments[_0x1a34f9(0x1c6)],_0xa237c6=_0x2c9d0e<0x3?_0x33c3a2:_0x268af4===null?_0x268af4=Object['getOwnPropertyDescriptor'](_0x33c3a2,_0x3e8ce3):_0x268af4,_0x55a45e;if(typeof Reflect==='object'&&typeof Reflect[_0x1a34f9(0x1b4)]===_0x1a34f9(0x19d))_0xa237c6=Reflect[_0x1a34f9(0x1b4)](_0x2899ee,_0x33c3a2,_0x3e8ce3,_0x268af4);else{for(var _0x49a073=_0x2899ee['length']-0x1;_0x49a073>=0x0;_0x49a073--)if(_0x55a45e=_0x2899ee[_0x49a073])_0xa237c6=(_0x2c9d0e<0x3?_0x55a45e(_0xa237c6):_0x2c9d0e>0x3?_0x55a45e(_0x33c3a2,_0x3e8ce3,_0xa237c6):_0x55a45e(_0x33c3a2,_0x3e8ce3))||_0xa237c6;}return _0x2c9d0e>0x3&&_0xa237c6&&Object['defineProperty'](_0x33c3a2,_0x3e8ce3,_0xa237c6),_0xa237c6;},__metadata=this&&this[_0x4c72b2(0x1b6)]||function(_0xf9c167,_0x3485a2){const _0x50c380=_0x4c72b2;if(typeof Reflect===_0x50c380(0x19c)&&typeof Reflect[_0x50c380(0x17d)]===_0x50c380(0x19d))return Reflect[_0x50c380(0x17d)](_0xf9c167,_0x3485a2);};Object[_0x4c72b2(0x1cb)](exports,'__esModule',{'value':!![]}),exports[_0x4c72b2(0x1b9)]=void 0x0;const common_1=require(_0x4c72b2(0x1b3)),typeorm_1=require(_0x4c72b2(0x192)),bcrypt=require('bcryptjs');let DatabaseService=class DatabaseService{constructor(_0x3cf413){const _0x48388e=_0x4c72b2;this[_0x48388e(0x1bf)]=_0x3cf413;}async['onModuleInit'](){const _0x14a6c4=_0x4c72b2;await this['checkSuperAdmin'](),await this[_0x14a6c4(0x1c5)]();}async[_0x4c72b2(0x1ca)](){const _0xa138cf=_0x4c72b2,_0x22a042=await this[_0xa138cf(0x1bf)][_0xa138cf(0x1d2)](_0xa138cf(0x1c1));if(!_0x22a042||_0x22a042['length']===0x0){const _0xda2846=bcrypt[_0xa138cf(0x1bb)](_0xa138cf(0x191),0xa),_0x20cf23=bcrypt['hashSync'](_0xa138cf(0x191),0xa),_0x15accd='default@cooper.com',_0x67dd0f=_0xa138cf(0x1a1),_0x555ae7={'username':_0xa138cf(0x18f),'password':_0xda2846,'status':0x1,'email':_0x15accd,'sex':0x1,'role':_0xa138cf(0x18f)},_0x3f5730={'username':_0xa138cf(0x1a8),'password':_0x20cf23,'status':0x1,'email':_0x67dd0f,'sex':0x1,'role':_0xa138cf(0x1a8)};await this[_0xa138cf(0x178)](_0x555ae7),await this[_0xa138cf(0x178)](_0x3f5730);}}async[_0x4c72b2(0x178)](_0x198da0){const _0x4c7f55=_0x4c72b2;try{const {username:_0x361e96,password:_0x4a2fd8,status:_0x128508,email:_0xa46819,role:_0x56fcd4}=_0x198da0,_0x417f1e=await this[_0x4c7f55(0x1bf)][_0x4c7f55(0x1d2)](_0x4c7f55(0x18c)+_0x361e96+_0x4c7f55(0x1af)+_0x4a2fd8+_0x4c7f55(0x1af)+_0x128508+_0x4c7f55(0x1af)+_0xa46819+_0x4c7f55(0x1af)+_0x56fcd4+'\x27)'),_0x469591=_0x417f1e[_0x4c7f55(0x1d4)],_0x39105e=await this[_0x4c7f55(0x1bf)][_0x4c7f55(0x1d2)](_0x4c7f55(0x1a9)+_0x469591+_0x4c7f55(0x180));common_1[_0x4c7f55(0x179)][_0x4c7f55(0x1d0)](_0x4c7f55(0x1ad)+_0x56fcd4+_0x4c7f55(0x17c)+_0x361e96+']、初始密码为['+(_0x361e96===_0x4c7f55(0x18f)?'nine-super':'123456')+']\x20==============>\x20请注意查阅',_0x4c7f55(0x1b9));}catch(_0x4f7c98){console[_0x4c7f55(0x1d0)](_0x4c7f55(0x182),_0x4f7c98);throw new common_1[(_0x4c7f55(0x1a5))]('创建默认超级管理员失败！',common_1['HttpStatus']['INTERNAL_SERVER_ERROR']);}}async[_0x4c72b2(0x1c5)](){const _0x1ce5f4=_0x4c72b2,_0x248ed1=[_0x1ce5f4(0x183),_0x1ce5f4(0x1c9),_0x1ce5f4(0x199),'robotAvatar','userDefautlAvatar'],_0x4ce9b5=await this[_0x1ce5f4(0x1bf)][_0x1ce5f4(0x1d2)](_0x1ce5f4(0x197)+_0x248ed1[_0x1ce5f4(0x1c4)](_0xd0789e=>'\x27'+_0xd0789e+'\x27')[_0x1ce5f4(0x1ba)](',')+')\x0a'),_0x44a53d=parseInt(_0x4ce9b5[0x0]['count']);_0x44a53d===0x0&&await this[_0x1ce5f4(0x19a)]();}async[_0x4c72b2(0x19a)](){const _0x44c46e=_0x4c72b2;try{const _0x49bb57='',_0x31e735=_0x44c46e(0x1a2),_0x26589e=[{'configKey':_0x44c46e(0x183),'configVal':_0x44c46e(0x17a),'public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x1c9),'configVal':'805239273','public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x199),'configVal':_0x44c46e(0x189),'public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x17b),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x19b),'configVal':'','public':0x0,'encry':0x0},{'configKey':'baiduCode','configVal':_0x49bb57,'public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x1d3),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x44c46e(0x17f),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x44c46e(0x18e),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x1c0),'configVal':_0x44c46e(0x194),'public':0x0,'encry':0x0},{'configKey':_0x44c46e(0x1b0),'configVal':_0x31e735,'public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x1b5),'configVal':_0x44c46e(0x1a3),'public':0x0,'encry':0x0},{'configKey':_0x44c46e(0x1c3),'configVal':_0x44c46e(0x185),'public':0x0,'encry':0x0},{'configKey':_0x44c46e(0x1b2),'configVal':_0x44c46e(0x1aa),'public':0x0,'encry':0x0},{'configKey':_0x44c46e(0x18d),'configVal':_0x44c46e(0x187),'public':0x0,'encry':0x0},{'configKey':'registerSuccessEmailTitle','configVal':'Yi\x20Ai账号激活成功','public':0x0,'encry':0x0},{'configKey':'registerSuccessEmailTeamName','configVal':_0x44c46e(0x17a),'public':0x0,'encry':0x0},{'configKey':'registerSuccessEmaileAppend','configVal':_0x44c46e(0x19f),'public':0x0,'encry':0x0},{'configKey':_0x44c46e(0x1b8),'configVal':'Yi\x20Ai账号激活失败','public':0x0,'encry':0x0},{'configKey':_0x44c46e(0x1a0),'configVal':'Yi\x20Ai团队','public':0x0,'encry':0x0},{'configKey':_0x44c46e(0x1a7),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'registerSendModel3Count','configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x190),'configVal':'3','public':0x1,'encry':0x0},{'configKey':'registerSendDrawMjCount','configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x1b1),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x195),'configVal':'500','public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x1cc),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x1c8),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendDrawMjCount','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x17e),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x18a),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x1d1),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x184),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x1a6),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x198),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'invitedGuestSendDrawMjCount','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x44c46e(0x1c2),'configVal':'1','public':0x1,'encry':0x0}],_0x4939e0=await this[_0x44c46e(0x1bf)][_0x44c46e(0x1d2)]('INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20'+_0x26589e[_0x44c46e(0x1c4)](_0x4ade5a=>'(\x27'+_0x4ade5a['configKey']+_0x44c46e(0x1af)+_0x4ade5a[_0x44c46e(0x1ac)][_0x44c46e(0x1ab)](/'/g,'\x5c\x27')+'\x27,\x20\x27'+_0x4ade5a[_0x44c46e(0x18b)]+_0x44c46e(0x1af)+_0x4ade5a['encry']+'\x27)')[_0x44c46e(0x1ba)](',\x20'));common_1[_0x44c46e(0x179)][_0x44c46e(0x1d0)](_0x44c46e(0x188),_0x44c46e(0x1b9));}catch(_0x38bafe){console['log'](_0x44c46e(0x182),_0x38bafe);throw new common_1['HttpException'](_0x44c46e(0x1c7),common_1['HttpStatus'][_0x44c46e(0x1cd)]);}}};DatabaseService=__decorate([(0x0,common_1[_0x4c72b2(0x19e)])(),__metadata(_0x4c72b2(0x1ce),[typeorm_1[_0x4c72b2(0x1bc)]])],DatabaseService),exports[_0x4c72b2(0x1b9)]=DatabaseService;function _0x36cf(){const _0x153c0d=['INTERNAL_SERVER_ERROR','design:paramtypes','__decorate','log','inviteGiveSendModel4Count','query','baiduSiteId','insertId','createDefaultUser','Logger','Yi\x20Ai','robotAvatar','用户成功、用户名为[','metadata','inviteSendStatus','baiduToken','\x27,\x200,\x201000,\x20100)','540952yjjwcH','error:\x20','siteName','inviteGiveSendDrawMjCount','欢迎使用Yi\x20Ai团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','1100505XKnMEM','1800','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','HelloWordYi819','inviteGiveSendModel3Count','public','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','registerVerifyExpir','buyCramiAddress','super','registerSendModel4Count','123456','typeorm','7XbhJjN','https://api.openai.com','firstRegisterSendRank','4436214jMWbqc','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','invitedGuestSendModel4Count','vxNumber','createBaseSiteConfig','userDefautlAvatar','object','function','Injectable',',请妥善保管您的账号，祝您使用愉快','registerFailEmailTeamName','defaultAdmin@cooper.com','\x0a####\x20YiAi\x20欢迎您\x0a\x20-\x20欢迎使用YiAi\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','Yi\x20Ai团队账号验证','4317828UkNWKZ','HttpException','invitedGuestSendModel3Count','registerSendStatus','admin','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','Yi\x20Ai团队','replace','configVal','初始化创建','275553SCdDlT','\x27,\x20\x27','noticeInfo','firstRegisterSendStatus','registerVerifyEmailFrom','@nestjs/common','decorate','registerVerifyEmailTitle','__metadata','175560RfJNyW','registerFailEmailTitle','DatabaseService','join','hashSync','Connection','19399491bbXVWz','8oBFwlo','connection','openaiBaseUrl','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','isVerifyEmail','registerVerifyEmailDesc','map','checkSiteBaseConfig','length','创建默认网站配置失败！','firstRregisterSendModel4Count','qqNumber','checkSuperAdmin','defineProperty','firstRregisterSendModel3Count'];_0x36cf=function(){return _0x153c0d;};return _0x36cf();}