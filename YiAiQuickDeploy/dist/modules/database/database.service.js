'use strict';const _0x283faf=_0x1aa5;function _0x1aa5(_0x19d2ab,_0x5dba07){const _0x2b03a2=_0x2b03();return _0x1aa5=function(_0x1aa555,_0x24a4fa){_0x1aa555=_0x1aa555-0x68;let _0xb0209d=_0x2b03a2[_0x1aa555];return _0xb0209d;},_0x1aa5(_0x19d2ab,_0x5dba07);}(function(_0x2e2a32,_0x2a430a){const _0x5c2a4f=_0x1aa5,_0x4a56b5=_0x2e2a32();while(!![]){try{const _0x4f3987=parseInt(_0x5c2a4f(0xa5))/0x1*(parseInt(_0x5c2a4f(0xa2))/0x2)+-parseInt(_0x5c2a4f(0x7f))/0x3+parseInt(_0x5c2a4f(0x7a))/0x4*(-parseInt(_0x5c2a4f(0x98))/0x5)+-parseInt(_0x5c2a4f(0xc1))/0x6+-parseInt(_0x5c2a4f(0xaa))/0x7*(parseInt(_0x5c2a4f(0xb1))/0x8)+-parseInt(_0x5c2a4f(0x6b))/0x9*(-parseInt(_0x5c2a4f(0xc2))/0xa)+parseInt(_0x5c2a4f(0x7c))/0xb*(parseInt(_0x5c2a4f(0x6c))/0xc);if(_0x4f3987===_0x2a430a)break;else _0x4a56b5['push'](_0x4a56b5['shift']());}catch(_0x39dffc){_0x4a56b5['push'](_0x4a56b5['shift']());}}}(_0x2b03,0xe6949));var __decorate=this&&this[_0x283faf(0x8a)]||function(_0x38b7d8,_0x15cda0,_0x4ac021,_0x4debd3){const _0x8daeaf=_0x283faf;var _0x43362e=arguments[_0x8daeaf(0x6e)],_0x5cf5e2=_0x43362e<0x3?_0x15cda0:_0x4debd3===null?_0x4debd3=Object[_0x8daeaf(0xc6)](_0x15cda0,_0x4ac021):_0x4debd3,_0x27968e;if(typeof Reflect===_0x8daeaf(0xb0)&&typeof Reflect[_0x8daeaf(0xa4)]===_0x8daeaf(0x99))_0x5cf5e2=Reflect['decorate'](_0x38b7d8,_0x15cda0,_0x4ac021,_0x4debd3);else{for(var _0x592cf2=_0x38b7d8[_0x8daeaf(0x6e)]-0x1;_0x592cf2>=0x0;_0x592cf2--)if(_0x27968e=_0x38b7d8[_0x592cf2])_0x5cf5e2=(_0x43362e<0x3?_0x27968e(_0x5cf5e2):_0x43362e>0x3?_0x27968e(_0x15cda0,_0x4ac021,_0x5cf5e2):_0x27968e(_0x15cda0,_0x4ac021))||_0x5cf5e2;}return _0x43362e>0x3&&_0x5cf5e2&&Object[_0x8daeaf(0x94)](_0x15cda0,_0x4ac021,_0x5cf5e2),_0x5cf5e2;},__metadata=this&&this['__metadata']||function(_0x1f6c7f,_0x224c5d){const _0x1694fd=_0x283faf;if(typeof Reflect===_0x1694fd(0xb0)&&typeof Reflect[_0x1694fd(0x88)]===_0x1694fd(0x99))return Reflect[_0x1694fd(0x88)](_0x1f6c7f,_0x224c5d);};Object[_0x283faf(0x94)](exports,'__esModule',{'value':!![]}),exports[_0x283faf(0xa6)]=void 0x0;const common_1=require(_0x283faf(0x6a)),typeorm_1=require(_0x283faf(0x87)),bcrypt=require(_0x283faf(0x69));function _0x2b03(){const _0x30fdef=[']\x20==============>\x20请注意查阅','decorate','1UPStmv','DatabaseService','HelloWordYi819','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','1710429YveMiK','registerVerifyEmailFrom','insertId','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','欢迎使用Yi\x20Ai团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','userDefautlAvatar','object','48QldQBS','replace','baiduCode','query','encry','INTERNAL_SERVER_ERROR','123456','registerSendModel4Count','createDefaultUser','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','创建默认超级管理员失败！','siteName','log','firstRegisterSendStatus','openaiBaseUrl','805239273','1309164NiCHlV','10zaUUvl','error:\x20','baiduSiteId','inviteGiveSendModel3Count','getOwnPropertyDescriptor','nine-super','bcryptjs','@nestjs/common','7206642RGknvB','17724lAHgBE','inviteGiveSendDrawMjCount','length','Yi\x20Ai','registerVerifyExpir','registerSendModel3Count','createBaseSiteConfig','初始化创建','1800','Yi\x20Ai账号激活成功','registerFailEmailTitle','count','admin','registerSuccessEmailTeamName','35776KQEsIs','join','25553aNWSUe',']、初始密码为[','invitedGuestSendModel4Count','4502286GMCoei','map','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','super','baiduToken','hashSync','connection','checkSuperAdmin','typeorm','metadata','registerSendStatus','__decorate','\x0a####\x20YiAi\x20欢迎您\x0a\x20-\x20欢迎使用YiAi\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','Logger','configVal','Yi\x20Ai团队','vxNumber','inviteSendStatus','https://api.openai.com','design:paramtypes','创建默认网站配置失败！','defineProperty','Yi\x20Ai团队账号验证','robotAvatar','HttpStatus','935ASaZBp','function','\x27,\x20\x27','firstRregisterSendModel4Count','\x27,\x200,\x201000,\x20100)','onModuleInit','firstRegisterSendRank','用户成功、用户名为[','default@cooper.com','checkSiteBaseConfig','3140428jQkUrC'];_0x2b03=function(){return _0x30fdef;};return _0x2b03();}let DatabaseService=class DatabaseService{constructor(_0x1af226){const _0x517935=_0x283faf;this[_0x517935(0x85)]=_0x1af226;}async[_0x283faf(0x9d)](){const _0x2997e6=_0x283faf;await this[_0x2997e6(0x86)](),await this[_0x2997e6(0xa1)]();}async[_0x283faf(0x86)](){const _0x16dd7f=_0x283faf,_0x5ab461=await this[_0x16dd7f(0x85)][_0x16dd7f(0xb4)](_0x16dd7f(0x81));if(!_0x5ab461||_0x5ab461[_0x16dd7f(0x6e)]===0x0){const _0x3a8746=bcrypt[_0x16dd7f(0x84)]('123456',0xa),_0x198fcc=bcrypt[_0x16dd7f(0x84)](_0x16dd7f(0xb7),0xa),_0xb3852c=_0x16dd7f(0xa0),_0xb80af7='defaultAdmin@cooper.com',_0x55f873={'username':_0x16dd7f(0x82),'password':_0x3a8746,'status':0x1,'email':_0xb3852c,'sex':0x1,'role':_0x16dd7f(0x82)},_0xe87b33={'username':_0x16dd7f(0x78),'password':_0x198fcc,'status':0x1,'email':_0xb80af7,'sex':0x1,'role':_0x16dd7f(0x78)};await this['createDefaultUser'](_0x55f873),await this['createDefaultUser'](_0xe87b33);}}async[_0x283faf(0xb9)](_0xc85744){const _0x1c142f=_0x283faf;try{const {username:_0x1b44fc,password:_0x5ed5b9,status:_0x389f8d,email:_0x4650d0,role:_0x504bf3}=_0xc85744,_0x5bdcf3=await this[_0x1c142f(0x85)]['query'](_0x1c142f(0xba)+_0x1b44fc+'\x27,\x20\x27'+_0x5ed5b9+_0x1c142f(0x9a)+_0x389f8d+'\x27,\x20\x27'+_0x4650d0+_0x1c142f(0x9a)+_0x504bf3+'\x27)'),_0x35910a=_0x5bdcf3[_0x1c142f(0xac)],_0x42cd03=await this[_0x1c142f(0x85)]['query']('INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27'+_0x35910a+_0x1c142f(0x9c));common_1['Logger']['log'](_0x1c142f(0x73)+_0x504bf3+_0x1c142f(0x9f)+_0x1b44fc+_0x1c142f(0x7d)+(_0x1b44fc===_0x1c142f(0x82)?_0x1c142f(0x68):_0x1c142f(0xb7))+_0x1c142f(0xa3),_0x1c142f(0xa6));}catch(_0x330ab8){console['log'](_0x1c142f(0xc3),_0x330ab8);throw new common_1['HttpException'](_0x1c142f(0xbb),common_1[_0x1c142f(0x97)][_0x1c142f(0xb6)]);}}async['checkSiteBaseConfig'](){const _0x23d391=_0x283faf,_0x2515af=[_0x23d391(0xbc),'qqNumber',_0x23d391(0x8f),_0x23d391(0x96),_0x23d391(0xaf)],_0x28b4fd=await this[_0x23d391(0x85)]['query'](_0x23d391(0xa8)+_0x2515af[_0x23d391(0x80)](_0x774ba2=>'\x27'+_0x774ba2+'\x27')[_0x23d391(0x7b)](',')+')\x0a'),_0x5907b3=parseInt(_0x28b4fd[0x0][_0x23d391(0x77)]);_0x5907b3===0x0&&await this[_0x23d391(0x72)]();}async[_0x283faf(0x72)](){const _0x103c7d=_0x283faf;try{const _0x2f29b7='',_0x2ba5bf=_0x103c7d(0x8b),_0x5d0130=[{'configKey':_0x103c7d(0xbc),'configVal':_0x103c7d(0x6f),'public':0x1,'encry':0x0},{'configKey':'qqNumber','configVal':_0x103c7d(0xc0),'public':0x1,'encry':0x0},{'configKey':_0x103c7d(0x8f),'configVal':_0x103c7d(0xa7),'public':0x1,'encry':0x0},{'configKey':_0x103c7d(0x96),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x103c7d(0xaf),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x103c7d(0xb3),'configVal':_0x2f29b7,'public':0x1,'encry':0x0},{'configKey':_0x103c7d(0xc4),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x103c7d(0x83),'configVal':'','public':0x0,'encry':0x0},{'configKey':'buyCramiAddress','configVal':'','public':0x1,'encry':0x0},{'configKey':_0x103c7d(0xbf),'configVal':_0x103c7d(0x91),'public':0x0,'encry':0x0},{'configKey':'noticeInfo','configVal':_0x2ba5bf,'public':0x1,'encry':0x0},{'configKey':'registerVerifyEmailTitle','configVal':_0x103c7d(0x95),'public':0x0,'encry':0x0},{'configKey':'registerVerifyEmailDesc','configVal':_0x103c7d(0xae),'public':0x0,'encry':0x0},{'configKey':_0x103c7d(0xab),'configVal':'Yi\x20Ai团队','public':0x0,'encry':0x0},{'configKey':_0x103c7d(0x70),'configVal':_0x103c7d(0x74),'public':0x0,'encry':0x0},{'configKey':'registerSuccessEmailTitle','configVal':_0x103c7d(0x75),'public':0x0,'encry':0x0},{'configKey':_0x103c7d(0x79),'configVal':_0x103c7d(0x6f),'public':0x0,'encry':0x0},{'configKey':'registerSuccessEmaileAppend','configVal':',请妥善保管您的账号，祝您使用愉快','public':0x0,'encry':0x0},{'configKey':_0x103c7d(0x76),'configVal':'Yi\x20Ai账号激活失败','public':0x0,'encry':0x0},{'configKey':'registerFailEmailTeamName','configVal':_0x103c7d(0x8e),'public':0x0,'encry':0x0},{'configKey':_0x103c7d(0x89),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x103c7d(0x71),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x103c7d(0xb8),'configVal':'3','public':0x1,'encry':0x0},{'configKey':'registerSendDrawMjCount','configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x103c7d(0xbe),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x103c7d(0x9e),'configVal':'500','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendModel3Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x103c7d(0x9b),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendDrawMjCount','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x103c7d(0x90),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x103c7d(0xc5),'configVal':'0','public':0x1,'encry':0x0},{'configKey':'inviteGiveSendModel4Count','configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x103c7d(0x6d),'configVal':'0','public':0x1,'encry':0x0},{'configKey':'invitedGuestSendModel3Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x103c7d(0x7e),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'invitedGuestSendDrawMjCount','configVal':'10','public':0x1,'encry':0x0},{'configKey':'isVerifyEmail','configVal':'1','public':0x1,'encry':0x0}],_0x3bf6ea=await this['connection'][_0x103c7d(0xb4)](_0x103c7d(0xa9)+_0x5d0130['map'](_0x57a23a=>'(\x27'+_0x57a23a['configKey']+_0x103c7d(0x9a)+_0x57a23a[_0x103c7d(0x8d)][_0x103c7d(0xb2)](/'/g,'\x5c\x27')+_0x103c7d(0x9a)+_0x57a23a['public']+'\x27,\x20\x27'+_0x57a23a[_0x103c7d(0xb5)]+'\x27)')[_0x103c7d(0x7b)](',\x20'));common_1[_0x103c7d(0x8c)][_0x103c7d(0xbd)](_0x103c7d(0xad),_0x103c7d(0xa6));}catch(_0x404473){console[_0x103c7d(0xbd)](_0x103c7d(0xc3),_0x404473);throw new common_1['HttpException'](_0x103c7d(0x93),common_1[_0x103c7d(0x97)][_0x103c7d(0xb6)]);}}};DatabaseService=__decorate([(0x0,common_1['Injectable'])(),__metadata(_0x283faf(0x92),[typeorm_1['Connection']])],DatabaseService),exports[_0x283faf(0xa6)]=DatabaseService;