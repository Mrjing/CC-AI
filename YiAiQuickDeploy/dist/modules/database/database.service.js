'use strict';const _0x55f554=_0x5ce1;(function(_0x2fe958,_0x39dfd4){const _0xe1a21a=_0x5ce1,_0x372549=_0x2fe958();while(!![]){try{const _0x41d7e4=parseInt(_0xe1a21a(0x121))/0x1*(-parseInt(_0xe1a21a(0x169))/0x2)+parseInt(_0xe1a21a(0x13d))/0x3*(-parseInt(_0xe1a21a(0x16e))/0x4)+parseInt(_0xe1a21a(0x132))/0x5*(parseInt(_0xe1a21a(0x170))/0x6)+parseInt(_0xe1a21a(0x148))/0x7+parseInt(_0xe1a21a(0x134))/0x8+parseInt(_0xe1a21a(0x141))/0x9*(-parseInt(_0xe1a21a(0x16a))/0xa)+parseInt(_0xe1a21a(0x126))/0xb*(parseInt(_0xe1a21a(0x155))/0xc);if(_0x41d7e4===_0x39dfd4)break;else _0x372549['push'](_0x372549['shift']());}catch(_0x13dece){_0x372549['push'](_0x372549['shift']());}}}(_0x2dd5,0xca9d6));var __decorate=this&&this[_0x55f554(0x144)]||function(_0x429112,_0x576d2b,_0x5b17ca,_0x2e7721){const _0x5d65ca=_0x55f554;var _0x2a03d=arguments[_0x5d65ca(0x14d)],_0x9323e7=_0x2a03d<0x3?_0x576d2b:_0x2e7721===null?_0x2e7721=Object['getOwnPropertyDescriptor'](_0x576d2b,_0x5b17ca):_0x2e7721,_0x2054cf;if(typeof Reflect===_0x5d65ca(0x15c)&&typeof Reflect[_0x5d65ca(0x127)]===_0x5d65ca(0x166))_0x9323e7=Reflect[_0x5d65ca(0x127)](_0x429112,_0x576d2b,_0x5b17ca,_0x2e7721);else{for(var _0x5717c6=_0x429112[_0x5d65ca(0x14d)]-0x1;_0x5717c6>=0x0;_0x5717c6--)if(_0x2054cf=_0x429112[_0x5717c6])_0x9323e7=(_0x2a03d<0x3?_0x2054cf(_0x9323e7):_0x2a03d>0x3?_0x2054cf(_0x576d2b,_0x5b17ca,_0x9323e7):_0x2054cf(_0x576d2b,_0x5b17ca))||_0x9323e7;}return _0x2a03d>0x3&&_0x9323e7&&Object[_0x5d65ca(0x158)](_0x576d2b,_0x5b17ca,_0x9323e7),_0x9323e7;},__metadata=this&&this['__metadata']||function(_0x360990,_0x25770c){const _0x20ea08=_0x55f554;if(typeof Reflect==='object'&&typeof Reflect[_0x20ea08(0x118)]===_0x20ea08(0x166))return Reflect[_0x20ea08(0x118)](_0x360990,_0x25770c);};Object['defineProperty'](exports,_0x55f554(0x149),{'value':!![]}),exports[_0x55f554(0x12d)]=void 0x0;function _0x5ce1(_0x4b0354,_0x3ca426){const _0x2dd5f6=_0x2dd5();return _0x5ce1=function(_0x5ce19c,_0x56b2ea){_0x5ce19c=_0x5ce19c-0x115;let _0x1776bf=_0x2dd5f6[_0x5ce19c];return _0x1776bf;},_0x5ce1(_0x4b0354,_0x3ca426);}const common_1=require(_0x55f554(0x123)),typeorm_1=require(_0x55f554(0x13b)),bcrypt=require(_0x55f554(0x12b));let DatabaseService=class DatabaseService{constructor(_0x4a9a63){const _0x298cf1=_0x55f554;this[_0x298cf1(0x136)]=_0x4a9a63;}async['onModuleInit'](){const _0x5307c2=_0x55f554;await this['checkSuperAdmin'](),await this[_0x5307c2(0x13c)]();}async['checkSuperAdmin'](){const _0x302e7f=_0x55f554,_0xa51bc0=await this[_0x302e7f(0x136)][_0x302e7f(0x152)](_0x302e7f(0x14e));if(!_0xa51bc0||_0xa51bc0[_0x302e7f(0x14d)]===0x0){const _0x386e44=bcrypt['hashSync'](_0x302e7f(0x14f),0xa),_0x101f46=bcrypt[_0x302e7f(0x117)](_0x302e7f(0x14f),0xa),_0x199300=_0x302e7f(0x11c),_0x1493e4='defaultAdmin@cooper.com',_0x52ad2f={'username':_0x302e7f(0x163),'password':_0x386e44,'status':0x1,'email':_0x199300,'sex':0x1,'role':'super'},_0x5c668b={'username':_0x302e7f(0x115),'password':_0x101f46,'status':0x1,'email':_0x1493e4,'sex':0x1,'role':_0x302e7f(0x115)};await this['createDefaultUser'](_0x52ad2f),await this[_0x302e7f(0x12e)](_0x5c668b);}}async['createDefaultUser'](_0x38f0ae){const _0x93ccb0=_0x55f554;try{const {username:_0x5b8cbd,password:_0x56196f,status:_0x5b9962,email:_0x1c6b61,role:_0xb57ef}=_0x38f0ae,_0x3e4383=await this[_0x93ccb0(0x136)]['query'](_0x93ccb0(0x171)+_0x5b8cbd+_0x93ccb0(0x12f)+_0x56196f+_0x93ccb0(0x12f)+_0x5b9962+_0x93ccb0(0x12f)+_0x1c6b61+_0x93ccb0(0x12f)+_0xb57ef+'\x27)'),_0x38c67d=_0x3e4383[_0x93ccb0(0x15b)],_0x199ca5=await this[_0x93ccb0(0x136)]['query']('INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27'+_0x38c67d+_0x93ccb0(0x11b));common_1[_0x93ccb0(0x164)][_0x93ccb0(0x159)](_0x93ccb0(0x13f)+_0xb57ef+_0x93ccb0(0x138)+_0x5b8cbd+_0x93ccb0(0x130)+(_0x5b8cbd==='super'?_0x93ccb0(0x146):'123456')+_0x93ccb0(0x124),_0x93ccb0(0x12d));}catch(_0x183a20){console['log'](_0x93ccb0(0x133),_0x183a20);throw new common_1[(_0x93ccb0(0x11e))](_0x93ccb0(0x143),common_1[_0x93ccb0(0x140)][_0x93ccb0(0x16b)]);}}async[_0x55f554(0x13c)](){const _0xd4b86b=_0x55f554,_0x9bc730=[_0xd4b86b(0x11f),'qqNumber',_0xd4b86b(0x165),'robotAvatar',_0xd4b86b(0x150)],_0x5b7cbd=await this[_0xd4b86b(0x136)][_0xd4b86b(0x152)]('\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20('+_0x9bc730[_0xd4b86b(0x11d)](_0x5c774e=>'\x27'+_0x5c774e+'\x27')['join'](',')+')\x0a'),_0x47282e=parseInt(_0x5b7cbd[0x0][_0xd4b86b(0x16d)]);_0x47282e===0x0&&await this[_0xd4b86b(0x15f)]();}async[_0x55f554(0x15f)](){const _0x4d7c2c=_0x55f554;try{const _0x24fd00='',_0xa7b1c7=_0x4d7c2c(0x16f),_0x2f5522=[{'configKey':'siteName','configVal':_0x4d7c2c(0x137),'public':0x1,'encry':0x0},{'configKey':'qqNumber','configVal':_0x4d7c2c(0x125),'public':0x1,'encry':0x0},{'configKey':_0x4d7c2c(0x165),'configVal':_0x4d7c2c(0x129),'public':0x1,'encry':0x0},{'configKey':'robotAvatar','configVal':'','public':0x1,'encry':0x0},{'configKey':_0x4d7c2c(0x150),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x4d7c2c(0x174),'configVal':_0x24fd00,'public':0x1,'encry':0x0},{'configKey':_0x4d7c2c(0x15e),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x4d7c2c(0x154),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x4d7c2c(0x16c),'configVal':'','public':0x1,'encry':0x0},{'configKey':'openaiBaseUrl','configVal':_0x4d7c2c(0x15d),'public':0x0,'encry':0x0},{'configKey':_0x4d7c2c(0x122),'configVal':_0xa7b1c7,'public':0x1,'encry':0x0},{'configKey':_0x4d7c2c(0x116),'configVal':'Yi\x20Ai团队账号验证','public':0x0,'encry':0x0},{'configKey':_0x4d7c2c(0x173),'configVal':'欢迎使用Yi\x20Ai团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','public':0x0,'encry':0x0},{'configKey':_0x4d7c2c(0x120),'configVal':_0x4d7c2c(0x12a),'public':0x0,'encry':0x0},{'configKey':_0x4d7c2c(0x162),'configVal':_0x4d7c2c(0x172),'public':0x0,'encry':0x0},{'configKey':'registerSuccessEmailTitle','configVal':'Yi\x20Ai账号激活成功','public':0x0,'encry':0x0},{'configKey':_0x4d7c2c(0x156),'configVal':_0x4d7c2c(0x137),'public':0x0,'encry':0x0},{'configKey':_0x4d7c2c(0x11a),'configVal':',请妥善保管您的账号，祝您使用愉快','public':0x0,'encry':0x0},{'configKey':_0x4d7c2c(0x14c),'configVal':_0x4d7c2c(0x153),'public':0x0,'encry':0x0},{'configKey':'registerFailEmailTeamName','configVal':_0x4d7c2c(0x12a),'public':0x0,'encry':0x0},{'configKey':_0x4d7c2c(0x13a),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x4d7c2c(0x145),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x4d7c2c(0x13e),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x4d7c2c(0x128),'configVal':'3','public':0x1,'encry':0x0},{'configKey':'firstRegisterSendStatus','configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x4d7c2c(0x160),'configVal':_0x4d7c2c(0x131),'public':0x1,'encry':0x0},{'configKey':'firstRregisterSendModel3Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x4d7c2c(0x12c),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendDrawMjCount','configVal':'10','public':0x1,'encry':0x0},{'configKey':'inviteSendStatus','configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x4d7c2c(0x161),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x4d7c2c(0x157),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x4d7c2c(0x14b),'configVal':'0','public':0x1,'encry':0x0},{'configKey':'invitedGuestSendModel3Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x4d7c2c(0x168),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x4d7c2c(0x135),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'isVerifyEmail','configVal':'1','public':0x1,'encry':0x0}],_0x297081=await this['connection'][_0x4d7c2c(0x152)](_0x4d7c2c(0x119)+_0x2f5522['map'](_0x3fb164=>'(\x27'+_0x3fb164[_0x4d7c2c(0x14a)]+'\x27,\x20\x27'+_0x3fb164[_0x4d7c2c(0x147)][_0x4d7c2c(0x151)](/'/g,'\x5c\x27')+_0x4d7c2c(0x12f)+_0x3fb164['public']+_0x4d7c2c(0x12f)+_0x3fb164['encry']+'\x27)')[_0x4d7c2c(0x139)](',\x20'));common_1['Logger']['log']('初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅',_0x4d7c2c(0x12d));}catch(_0x467eb3){console[_0x4d7c2c(0x159)](_0x4d7c2c(0x133),_0x467eb3);throw new common_1[(_0x4d7c2c(0x11e))](_0x4d7c2c(0x15a),common_1[_0x4d7c2c(0x140)][_0x4d7c2c(0x16b)]);}}};function _0x2dd5(){const _0x2916c1=['connection','Yi\x20Ai','用户成功、用户名为[','join','registerSendStatus','typeorm','checkSiteBaseConfig','130641SJkqhf','registerSendModel4Count','初始化创建','HttpStatus','171RNakgA','design:paramtypes','创建默认超级管理员失败！','__decorate','registerSendModel3Count','nine-super','configVal','9412515LwPVwU','__esModule','configKey','inviteGiveSendDrawMjCount','registerFailEmailTitle','length','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','123456','userDefautlAvatar','replace','query','Yi\x20Ai账号激活失败','baiduToken','8264148lrVZsO','registerSuccessEmailTeamName','inviteGiveSendModel4Count','defineProperty','log','创建默认网站配置失败！','insertId','object','https://api.openai.com','baiduSiteId','createBaseSiteConfig','firstRegisterSendRank','inviteGiveSendModel3Count','registerVerifyExpir','super','Logger','vxNumber','function','Connection','invitedGuestSendModel4Count','2viqKgk','95310eussVd','INTERNAL_SERVER_ERROR','buyCramiAddress','count','140MwYPwW','\x0a####\x20YiAi\x20欢迎您\x0a\x20-\x20欢迎使用YiAi\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','327468KAHozC','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','1800','registerVerifyEmailDesc','baiduCode','admin','registerVerifyEmailTitle','hashSync','metadata','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','registerSuccessEmaileAppend','\x27,\x200,\x201000,\x20100)','default@cooper.com','map','HttpException','siteName','registerVerifyEmailFrom','1110384fMAJKU','noticeInfo','@nestjs/common',']\x20==============>\x20请注意查阅','805239273','11XSEwZL','decorate','registerSendDrawMjCount','HelloWordYi819','Yi\x20Ai团队','bcryptjs','firstRregisterSendModel4Count','DatabaseService','createDefaultUser','\x27,\x20\x27',']、初始密码为[','500','115PRXoKj','error:\x20','2855280caGkFf','invitedGuestSendDrawMjCount'];_0x2dd5=function(){return _0x2916c1;};return _0x2dd5();}DatabaseService=__decorate([(0x0,common_1['Injectable'])(),__metadata(_0x55f554(0x142),[typeorm_1[_0x55f554(0x167)]])],DatabaseService),exports[_0x55f554(0x12d)]=DatabaseService;