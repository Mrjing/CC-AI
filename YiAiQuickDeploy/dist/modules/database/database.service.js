'use strict';const _0x5e83ee=_0x2952;(function(_0x1436de,_0x2e883d){const _0x20d1f3=_0x2952,_0x2bec7a=_0x1436de();while(!![]){try{const _0x283eab=parseInt(_0x20d1f3(0xe4))/0x1+parseInt(_0x20d1f3(0xfa))/0x2*(parseInt(_0x20d1f3(0xd3))/0x3)+parseInt(_0x20d1f3(0xbf))/0x4*(-parseInt(_0x20d1f3(0x10f))/0x5)+parseInt(_0x20d1f3(0xcb))/0x6+-parseInt(_0x20d1f3(0xcf))/0x7*(parseInt(_0x20d1f3(0x114))/0x8)+parseInt(_0x20d1f3(0xe0))/0x9+-parseInt(_0x20d1f3(0xb6))/0xa;if(_0x283eab===_0x2e883d)break;else _0x2bec7a['push'](_0x2bec7a['shift']());}catch(_0x2d579a){_0x2bec7a['push'](_0x2bec7a['shift']());}}}(_0x408c,0x81cd6));var __decorate=this&&this[_0x5e83ee(0xf4)]||function(_0x328854,_0x52ad4b,_0x5626c7,_0x238953){const _0x12cb3f=_0x5e83ee;var _0x403126=arguments[_0x12cb3f(0xff)],_0x593355=_0x403126<0x3?_0x52ad4b:_0x238953===null?_0x238953=Object['getOwnPropertyDescriptor'](_0x52ad4b,_0x5626c7):_0x238953,_0x5e27ae;if(typeof Reflect===_0x12cb3f(0x102)&&typeof Reflect[_0x12cb3f(0x10e)]===_0x12cb3f(0xfd))_0x593355=Reflect[_0x12cb3f(0x10e)](_0x328854,_0x52ad4b,_0x5626c7,_0x238953);else{for(var _0x2d3c5f=_0x328854['length']-0x1;_0x2d3c5f>=0x0;_0x2d3c5f--)if(_0x5e27ae=_0x328854[_0x2d3c5f])_0x593355=(_0x403126<0x3?_0x5e27ae(_0x593355):_0x403126>0x3?_0x5e27ae(_0x52ad4b,_0x5626c7,_0x593355):_0x5e27ae(_0x52ad4b,_0x5626c7))||_0x593355;}return _0x403126>0x3&&_0x593355&&Object[_0x12cb3f(0xbb)](_0x52ad4b,_0x5626c7,_0x593355),_0x593355;},__metadata=this&&this[_0x5e83ee(0xd0)]||function(_0x3bd67a,_0x3aa5be){const _0x4a5545=_0x5e83ee;if(typeof Reflect===_0x4a5545(0x102)&&typeof Reflect[_0x4a5545(0x111)]==='function')return Reflect['metadata'](_0x3bd67a,_0x3aa5be);};function _0x2952(_0x1dd976,_0x5dbcd){const _0x408cc1=_0x408c();return _0x2952=function(_0x295277,_0x4e484d){_0x295277=_0x295277-0xac;let _0x4848fe=_0x408cc1[_0x295277];return _0x4848fe;},_0x2952(_0x1dd976,_0x5dbcd);}function _0x408c(){const _0x117ea9=['创建默认超级管理员失败！','Yi\x20Ai团队','registerVerifyEmailFrom','configKey','用户成功、用户名为[','INTERNAL_SERVER_ERROR','HttpStatus','\x27,\x20\x27','invitedGuestSendDrawMjCount','decorate','5MSXaCm','super','metadata','hashSync','firstRregisterSendDrawMjCount','1552WxfkzO','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','join','registerFailEmailTeamName','123456','createDefaultUser','design:paramtypes','registerSendStatus',',请妥善保管您的账号，祝您使用愉快','__esModule','configVal','11204630lAvgRA','registerSendModel4Count','map','初始化创建','registerSuccessEmaileAppend','defineProperty','createBaseSiteConfig','registerSendModel3Count','Yi\x20Ai','1089592VvYXyz','HelloWordYi819','encry','Logger','Yi\x20Ai账号激活成功','https://api.openai.com','userDefautlAvatar','firstRregisterSendModel3Count','registerSuccessEmailTitle','Connection','isVerifyEmail','500','4595892wuQaOu','inviteGiveSendDrawMjCount','buyCramiAddress','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','29330DtTARA','__metadata','replace','\x0a####\x20YiAi\x20欢迎您\x0a\x20-\x20欢迎使用YiAi\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','3OuwoZd','inviteGiveSendModel3Count','registerVerifyExpir','onModuleInit','firstRegisterSendStatus','\x27,\x200,\x201000,\x20100)','default@cooper.com','805239273','log','baiduSiteId','registerVerifyEmailTitle','error:\x20','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','5047389TnddiK','firstRregisterSendModel4Count','DatabaseService','registerVerifyEmailDesc','460547EcUnny','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','connection','admin','1800','Injectable','query','欢迎使用Yi\x20Ai团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','count','siteName','registerSendDrawMjCount','bcryptjs','registerFailEmailTitle','checkSuperAdmin','nine-super','@nestjs/common','__decorate','invitedGuestSendModel4Count','invitedGuestSendModel3Count','baiduCode','创建默认网站配置失败！','insertId','1900082iqkfxV','public','HttpException','function','qqNumber','length','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','object','robotAvatar','defaultAdmin@cooper.com'];_0x408c=function(){return _0x117ea9;};return _0x408c();}Object[_0x5e83ee(0xbb)](exports,_0x5e83ee(0xb4),{'value':!![]}),exports[_0x5e83ee(0xe2)]=void 0x0;const common_1=require(_0x5e83ee(0xf3)),typeorm_1=require('typeorm'),bcrypt=require(_0x5e83ee(0xef));let DatabaseService=class DatabaseService{constructor(_0x25d629){const _0x125787=_0x5e83ee;this[_0x125787(0xe6)]=_0x25d629;}async[_0x5e83ee(0xd6)](){const _0x43c630=_0x5e83ee;await this[_0x43c630(0xf1)](),await this['checkSiteBaseConfig']();}async[_0x5e83ee(0xf1)](){const _0x5d3562=_0x5e83ee,_0x10c7ff=await this[_0x5d3562(0xe6)][_0x5d3562(0xea)](_0x5d3562(0xce));if(!_0x10c7ff||_0x10c7ff[_0x5d3562(0xff)]===0x0){const _0x320f8d=bcrypt[_0x5d3562(0x112)](_0x5d3562(0xaf),0xa),_0x5826bb=bcrypt[_0x5d3562(0x112)](_0x5d3562(0xaf),0xa),_0x203893=_0x5d3562(0xd9),_0x7847be=_0x5d3562(0x104),_0x127930={'username':_0x5d3562(0x110),'password':_0x320f8d,'status':0x1,'email':_0x203893,'sex':0x1,'role':_0x5d3562(0x110)},_0xe2d53c={'username':_0x5d3562(0xe7),'password':_0x5826bb,'status':0x1,'email':_0x7847be,'sex':0x1,'role':_0x5d3562(0xe7)};await this[_0x5d3562(0xb0)](_0x127930),await this[_0x5d3562(0xb0)](_0xe2d53c);}}async['createDefaultUser'](_0x947be){const _0x546b28=_0x5e83ee;try{const {username:_0x424a66,password:_0x36b81c,status:_0x494fa8,email:_0xe0a9e0,role:_0x25899c}=_0x947be,_0x30f4d8=await this[_0x546b28(0xe6)][_0x546b28(0xea)](_0x546b28(0x101)+_0x424a66+'\x27,\x20\x27'+_0x36b81c+_0x546b28(0x10c)+_0x494fa8+'\x27,\x20\x27'+_0xe0a9e0+_0x546b28(0x10c)+_0x25899c+'\x27)'),_0x2d7eb1=_0x30f4d8[_0x546b28(0xf9)],_0x452169=await this[_0x546b28(0xe6)][_0x546b28(0xea)](_0x546b28(0x100)+_0x2d7eb1+_0x546b28(0xd8));common_1[_0x546b28(0xc2)][_0x546b28(0xdb)](_0x546b28(0xb9)+_0x25899c+_0x546b28(0x109)+_0x424a66+']、初始密码为['+(_0x424a66===_0x546b28(0x110)?_0x546b28(0xf2):_0x546b28(0xaf))+']\x20==============>\x20请注意查阅','DatabaseService');}catch(_0x2f562d){console[_0x546b28(0xdb)](_0x546b28(0xde),_0x2f562d);throw new common_1[(_0x546b28(0xfc))](_0x546b28(0x105),common_1[_0x546b28(0x10b)]['INTERNAL_SERVER_ERROR']);}}async['checkSiteBaseConfig'](){const _0x109fdf=_0x5e83ee,_0x4e492f=['siteName','qqNumber','vxNumber',_0x109fdf(0x103),_0x109fdf(0xc5)],_0x4a1d57=await this[_0x109fdf(0xe6)][_0x109fdf(0xea)](_0x109fdf(0xdf)+_0x4e492f[_0x109fdf(0xb8)](_0x593304=>'\x27'+_0x593304+'\x27')[_0x109fdf(0xad)](',')+')\x0a'),_0x48eff1=parseInt(_0x4a1d57[0x0][_0x109fdf(0xec)]);_0x48eff1===0x0&&await this[_0x109fdf(0xbc)]();}async[_0x5e83ee(0xbc)](){const _0x38fb9f=_0x5e83ee;try{const _0x41d596='',_0x40fdc0=_0x38fb9f(0xd2),_0x47018e=[{'configKey':_0x38fb9f(0xed),'configVal':'Yi\x20Ai','public':0x1,'encry':0x0},{'configKey':_0x38fb9f(0xfe),'configVal':_0x38fb9f(0xda),'public':0x1,'encry':0x0},{'configKey':'vxNumber','configVal':_0x38fb9f(0xc0),'public':0x1,'encry':0x0},{'configKey':'robotAvatar','configVal':'','public':0x1,'encry':0x0},{'configKey':_0x38fb9f(0xc5),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x38fb9f(0xf7),'configVal':_0x41d596,'public':0x1,'encry':0x0},{'configKey':_0x38fb9f(0xdc),'configVal':'','public':0x0,'encry':0x0},{'configKey':'baiduToken','configVal':'','public':0x0,'encry':0x0},{'configKey':_0x38fb9f(0xcd),'configVal':'','public':0x1,'encry':0x0},{'configKey':'openaiBaseUrl','configVal':_0x38fb9f(0xc4),'public':0x0,'encry':0x0},{'configKey':'noticeInfo','configVal':_0x40fdc0,'public':0x1,'encry':0x0},{'configKey':_0x38fb9f(0xdd),'configVal':'Yi\x20Ai团队账号验证','public':0x0,'encry':0x0},{'configKey':_0x38fb9f(0xe3),'configVal':_0x38fb9f(0xeb),'public':0x0,'encry':0x0},{'configKey':_0x38fb9f(0x107),'configVal':_0x38fb9f(0x106),'public':0x0,'encry':0x0},{'configKey':_0x38fb9f(0xd5),'configVal':_0x38fb9f(0xe8),'public':0x0,'encry':0x0},{'configKey':_0x38fb9f(0xc7),'configVal':_0x38fb9f(0xc3),'public':0x0,'encry':0x0},{'configKey':'registerSuccessEmailTeamName','configVal':_0x38fb9f(0xbe),'public':0x0,'encry':0x0},{'configKey':_0x38fb9f(0xba),'configVal':_0x38fb9f(0xb3),'public':0x0,'encry':0x0},{'configKey':_0x38fb9f(0xf0),'configVal':'Yi\x20Ai账号激活失败','public':0x0,'encry':0x0},{'configKey':_0x38fb9f(0xae),'configVal':_0x38fb9f(0x106),'public':0x0,'encry':0x0},{'configKey':_0x38fb9f(0xb2),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x38fb9f(0xbd),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x38fb9f(0xb7),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x38fb9f(0xee),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x38fb9f(0xd7),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'firstRegisterSendRank','configVal':_0x38fb9f(0xca),'public':0x1,'encry':0x0},{'configKey':_0x38fb9f(0xc6),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x38fb9f(0xe1),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x38fb9f(0x113),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'inviteSendStatus','configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x38fb9f(0xd4),'configVal':'0','public':0x1,'encry':0x0},{'configKey':'inviteGiveSendModel4Count','configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x38fb9f(0xcc),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x38fb9f(0xf6),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x38fb9f(0xf5),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x38fb9f(0x10d),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x38fb9f(0xc9),'configVal':'1','public':0x1,'encry':0x0}],_0x478916=await this[_0x38fb9f(0xe6)][_0x38fb9f(0xea)](_0x38fb9f(0xe5)+_0x47018e[_0x38fb9f(0xb8)](_0x2093da=>'(\x27'+_0x2093da[_0x38fb9f(0x108)]+'\x27,\x20\x27'+_0x2093da[_0x38fb9f(0xb5)][_0x38fb9f(0xd1)](/'/g,'\x5c\x27')+'\x27,\x20\x27'+_0x2093da[_0x38fb9f(0xfb)]+_0x38fb9f(0x10c)+_0x2093da[_0x38fb9f(0xc1)]+'\x27)')[_0x38fb9f(0xad)](',\x20'));common_1[_0x38fb9f(0xc2)][_0x38fb9f(0xdb)](_0x38fb9f(0xac),'DatabaseService');}catch(_0x547dd0){console['log'](_0x38fb9f(0xde),_0x547dd0);throw new common_1[(_0x38fb9f(0xfc))](_0x38fb9f(0xf8),common_1[_0x38fb9f(0x10b)][_0x38fb9f(0x10a)]);}}};DatabaseService=__decorate([(0x0,common_1[_0x5e83ee(0xe9)])(),__metadata(_0x5e83ee(0xb1),[typeorm_1[_0x5e83ee(0xc8)]])],DatabaseService),exports['DatabaseService']=DatabaseService;