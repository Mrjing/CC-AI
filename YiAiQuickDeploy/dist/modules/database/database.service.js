'use strict';const _0x2af8c6=_0x4784;(function(_0x423813,_0x56c825){const _0x426916=_0x4784,_0x4ca3a5=_0x423813();while(!![]){try{const _0x3a43b8=parseInt(_0x426916(0x207))/0x1*(parseInt(_0x426916(0x20e))/0x2)+parseInt(_0x426916(0x205))/0x3+parseInt(_0x426916(0x1c8))/0x4+-parseInt(_0x426916(0x213))/0x5*(-parseInt(_0x426916(0x1c0))/0x6)+-parseInt(_0x426916(0x1f1))/0x7*(parseInt(_0x426916(0x1d6))/0x8)+parseInt(_0x426916(0x1e9))/0x9*(-parseInt(_0x426916(0x1ef))/0xa)+-parseInt(_0x426916(0x20a))/0xb;if(_0x3a43b8===_0x56c825)break;else _0x4ca3a5['push'](_0x4ca3a5['shift']());}catch(_0x77523f){_0x4ca3a5['push'](_0x4ca3a5['shift']());}}}(_0x1540,0xe2933));function _0x4784(_0x33ef05,_0x25ca93){const _0x154019=_0x1540();return _0x4784=function(_0x4784f8,_0x501b5d){_0x4784f8=_0x4784f8-0x1c0;let _0x56d3c9=_0x154019[_0x4784f8];return _0x56d3c9;},_0x4784(_0x33ef05,_0x25ca93);}var __decorate=this&&this['__decorate']||function(_0x711cea,_0xb38e9b,_0x311af5,_0x4b1597){const _0x168605=_0x4784;var _0x43031b=arguments[_0x168605(0x203)],_0x1b281f=_0x43031b<0x3?_0xb38e9b:_0x4b1597===null?_0x4b1597=Object[_0x168605(0x1f3)](_0xb38e9b,_0x311af5):_0x4b1597,_0x5597e0;if(typeof Reflect===_0x168605(0x1f6)&&typeof Reflect[_0x168605(0x218)]===_0x168605(0x1da))_0x1b281f=Reflect['decorate'](_0x711cea,_0xb38e9b,_0x311af5,_0x4b1597);else{for(var _0x4d3f0d=_0x711cea['length']-0x1;_0x4d3f0d>=0x0;_0x4d3f0d--)if(_0x5597e0=_0x711cea[_0x4d3f0d])_0x1b281f=(_0x43031b<0x3?_0x5597e0(_0x1b281f):_0x43031b>0x3?_0x5597e0(_0xb38e9b,_0x311af5,_0x1b281f):_0x5597e0(_0xb38e9b,_0x311af5))||_0x1b281f;}return _0x43031b>0x3&&_0x1b281f&&Object['defineProperty'](_0xb38e9b,_0x311af5,_0x1b281f),_0x1b281f;},__metadata=this&&this[_0x2af8c6(0x1db)]||function(_0x3e197b,_0x25bc13){const _0x5497f0=_0x2af8c6;if(typeof Reflect===_0x5497f0(0x1f6)&&typeof Reflect[_0x5497f0(0x1fd)]===_0x5497f0(0x1da))return Reflect[_0x5497f0(0x1fd)](_0x3e197b,_0x25bc13);};Object[_0x2af8c6(0x211)](exports,'__esModule',{'value':!![]}),exports['DatabaseService']=void 0x0;const common_1=require(_0x2af8c6(0x209)),typeorm_1=require(_0x2af8c6(0x1c3)),bcrypt=require('bcryptjs');function _0x1540(){const _0x445ffb=['error:\x20','firstRegisterSendRank','decorate','Logger','robotAvatar','count','map','noticeInfo',']、初始密码为[','vxNumber','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','INTERNAL_SERVER_ERROR','11874qXYycN','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','admin','typeorm',']\x20==============>\x20请注意查阅','registerSuccessEmailTeamName','baiduSiteId','connection','3149236QNnNJV','insertId','registerFailEmailTeamName','registerSendModel4Count','registerVerifyEmailFrom','firstRregisterSendModel3Count','inviteGiveSendDrawMjCount','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','Connection','123456','createDefaultUser','log','registerVerifyEmailDesc','12704ekuBEo','join','createBaseSiteConfig','\x0a####\x20YiAi\x20欢迎您\x0a\x20-\x20欢迎使用YiAi\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','function','__metadata','\x27,\x20\x27','inviteGiveSendModel3Count','Yi\x20Ai团队账号验证','invitedGuestSendDrawMjCount','openaiBaseUrl','registerVerifyEmailTitle','Yi\x20Ai','siteName','registerSuccessEmaileAppend','Yi\x20Ai账号激活成功','qqNumber','default@cooper.com','checkSuperAdmin','9SIJKfl','HttpException','欢迎使用Yi\x20Ai团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','onModuleInit','创建默认超级管理员失败！','registerSendStatus','2778220yorFbj','super','5509sRsoRL','hashSync','getOwnPropertyDescriptor','registerSendModel3Count','userDefautlAvatar','object','registerFailEmailTitle','Yi\x20Ai团队','inviteGiveSendModel4Count','HelloWordYi819','design:paramtypes','query','metadata','registerVerifyExpir','checkSiteBaseConfig','registerSuccessEmailTitle','defaultAdmin@cooper.com','初始化创建','length','configVal','4677849FHpTWD','DatabaseService','77EJwzoX','用户成功、用户名为[','@nestjs/common','11001496kLkKDT','configKey','1800','HttpStatus','27062XsjcGv','public','\x27,\x200,\x201000,\x20100)','defineProperty','baiduToken','170gHyKvW','Yi\x20Ai账号激活失败',',请妥善保管您的账号，祝您使用愉快'];_0x1540=function(){return _0x445ffb;};return _0x1540();}let DatabaseService=class DatabaseService{constructor(_0x159be2){const _0x58c55b=_0x2af8c6;this[_0x58c55b(0x1c7)]=_0x159be2;}async[_0x2af8c6(0x1ec)](){const _0x5c9c2e=_0x2af8c6;await this[_0x5c9c2e(0x1e8)](),await this[_0x5c9c2e(0x1ff)]();}async['checkSuperAdmin'](){const _0x439dd7=_0x2af8c6,_0x2eb0c6=await this[_0x439dd7(0x1c7)][_0x439dd7(0x1fc)](_0x439dd7(0x220));if(!_0x2eb0c6||_0x2eb0c6[_0x439dd7(0x203)]===0x0){const _0x1d5eaa=bcrypt[_0x439dd7(0x1f2)](_0x439dd7(0x1d2),0xa),_0x43da95=bcrypt['hashSync'](_0x439dd7(0x1d2),0xa),_0x423b8c=_0x439dd7(0x1e7),_0x32048c=_0x439dd7(0x201),_0x1e87c8={'username':_0x439dd7(0x1f0),'password':_0x1d5eaa,'status':0x1,'email':_0x423b8c,'sex':0x1,'role':_0x439dd7(0x1f0)},_0x4fb5af={'username':_0x439dd7(0x1c2),'password':_0x43da95,'status':0x1,'email':_0x32048c,'sex':0x1,'role':_0x439dd7(0x1c2)};await this['createDefaultUser'](_0x1e87c8),await this[_0x439dd7(0x1d3)](_0x4fb5af);}}async['createDefaultUser'](_0x5edb70){const _0x5ea0f6=_0x2af8c6;try{const {username:_0x18317b,password:_0x24ba39,status:_0x5cc72a,email:_0x5ee343,role:_0x59f1ce}=_0x5edb70,_0x1cc15c=await this[_0x5ea0f6(0x1c7)][_0x5ea0f6(0x1fc)]('INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27'+_0x18317b+'\x27,\x20\x27'+_0x24ba39+_0x5ea0f6(0x1dc)+_0x5cc72a+_0x5ea0f6(0x1dc)+_0x5ee343+_0x5ea0f6(0x1dc)+_0x59f1ce+'\x27)'),_0x458248=_0x1cc15c[_0x5ea0f6(0x1c9)],_0xa80eb0=await this[_0x5ea0f6(0x1c7)]['query']('INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27'+_0x458248+_0x5ea0f6(0x210));common_1[_0x5ea0f6(0x219)][_0x5ea0f6(0x1d4)](_0x5ea0f6(0x202)+_0x59f1ce+_0x5ea0f6(0x208)+_0x18317b+_0x5ea0f6(0x21e)+(_0x18317b===_0x5ea0f6(0x1f0)?'nine-super':_0x5ea0f6(0x1d2))+_0x5ea0f6(0x1c4),'DatabaseService');}catch(_0x331778){console[_0x5ea0f6(0x1d4)](_0x5ea0f6(0x216),_0x331778);throw new common_1[(_0x5ea0f6(0x1ea))](_0x5ea0f6(0x1ed),common_1[_0x5ea0f6(0x20d)][_0x5ea0f6(0x221)]);}}async[_0x2af8c6(0x1ff)](){const _0x23c087=_0x2af8c6,_0x1117aa=[_0x23c087(0x1e3),_0x23c087(0x1e6),_0x23c087(0x21f),_0x23c087(0x21a),_0x23c087(0x1f5)],_0x3bfc58=await this['connection'][_0x23c087(0x1fc)](_0x23c087(0x1d0)+_0x1117aa[_0x23c087(0x21c)](_0x192f5e=>'\x27'+_0x192f5e+'\x27')[_0x23c087(0x1d7)](',')+')\x0a'),_0x42fd5a=parseInt(_0x3bfc58[0x0][_0x23c087(0x21b)]);_0x42fd5a===0x0&&await this[_0x23c087(0x1d8)]();}async[_0x2af8c6(0x1d8)](){const _0x2bf05b=_0x2af8c6;try{const _0x144c86='',_0x45f388=_0x2bf05b(0x1d9),_0x423c79=[{'configKey':_0x2bf05b(0x1e3),'configVal':_0x2bf05b(0x1e2),'public':0x1,'encry':0x0},{'configKey':_0x2bf05b(0x1e6),'configVal':'805239273','public':0x1,'encry':0x0},{'configKey':_0x2bf05b(0x21f),'configVal':_0x2bf05b(0x1fa),'public':0x1,'encry':0x0},{'configKey':_0x2bf05b(0x21a),'configVal':'','public':0x1,'encry':0x0},{'configKey':'userDefautlAvatar','configVal':'','public':0x0,'encry':0x0},{'configKey':'baiduCode','configVal':_0x144c86,'public':0x1,'encry':0x0},{'configKey':_0x2bf05b(0x1c6),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x2bf05b(0x212),'configVal':'','public':0x0,'encry':0x0},{'configKey':'buyCramiAddress','configVal':'','public':0x1,'encry':0x0},{'configKey':_0x2bf05b(0x1e0),'configVal':'https://api.openai.com','public':0x0,'encry':0x0},{'configKey':_0x2bf05b(0x21d),'configVal':_0x45f388,'public':0x1,'encry':0x0},{'configKey':_0x2bf05b(0x1e1),'configVal':_0x2bf05b(0x1de),'public':0x0,'encry':0x0},{'configKey':_0x2bf05b(0x1d5),'configVal':_0x2bf05b(0x1eb),'public':0x0,'encry':0x0},{'configKey':_0x2bf05b(0x1cc),'configVal':'Yi\x20Ai团队','public':0x0,'encry':0x0},{'configKey':_0x2bf05b(0x1fe),'configVal':_0x2bf05b(0x20c),'public':0x0,'encry':0x0},{'configKey':_0x2bf05b(0x200),'configVal':_0x2bf05b(0x1e5),'public':0x0,'encry':0x0},{'configKey':_0x2bf05b(0x1c5),'configVal':_0x2bf05b(0x1e2),'public':0x0,'encry':0x0},{'configKey':_0x2bf05b(0x1e4),'configVal':_0x2bf05b(0x215),'public':0x0,'encry':0x0},{'configKey':_0x2bf05b(0x1f7),'configVal':_0x2bf05b(0x214),'public':0x0,'encry':0x0},{'configKey':_0x2bf05b(0x1ca),'configVal':_0x2bf05b(0x1f8),'public':0x0,'encry':0x0},{'configKey':_0x2bf05b(0x1ee),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x2bf05b(0x1f4),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x2bf05b(0x1cb),'configVal':'3','public':0x1,'encry':0x0},{'configKey':'registerSendDrawMjCount','configVal':'3','public':0x1,'encry':0x0},{'configKey':'firstRegisterSendStatus','configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x2bf05b(0x217),'configVal':'500','public':0x1,'encry':0x0},{'configKey':_0x2bf05b(0x1cd),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendModel4Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendDrawMjCount','configVal':'10','public':0x1,'encry':0x0},{'configKey':'inviteSendStatus','configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x2bf05b(0x1dd),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x2bf05b(0x1f9),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x2bf05b(0x1ce),'configVal':'0','public':0x1,'encry':0x0},{'configKey':'invitedGuestSendModel3Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':'invitedGuestSendModel4Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x2bf05b(0x1df),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'isVerifyEmail','configVal':'1','public':0x1,'encry':0x0}],_0x51cf76=await this['connection'][_0x2bf05b(0x1fc)](_0x2bf05b(0x1cf)+_0x423c79['map'](_0x5d3823=>'(\x27'+_0x5d3823[_0x2bf05b(0x20b)]+_0x2bf05b(0x1dc)+_0x5d3823[_0x2bf05b(0x204)]['replace'](/'/g,'\x5c\x27')+_0x2bf05b(0x1dc)+_0x5d3823[_0x2bf05b(0x20f)]+'\x27,\x20\x27'+_0x5d3823['encry']+'\x27)')['join'](',\x20'));common_1['Logger'][_0x2bf05b(0x1d4)](_0x2bf05b(0x1c1),_0x2bf05b(0x206));}catch(_0x3ee679){console['log']('error:\x20',_0x3ee679);throw new common_1[(_0x2bf05b(0x1ea))]('创建默认网站配置失败！',common_1[_0x2bf05b(0x20d)][_0x2bf05b(0x221)]);}}};DatabaseService=__decorate([(0x0,common_1['Injectable'])(),__metadata(_0x2af8c6(0x1fb),[typeorm_1[_0x2af8c6(0x1d1)]])],DatabaseService),exports[_0x2af8c6(0x206)]=DatabaseService;