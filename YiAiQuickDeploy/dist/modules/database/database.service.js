'use strict';const _0x442fe5=_0x7a7b;(function(_0x20fdb7,_0x4a21c4){const _0x1d5c8a=_0x7a7b,_0x4a72b1=_0x20fdb7();while(!![]){try{const _0x307149=-parseInt(_0x1d5c8a(0x8a))/0x1+-parseInt(_0x1d5c8a(0x7c))/0x2*(-parseInt(_0x1d5c8a(0xca))/0x3)+parseInt(_0x1d5c8a(0x97))/0x4*(-parseInt(_0x1d5c8a(0xa1))/0x5)+parseInt(_0x1d5c8a(0xd6))/0x6+parseInt(_0x1d5c8a(0xd1))/0x7*(-parseInt(_0x1d5c8a(0x83))/0x8)+-parseInt(_0x1d5c8a(0x80))/0x9+parseInt(_0x1d5c8a(0xc0))/0xa;if(_0x307149===_0x4a21c4)break;else _0x4a72b1['push'](_0x4a72b1['shift']());}catch(_0x380054){_0x4a72b1['push'](_0x4a72b1['shift']());}}}(_0x306e,0xa7020));function _0x306e(){const _0x5b28e8=['123456','encry','design:paramtypes','query','error:\x20','8927387XjmmtR','baiduToken','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','HelloWordYi819','getOwnPropertyDescriptor','4960398tiXATA','INTERNAL_SERVER_ERROR','firstRregisterSendModel4Count','siteName','baiduCode','__metadata','insertId','HttpException','length','buyCramiAddress','defineProperty','firstRegisterSendRank','242amEqvm','HttpStatus','创建默认超级管理员失败！','registerSendModel4Count','8038791xoaicJ','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','userDefautlAvatar','8elzqIn','\x27,\x20\x27','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','openaiBaseUrl','baiduSiteId','super','robotAvatar','574850RTejYA','configVal','registerFailEmailTeamName','invitedGuestSendModel3Count','connection','firstRregisterSendDrawMjCount','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','decorate','inviteGiveSendModel3Count','inviteGiveSendModel4Count',',请妥善保管您的账号，祝您使用愉快','__decorate','https://api.openai.com','8wtQibC','firstRegisterSendStatus','map','function','registerVerifyEmailTitle','1800','createBaseSiteConfig','checkSuperAdmin','用户成功、用户名为[','Yi\x20Ai','2775560rQbpqo','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','object','Yi\x20Ai账号激活成功','registerSendModel3Count','join','inviteSendStatus','registerVerifyExpir','初始化创建','configKey','Yi\x20Ai团队账号验证','创建默认网站配置失败！','registerSuccessEmaileAppend','replace','805239273',']\x20==============>\x20请注意查阅','invitedGuestSendModel4Count','DatabaseService','registerSendDrawMjCount','Connection','欢迎使用Yi\x20Ai团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','default@cooper.com','vxNumber','onModuleInit','createDefaultUser','registerSuccessEmailTeamName','registerFailEmailTitle','registerSendStatus','admin','metadata','registerVerifyEmailDesc','27669030tieGcE','hashSync','count','log','inviteGiveSendDrawMjCount','registerSuccessEmailTitle','Yi\x20Ai团队','__esModule','qqNumber','Logger','23406hAcBKR','registerVerifyEmailFrom'];_0x306e=function(){return _0x5b28e8;};return _0x306e();}var __decorate=this&&this[_0x442fe5(0x95)]||function(_0x46e398,_0x12bdd3,_0x7fd34,_0x36232d){const _0x44d59d=_0x442fe5;var _0x2c25eb=arguments['length'],_0x54d050=_0x2c25eb<0x3?_0x12bdd3:_0x36232d===null?_0x36232d=Object[_0x44d59d(0xd5)](_0x12bdd3,_0x7fd34):_0x36232d,_0x381d79;if(typeof Reflect===_0x44d59d(0xa3)&&typeof Reflect[_0x44d59d(0x91)]===_0x44d59d(0x9a))_0x54d050=Reflect[_0x44d59d(0x91)](_0x46e398,_0x12bdd3,_0x7fd34,_0x36232d);else{for(var _0x4cea85=_0x46e398[_0x44d59d(0x78)]-0x1;_0x4cea85>=0x0;_0x4cea85--)if(_0x381d79=_0x46e398[_0x4cea85])_0x54d050=(_0x2c25eb<0x3?_0x381d79(_0x54d050):_0x2c25eb>0x3?_0x381d79(_0x12bdd3,_0x7fd34,_0x54d050):_0x381d79(_0x12bdd3,_0x7fd34))||_0x54d050;}return _0x2c25eb>0x3&&_0x54d050&&Object[_0x44d59d(0x7a)](_0x12bdd3,_0x7fd34,_0x54d050),_0x54d050;},__metadata=this&&this[_0x442fe5(0xdb)]||function(_0x1a46fb,_0x5a4414){const _0x2e71ec=_0x442fe5;if(typeof Reflect===_0x2e71ec(0xa3)&&typeof Reflect['metadata']===_0x2e71ec(0x9a))return Reflect[_0x2e71ec(0xbe)](_0x1a46fb,_0x5a4414);};Object[_0x442fe5(0x7a)](exports,_0x442fe5(0xc7),{'value':!![]}),exports[_0x442fe5(0xb2)]=void 0x0;function _0x7a7b(_0x3db76a,_0x4412af){const _0x306e8e=_0x306e();return _0x7a7b=function(_0x7a7b2c,_0x984494){_0x7a7b2c=_0x7a7b2c-0x76;let _0x4197f1=_0x306e8e[_0x7a7b2c];return _0x4197f1;},_0x7a7b(_0x3db76a,_0x4412af);}const common_1=require('@nestjs/common'),typeorm_1=require('typeorm'),bcrypt=require('bcryptjs');let DatabaseService=class DatabaseService{constructor(_0x20bf47){const _0x15b720=_0x442fe5;this[_0x15b720(0x8e)]=_0x20bf47;}async[_0x442fe5(0xb8)](){const _0x100f71=_0x442fe5;await this[_0x100f71(0x9e)](),await this['checkSiteBaseConfig']();}async[_0x442fe5(0x9e)](){const _0x51e6b5=_0x442fe5,_0x40c674=await this[_0x51e6b5(0x8e)][_0x51e6b5(0xcf)](_0x51e6b5(0xd3));if(!_0x40c674||_0x40c674[_0x51e6b5(0x78)]===0x0){const _0x5881a3=bcrypt['hashSync'](_0x51e6b5(0xcc),0xa),_0x3d6658=bcrypt[_0x51e6b5(0xc1)](_0x51e6b5(0xcc),0xa),_0x4cb4fc=_0x51e6b5(0xb6),_0x192958='defaultAdmin@cooper.com',_0x1c3231={'username':_0x51e6b5(0x88),'password':_0x5881a3,'status':0x1,'email':_0x4cb4fc,'sex':0x1,'role':_0x51e6b5(0x88)},_0x57928e={'username':_0x51e6b5(0xbd),'password':_0x3d6658,'status':0x1,'email':_0x192958,'sex':0x1,'role':_0x51e6b5(0xbd)};await this[_0x51e6b5(0xb9)](_0x1c3231),await this[_0x51e6b5(0xb9)](_0x57928e);}}async[_0x442fe5(0xb9)](_0x33238e){const _0x4fbc9b=_0x442fe5;try{const {username:_0x1eb6bd,password:_0x185365,status:_0xc42dd7,email:_0x8cb204,role:_0x47d3be}=_0x33238e,_0x37a6f2=await this[_0x4fbc9b(0x8e)][_0x4fbc9b(0xcf)]('INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27'+_0x1eb6bd+_0x4fbc9b(0x84)+_0x185365+_0x4fbc9b(0x84)+_0xc42dd7+'\x27,\x20\x27'+_0x8cb204+_0x4fbc9b(0x84)+_0x47d3be+'\x27)'),_0x24e180=_0x37a6f2[_0x4fbc9b(0x76)],_0x59cb3c=await this[_0x4fbc9b(0x8e)]['query'](_0x4fbc9b(0x85)+_0x24e180+'\x27,\x200,\x201000,\x20100)');common_1[_0x4fbc9b(0xc9)][_0x4fbc9b(0xc3)](_0x4fbc9b(0xa9)+_0x47d3be+_0x4fbc9b(0x9f)+_0x1eb6bd+']、初始密码为['+(_0x1eb6bd===_0x4fbc9b(0x88)?'nine-super':_0x4fbc9b(0xcc))+_0x4fbc9b(0xb0),'DatabaseService');}catch(_0x32e3d9){console[_0x4fbc9b(0xc3)](_0x4fbc9b(0xd0),_0x32e3d9);throw new common_1['HttpException'](_0x4fbc9b(0x7e),common_1[_0x4fbc9b(0x7d)][_0x4fbc9b(0xd7)]);}}async['checkSiteBaseConfig'](){const _0x4af9de=_0x442fe5,_0x107f89=[_0x4af9de(0xd9),_0x4af9de(0xc8),'vxNumber','robotAvatar',_0x4af9de(0x82)],_0x5b4661=await this[_0x4af9de(0x8e)][_0x4af9de(0xcf)](_0x4af9de(0x81)+_0x107f89['map'](_0x7c6c8a=>'\x27'+_0x7c6c8a+'\x27')[_0x4af9de(0xa6)](',')+')\x0a'),_0x488000=parseInt(_0x5b4661[0x0][_0x4af9de(0xc2)]);_0x488000===0x0&&await this[_0x4af9de(0x9d)]();}async[_0x442fe5(0x9d)](){const _0x35900c=_0x442fe5;try{const _0xb9fd30='',_0x4ab1be='\x0a####\x20YiAi\x20欢迎您\x0a\x20-\x20欢迎使用YiAi\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a',_0x402548=[{'configKey':_0x35900c(0xd9),'configVal':_0x35900c(0xa0),'public':0x1,'encry':0x0},{'configKey':_0x35900c(0xc8),'configVal':_0x35900c(0xaf),'public':0x1,'encry':0x0},{'configKey':_0x35900c(0xb7),'configVal':_0x35900c(0xd4),'public':0x1,'encry':0x0},{'configKey':_0x35900c(0x89),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x35900c(0x82),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x35900c(0xda),'configVal':_0xb9fd30,'public':0x1,'encry':0x0},{'configKey':_0x35900c(0x87),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x35900c(0xd2),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x35900c(0x79),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x35900c(0x86),'configVal':_0x35900c(0x96),'public':0x0,'encry':0x0},{'configKey':'noticeInfo','configVal':_0x4ab1be,'public':0x1,'encry':0x0},{'configKey':_0x35900c(0x9b),'configVal':_0x35900c(0xab),'public':0x0,'encry':0x0},{'configKey':_0x35900c(0xbf),'configVal':_0x35900c(0xb5),'public':0x0,'encry':0x0},{'configKey':_0x35900c(0xcb),'configVal':_0x35900c(0xc6),'public':0x0,'encry':0x0},{'configKey':_0x35900c(0xa8),'configVal':_0x35900c(0x9c),'public':0x0,'encry':0x0},{'configKey':_0x35900c(0xc5),'configVal':_0x35900c(0xa4),'public':0x0,'encry':0x0},{'configKey':_0x35900c(0xba),'configVal':_0x35900c(0xa0),'public':0x0,'encry':0x0},{'configKey':_0x35900c(0xad),'configVal':_0x35900c(0x94),'public':0x0,'encry':0x0},{'configKey':_0x35900c(0xbb),'configVal':'Yi\x20Ai账号激活失败','public':0x0,'encry':0x0},{'configKey':_0x35900c(0x8c),'configVal':_0x35900c(0xc6),'public':0x0,'encry':0x0},{'configKey':_0x35900c(0xbc),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x35900c(0xa5),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x35900c(0x7f),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x35900c(0xb3),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x35900c(0x98),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x35900c(0x7b),'configVal':'500','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendModel3Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x35900c(0xd8),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x35900c(0x8f),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x35900c(0xa7),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x35900c(0x92),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x35900c(0x93),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x35900c(0xc4),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x35900c(0x8d),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x35900c(0xb1),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'invitedGuestSendDrawMjCount','configVal':'10','public':0x1,'encry':0x0},{'configKey':'isVerifyEmail','configVal':'1','public':0x1,'encry':0x0}],_0x140a5b=await this[_0x35900c(0x8e)][_0x35900c(0xcf)](_0x35900c(0xa2)+_0x402548[_0x35900c(0x99)](_0x1b94c6=>'(\x27'+_0x1b94c6[_0x35900c(0xaa)]+_0x35900c(0x84)+_0x1b94c6[_0x35900c(0x8b)][_0x35900c(0xae)](/'/g,'\x5c\x27')+'\x27,\x20\x27'+_0x1b94c6['public']+_0x35900c(0x84)+_0x1b94c6[_0x35900c(0xcd)]+'\x27)')[_0x35900c(0xa6)](',\x20'));common_1[_0x35900c(0xc9)][_0x35900c(0xc3)](_0x35900c(0x90),_0x35900c(0xb2));}catch(_0x8c9302){console[_0x35900c(0xc3)]('error:\x20',_0x8c9302);throw new common_1[(_0x35900c(0x77))](_0x35900c(0xac),common_1[_0x35900c(0x7d)]['INTERNAL_SERVER_ERROR']);}}};DatabaseService=__decorate([(0x0,common_1['Injectable'])(),__metadata(_0x442fe5(0xce),[typeorm_1[_0x442fe5(0xb4)]])],DatabaseService),exports['DatabaseService']=DatabaseService;