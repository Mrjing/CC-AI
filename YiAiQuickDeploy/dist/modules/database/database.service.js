'use strict';function _0x2f29(_0x4a63fe,_0x40277e){const _0x3737c9=_0x3737();return _0x2f29=function(_0x2f29ed,_0x286d3e){_0x2f29ed=_0x2f29ed-0xae;let _0x16f37a=_0x3737c9[_0x2f29ed];return _0x16f37a;},_0x2f29(_0x4a63fe,_0x40277e);}function _0x3737(){const _0x57d379=['registerSendModel3Count','Yi\x20Ai团队','@nestjs/common','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','初始化创建','registerFailEmailTitle','firstRregisterSendModel4Count','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','decorate','nine-super','qqNumber','805239273','metadata','\x0a####\x20YiAi\x20欢迎您\x0a\x20-\x20欢迎使用YiAi\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','configVal','HttpException','encry','firstRregisterSendModel3Count','https://api.openai.com','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','\x27,\x20\x27','Logger','用户成功、用户名为[','registerVerifyEmailDesc','robotAvatar','8230605QiYWWE','1341Smnkck','log',',请妥善保管您的账号，祝您使用愉快','1800',']\x20==============>\x20请注意查阅','inviteGiveSendModel3Count','query','6435984xociLN','userDefautlAvatar','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','createDefaultUser','replace','__esModule','Connection','checkSuperAdmin','12400591MMuCXY','defineProperty','HttpStatus','registerSendModel4Count','siteName','500','123456',']、初始密码为[','registerSuccessEmailTeamName','admin','DatabaseService','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','创建默认超级管理员失败！','Yi\x20Ai团队账号验证','insertId','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','492246nrPzxn','createBaseSiteConfig','length','firstRegisterSendStatus','getOwnPropertyDescriptor','Yi\x20Ai账号激活失败','2757020PSWklk','baiduToken','connection','140912bLXJai','invitedGuestSendModel4Count','configKey','inviteGiveSendModel4Count','HelloWordYi819','error:\x20','registerSuccessEmailTitle','buyCramiAddress','checkSiteBaseConfig','__decorate','join','registerVerifyEmailFrom','inviteGiveSendDrawMjCount','map','Yi\x20Ai','super','inviteSendStatus','onModuleInit','defaultAdmin@cooper.com','registerVerifyExpir','Yi\x20Ai账号激活成功','object','registerVerifyEmailTitle','firstRregisterSendDrawMjCount','function','registerSendStatus','Injectable','418344xoxQKM','vxNumber','__metadata','18YMnFKT','INTERNAL_SERVER_ERROR'];_0x3737=function(){return _0x57d379;};return _0x3737();}const _0x502ab0=_0x2f29;(function(_0x2f7cfd,_0x418ca0){const _0x54b1ee=_0x2f29,_0x584287=_0x2f7cfd();while(!![]){try{const _0x4afc4e=parseInt(_0x54b1ee(0xc2))/0x1+parseInt(_0x54b1ee(0x100))/0x2*(parseInt(_0x54b1ee(0xc5))/0x3)+parseInt(_0x54b1ee(0x106))/0x4+parseInt(_0x54b1ee(0xe0))/0x5+parseInt(_0x54b1ee(0xe8))/0x6+-parseInt(_0x54b1ee(0xf0))/0x7+-parseInt(_0x54b1ee(0x109))/0x8*(parseInt(_0x54b1ee(0xe1))/0x9);if(_0x4afc4e===_0x418ca0)break;else _0x584287['push'](_0x584287['shift']());}catch(_0x5800c1){_0x584287['push'](_0x584287['shift']());}}}(_0x3737,0xdd773));var __decorate=this&&this[_0x502ab0(0xb0)]||function(_0x27bb98,_0x675767,_0x5f1394,_0x4c72be){const _0x5b5707=_0x502ab0;var _0x4218b1=arguments[_0x5b5707(0x102)],_0x2ac476=_0x4218b1<0x3?_0x675767:_0x4c72be===null?_0x4c72be=Object[_0x5b5707(0x104)](_0x675767,_0x5f1394):_0x4c72be,_0x44d8d1;if(typeof Reflect===_0x5b5707(0xbc)&&typeof Reflect[_0x5b5707(0xcf)]===_0x5b5707(0xbf))_0x2ac476=Reflect['decorate'](_0x27bb98,_0x675767,_0x5f1394,_0x4c72be);else{for(var _0xe748b=_0x27bb98['length']-0x1;_0xe748b>=0x0;_0xe748b--)if(_0x44d8d1=_0x27bb98[_0xe748b])_0x2ac476=(_0x4218b1<0x3?_0x44d8d1(_0x2ac476):_0x4218b1>0x3?_0x44d8d1(_0x675767,_0x5f1394,_0x2ac476):_0x44d8d1(_0x675767,_0x5f1394))||_0x2ac476;}return _0x4218b1>0x3&&_0x2ac476&&Object['defineProperty'](_0x675767,_0x5f1394,_0x2ac476),_0x2ac476;},__metadata=this&&this[_0x502ab0(0xc4)]||function(_0x1e0f78,_0x321b7f){const _0x2af968=_0x502ab0;if(typeof Reflect===_0x2af968(0xbc)&&typeof Reflect[_0x2af968(0xd3)]==='function')return Reflect['metadata'](_0x1e0f78,_0x321b7f);};Object[_0x502ab0(0xf1)](exports,_0x502ab0(0xed),{'value':!![]}),exports[_0x502ab0(0xfa)]=void 0x0;const common_1=require(_0x502ab0(0xc9)),typeorm_1=require('typeorm'),bcrypt=require('bcryptjs');let DatabaseService=class DatabaseService{constructor(_0x33fec5){const _0x34703c=_0x502ab0;this[_0x34703c(0x108)]=_0x33fec5;}async[_0x502ab0(0xb8)](){const _0x2c15e4=_0x502ab0;await this[_0x2c15e4(0xef)](),await this[_0x2c15e4(0xaf)]();}async[_0x502ab0(0xef)](){const _0xdc0efe=_0x502ab0,_0x225125=await this[_0xdc0efe(0x108)][_0xdc0efe(0xe7)](_0xdc0efe(0xff));if(!_0x225125||_0x225125[_0xdc0efe(0x102)]===0x0){const _0x4aeb6f=bcrypt['hashSync'](_0xdc0efe(0xf6),0xa),_0x5032a4=bcrypt['hashSync'](_0xdc0efe(0xf6),0xa),_0x8c69de='default@cooper.com',_0x3f93b=_0xdc0efe(0xb9),_0x2d030d={'username':'super','password':_0x4aeb6f,'status':0x1,'email':_0x8c69de,'sex':0x1,'role':_0xdc0efe(0xb6)},_0x21e230={'username':_0xdc0efe(0xf9),'password':_0x5032a4,'status':0x1,'email':_0x3f93b,'sex':0x1,'role':_0xdc0efe(0xf9)};await this[_0xdc0efe(0xeb)](_0x2d030d),await this[_0xdc0efe(0xeb)](_0x21e230);}}async['createDefaultUser'](_0x3b459b){const _0x39e8ad=_0x502ab0;try{const {username:_0x104e8a,password:_0x1fb551,status:_0x4fadcf,email:_0x21fd4d,role:_0x4ccb13}=_0x3b459b,_0x3b2015=await this[_0x39e8ad(0x108)][_0x39e8ad(0xe7)](_0x39e8ad(0xca)+_0x104e8a+_0x39e8ad(0xdb)+_0x1fb551+'\x27,\x20\x27'+_0x4fadcf+'\x27,\x20\x27'+_0x21fd4d+_0x39e8ad(0xdb)+_0x4ccb13+'\x27)'),_0xb779a9=_0x3b2015[_0x39e8ad(0xfe)],_0x3c9c65=await this[_0x39e8ad(0x108)][_0x39e8ad(0xe7)](_0x39e8ad(0xce)+_0xb779a9+'\x27,\x200,\x201000,\x20100)');common_1[_0x39e8ad(0xdc)]['log'](_0x39e8ad(0xcb)+_0x4ccb13+_0x39e8ad(0xdd)+_0x104e8a+_0x39e8ad(0xf7)+(_0x104e8a===_0x39e8ad(0xb6)?_0x39e8ad(0xd0):_0x39e8ad(0xf6))+_0x39e8ad(0xe5),'DatabaseService');}catch(_0x3d9ef5){console[_0x39e8ad(0xe2)](_0x39e8ad(0x10e),_0x3d9ef5);throw new common_1[(_0x39e8ad(0xd6))](_0x39e8ad(0xfc),common_1[_0x39e8ad(0xf2)][_0x39e8ad(0xc6)]);}}async[_0x502ab0(0xaf)](){const _0xa20e7=_0x502ab0,_0x901b31=[_0xa20e7(0xf4),_0xa20e7(0xd1),_0xa20e7(0xc3),_0xa20e7(0xdf),_0xa20e7(0xe9)],_0x38702b=await this[_0xa20e7(0x108)]['query'](_0xa20e7(0xfb)+_0x901b31['map'](_0x34211b=>'\x27'+_0x34211b+'\x27')[_0xa20e7(0xb1)](',')+')\x0a'),_0x4d522c=parseInt(_0x38702b[0x0]['count']);_0x4d522c===0x0&&await this[_0xa20e7(0x101)]();}async['createBaseSiteConfig'](){const _0x3bb911=_0x502ab0;try{const _0x1ddf79='',_0x3a62ba=_0x3bb911(0xd4),_0x471ae8=[{'configKey':_0x3bb911(0xf4),'configVal':_0x3bb911(0xb5),'public':0x1,'encry':0x0},{'configKey':_0x3bb911(0xd1),'configVal':_0x3bb911(0xd2),'public':0x1,'encry':0x0},{'configKey':_0x3bb911(0xc3),'configVal':_0x3bb911(0x10d),'public':0x1,'encry':0x0},{'configKey':_0x3bb911(0xdf),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x3bb911(0xe9),'configVal':'','public':0x0,'encry':0x0},{'configKey':'baiduCode','configVal':_0x1ddf79,'public':0x1,'encry':0x0},{'configKey':'baiduSiteId','configVal':'','public':0x0,'encry':0x0},{'configKey':_0x3bb911(0x107),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x3bb911(0xae),'configVal':'','public':0x1,'encry':0x0},{'configKey':'openaiBaseUrl','configVal':_0x3bb911(0xd9),'public':0x0,'encry':0x0},{'configKey':'noticeInfo','configVal':_0x3a62ba,'public':0x1,'encry':0x0},{'configKey':_0x3bb911(0xbd),'configVal':_0x3bb911(0xfd),'public':0x0,'encry':0x0},{'configKey':_0x3bb911(0xde),'configVal':'欢迎使用Yi\x20Ai团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','public':0x0,'encry':0x0},{'configKey':_0x3bb911(0xb2),'configVal':_0x3bb911(0xc8),'public':0x0,'encry':0x0},{'configKey':_0x3bb911(0xba),'configVal':_0x3bb911(0xe4),'public':0x0,'encry':0x0},{'configKey':_0x3bb911(0x10f),'configVal':_0x3bb911(0xbb),'public':0x0,'encry':0x0},{'configKey':_0x3bb911(0xf8),'configVal':_0x3bb911(0xb5),'public':0x0,'encry':0x0},{'configKey':'registerSuccessEmaileAppend','configVal':_0x3bb911(0xe3),'public':0x0,'encry':0x0},{'configKey':_0x3bb911(0xcc),'configVal':_0x3bb911(0x105),'public':0x0,'encry':0x0},{'configKey':'registerFailEmailTeamName','configVal':_0x3bb911(0xc8),'public':0x0,'encry':0x0},{'configKey':_0x3bb911(0xc0),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x3bb911(0xc7),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x3bb911(0xf3),'configVal':'3','public':0x1,'encry':0x0},{'configKey':'registerSendDrawMjCount','configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x3bb911(0x103),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'firstRegisterSendRank','configVal':_0x3bb911(0xf5),'public':0x1,'encry':0x0},{'configKey':_0x3bb911(0xd8),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x3bb911(0xcd),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x3bb911(0xbe),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x3bb911(0xb7),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x3bb911(0xe6),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x3bb911(0x10c),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0x3bb911(0xb3),'configVal':'0','public':0x1,'encry':0x0},{'configKey':'invitedGuestSendModel3Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x3bb911(0x10a),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'invitedGuestSendDrawMjCount','configVal':'10','public':0x1,'encry':0x0},{'configKey':'isVerifyEmail','configVal':'1','public':0x1,'encry':0x0}],_0x38ce1e=await this[_0x3bb911(0x108)]['query'](_0x3bb911(0xda)+_0x471ae8[_0x3bb911(0xb4)](_0x53ebd2=>'(\x27'+_0x53ebd2[_0x3bb911(0x10b)]+_0x3bb911(0xdb)+_0x53ebd2[_0x3bb911(0xd5)][_0x3bb911(0xec)](/'/g,'\x5c\x27')+'\x27,\x20\x27'+_0x53ebd2['public']+_0x3bb911(0xdb)+_0x53ebd2[_0x3bb911(0xd7)]+'\x27)')[_0x3bb911(0xb1)](',\x20'));common_1[_0x3bb911(0xdc)][_0x3bb911(0xe2)](_0x3bb911(0xea),_0x3bb911(0xfa));}catch(_0x32bafb){console['log'](_0x3bb911(0x10e),_0x32bafb);throw new common_1[(_0x3bb911(0xd6))]('创建默认网站配置失败！',common_1['HttpStatus'][_0x3bb911(0xc6)]);}}};DatabaseService=__decorate([(0x0,common_1[_0x502ab0(0xc1)])(),__metadata('design:paramtypes',[typeorm_1[_0x502ab0(0xee)]])],DatabaseService),exports[_0x502ab0(0xfa)]=DatabaseService;