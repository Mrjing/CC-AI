'use strict';const _0x2578b2=_0x3a89;(function(_0x53967f,_0x584258){const _0xe41544=_0x3a89,_0x4dceb6=_0x53967f();while(!![]){try{const _0x447ab0=-parseInt(_0xe41544(0x1f7))/0x1*(-parseInt(_0xe41544(0x1fd))/0x2)+-parseInt(_0xe41544(0x1f9))/0x3*(-parseInt(_0xe41544(0x21a))/0x4)+parseInt(_0xe41544(0x23b))/0x5*(parseInt(_0xe41544(0x1e4))/0x6)+-parseInt(_0xe41544(0x234))/0x7+parseInt(_0xe41544(0x1e3))/0x8+-parseInt(_0xe41544(0x1ed))/0x9+-parseInt(_0xe41544(0x236))/0xa;if(_0x447ab0===_0x584258)break;else _0x4dceb6['push'](_0x4dceb6['shift']());}catch(_0x59df60){_0x4dceb6['push'](_0x4dceb6['shift']());}}}(_0x2e70,0xf108c));var __decorate=this&&this[_0x2578b2(0x213)]||function(_0x269f12,_0x48a1f3,_0x4a118e,_0x1dc6a7){const _0x47059f=_0x2578b2;var _0x5dabc2=arguments['length'],_0x7c0e42=_0x5dabc2<0x3?_0x48a1f3:_0x1dc6a7===null?_0x1dc6a7=Object[_0x47059f(0x1e9)](_0x48a1f3,_0x4a118e):_0x1dc6a7,_0x51af39;if(typeof Reflect===_0x47059f(0x22a)&&typeof Reflect['decorate']===_0x47059f(0x20a))_0x7c0e42=Reflect['decorate'](_0x269f12,_0x48a1f3,_0x4a118e,_0x1dc6a7);else{for(var _0x42dad4=_0x269f12[_0x47059f(0x21c)]-0x1;_0x42dad4>=0x0;_0x42dad4--)if(_0x51af39=_0x269f12[_0x42dad4])_0x7c0e42=(_0x5dabc2<0x3?_0x51af39(_0x7c0e42):_0x5dabc2>0x3?_0x51af39(_0x48a1f3,_0x4a118e,_0x7c0e42):_0x51af39(_0x48a1f3,_0x4a118e))||_0x7c0e42;}return _0x5dabc2>0x3&&_0x7c0e42&&Object[_0x47059f(0x235)](_0x48a1f3,_0x4a118e,_0x7c0e42),_0x7c0e42;},__metadata=this&&this[_0x2578b2(0x227)]||function(_0x1055b9,_0x5222db){const _0x36056d=_0x2578b2;if(typeof Reflect===_0x36056d(0x22a)&&typeof Reflect[_0x36056d(0x212)]==='function')return Reflect[_0x36056d(0x212)](_0x1055b9,_0x5222db);},__param=this&&this[_0x2578b2(0x202)]||function(_0x1b0183,_0x4469ce){return function(_0x9115d3,_0x4a0db1){_0x4469ce(_0x9115d3,_0x4a0db1,_0x1b0183);};};Object[_0x2578b2(0x235)](exports,_0x2578b2(0x1e6),{'value':!![]}),exports[_0x2578b2(0x243)]=void 0x0;function _0x3a89(_0x44054d,_0x2c91e0){const _0x2e706b=_0x2e70();return _0x3a89=function(_0x3a894d,_0x1e3b11){_0x3a894d=_0x3a894d-0x1e3;let _0x3f0584=_0x2e706b[_0x3a894d];return _0x3f0584;},_0x3a89(_0x44054d,_0x2c91e0);}function _0x2e70(){const _0x5494aa=['auditPass','AppCatsEntity','14716296JgGKlN','findOne','mineApps','HttpStatus','findAndCount','UserAppsEntity','name','./app.entity','MoreThan','map','1192011zxqLLX','该分类下存在App，不可删除！','63qnkfWd','affected','您正在编辑一个不存在的应用！','userAppsEntity','2MUrTaj','user','修改App信息失败！','appEntity','catId','__param','删除成功','catName','save','userId','appCatsList','Not','update','function','collect','system','修改App信息成功','该应用已被用户关联使用中，不可删除！','des','Repository','customApp','metadata','__decorate','demoData','frontAppList','@nestjs/typeorm','super','该应用名称已存在！','该应用不存在！','25892vRqBOB','修改成功','length','修改失败！','status','find','已将应用加入到我的个人工作台！','typeorm','应用审核拒绝完成','缺失必要参数！','该分类名称已存在！','DESC','HttpException','__metadata','该分类不存在！','forEach','object','Like','updateAppCats','./userApps.entity','delete','preset','appDes','appId','******','BAD_REQUEST','8720999bzAkUD','defineProperty','2572260iLJyDX','appCatsEntity','delApp','role','取消收藏失败！','25bVvjFU','appCount','您正在操作一个不存在的资源！','删除App成功','InjectRepository','删除应用成功！','count','delAppCat','AppService','coverImg','7554032zkGNnP','2223966KrBrHE','./appCats.entity','__esModule','appList','auditFail','getOwnPropertyDescriptor','AppEntity'];_0x2e70=function(){return _0x5494aa;};return _0x2e70();}const common_1=require('@nestjs/common'),appCats_entity_1=require(_0x2578b2(0x1e5)),typeorm_1=require(_0x2578b2(0x221)),typeorm_2=require(_0x2578b2(0x216)),app_entity_1=require(_0x2578b2(0x1f4)),userApps_entity_1=require(_0x2578b2(0x22d));let AppService=class AppService{constructor(_0xe084bc,_0x190529,_0x554083){const _0x2aa3ae=_0x2578b2;this['appCatsEntity']=_0xe084bc,this[_0x2aa3ae(0x200)]=_0x190529,this['userAppsEntity']=_0x554083;}async['createAppCat'](_0x35ba60){const _0x3f2fd8=_0x2578b2,{name:_0x1a7dde}=_0x35ba60,_0x4b3988=await this['appCatsEntity'][_0x3f2fd8(0x1ee)]({'where':{'name':_0x1a7dde}});if(_0x4b3988)throw new common_1[(_0x3f2fd8(0x226))]('该分类名称已存在！',common_1[_0x3f2fd8(0x1f0)]['BAD_REQUEST']);return await this[_0x3f2fd8(0x237)][_0x3f2fd8(0x205)](_0x35ba60);}async[_0x2578b2(0x242)](_0x297483){const _0x5ba5b7=_0x2578b2,{id:_0x5e44d7}=_0x297483,_0x3b726f=await this[_0x5ba5b7(0x237)][_0x5ba5b7(0x1ee)]({'where':{'id':_0x5e44d7}});if(!_0x3b726f)throw new common_1['HttpException'](_0x5ba5b7(0x228),common_1[_0x5ba5b7(0x1f0)][_0x5ba5b7(0x233)]);const _0xbc455b=await this[_0x5ba5b7(0x200)]['count']({'where':{'catId':_0x5e44d7}});if(_0xbc455b>0x0)throw new common_1[(_0x5ba5b7(0x226))](_0x5ba5b7(0x1f8),common_1[_0x5ba5b7(0x1f0)]['BAD_REQUEST']);const _0xd6ed7=await this['appCatsEntity'][_0x5ba5b7(0x22e)](_0x5e44d7);if(_0xd6ed7[_0x5ba5b7(0x1fa)]>0x0)return _0x5ba5b7(0x203);throw new common_1[(_0x5ba5b7(0x226))]('删除失败！',common_1[_0x5ba5b7(0x1f0)][_0x5ba5b7(0x233)]);}async[_0x2578b2(0x22c)](_0x5ec2d3){const _0x39b31e=_0x2578b2,{id:_0x2bce3c,name:_0x30c99c}=_0x5ec2d3,_0x3db488=await this[_0x39b31e(0x237)][_0x39b31e(0x1ee)]({'where':{'name':_0x30c99c,'id':(0x0,typeorm_1[_0x39b31e(0x208)])(_0x2bce3c)}});if(_0x3db488)throw new common_1[(_0x39b31e(0x226))](_0x39b31e(0x224),common_1[_0x39b31e(0x1f0)][_0x39b31e(0x233)]);const _0x100dc7=await this[_0x39b31e(0x237)][_0x39b31e(0x209)]({'id':_0x2bce3c},_0x5ec2d3);if(_0x100dc7[_0x39b31e(0x1fa)]>0x0)return'修改成功';throw new common_1[(_0x39b31e(0x226))](_0x39b31e(0x21d),common_1[_0x39b31e(0x1f0)][_0x39b31e(0x233)]);}async['queryOneCat'](_0x57975f){const _0x444626=_0x2578b2,{id:_0x501409}=_0x57975f;if(!_0x501409)throw new common_1[(_0x444626(0x226))](_0x444626(0x223),common_1[_0x444626(0x1f0)][_0x444626(0x233)]);const _0x3f9533=await this[_0x444626(0x200)][_0x444626(0x1ee)]({'where':{'id':_0x501409}}),{demoData:_0x5dcbc0,coverImg:_0x43d0e7,des:_0x114471,name:_0x19277d}=_0x3f9533;return{'demoData':_0x5dcbc0?_0x5dcbc0['split']('\x0a'):[],'coverImg':_0x43d0e7,'des':_0x114471,'name':_0x19277d};}async[_0x2578b2(0x207)](_0x5eff3b){const _0x213053=_0x2578b2,{page:page=0x1,size:size=0xa,name:_0x4e2694,status:_0x265e11}=_0x5eff3b,_0x2ab813={};_0x4e2694&&(_0x2ab813[_0x213053(0x1f3)]=(0x0,typeorm_1['Like'])('%'+_0x4e2694+'%')),[0x0,0x1,'0','1']['includes'](_0x265e11)&&(_0x2ab813[_0x213053(0x21e)]=_0x265e11);const [_0xa83aee,_0x483a53]=await this[_0x213053(0x237)]['findAndCount']({'where':_0x2ab813,'order':{'order':_0x213053(0x225)},'skip':(page-0x1)*size,'take':size}),_0x32dc46=_0xa83aee['map'](_0x563a89=>_0x563a89['id']),_0x2f5ca6=await this[_0x213053(0x200)][_0x213053(0x21f)]({'where':{'catId':(0x0,typeorm_1['In'])(_0x32dc46)}}),_0x520b5c={};return _0x2f5ca6[_0x213053(0x229)](_0xacb352=>{const _0xed98a0=_0x213053;_0x520b5c[_0xacb352[_0xed98a0(0x201)]]?_0x520b5c[_0xacb352[_0xed98a0(0x201)]]+=0x1:_0x520b5c[_0xacb352['catId']]=0x1;}),_0xa83aee[_0x213053(0x229)](_0x3fb7ed=>_0x3fb7ed[_0x213053(0x23c)]=_0x520b5c[_0x3fb7ed['id']]||0x0),{'rows':_0xa83aee,'count':_0x483a53};}async[_0x2578b2(0x1e7)](_0x2b01a4,_0x3b3b2b,_0x3ffcd7='id'){const _0x3d8e9f=_0x2578b2;var _0x1265e6;const {page:page=0x1,size:size=0xa,name:_0xd8e619,status:_0x28f4dd,catId:_0x17faed,role:_0x243203}=_0x3b3b2b,_0xaeb2cd={};_0xd8e619&&(_0xaeb2cd[_0x3d8e9f(0x1f3)]=(0x0,typeorm_1[_0x3d8e9f(0x22b)])('%'+_0xd8e619+'%')),_0x17faed&&(_0xaeb2cd['catId']=_0x17faed),_0x243203&&(_0xaeb2cd[_0x3d8e9f(0x239)]=_0x243203),_0x28f4dd&&(_0xaeb2cd[_0x3d8e9f(0x21e)]=_0x28f4dd);const [_0x1a8cf2,_0xd21e4b]=await this[_0x3d8e9f(0x200)][_0x3d8e9f(0x1f1)]({'where':_0xaeb2cd,'order':{[_0x3ffcd7]:'DESC'},'skip':(page-0x1)*size,'take':size}),_0x2c7320=_0x1a8cf2[_0x3d8e9f(0x1f6)](_0x2737d4=>_0x2737d4[_0x3d8e9f(0x201)]),_0x577f69=await this['appCatsEntity'][_0x3d8e9f(0x21f)]({'where':{'id':(0x0,typeorm_1['In'])(_0x2c7320)}});return _0x1a8cf2[_0x3d8e9f(0x229)](_0x2af618=>{const _0x4fd6c0=_0x3d8e9f,_0xbd9d75=_0x577f69['find'](_0x2e570a=>_0x2e570a['id']===_0x2af618[_0x4fd6c0(0x201)]);_0x2af618[_0x4fd6c0(0x204)]=_0xbd9d75?_0xbd9d75[_0x4fd6c0(0x1f3)]:'';}),((_0x1265e6=_0x2b01a4===null||_0x2b01a4===void 0x0?void 0x0:_0x2b01a4[_0x3d8e9f(0x1fe)])===null||_0x1265e6===void 0x0?void 0x0:_0x1265e6['role'])!=='super'&&_0x1a8cf2['forEach'](_0xbcb944=>{const _0x180103=_0x3d8e9f;delete _0xbcb944[_0x180103(0x22f)];}),{'rows':_0x1a8cf2,'count':_0xd21e4b};}async[_0x2578b2(0x215)](_0x2903fe,_0x30cae2,_0x580470='id'){const _0x8bee54=_0x2578b2;var _0x2aafb4;const {page:page=0x1,size:size=0x3e8,name:_0xbfbe28,catId:_0x468db3,role:_0x69f12}=_0x30cae2,_0x37ac92=[{'status':(0x0,typeorm_1['In'])([0x1,0x4]),'userId':(0x0,typeorm_1['IsNull'])(),'public':![]},{'userId':(0x0,typeorm_1[_0x8bee54(0x1f5)])(0x0),'public':!![]}],[_0x3f813b,_0x1b522c]=await this[_0x8bee54(0x200)][_0x8bee54(0x1f1)]({'where':_0x37ac92,'order':{'order':_0x8bee54(0x225)},'skip':(page-0x1)*size,'take':size}),_0x2e1c95=_0x3f813b[_0x8bee54(0x1f6)](_0x4221e2=>_0x4221e2[_0x8bee54(0x201)]),_0x290743=await this[_0x8bee54(0x237)][_0x8bee54(0x21f)]({'where':{'id':(0x0,typeorm_1['In'])(_0x2e1c95)}});return _0x3f813b['forEach'](_0xd091a5=>{const _0x213124=_0x8bee54,_0x6b506a=_0x290743['find'](_0x4a3c3f=>_0x4a3c3f['id']===_0xd091a5['catId']);_0xd091a5[_0x213124(0x204)]=_0x6b506a?_0x6b506a[_0x213124(0x1f3)]:'';}),((_0x2aafb4=_0x2903fe===null||_0x2903fe===void 0x0?void 0x0:_0x2903fe[_0x8bee54(0x1fe)])===null||_0x2aafb4===void 0x0?void 0x0:_0x2aafb4[_0x8bee54(0x239)])!==_0x8bee54(0x217)&&_0x3f813b[_0x8bee54(0x229)](_0x52acde=>{const _0x46373a=_0x8bee54;delete _0x52acde[_0x46373a(0x22f)];}),{'rows':_0x3f813b,'count':_0x1b522c};}async['createApp'](_0x3b4f68){const _0x18e8c1=_0x2578b2,{name:_0x343cd8,catId:_0x3cde74}=_0x3b4f68;_0x3b4f68[_0x18e8c1(0x239)]=_0x18e8c1(0x20c);const _0x18dd7a=await this[_0x18e8c1(0x200)][_0x18e8c1(0x1ee)]({'where':{'name':_0x343cd8}});if(_0x18dd7a)throw new common_1[(_0x18e8c1(0x226))](_0x18e8c1(0x218),common_1[_0x18e8c1(0x1f0)][_0x18e8c1(0x233)]);const _0x5c275b=await this[_0x18e8c1(0x237)][_0x18e8c1(0x1ee)]({'where':{'id':_0x3cde74}});if(!_0x5c275b)throw new common_1['HttpException'](_0x18e8c1(0x228),common_1['HttpStatus'][_0x18e8c1(0x233)]);return await this[_0x18e8c1(0x200)][_0x18e8c1(0x205)](_0x3b4f68);}async[_0x2578b2(0x211)](_0x571286,_0x3e24f7){const _0x801fcc=_0x2578b2,{id:_0xc90530}=_0x3e24f7['user'],{name:_0x19e661,catId:_0x2f2cf0,des:_0x56b321,preset:_0x4d73c4,coverImg:_0x533ec9,demoData:_0x1e4351,public:_0xdf0b44,appId:_0x1aa8bb}=_0x571286;if(_0x1aa8bb){const _0x26726a=await this[_0x801fcc(0x200)][_0x801fcc(0x1ee)]({'where':{'id':_0x1aa8bb,'userId':_0xc90530}});if(!_0x26726a)throw new common_1[(_0x801fcc(0x226))](_0x801fcc(0x1fb),common_1[_0x801fcc(0x1f0)]['BAD_REQUEST']);const _0x46f987={'name':_0x19e661,'catId':_0x2f2cf0,'des':_0x56b321,'preset':_0x4d73c4,'coverImg':_0x533ec9,'demoData':_0x1e4351,'public':_0xdf0b44,'status':_0xdf0b44?0x3:0x1},_0x36b575=await this['appEntity']['update']({'id':_0x1aa8bb,'userId':_0xc90530},_0x46f987);if(_0x36b575[_0x801fcc(0x1fa)])return _0x801fcc(0x21b);else throw new common_1[(_0x801fcc(0x226))](_0x801fcc(0x21d),common_1[_0x801fcc(0x1f0)][_0x801fcc(0x233)]);}if(!_0x1aa8bb){const _0x37bef1=await this[_0x801fcc(0x237)][_0x801fcc(0x1ee)]({'where':{'id':_0x2f2cf0}});if(!_0x37bef1)throw new common_1['HttpException'](_0x801fcc(0x228),common_1['HttpStatus'][_0x801fcc(0x233)]);const _0x347736=await this[_0x801fcc(0x200)][_0x801fcc(0x1ee)]({'where':{'name':_0x19e661}});if(_0x347736)throw new common_1['HttpException']('该应用名称已存在！',common_1[_0x801fcc(0x1f0)][_0x801fcc(0x233)]);const _0x508616={'name':_0x19e661,'catId':_0x2f2cf0,'des':_0x56b321,'preset':_0x4d73c4,'coverImg':_0x533ec9,'status':_0xdf0b44?0x3:0x1,'demoData':_0x1e4351,'public':_0xdf0b44,'role':_0x801fcc(0x1fe),'userId':_0xc90530},_0x54587c=await this['appEntity'][_0x801fcc(0x205)](_0x508616),_0xc39c04={'appId':_0x54587c['id'],'userId':_0xc90530,'appType':'user','public':_0xdf0b44,'status':_0xdf0b44?0x3:0x1,'catId':_0x2f2cf0};return this['userAppsEntity']['save'](_0xc39c04);}}async['updateApp'](_0x42dab5){const _0x3dfe96=_0x2578b2,{id:_0x513775,name:_0x18393a,catId:_0x4f7e22,status:_0x566834}=_0x42dab5,_0x581ae5=await this['appEntity'][_0x3dfe96(0x1ee)]({'where':{'name':_0x18393a,'id':(0x0,typeorm_1[_0x3dfe96(0x208)])(_0x513775)}});if(_0x581ae5)throw new common_1[(_0x3dfe96(0x226))](_0x3dfe96(0x218),common_1[_0x3dfe96(0x1f0)]['BAD_REQUEST']);const _0x5c1833=await this[_0x3dfe96(0x237)][_0x3dfe96(0x1ee)]({'where':{'id':_0x4f7e22}});if(!_0x5c1833)throw new common_1['HttpException'](_0x3dfe96(0x228),common_1[_0x3dfe96(0x1f0)][_0x3dfe96(0x233)]);const _0x517f66=await this[_0x3dfe96(0x200)][_0x3dfe96(0x1ee)]({'where':{'id':_0x513775}});_0x517f66['status']!==_0x42dab5['status']&&await this[_0x3dfe96(0x1fc)]['update']({'appId':_0x513775},{'status':_0x566834});const _0x3f8f51=await this[_0x3dfe96(0x200)]['update']({'id':_0x513775},_0x42dab5);if(_0x3f8f51[_0x3dfe96(0x1fa)]>0x0)return _0x3dfe96(0x20d);throw new common_1[(_0x3dfe96(0x226))](_0x3dfe96(0x1ff),common_1['HttpStatus'][_0x3dfe96(0x233)]);}async[_0x2578b2(0x238)](_0x21407b){const _0x2d9b0f=_0x2578b2,{id:_0x50683c}=_0x21407b,_0xacce62=await this[_0x2d9b0f(0x200)][_0x2d9b0f(0x1ee)]({'where':{'id':_0x50683c}});if(!_0xacce62)throw new common_1[(_0x2d9b0f(0x226))](_0x2d9b0f(0x219),common_1[_0x2d9b0f(0x1f0)][_0x2d9b0f(0x233)]);const _0x5ab467=await this[_0x2d9b0f(0x1fc)][_0x2d9b0f(0x241)]({'where':{'appId':_0x50683c}});if(_0x5ab467>0x0)throw new common_1['HttpException'](_0x2d9b0f(0x20e),common_1[_0x2d9b0f(0x1f0)][_0x2d9b0f(0x233)]);const _0x4da6b9=await this[_0x2d9b0f(0x200)][_0x2d9b0f(0x22e)](_0x50683c);if(_0x4da6b9[_0x2d9b0f(0x1fa)]>0x0)return _0x2d9b0f(0x23e);throw new common_1['HttpException']('删除App失败！',common_1[_0x2d9b0f(0x1f0)][_0x2d9b0f(0x233)]);}async[_0x2578b2(0x1eb)](_0x3dc56a){const _0x21cfc7=_0x2578b2,{id:_0x6741a4}=_0x3dc56a,_0xff2598=await this[_0x21cfc7(0x200)][_0x21cfc7(0x1ee)]({'where':{'id':_0x6741a4,'status':0x3}});if(!_0xff2598)throw new common_1[(_0x21cfc7(0x226))](_0x21cfc7(0x219),common_1[_0x21cfc7(0x1f0)][_0x21cfc7(0x233)]);return await this[_0x21cfc7(0x200)][_0x21cfc7(0x209)]({'id':_0x6741a4},{'status':0x4}),await this['userAppsEntity'][_0x21cfc7(0x209)]({'appId':_0x6741a4},{'status':0x4}),'应用审核通过';}async[_0x2578b2(0x1e8)](_0x327273){const _0x4237c9=_0x2578b2,{id:_0x16ba16}=_0x327273,_0x516427=await this[_0x4237c9(0x200)]['findOne']({'where':{'id':_0x16ba16,'status':0x3}});if(!_0x516427)throw new common_1['HttpException'](_0x4237c9(0x219),common_1[_0x4237c9(0x1f0)]['BAD_REQUEST']);return await this['appEntity'][_0x4237c9(0x209)]({'id':_0x16ba16},{'status':0x5}),await this['userAppsEntity'][_0x4237c9(0x209)]({'appId':_0x16ba16},{'status':0x5}),_0x4237c9(0x222);}async['delMineApp'](_0x34ab3c,_0x3ca1da){const _0x2ddb46=_0x2578b2,{id:_0xe8469f}=_0x34ab3c,_0x2093d2=await this['appEntity'][_0x2ddb46(0x1ee)]({'where':{'id':_0xe8469f,'userId':_0x3ca1da[_0x2ddb46(0x1fe)]['id']}});if(!_0x2093d2)throw new common_1['HttpException'](_0x2ddb46(0x23d),common_1[_0x2ddb46(0x1f0)][_0x2ddb46(0x233)]);return await this[_0x2ddb46(0x200)][_0x2ddb46(0x22e)](_0xe8469f),await this['userAppsEntity'][_0x2ddb46(0x22e)]({'appId':_0xe8469f,'userId':_0x3ca1da[_0x2ddb46(0x1fe)]['id']}),_0x2ddb46(0x240);}async[_0x2578b2(0x20b)](_0xf421b9,_0x45e575){const _0x13eab7=_0x2578b2,{appId:_0x1566a9}=_0xf421b9,{id:_0x5b90fa}=_0x45e575[_0x13eab7(0x1fe)],_0x321989=await this[_0x13eab7(0x1fc)][_0x13eab7(0x1ee)]({'where':{'appId':_0x1566a9,'userId':_0x5b90fa}});if(_0x321989){const _0x518745=await this[_0x13eab7(0x1fc)][_0x13eab7(0x22e)]({'appId':_0x1566a9,'userId':_0x5b90fa});if(_0x518745['affected']>0x0)return'取消收藏成功!';else throw new common_1['HttpException'](_0x13eab7(0x23a),common_1['HttpStatus']['BAD_REQUEST']);}const _0x393536=await this[_0x13eab7(0x200)][_0x13eab7(0x1ee)]({'where':{'id':_0x1566a9}}),{id:_0x338506,role:_0x3243a2,catId:_0x3c91d9}=_0x393536,_0x527607={'userId':_0x5b90fa,'appId':_0x338506,'catId':_0x3c91d9,'appRole':_0x3243a2,'public':!![],'status':0x1};return await this[_0x13eab7(0x1fc)][_0x13eab7(0x205)](_0x527607),_0x13eab7(0x220);}async[_0x2578b2(0x1ef)](_0x54f875,_0x194785={'page':0x1,'size':0x1e}){const _0x4ccf57=_0x2578b2,{id:_0x391f8b}=_0x54f875[_0x4ccf57(0x1fe)],{page:page=0x1,size:size=0x1e}=_0x194785,[_0x4a8737,_0x33e735]=await this[_0x4ccf57(0x1fc)][_0x4ccf57(0x1f1)]({'where':{'userId':_0x391f8b,'status':(0x0,typeorm_1['In'])([0x1,0x3,0x4,0x5])},'order':{'id':_0x4ccf57(0x225)},'skip':(page-0x1)*size,'take':size}),_0x5b4aa0=_0x4a8737[_0x4ccf57(0x1f6)](_0x145fe4=>_0x145fe4['appId']),_0x1731bf=await this[_0x4ccf57(0x200)][_0x4ccf57(0x21f)]({'where':{'id':(0x0,typeorm_1['In'])(_0x5b4aa0)}});return _0x4a8737[_0x4ccf57(0x229)](_0x4852cb=>{const _0x5b6575=_0x4ccf57,_0x2637eb=_0x1731bf['find'](_0x97f662=>_0x97f662['id']===_0x4852cb[_0x5b6575(0x231)]);_0x4852cb['appName']=_0x2637eb?_0x2637eb[_0x5b6575(0x1f3)]:'',_0x4852cb['appRole']=_0x2637eb?_0x2637eb[_0x5b6575(0x239)]:'',_0x4852cb[_0x5b6575(0x230)]=_0x2637eb?_0x2637eb[_0x5b6575(0x20f)]:'',_0x4852cb[_0x5b6575(0x244)]=_0x2637eb?_0x2637eb[_0x5b6575(0x244)]:'',_0x4852cb[_0x5b6575(0x214)]=_0x2637eb?_0x2637eb[_0x5b6575(0x214)]:'',_0x4852cb[_0x5b6575(0x22f)]=_0x2637eb[_0x5b6575(0x206)]===_0x391f8b?_0x2637eb['preset']:_0x5b6575(0x232);}),{'rows':_0x4a8737,'count':_0x33e735};}};AppService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_2[_0x2578b2(0x23f)])(appCats_entity_1[_0x2578b2(0x1ec)])),__param(0x1,(0x0,typeorm_2['InjectRepository'])(app_entity_1[_0x2578b2(0x1ea)])),__param(0x2,(0x0,typeorm_2[_0x2578b2(0x23f)])(userApps_entity_1[_0x2578b2(0x1f2)])),__metadata('design:paramtypes',[typeorm_1[_0x2578b2(0x210)],typeorm_1[_0x2578b2(0x210)],typeorm_1[_0x2578b2(0x210)]])],AppService),exports['AppService']=AppService;