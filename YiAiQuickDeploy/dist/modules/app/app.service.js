'use strict';const _0xc15e38=_0x3c09;(function(_0xfbf5b1,_0x55902d){const _0x459a75=_0x3c09,_0x5ccc2b=_0xfbf5b1();while(!![]){try{const _0x1579f5=parseInt(_0x459a75(0x117))/0x1+-parseInt(_0x459a75(0xf7))/0x2+parseInt(_0x459a75(0x139))/0x3*(-parseInt(_0x459a75(0x11e))/0x4)+-parseInt(_0x459a75(0x107))/0x5*(parseInt(_0x459a75(0xd8))/0x6)+parseInt(_0x459a75(0xf6))/0x7+parseInt(_0x459a75(0x102))/0x8+-parseInt(_0x459a75(0x118))/0x9*(-parseInt(_0x459a75(0x109))/0xa);if(_0x1579f5===_0x55902d)break;else _0x5ccc2b['push'](_0x5ccc2b['shift']());}catch(_0xda62fa){_0x5ccc2b['push'](_0x5ccc2b['shift']());}}}(_0x2ab8,0x25fc1));function _0x2ab8(){const _0x22cbaf=['system','delApp','******','Like','BAD_REQUEST','339381GGCVZg','536422olXFVq','defineProperty','__esModule','IsNull','customApp','该分类不存在！','name','__param','该分类下存在App，不可删除！','修改成功','count','2189336kEtpZI','auditPass','__decorate','findAndCount','delAppCat','35mstPhY','appName','10VLSbkx','delete','user','取消收藏成功!','Repository','catName','find','修改App信息成功','findOne','typeorm','super','InjectRepository','split','DESC','141021EiovkR','1948671FykotP','affected','删除成功','修改失败！','des','map','748OIEFJy','includes','该应用不存在！','update','updateApp','forEach','metadata','AppService','collect','appEntity','design:paramtypes','length','demoData','删除App成功','取消收藏失败！','该应用名称已存在！','appRole','appCount','@nestjs/typeorm','createAppCat','catId','修改App信息失败！','__metadata','HttpStatus','该分类名称已存在！','function','删除应用成功！','186dYnDIQ','updateAppCats','删除App失败！','./userApps.entity','./appCats.entity','delMineApp','该应用已被用户关联使用中，不可删除！','209400QzkFOY','save','role','mineApps','status','decorate','appDes','appId','Not','@nestjs/common','您正在操作一个不存在的资源！','MoreThan','HttpException','appCatsList','appCatsEntity','frontAppList','AppEntity','getOwnPropertyDescriptor','您正在编辑一个不存在的应用！','queryOneCat','appList','object','preset','createApp','userAppsEntity'];_0x2ab8=function(){return _0x22cbaf;};return _0x2ab8();}var __decorate=this&&this[_0xc15e38(0x104)]||function(_0x3a951c,_0x13ab58,_0x1b2d4b,_0x3725dd){const _0x222636=_0xc15e38;var _0x30bee9=arguments[_0x222636(0x129)],_0x4ea0a8=_0x30bee9<0x3?_0x13ab58:_0x3725dd===null?_0x3725dd=Object[_0x222636(0xe9)](_0x13ab58,_0x1b2d4b):_0x3725dd,_0x294da0;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x222636(0x137))_0x4ea0a8=Reflect[_0x222636(0xdd)](_0x3a951c,_0x13ab58,_0x1b2d4b,_0x3725dd);else{for(var _0x3eb61=_0x3a951c[_0x222636(0x129)]-0x1;_0x3eb61>=0x0;_0x3eb61--)if(_0x294da0=_0x3a951c[_0x3eb61])_0x4ea0a8=(_0x30bee9<0x3?_0x294da0(_0x4ea0a8):_0x30bee9>0x3?_0x294da0(_0x13ab58,_0x1b2d4b,_0x4ea0a8):_0x294da0(_0x13ab58,_0x1b2d4b))||_0x4ea0a8;}return _0x30bee9>0x3&&_0x4ea0a8&&Object[_0x222636(0xf8)](_0x13ab58,_0x1b2d4b,_0x4ea0a8),_0x4ea0a8;},__metadata=this&&this[_0xc15e38(0x134)]||function(_0x1158c2,_0x263e03){const _0x18d114=_0xc15e38;if(typeof Reflect===_0x18d114(0xed)&&typeof Reflect[_0x18d114(0x124)]===_0x18d114(0x137))return Reflect['metadata'](_0x1158c2,_0x263e03);},__param=this&&this[_0xc15e38(0xfe)]||function(_0x26c8c7,_0x5a6f00){return function(_0x2dbc38,_0xd6e7bc){_0x5a6f00(_0x2dbc38,_0xd6e7bc,_0x26c8c7);};};function _0x3c09(_0x540b7f,_0x204ea1){const _0x2ab812=_0x2ab8();return _0x3c09=function(_0x3c0977,_0x1f728c){_0x3c0977=_0x3c0977-0xd4;let _0x4ade42=_0x2ab812[_0x3c0977];return _0x4ade42;},_0x3c09(_0x540b7f,_0x204ea1);}Object[_0xc15e38(0xf8)](exports,_0xc15e38(0xf9),{'value':!![]}),exports[_0xc15e38(0x125)]=void 0x0;const common_1=require(_0xc15e38(0xe1)),appCats_entity_1=require(_0xc15e38(0xd5)),typeorm_1=require(_0xc15e38(0x112)),typeorm_2=require(_0xc15e38(0x130)),app_entity_1=require('./app.entity'),userApps_entity_1=require(_0xc15e38(0xd4));let AppService=class AppService{constructor(_0x41e905,_0x2d6907,_0x179412){const _0x25d83b=_0xc15e38;this[_0x25d83b(0xe6)]=_0x41e905,this[_0x25d83b(0x127)]=_0x2d6907,this[_0x25d83b(0xf0)]=_0x179412;}async[_0xc15e38(0x131)](_0x300e57){const _0x35471d=_0xc15e38,{name:_0xd7dc2a}=_0x300e57,_0x5d35a7=await this[_0x35471d(0xe6)]['findOne']({'where':{'name':_0xd7dc2a}});if(_0x5d35a7)throw new common_1['HttpException']('该分类名称已存在！',common_1['HttpStatus']['BAD_REQUEST']);return await this[_0x35471d(0xe6)][_0x35471d(0xd9)](_0x300e57);}async[_0xc15e38(0x106)](_0x48b74f){const _0xb8f7ce=_0xc15e38,{id:_0x316520}=_0x48b74f,_0x21ede1=await this['appCatsEntity'][_0xb8f7ce(0x111)]({'where':{'id':_0x316520}});if(!_0x21ede1)throw new common_1[(_0xb8f7ce(0xe4))](_0xb8f7ce(0xfc),common_1['HttpStatus'][_0xb8f7ce(0xf5)]);const _0x2c6601=await this[_0xb8f7ce(0x127)][_0xb8f7ce(0x101)]({'where':{'catId':_0x316520}});if(_0x2c6601>0x0)throw new common_1[(_0xb8f7ce(0xe4))](_0xb8f7ce(0xff),common_1['HttpStatus'][_0xb8f7ce(0xf5)]);const _0xd8c7a5=await this['appCatsEntity']['delete'](_0x316520);if(_0xd8c7a5[_0xb8f7ce(0x119)]>0x0)return _0xb8f7ce(0x11a);throw new common_1[(_0xb8f7ce(0xe4))]('删除失败！',common_1[_0xb8f7ce(0x135)][_0xb8f7ce(0xf5)]);}async[_0xc15e38(0x13a)](_0x5f4d10){const _0x512289=_0xc15e38,{id:_0x41b92e,name:_0x105ba1}=_0x5f4d10,_0x186972=await this[_0x512289(0xe6)]['findOne']({'where':{'name':_0x105ba1,'id':(0x0,typeorm_1[_0x512289(0xe0)])(_0x41b92e)}});if(_0x186972)throw new common_1['HttpException'](_0x512289(0x136),common_1[_0x512289(0x135)][_0x512289(0xf5)]);const _0x6c68ff=await this[_0x512289(0xe6)][_0x512289(0x121)]({'id':_0x41b92e},_0x5f4d10);if(_0x6c68ff[_0x512289(0x119)]>0x0)return _0x512289(0x100);throw new common_1[(_0x512289(0xe4))](_0x512289(0x11b),common_1[_0x512289(0x135)][_0x512289(0xf5)]);}async[_0xc15e38(0xeb)](_0x27775c){const _0x1e5ca0=_0xc15e38,{id:_0x5a0424}=_0x27775c;if(!_0x5a0424)throw new common_1[(_0x1e5ca0(0xe4))]('缺失必要参数！',common_1[_0x1e5ca0(0x135)][_0x1e5ca0(0xf5)]);const _0x16081a=await this['appEntity'][_0x1e5ca0(0x111)]({'where':{'id':_0x5a0424}}),{demoData:_0xda8436,coverImg:_0x5824e1,des:_0x30d82f,name:_0x28de14}=_0x16081a;return{'demoData':_0xda8436?_0xda8436[_0x1e5ca0(0x115)]('\x0a'):[],'coverImg':_0x5824e1,'des':_0x30d82f,'name':_0x28de14};}async[_0xc15e38(0xe5)](_0x57e58c){const _0x47fa40=_0xc15e38,{page:page=0x1,size:size=0xa,name:_0x2a0ec3,status:_0x86be2d}=_0x57e58c,_0x17b403={};_0x2a0ec3&&(_0x17b403[_0x47fa40(0xfd)]=(0x0,typeorm_1[_0x47fa40(0xf4)])('%'+_0x2a0ec3+'%')),[0x0,0x1,'0','1'][_0x47fa40(0x11f)](_0x86be2d)&&(_0x17b403[_0x47fa40(0xdc)]=_0x86be2d);const [_0x123adb,_0x592645]=await this[_0x47fa40(0xe6)][_0x47fa40(0x105)]({'where':_0x17b403,'order':{'order':'DESC'},'skip':(page-0x1)*size,'take':size}),_0x52770e=_0x123adb[_0x47fa40(0x11d)](_0x4adbc4=>_0x4adbc4['id']),_0x56a3e0=await this[_0x47fa40(0x127)][_0x47fa40(0x10f)]({'where':{'catId':(0x0,typeorm_1['In'])(_0x52770e)}}),_0x4a584d={};return _0x56a3e0['forEach'](_0x24f857=>{const _0x42b9ad=_0x47fa40;_0x4a584d[_0x24f857[_0x42b9ad(0x132)]]?_0x4a584d[_0x24f857[_0x42b9ad(0x132)]]+=0x1:_0x4a584d[_0x24f857[_0x42b9ad(0x132)]]=0x1;}),_0x123adb['forEach'](_0xe87547=>_0xe87547[_0x47fa40(0x12f)]=_0x4a584d[_0xe87547['id']]||0x0),{'rows':_0x123adb,'count':_0x592645};}async[_0xc15e38(0xec)](_0x404980,_0x1efccf,_0x3c5811='id'){const _0x367387=_0xc15e38;var _0x5affed;const {page:page=0x1,size:size=0xa,name:_0x167d8b,status:_0x50bf43,catId:_0x108cc6,role:_0x28551d}=_0x1efccf,_0x56afb4={};_0x167d8b&&(_0x56afb4['name']=(0x0,typeorm_1[_0x367387(0xf4)])('%'+_0x167d8b+'%')),_0x108cc6&&(_0x56afb4[_0x367387(0x132)]=_0x108cc6),_0x28551d&&(_0x56afb4[_0x367387(0xda)]=_0x28551d),_0x50bf43&&(_0x56afb4[_0x367387(0xdc)]=_0x50bf43);const [_0x2dced0,_0x502901]=await this['appEntity'][_0x367387(0x105)]({'where':_0x56afb4,'order':{[_0x3c5811]:_0x367387(0x116)},'skip':(page-0x1)*size,'take':size}),_0x53f271=_0x2dced0['map'](_0x1623f7=>_0x1623f7[_0x367387(0x132)]),_0x230614=await this['appCatsEntity'][_0x367387(0x10f)]({'where':{'id':(0x0,typeorm_1['In'])(_0x53f271)}});return _0x2dced0[_0x367387(0x123)](_0x138760=>{const _0x303b16=_0x367387,_0x3a6e91=_0x230614['find'](_0x544083=>_0x544083['id']===_0x138760[_0x303b16(0x132)]);_0x138760[_0x303b16(0x10e)]=_0x3a6e91?_0x3a6e91[_0x303b16(0xfd)]:'';}),((_0x5affed=_0x404980===null||_0x404980===void 0x0?void 0x0:_0x404980[_0x367387(0x10b)])===null||_0x5affed===void 0x0?void 0x0:_0x5affed[_0x367387(0xda)])!==_0x367387(0x113)&&_0x2dced0['forEach'](_0x2887ba=>{const _0x13e806=_0x367387;delete _0x2887ba[_0x13e806(0xee)];}),{'rows':_0x2dced0,'count':_0x502901};}async[_0xc15e38(0xe7)](_0x24dcdb,_0x31c37c,_0x395cd0='id'){const _0x179b60=_0xc15e38;var _0xd73e1;const {page:page=0x1,size:size=0x3e8,name:_0x291cd8,catId:_0x33cec1,role:_0x3a48b0}=_0x31c37c,_0x1a3893=[{'status':(0x0,typeorm_1['In'])([0x1,0x4]),'userId':(0x0,typeorm_1[_0x179b60(0xfa)])(),'public':![]},{'userId':(0x0,typeorm_1[_0x179b60(0xe3)])(0x0),'public':!![]}],[_0x55ba4b,_0x3775f3]=await this[_0x179b60(0x127)][_0x179b60(0x105)]({'where':_0x1a3893,'order':{'order':_0x179b60(0x116)},'skip':(page-0x1)*size,'take':size}),_0x33f171=_0x55ba4b[_0x179b60(0x11d)](_0x303286=>_0x303286[_0x179b60(0x132)]),_0x1f018e=await this[_0x179b60(0xe6)][_0x179b60(0x10f)]({'where':{'id':(0x0,typeorm_1['In'])(_0x33f171)}});return _0x55ba4b[_0x179b60(0x123)](_0x5d36be=>{const _0x245f5b=_0x179b60,_0x32a34f=_0x1f018e['find'](_0x55aeb7=>_0x55aeb7['id']===_0x5d36be[_0x245f5b(0x132)]);_0x5d36be[_0x245f5b(0x10e)]=_0x32a34f?_0x32a34f[_0x245f5b(0xfd)]:'';}),((_0xd73e1=_0x24dcdb===null||_0x24dcdb===void 0x0?void 0x0:_0x24dcdb[_0x179b60(0x10b)])===null||_0xd73e1===void 0x0?void 0x0:_0xd73e1[_0x179b60(0xda)])!==_0x179b60(0x113)&&_0x55ba4b[_0x179b60(0x123)](_0x8bff23=>{const _0x25d6bc=_0x179b60;delete _0x8bff23[_0x25d6bc(0xee)];}),{'rows':_0x55ba4b,'count':_0x3775f3};}async[_0xc15e38(0xef)](_0xc4b7b4){const _0x15f097=_0xc15e38,{name:_0x15bb4b,catId:_0x1a0caa}=_0xc4b7b4;_0xc4b7b4['role']=_0x15f097(0xf1);const _0x4bdb01=await this[_0x15f097(0x127)][_0x15f097(0x111)]({'where':{'name':_0x15bb4b}});if(_0x4bdb01)throw new common_1[(_0x15f097(0xe4))]('该应用名称已存在！',common_1[_0x15f097(0x135)][_0x15f097(0xf5)]);const _0x5060cb=await this[_0x15f097(0xe6)][_0x15f097(0x111)]({'where':{'id':_0x1a0caa}});if(!_0x5060cb)throw new common_1[(_0x15f097(0xe4))](_0x15f097(0xfc),common_1['HttpStatus'][_0x15f097(0xf5)]);return await this[_0x15f097(0x127)][_0x15f097(0xd9)](_0xc4b7b4);}async[_0xc15e38(0xfb)](_0x148f8d,_0x459752){const _0x5b28f3=_0xc15e38,{id:_0x2465a1}=_0x459752[_0x5b28f3(0x10b)],{name:_0x30a31f,catId:_0x4a9d0f,des:_0xd29911,preset:_0x5eedf9,coverImg:_0x2483f3,demoData:_0x36b7e0,public:_0x6ed43,appId:_0x1e340a}=_0x148f8d;if(_0x1e340a){const _0x4a7368=await this[_0x5b28f3(0x127)][_0x5b28f3(0x111)]({'where':{'id':_0x1e340a,'userId':_0x2465a1}});if(!_0x4a7368)throw new common_1['HttpException'](_0x5b28f3(0xea),common_1[_0x5b28f3(0x135)][_0x5b28f3(0xf5)]);const _0x34baa2={'name':_0x30a31f,'catId':_0x4a9d0f,'des':_0xd29911,'preset':_0x5eedf9,'coverImg':_0x2483f3,'demoData':_0x36b7e0,'public':_0x6ed43,'status':_0x6ed43?0x3:0x1},_0x1b756d=await this[_0x5b28f3(0x127)][_0x5b28f3(0x121)]({'id':_0x1e340a,'userId':_0x2465a1},_0x34baa2);if(_0x1b756d['affected'])return _0x5b28f3(0x100);else throw new common_1[(_0x5b28f3(0xe4))]('修改失败！',common_1['HttpStatus'][_0x5b28f3(0xf5)]);}if(!_0x1e340a){const _0x1b7736=await this[_0x5b28f3(0xe6)][_0x5b28f3(0x111)]({'where':{'id':_0x4a9d0f}});if(!_0x1b7736)throw new common_1[(_0x5b28f3(0xe4))](_0x5b28f3(0xfc),common_1[_0x5b28f3(0x135)][_0x5b28f3(0xf5)]);const _0x16a743=await this[_0x5b28f3(0x127)][_0x5b28f3(0x111)]({'where':{'name':_0x30a31f}});if(_0x16a743)throw new common_1[(_0x5b28f3(0xe4))]('该应用名称已存在！',common_1[_0x5b28f3(0x135)][_0x5b28f3(0xf5)]);const _0x1d3581={'name':_0x30a31f,'catId':_0x4a9d0f,'des':_0xd29911,'preset':_0x5eedf9,'coverImg':_0x2483f3,'status':_0x6ed43?0x3:0x1,'demoData':_0x36b7e0,'public':_0x6ed43,'role':_0x5b28f3(0x10b),'userId':_0x2465a1},_0x4bd89f=await this[_0x5b28f3(0x127)][_0x5b28f3(0xd9)](_0x1d3581),_0x48c891={'appId':_0x4bd89f['id'],'userId':_0x2465a1,'appType':_0x5b28f3(0x10b),'public':_0x6ed43,'status':_0x6ed43?0x3:0x1,'catId':_0x4a9d0f};return this[_0x5b28f3(0xf0)][_0x5b28f3(0xd9)](_0x48c891);}}async[_0xc15e38(0x122)](_0x1eb0b4){const _0x5dcc3f=_0xc15e38,{id:_0x30e07e,name:_0x3ea61f,catId:_0x17bdf9,status:_0x25334b}=_0x1eb0b4,_0x5bd848=await this[_0x5dcc3f(0x127)][_0x5dcc3f(0x111)]({'where':{'name':_0x3ea61f,'id':(0x0,typeorm_1['Not'])(_0x30e07e)}});if(_0x5bd848)throw new common_1[(_0x5dcc3f(0xe4))](_0x5dcc3f(0x12d),common_1[_0x5dcc3f(0x135)][_0x5dcc3f(0xf5)]);const _0x5e5715=await this['appCatsEntity'][_0x5dcc3f(0x111)]({'where':{'id':_0x17bdf9}});if(!_0x5e5715)throw new common_1[(_0x5dcc3f(0xe4))](_0x5dcc3f(0xfc),common_1['HttpStatus'][_0x5dcc3f(0xf5)]);const _0xafa3a=await this['appEntity'][_0x5dcc3f(0x111)]({'where':{'id':_0x30e07e}});_0xafa3a[_0x5dcc3f(0xdc)]!==_0x1eb0b4['status']&&await this['userAppsEntity']['update']({'appId':_0x30e07e},{'status':_0x25334b});const _0x3fc712=await this[_0x5dcc3f(0x127)][_0x5dcc3f(0x121)]({'id':_0x30e07e},_0x1eb0b4);if(_0x3fc712[_0x5dcc3f(0x119)]>0x0)return _0x5dcc3f(0x110);throw new common_1[(_0x5dcc3f(0xe4))](_0x5dcc3f(0x133),common_1[_0x5dcc3f(0x135)][_0x5dcc3f(0xf5)]);}async[_0xc15e38(0xf2)](_0x378e6b){const _0x4d6873=_0xc15e38,{id:_0x4cba49}=_0x378e6b,_0x13bd8c=await this[_0x4d6873(0x127)][_0x4d6873(0x111)]({'where':{'id':_0x4cba49}});if(!_0x13bd8c)throw new common_1[(_0x4d6873(0xe4))](_0x4d6873(0x120),common_1[_0x4d6873(0x135)][_0x4d6873(0xf5)]);const _0x148192=await this[_0x4d6873(0xf0)]['count']({'where':{'appId':_0x4cba49}});if(_0x148192>0x0)throw new common_1[(_0x4d6873(0xe4))](_0x4d6873(0xd7),common_1['HttpStatus'][_0x4d6873(0xf5)]);const _0x270e9a=await this['appEntity']['delete'](_0x4cba49);if(_0x270e9a[_0x4d6873(0x119)]>0x0)return _0x4d6873(0x12b);throw new common_1[(_0x4d6873(0xe4))](_0x4d6873(0x13b),common_1[_0x4d6873(0x135)][_0x4d6873(0xf5)]);}async[_0xc15e38(0x103)](_0x416714){const _0x356b3a=_0xc15e38,{id:_0x8dd964}=_0x416714,_0x431184=await this[_0x356b3a(0x127)]['findOne']({'where':{'id':_0x8dd964,'status':0x3}});if(!_0x431184)throw new common_1[(_0x356b3a(0xe4))](_0x356b3a(0x120),common_1['HttpStatus'][_0x356b3a(0xf5)]);return await this[_0x356b3a(0x127)][_0x356b3a(0x121)]({'id':_0x8dd964},{'status':0x4}),await this[_0x356b3a(0xf0)][_0x356b3a(0x121)]({'appId':_0x8dd964},{'status':0x4}),'应用审核通过';}async['auditFail'](_0x51d256){const _0x7ab1c0=_0xc15e38,{id:_0x3c3d98}=_0x51d256,_0x55826f=await this[_0x7ab1c0(0x127)][_0x7ab1c0(0x111)]({'where':{'id':_0x3c3d98,'status':0x3}});if(!_0x55826f)throw new common_1[(_0x7ab1c0(0xe4))]('该应用不存在！',common_1[_0x7ab1c0(0x135)]['BAD_REQUEST']);return await this[_0x7ab1c0(0x127)][_0x7ab1c0(0x121)]({'id':_0x3c3d98},{'status':0x5}),await this[_0x7ab1c0(0xf0)][_0x7ab1c0(0x121)]({'appId':_0x3c3d98},{'status':0x5}),'应用审核拒绝完成';}async[_0xc15e38(0xd6)](_0x4c7494,_0x1f6836){const _0x220621=_0xc15e38,{id:_0x1f1028}=_0x4c7494,_0x5d6318=await this[_0x220621(0x127)]['findOne']({'where':{'id':_0x1f1028,'userId':_0x1f6836[_0x220621(0x10b)]['id']}});if(!_0x5d6318)throw new common_1[(_0x220621(0xe4))](_0x220621(0xe2),common_1[_0x220621(0x135)][_0x220621(0xf5)]);return await this[_0x220621(0x127)][_0x220621(0x10a)](_0x1f1028),await this[_0x220621(0xf0)][_0x220621(0x10a)]({'appId':_0x1f1028,'userId':_0x1f6836[_0x220621(0x10b)]['id']}),_0x220621(0x138);}async[_0xc15e38(0x126)](_0x528306,_0x21f284){const _0x255235=_0xc15e38,{appId:_0x3cb824}=_0x528306,{id:_0x5a60f6}=_0x21f284[_0x255235(0x10b)],_0x19e764=await this[_0x255235(0xf0)]['findOne']({'where':{'appId':_0x3cb824,'userId':_0x5a60f6}});if(_0x19e764){const _0x5f2a99=await this[_0x255235(0xf0)][_0x255235(0x10a)]({'appId':_0x3cb824,'userId':_0x5a60f6});if(_0x5f2a99['affected']>0x0)return _0x255235(0x10c);else throw new common_1['HttpException'](_0x255235(0x12c),common_1[_0x255235(0x135)][_0x255235(0xf5)]);}const _0x4a61dc=await this[_0x255235(0x127)][_0x255235(0x111)]({'where':{'id':_0x3cb824}}),{id:_0x767a6,role:_0x3813be,catId:_0x50b607}=_0x4a61dc,_0x4e030a={'userId':_0x5a60f6,'appId':_0x767a6,'catId':_0x50b607,'appRole':_0x3813be,'public':!![],'status':0x1};return await this[_0x255235(0xf0)][_0x255235(0xd9)](_0x4e030a),'已将应用加入到我的个人工作台！';}async[_0xc15e38(0xdb)](_0x2f46d7,_0x3d520d={'page':0x1,'size':0x1e}){const _0x5d7ec8=_0xc15e38,{id:_0x3fbf1b}=_0x2f46d7[_0x5d7ec8(0x10b)],{page:page=0x1,size:size=0x1e}=_0x3d520d,[_0x4dbc9f,_0x191118]=await this[_0x5d7ec8(0xf0)][_0x5d7ec8(0x105)]({'where':{'userId':_0x3fbf1b,'status':(0x0,typeorm_1['In'])([0x1,0x3,0x4,0x5])},'order':{'id':_0x5d7ec8(0x116)},'skip':(page-0x1)*size,'take':size}),_0x3a9a69=_0x4dbc9f['map'](_0x3d50a9=>_0x3d50a9['appId']),_0x5ca641=await this[_0x5d7ec8(0x127)][_0x5d7ec8(0x10f)]({'where':{'id':(0x0,typeorm_1['In'])(_0x3a9a69)}});return _0x4dbc9f['forEach'](_0xd03830=>{const _0x3e6064=_0x5d7ec8,_0x50f854=_0x5ca641[_0x3e6064(0x10f)](_0x34e8ed=>_0x34e8ed['id']===_0xd03830[_0x3e6064(0xdf)]);_0xd03830[_0x3e6064(0x108)]=_0x50f854?_0x50f854[_0x3e6064(0xfd)]:'',_0xd03830[_0x3e6064(0x12e)]=_0x50f854?_0x50f854[_0x3e6064(0xda)]:'',_0xd03830[_0x3e6064(0xde)]=_0x50f854?_0x50f854[_0x3e6064(0x11c)]:'',_0xd03830['coverImg']=_0x50f854?_0x50f854['coverImg']:'',_0xd03830[_0x3e6064(0x12a)]=_0x50f854?_0x50f854[_0x3e6064(0x12a)]:'',_0xd03830[_0x3e6064(0xee)]=_0x50f854['userId']===_0x3fbf1b?_0x50f854['preset']:_0x3e6064(0xf3);}),{'rows':_0x4dbc9f,'count':_0x191118};}};AppService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_2['InjectRepository'])(appCats_entity_1['AppCatsEntity'])),__param(0x1,(0x0,typeorm_2[_0xc15e38(0x114)])(app_entity_1[_0xc15e38(0xe8)])),__param(0x2,(0x0,typeorm_2[_0xc15e38(0x114)])(userApps_entity_1['UserAppsEntity'])),__metadata(_0xc15e38(0x128),[typeorm_1[_0xc15e38(0x10d)],typeorm_1[_0xc15e38(0x10d)],typeorm_1[_0xc15e38(0x10d)]])],AppService),exports[_0xc15e38(0x125)]=AppService;