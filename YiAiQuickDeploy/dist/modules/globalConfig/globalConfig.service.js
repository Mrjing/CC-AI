'use strict';const _0x1b80e6=_0x3d43;(function(_0x5e2f4b,_0x4ec91f){const _0x4a310e=_0x3d43,_0x397a63=_0x5e2f4b();while(!![]){try{const _0x58b95d=parseInt(_0x4a310e(0xd9))/0x1*(-parseInt(_0x4a310e(0x177))/0x2)+-parseInt(_0x4a310e(0xf7))/0x3+parseInt(_0x4a310e(0x196))/0x4*(parseInt(_0x4a310e(0xd5))/0x5)+parseInt(_0x4a310e(0x101))/0x6+-parseInt(_0x4a310e(0x162))/0x7+parseInt(_0x4a310e(0x172))/0x8*(parseInt(_0x4a310e(0x175))/0x9)+parseInt(_0x4a310e(0x105))/0xa*(-parseInt(_0x4a310e(0x187))/0xb);if(_0x58b95d===_0x4ec91f)break;else _0x397a63['push'](_0x397a63['shift']());}catch(_0x19f33d){_0x397a63['push'](_0x397a63['shift']());}}}(_0x534d,0xa5fbd));function _0x534d(){const _0xa55e3b=['firstRregisterSendModel4Count','signInModel4Count','payHupiStatus','signInStatus','24RvnlYA','__esModule','function','3865761geSmqA','getCopyright','2EomGxN','getPhoneVerifyConfig','mjUseBaiduFy','隐私内容、非超级管理员无权查看','domain','支付功能暂未开放!','includes','decorate','&grant_type=client_credentials','缺失ip信息','initBaiduSensitive','Logger','phoneRegisterStatus','../../common/utils','inviteSendStatus','baiduTextSecretKey','143sBTuUf','payMpayStatus','configs','clientHomePath','invitedGuestSendModel4Count','InjectRepository','user','还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！','__param','mjHideNotBlock','queryGptKeys','setGptKeys','companyName','entries','delete','3965968cJphun','invitedGuestSendDrawMjCount','mjHideWorkIn','parse','inviteGiveSendDrawMjCount','baiduCode','getSignatureGiftConfig','epay','https://api.jiangly.com/api/permission/auth','请填写您的授权码','MjdrawCount','https://api.weixin.qq.com/cgi-bin/stable_token','createOrUpdate','5Thpkcr','chatLogEntity','nineaiBuiltInSensitiveStatus','firstRregisterSendDrawMjCount','218219WIUNWG','\x20current\x20use\x20version\x20in\x20------>:\x20','phoneLoginStatus','NINEAI','forEach','vxNumber','qcloudSecretKey','@nestjs/typeorm','wechat','payWechatStatus','qcloudPhoneLoginStatus','clientFavoIconPath','defineProperty','noticeInfo','queryConfig','请按要求填写正确的授权信息','typeorm','hupi','assign','error_description','registerSendDrawMjCount','findOne','queryAllConfig','百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!','isShowAppCatIcon','appMenuHeaderTips','onModuleInit','mjProxyImgUrl','../models/models.service','axios','3341937mFoesc','getNineAiToken','configKey','payWeChatPrivateKey','configEntity','firstRegisterSendStatus','https://aip.baidubce.com/oauth/2.0/token?client_id=','getConfigs','find','error:\x20','7765008PtRrcJ','nineAiToken','registerSendStatus','Key','726010RLiHaY','globalConfigs','请配置正确的秘钥、当前秘钥检测不通过！','copyrightTitle','签到功能暂未开放!','noticeTitle','@nestjs/common','buyCramiAddress','wechatOfficialAppId','ali','Like','设置完成！','default','client_credential','baidu','&type=jsapi','post','length','wechatAccessToken','NAMESPACE','design:paramtypes','map','getAuthInfo','access_token','TRUE','wechatOfficialAppSecret','modelsService','log','getNamespace','aliPhoneTemplateCode','qqNumber','application/json','qcloudPhoneRegisterStatus','chatGptKey:','百度敏感词配置检测失败，您的参数可能配置的不正确!','&client_secret=','./config.entity','firstRregisterSendModel3Count','update','clientLogoPath','registerBaseUrl','https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=','调了一次刷access_token','qcloudPhoneSignName','signInMjDrawToken','env','isVerifyEmail','Repository','hideString','payEpayStatus','wechatSilentLoginStatus','OfficialService','GlobalConfigService','initGetAllConfig','baiduTextApiKey','BAD_REQUEST','cos','mpay','wechatJsapiTicket','baiduTextAccessToken','getWechatAccessToken','HttpException','reduce','salesAllowDrawMoney','version','object','getSensitiveConfig','isUseWxLogin','getQcloudPhoneVerifyConfig','emailRegisterStatus','Injectable','HttpStatus','wechatRegisterStatus','siteName','emailLoginStatus','error','chatGptKey','ChatLogEntity','copyrightUrl','aliPhoneAccessKeyId','mindDefaultData','get','queryNotice','data','metadata','signInModel3Count','registerSendModel4Count','nineai','手机验证码功能暂未开放!','ISDEV','getDiffArray','inviteGiveSendModel3Count','fetchJsapiTicket','4328569lBULzM','super','errMsg','设置配置信息错误！','invitedGuestSendModel3Count','firstRegisterSendRank','__decorate','configVal','every','filingNumber','__metadata','utf-8'];_0x534d=function(){return _0xa55e3b;};return _0x534d();}var __decorate=this&&this[_0x1b80e6(0x168)]||function(_0x36eeae,_0x1cfa65,_0x177d62,_0xe1b36c){const _0x404279=_0x1b80e6;var _0x4529a1=arguments[_0x404279(0x116)],_0x5f3784=_0x4529a1<0x3?_0x1cfa65:_0xe1b36c===null?_0xe1b36c=Object['getOwnPropertyDescriptor'](_0x1cfa65,_0x177d62):_0xe1b36c,_0x3cffe9;if(typeof Reflect===_0x404279(0x146)&&typeof Reflect[_0x404279(0x17e)]===_0x404279(0x174))_0x5f3784=Reflect['decorate'](_0x36eeae,_0x1cfa65,_0x177d62,_0xe1b36c);else{for(var _0x213d26=_0x36eeae['length']-0x1;_0x213d26>=0x0;_0x213d26--)if(_0x3cffe9=_0x36eeae[_0x213d26])_0x5f3784=(_0x4529a1<0x3?_0x3cffe9(_0x5f3784):_0x4529a1>0x3?_0x3cffe9(_0x1cfa65,_0x177d62,_0x5f3784):_0x3cffe9(_0x1cfa65,_0x177d62))||_0x5f3784;}return _0x4529a1>0x3&&_0x5f3784&&Object[_0x404279(0xe5)](_0x1cfa65,_0x177d62,_0x5f3784),_0x5f3784;},__metadata=this&&this[_0x1b80e6(0x16c)]||function(_0x41fad4,_0x56bff5){const _0x501015=_0x1b80e6;if(typeof Reflect==='object'&&typeof Reflect[_0x501015(0x159)]===_0x501015(0x174))return Reflect['metadata'](_0x41fad4,_0x56bff5);},__param=this&&this[_0x1b80e6(0x18f)]||function(_0x10cfe3,_0x23ad57){return function(_0xeb6bb0,_0x3813f9){_0x23ad57(_0xeb6bb0,_0x3813f9,_0x10cfe3);};};function _0x3d43(_0x43b06c,_0x52da15){const _0x534d5a=_0x534d();return _0x3d43=function(_0x3d4345,_0x2918d0){_0x3d4345=_0x3d4345-0xcb;let _0x2d0efe=_0x534d5a[_0x3d4345];return _0x2d0efe;},_0x3d43(_0x43b06c,_0x52da15);}Object[_0x1b80e6(0xe5)](exports,_0x1b80e6(0x173),{'value':!![]}),exports[_0x1b80e6(0x139)]=void 0x0;const models_service_1=require(_0x1b80e6(0xf5)),chatLog_entity_1=require('../chatLog/chatLog.entity'),common_1=require(_0x1b80e6(0x10b)),config_entity_1=require(_0x1b80e6(0x129)),typeorm_1=require(_0x1b80e6(0xe0)),typeorm_2=require(_0x1b80e6(0xe9)),utils_1=require(_0x1b80e6(0x184)),axios_1=require(_0x1b80e6(0xf6)),fs=require('fs'),packageJsonContent=fs['readFileSync']('package.json',_0x1b80e6(0x16d)),packageJson=JSON[_0x1b80e6(0xcb)](packageJsonContent),version=packageJson[_0x1b80e6(0x145)];console[_0x1b80e6(0x120)](_0x1b80e6(0xda),version);let GlobalConfigService=class GlobalConfigService{constructor(_0x148b7a,_0x5425cd,_0x1a39f6){const _0x568363=_0x1b80e6;this[_0x568363(0xfb)]=_0x148b7a,this[_0x568363(0xd6)]=_0x5425cd,this[_0x568363(0x11f)]=_0x1a39f6,this[_0x568363(0x106)]={},this[_0x568363(0x102)]=!![];}async[_0x1b80e6(0xf3)](){const _0x3080b8=_0x1b80e6;await this[_0x3080b8(0x13a)]();}async[_0x1b80e6(0xfe)](_0x416e53){const _0x283542=_0x1b80e6;if(_0x416e53[_0x283542(0x116)]===0x0)return;if(_0x416e53[_0x283542(0x17d)](_0x283542(0x117))&&_0x416e53[_0x283542(0x116)]===0x1)return this[_0x283542(0x117)];if(_0x416e53[_0x283542(0x17d)](_0x283542(0x13f))&&_0x416e53['length']===0x1)return this[_0x283542(0x13f)];if(_0x416e53[_0x283542(0x116)]===0x1)return this['globalConfigs'][_0x416e53[0x0]];else{const _0x21274c={};return _0x416e53[_0x283542(0xdd)](_0x17b0c5=>_0x21274c[_0x17b0c5]=this[_0x283542(0x106)][_0x17b0c5]),_0x21274c;}}async['initGetAllConfig'](){const _0x26e4f6=_0x1b80e6,_0x15683e=await this[_0x26e4f6(0xfb)][_0x26e4f6(0xff)]();this[_0x26e4f6(0x106)]=_0x15683e[_0x26e4f6(0x143)]((_0x5f3826,_0x499d00)=>{const _0x300d59=_0x26e4f6;return _0x5f3826[_0x499d00[_0x300d59(0xf9)]]=_0x499d00[_0x300d59(0x169)],_0x5f3826;},{}),this[_0x26e4f6(0x181)]();}async[_0x1b80e6(0x181)](_0x16a148=!![]){const _0x1393aa=_0x1b80e6,{baiduTextApiKey:_0x589baf,baiduTextSecretKey:_0x1c3b0f}=await this[_0x1393aa(0xfe)]([_0x1393aa(0x13b),_0x1393aa(0x186)]);if(!_0x589baf||!_0x1c3b0f){common_1[_0x1393aa(0x182)][_0x1393aa(0x150)](_0x1393aa(0xf0),'GlobalConfigService');return;}const _0x581040={'Content-Type':_0x1393aa(0x124),'Accept':_0x1393aa(0x124)},_0x172d5e=_0x1393aa(0xfd)+_0x589baf+_0x1393aa(0x128)+_0x1c3b0f+_0x1393aa(0x17f);try{const _0x1a0ee8=await axios_1[_0x1393aa(0x111)][_0x1393aa(0x115)](_0x172d5e,{'headers':_0x581040});this[_0x1393aa(0x106)]['baiduTextAccessToken']=_0x1a0ee8['data'][_0x1393aa(0x11c)];}catch(_0x168693){if(_0x16a148)common_1[_0x1393aa(0x182)]['error'](_0x1393aa(0x127),_0x1393aa(0x139));else throw new common_1[(_0x1393aa(0x142))](_0x168693['response'][_0x1393aa(0x158)][_0x1393aa(0xec)],common_1['HttpStatus'][_0x1393aa(0x13c)]);}}async[_0x1b80e6(0x141)](_0x4b6c04=![]){const _0x212925=_0x1b80e6;console['log'](_0x212925(0x12f));const {wechatOfficialAppId:_0x21f065,wechatOfficialAppSecret:_0x1e7b63}=await this['getConfigs']([_0x212925(0x10d),_0x212925(0x11e)]);if(!_0x21f065||!_0x1e7b63)return common_1[_0x212925(0x182)][_0x212925(0x150)](_0x212925(0x18e),_0x212925(0x138));this[_0x212925(0x117)]=await this['fetchBaseAccessToken'](_0x21f065,_0x1e7b63,_0x4b6c04),this[_0x212925(0x13f)]=await this['fetchJsapiTicket'](this[_0x212925(0x117)]),common_1[_0x212925(0x182)][_0x212925(0x120)]('wechat\x20refresh\x20access_token\x20\x20==>\x20'+this[_0x212925(0x117)],_0x212925(0x138));}async['fetchBaseAccessToken'](_0x41d63e,_0x169a63,_0x30435b=![]){const _0x446f42=_0x1b80e6;if(process[_0x446f42(0x132)][_0x446f42(0x15e)]===_0x446f42(0x11d)){this[_0x446f42(0x117)]='';return;}const {data:{errmsg:_0x4aea93,access_token:_0x258161,expires_in:_0x83fc93}}=await axios_1[_0x446f42(0x111)][_0x446f42(0x115)](_0x446f42(0xd3),{'grant_type':_0x446f42(0x112),'appid':_0x41d63e,'secret':_0x169a63});console[_0x446f42(0x120)](_0x446f42(0x11c),_0x258161,_0x83fc93);if(_0x4aea93){console[_0x446f42(0x120)](_0x446f42(0x164),_0x4aea93);if(_0x30435b)common_1[_0x446f42(0x182)]['error']('获取微信access_token失败、错误信息：'+_0x4aea93,_0x446f42(0x138));else throw new common_1[(_0x446f42(0x142))](_0x446f42(0x107),common_1[_0x446f42(0x14c)]['BAD_REQUEST']);return'';}return _0x258161;}async[_0x1b80e6(0x161)](_0x2c1be3){const _0x4837bb=_0x1b80e6;var _0x413886;if(process[_0x4837bb(0x132)][_0x4837bb(0x15e)]===_0x4837bb(0x11d)){this[_0x4837bb(0x13f)]='';return;}const _0x3f8220=await axios_1['default'][_0x4837bb(0x156)](_0x4837bb(0x12e)+_0x2c1be3+_0x4837bb(0x114));return(_0x413886=_0x3f8220===null||_0x3f8220===void 0x0?void 0x0:_0x3f8220[_0x4837bb(0x158)])===null||_0x413886===void 0x0?void 0x0:_0x413886['ticket'];}async[_0x1b80e6(0xef)](_0x55fe9e){const _0x4b7e70=_0x1b80e6,{role:_0x5abdda}=_0x55fe9e[_0x4b7e70(0x18d)];return this['globalConfigs'];}async['queryFrontConfig'](_0x5605a1,_0x5d542a){const _0x3a4cff=_0x1b80e6,_0x51506a=[_0x3a4cff(0xde),_0x3a4cff(0x103),'registerSendModel3Count',_0x3a4cff(0x15b),_0x3a4cff(0xed),_0x3a4cff(0xfc),_0x3a4cff(0x167),_0x3a4cff(0x12a),_0x3a4cff(0x16e),_0x3a4cff(0xd8),_0x3a4cff(0x185),_0x3a4cff(0x160),'inviteGiveSendModel4Count',_0x3a4cff(0xcc),_0x3a4cff(0x166),_0x3a4cff(0x18b),_0x3a4cff(0x197),_0x3a4cff(0x18a),_0x3a4cff(0x12c),_0x3a4cff(0xe4),_0x3a4cff(0x148),_0x3a4cff(0x14e),'robotAvatar','siteRobotName',_0x3a4cff(0x10c),_0x3a4cff(0x155),_0x3a4cff(0xcd),'payEpayChannel','payMpayChannel','payEpayApiPayUrl',_0x3a4cff(0x136),'payHupiStatus',_0x3a4cff(0xe2),'payMpayStatus','isAutoOpenNotice',_0x3a4cff(0xf1),'salesBaseRatio','salesSeniorRatio',_0x3a4cff(0x144),_0x3a4cff(0x193),_0x3a4cff(0x16b),_0x3a4cff(0x183),_0x3a4cff(0x125),_0x3a4cff(0x14a),_0x3a4cff(0x14f),_0x3a4cff(0xdb),_0x3a4cff(0xe3),_0x3a4cff(0x14d),_0x3a4cff(0x137),_0x3a4cff(0x171),_0x3a4cff(0x15a),_0x3a4cff(0x16f),_0x3a4cff(0x131),_0x3a4cff(0xf2),'appMenuHeaderBgUrl',_0x3a4cff(0x179),_0x3a4cff(0x190),_0x3a4cff(0x198),_0x3a4cff(0x133)],_0x4d0dff=await this[_0x3a4cff(0xfb)][_0x3a4cff(0xff)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x51506a)}}),{domain:_0x294748}=_0x5605a1,_0x17557a=this['globalConfigs'][_0x3a4cff(0x17b)];_0x17557a!==_0x294748&&(this['createOrUpdate']({'configKey':_0x3a4cff(0x17b),'configVal':_0x294748,'status':0x1}),await this[_0x3a4cff(0x13a)]());const _0x426b4c=_0x4d0dff[_0x3a4cff(0x143)]((_0x1826a0,_0x54cb84)=>{const _0x967f8b=_0x3a4cff;return _0x1826a0[_0x54cb84[_0x967f8b(0xf9)]]=_0x54cb84[_0x967f8b(0x169)],_0x1826a0;},{}),{wechatOfficialAppId:_0x2fb083,wechatOfficialAppSecret:_0x5da990}=await this[_0x3a4cff(0xfe)]([_0x3a4cff(0x10d),_0x3a4cff(0x11e)]),_0x463c7a=!!(_0x2fb083&&_0x5da990);return Object[_0x3a4cff(0xeb)](Object['assign']({},_0x426b4c),{'isUseWxLogin':_0x463c7a});}async[_0x1b80e6(0x191)](_0x23b282){const _0x7a280b=_0x1b80e6,{role:_0x57dc50}=_0x23b282['user'],_0x4a0cfd=await this['configEntity'][_0x7a280b(0xff)]({'where':{'configKey':(0x0,typeorm_2[_0x7a280b(0x10f)])('%'+_0x7a280b(0x151)+'%')}});if(_0x57dc50===_0x7a280b(0x163))return _0x4a0cfd;return _0x4a0cfd[_0x7a280b(0x11a)](_0x185a2f=>{const _0x77bb4e=_0x7a280b;return _0x185a2f[_0x77bb4e(0x169)]=(0x0,utils_1['hideString'])(_0x185a2f[_0x77bb4e(0x169)]),_0x185a2f;});}async[_0x1b80e6(0x192)](_0x12023d){const _0x40d96a=_0x1b80e6,_0x52b5ad=_0x12023d[_0x40d96a(0x189)]['filter'](_0x1d2d5e=>_0x1d2d5e[_0x40d96a(0x169)]),_0x4d3e42=_0x52b5ad[_0x40d96a(0x11a)](_0x1e8e83=>_0x1e8e83[_0x40d96a(0xf9)]);for(const [_0xd8d625,_0x716598]of _0x52b5ad[_0x40d96a(0x194)]()){const {configKey:_0x4633ba,configVal:_0x2358a5,status:_0x1d1043}=_0x716598;await this[_0x40d96a(0xd4)]({'configKey':_0x40d96a(0x126)+(_0xd8d625+0x1),'configVal':_0x2358a5,'status':_0x1d1043});}const _0x26a67c=await this[_0x40d96a(0xfb)]['find']({'where':{'configKey':(0x0,typeorm_2[_0x40d96a(0x10f)])('%'+'chatGptKey'+'%')}}),_0x498ab4=_0x26a67c[_0x40d96a(0x11a)](_0x3f3c90=>_0x3f3c90['configKey']);if(_0x498ab4[_0x40d96a(0x116)]>_0x4d3e42[_0x40d96a(0x116)]){const _0x53f721=(0x0,utils_1[_0x40d96a(0x15f)])(_0x498ab4['length'],_0x4d3e42[_0x40d96a(0x116)],_0x40d96a(0x126));for(const _0x4ebff7 of _0x53f721){await this[_0x40d96a(0xfb)][_0x40d96a(0x195)]({'configKey':_0x4ebff7});}}return await this[_0x40d96a(0x13a)](),'操作完成！';}async[_0x1b80e6(0xe7)](_0x55fcd8,_0x12f37f){const _0x39b3c7=_0x1b80e6,{role:_0x57f642}=_0x12f37f[_0x39b3c7(0x18d)],{keys:_0x3678ae}=_0x55fcd8,_0x22f95d=await this[_0x39b3c7(0xfb)][_0x39b3c7(0xff)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x3678ae)}});return _0x57f642!=='super'&&_0x22f95d[_0x39b3c7(0xdd)](_0x3e90c0=>{const _0x129a9f=_0x39b3c7;if(_0x3e90c0[_0x129a9f(0xf9)][_0x129a9f(0x17d)]('mj')||_0x3e90c0['configKey'][_0x129a9f(0x17d)](_0x129a9f(0x104))||_0x3e90c0['configKey'][_0x129a9f(0x17d)]('gpt')||_0x3e90c0[_0x129a9f(0xf9)][_0x129a9f(0x17d)](_0x129a9f(0x13d))||_0x3e90c0[_0x129a9f(0xf9)][_0x129a9f(0x17d)](_0x129a9f(0x113))||_0x3e90c0[_0x129a9f(0xf9)]['includes'](_0x129a9f(0x10e))||_0x3e90c0['configKey']['includes']('tencent')||_0x3e90c0[_0x129a9f(0xf9)][_0x129a9f(0x17d)]('pay')||_0x3e90c0[_0x129a9f(0xf9)]['includes'](_0x129a9f(0xe1))||_0x3e90c0[_0x129a9f(0xf9)]['includes'](_0x129a9f(0xf4))||_0x3e90c0['configKey']==='openaiBaseUrl'){const _0x2355ad=['payWeChatPublicKey',_0x129a9f(0xfa)];if(_0x2355ad[_0x129a9f(0x17d)](_0x3e90c0['configKey']))return _0x3e90c0['configVal']=(0x0,utils_1[_0x129a9f(0x135)])(_0x3e90c0[_0x129a9f(0x169)],_0x129a9f(0x17a));const _0x1dd760=[_0x129a9f(0x136),_0x129a9f(0x170),'mjProxy'];!_0x1dd760[_0x129a9f(0x17d)](_0x3e90c0[_0x129a9f(0xf9)])&&!_0x3e90c0[_0x129a9f(0xf9)][_0x129a9f(0x17d)]('Status')&&(_0x3e90c0[_0x129a9f(0x169)]=(0x0,utils_1[_0x129a9f(0x135)])(_0x3e90c0['configVal']));}}),_0x22f95d['reduce']((_0x1d4827,_0xd9ccd2)=>{const _0x54ae02=_0x39b3c7;return _0x1d4827[_0xd9ccd2['configKey']]=_0xd9ccd2[_0x54ae02(0x169)],_0x1d4827;},{});}[_0x1b80e6(0xf8)](){const _0x2e8759=_0x1b80e6,_0x187617=this[_0x2e8759(0x106)][_0x2e8759(0xd2)],_0x5052c1=this[_0x2e8759(0x102)];return!_0x5052c1||Number(_0x187617)===0x1;}async['setConfig'](_0x18d2f9){const _0x5ac545=_0x1b80e6;try{const {settings:_0x1fafcf}=_0x18d2f9;for(const _0x24f169 of _0x1fafcf){await this['createOrUpdate'](_0x24f169);}await this['initGetAllConfig']();const _0x5f9c80=_0x1fafcf[_0x5ac545(0x11a)](_0x2a3cb5=>_0x2a3cb5[_0x5ac545(0xf9)]);return(_0x5f9c80[_0x5ac545(0x17d)](_0x5ac545(0x13b))||_0x5f9c80['includes'](_0x5ac545(0x186)))&&await this[_0x5ac545(0x181)](![]),(_0x5f9c80['includes']('wechatOfficialAppId')||_0x5f9c80[_0x5ac545(0x17d)](_0x5ac545(0x11e)))&&await this[_0x5ac545(0x141)](),_0x5ac545(0x110);}catch(_0x53b78e){console[_0x5ac545(0x120)](_0x5ac545(0x100),_0x53b78e);}}async['createOrUpdate'](_0x487dfc){const _0x547256=_0x1b80e6;try{const {configKey:_0x520fd8,configVal:_0x16cd14,status:status=0x1}=_0x487dfc,_0x6112a0=await this[_0x547256(0xfb)][_0x547256(0xee)]({'where':{'configKey':_0x520fd8}});if(_0x6112a0){const _0x3d2d40=await this[_0x547256(0xfb)][_0x547256(0x12b)]({'configKey':_0x520fd8},{'configVal':_0x16cd14,'status':status});}else{const _0x3a5315=await this['configEntity']['save']({'configKey':_0x520fd8,'configVal':_0x16cd14,'status':status});}}catch(_0x357a75){console[_0x547256(0x120)](_0x547256(0x100),_0x357a75);throw new common_1[(_0x547256(0x142))](_0x547256(0x165),common_1[_0x547256(0x14c)][_0x547256(0x13c)]);}}async[_0x1b80e6(0x157)](){const _0x2b893f=_0x1b80e6;return await this[_0x2b893f(0xfe)]([_0x2b893f(0xe6),_0x2b893f(0x10a)]);}async[_0x1b80e6(0x176)](){const _0x570a59=_0x1b80e6;return await this[_0x570a59(0xfe)]([_0x570a59(0x153),_0x570a59(0x108)]);}async['queryPayType'](){const _0x329949=_0x1b80e6,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this[_0x329949(0xfe)](['payHupiStatus',_0x329949(0x136),_0x329949(0x188),_0x329949(0xe2)]);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus][_0x329949(0x16a)](_0x20cdc6=>_0x20cdc6===0x0))throw new common_1[(_0x329949(0x142))](_0x329949(0x17c),common_1[_0x329949(0x14c)][_0x329949(0x13c)]);if(Number(payWechatStatus)===0x1)return'wechat';if(Number(payEpayStatus)===0x1)return _0x329949(0xcf);if(Number(payMpayStatus)===0x1)return _0x329949(0x13e);if(Number(payHupiStatus)===0x1)return _0x329949(0xea);}async[_0x1b80e6(0x11b)](){const _0x385e10=_0x1b80e6,{siteName:_0x11361f,qqNumber:_0xaa9356,vxNumber:_0x1a082f,registerBaseUrl:_0x4eb468,domain:_0x5a859e}=await this['getConfigs']([_0x385e10(0x14e),_0x385e10(0x123),_0x385e10(0xde),_0x385e10(0x12d),_0x385e10(0x17b)]);return{'siteName':_0x11361f,'qqNumber':_0xaa9356,'vxNumber':_0x1a082f,'registerBaseUrl':_0x4eb468,'domain':_0x5a859e};}async[_0x1b80e6(0x178)](){const _0x33ac58=_0x1b80e6,{phoneRegisterStatus:_0x1d6ca1,aliPhoneAccessKeyId:_0x27a8b6,aliPhoneAccessKeySecret:_0x265d76,aliPhoneSignName:_0x59bfa6,aliPhoneTemplateCode:_0x8bbdc8}=await this[_0x33ac58(0xfe)]([_0x33ac58(0x183),_0x33ac58(0x154),'aliPhoneAccessKeySecret','aliPhoneSignName',_0x33ac58(0x122)]);if(Number(_0x1d6ca1)!==0x1)throw new common_1[(_0x33ac58(0x142))](_0x33ac58(0x15d),common_1[_0x33ac58(0x14c)][_0x33ac58(0x13c)]);return{'accessKeyId':_0x27a8b6,'accessKeySecret':_0x265d76,'SignName':_0x59bfa6,'TemplateCode':_0x8bbdc8};}async[_0x1b80e6(0x149)](){const _0x51afe9=_0x1b80e6,{qcloudPhoneRegisterStatus:_0x1f8d46,qcloudSecretId:_0x376bbe,qcloudSecretKey:_0x5e10a0,qcloudPhoneSignName:_0x551d1f,qcloudSMSTemplateId:_0x57be76,qcloudSMSSDKAppId:_0x29ac93}=await this[_0x51afe9(0xfe)]([_0x51afe9(0x125),'qcloudSecretId',_0x51afe9(0xdf),_0x51afe9(0x130),'qcloudSMSTemplateId','qcloudSMSSDKAppId']);if(Number(_0x1f8d46)!==0x1)throw new common_1['HttpException'](_0x51afe9(0x15d),common_1['HttpStatus'][_0x51afe9(0x13c)]);return{'secretId':_0x376bbe,'secretKey':_0x5e10a0,'signName':_0x551d1f,'templateId':_0x57be76,'sdkAppId':_0x29ac93};}[_0x1b80e6(0x121)](){const _0x26c163=_0x1b80e6;return process[_0x26c163(0x132)][_0x26c163(0x118)]||_0x26c163(0xdc);}async[_0x1b80e6(0xce)](){const _0x1fd31a=_0x1b80e6,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this['getConfigs']([_0x1fd31a(0x171),_0x1fd31a(0x15a),_0x1fd31a(0x16f),_0x1fd31a(0x131)]);if(Number(signInStatus)!==0x1)throw new common_1[(_0x1fd31a(0x142))](_0x1fd31a(0x109),common_1[_0x1fd31a(0x14c)][_0x1fd31a(0x13c)]);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async['auth'](){const _0x141e55=_0x1b80e6,_0x145358=_0x141e55(0xd0),_0x57a376=await fetch(_0x145358,{}),_0x10c663=await _0x57a376['json'](),{success:success=!![],message:_0x5cc9c3}=_0x10c663;common_1[_0x141e55(0x182)][_0x141e55(0x150)](_0x141e55(0xe8)),common_1['Logger']['error'](_0x141e55(0xd1)),common_1['Logger'][_0x141e55(0x150)](_0x141e55(0x180)),common_1[_0x141e55(0x182)][_0x141e55(0x150)](_0x141e55(0x180)),common_1[_0x141e55(0x182)]['debug']('感谢您使用NineAi、祝您使用愉快~');}async[_0x1b80e6(0x147)](){const _0x31d9f1=_0x1b80e6,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x569a21,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x2aede0,nineaiBuiltInSensitiveAuthKey:_0x5d03a0}=await this[_0x31d9f1(0xfe)](['baiduTextStatus',_0x31d9f1(0x140),_0x31d9f1(0xd7),'nineaiBuiltInSensitiveApiBase','nineaiBuiltInSensitiveAuthKey']);if(Number(baiduTextStatus)===0x1)return{'useType':_0x31d9f1(0x113),'baiduTextAccessToken':_0x569a21};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':_0x31d9f1(0x15c),'nineaiBuiltInSensitiveApiBase':_0x2aede0,'nineaiBuiltInSensitiveAuthKey':_0x5d03a0};return null;}};GlobalConfigService=__decorate([(0x0,common_1[_0x1b80e6(0x14b)])(),__param(0x0,(0x0,typeorm_1[_0x1b80e6(0x18c)])(config_entity_1['ConfigEntity'])),__param(0x1,(0x0,typeorm_1[_0x1b80e6(0x18c)])(chatLog_entity_1[_0x1b80e6(0x152)])),__metadata(_0x1b80e6(0x119),[typeorm_2[_0x1b80e6(0x134)],typeorm_2[_0x1b80e6(0x134)],models_service_1['ModelsService']])],GlobalConfigService),exports[_0x1b80e6(0x139)]=GlobalConfigService;