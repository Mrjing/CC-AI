'use strict';const _0x300098=_0x4894;function _0x4894(_0x3672ae,_0x44abce){const _0x851240=_0x8512();return _0x4894=function(_0x4894fb,_0x3f9a6e){_0x4894fb=_0x4894fb-0x1bc;let _0x576e42=_0x851240[_0x4894fb];return _0x576e42;},_0x4894(_0x3672ae,_0x44abce);}(function(_0x16821f,_0x12d09a){const _0x48123f=_0x4894,_0x4f4b74=_0x16821f();while(!![]){try{const _0x2245e3=parseInt(_0x48123f(0x1c0))/0x1+parseInt(_0x48123f(0x1e6))/0x2+-parseInt(_0x48123f(0x252))/0x3+-parseInt(_0x48123f(0x1d2))/0x4+parseInt(_0x48123f(0x1da))/0x5+parseInt(_0x48123f(0x238))/0x6+-parseInt(_0x48123f(0x254))/0x7;if(_0x2245e3===_0x12d09a)break;else _0x4f4b74['push'](_0x4f4b74['shift']());}catch(_0x8c7db1){_0x4f4b74['push'](_0x4f4b74['shift']());}}}(_0x8512,0xb204a));var __decorate=this&&this[_0x300098(0x23b)]||function(_0x4e4ee7,_0x3074fc,_0x2f8d2a,_0x4dc20e){const _0x57b99b=_0x300098;var _0x5b5b68=arguments['length'],_0x255fb4=_0x5b5b68<0x3?_0x3074fc:_0x4dc20e===null?_0x4dc20e=Object[_0x57b99b(0x211)](_0x3074fc,_0x2f8d2a):_0x4dc20e,_0x21d112;if(typeof Reflect===_0x57b99b(0x234)&&typeof Reflect[_0x57b99b(0x268)]===_0x57b99b(0x209))_0x255fb4=Reflect['decorate'](_0x4e4ee7,_0x3074fc,_0x2f8d2a,_0x4dc20e);else{for(var _0x197b56=_0x4e4ee7['length']-0x1;_0x197b56>=0x0;_0x197b56--)if(_0x21d112=_0x4e4ee7[_0x197b56])_0x255fb4=(_0x5b5b68<0x3?_0x21d112(_0x255fb4):_0x5b5b68>0x3?_0x21d112(_0x3074fc,_0x2f8d2a,_0x255fb4):_0x21d112(_0x3074fc,_0x2f8d2a))||_0x255fb4;}return _0x5b5b68>0x3&&_0x255fb4&&Object[_0x57b99b(0x1ec)](_0x3074fc,_0x2f8d2a,_0x255fb4),_0x255fb4;},__metadata=this&&this[_0x300098(0x276)]||function(_0x259d25,_0x2e2f01){const _0x324c63=_0x300098;if(typeof Reflect===_0x324c63(0x234)&&typeof Reflect[_0x324c63(0x221)]==='function')return Reflect[_0x324c63(0x221)](_0x259d25,_0x2e2f01);},__param=this&&this[_0x300098(0x1cf)]||function(_0x1c3e1b,_0x428e81){return function(_0x12b52f,_0x2be141){_0x428e81(_0x12b52f,_0x2be141,_0x1c3e1b);};};Object['defineProperty'](exports,_0x300098(0x26c),{'value':!![]}),exports[_0x300098(0x271)]=void 0x0;const models_service_1=require('../models/models.service'),chatLog_entity_1=require('../chatLog/chatLog.entity'),common_1=require('@nestjs/common'),config_entity_1=require(_0x300098(0x25c)),typeorm_1=require(_0x300098(0x1d1)),typeorm_2=require(_0x300098(0x1ff)),utils_1=require(_0x300098(0x1ea)),axios_1=require(_0x300098(0x26b)),fs=require('fs'),packageJsonContent=fs['readFileSync'](_0x300098(0x1f2),_0x300098(0x25b)),packageJson=JSON[_0x300098(0x281)](packageJsonContent),version=packageJson[_0x300098(0x273)];console[_0x300098(0x1bc)]('\x20current\x20use\x20version\x20in\x20------>:\x20',version);function _0x8512(){const _0x336811=['nineai','payEpayApiPayUrl','wechatOfficialAppSecret','json','wechatAccessToken','wechat\x20refresh\x20access_token\x20\x20==>\x20','aliPhoneAccessKeyId','TRUE','error_description','&client_secret=','firstRegisterSendStatus','https://api.jiangly.com/api/permission/auth','payWeChatPrivateKey','779964ylDGiD','ISDEV','1194466rvyOEi','getWechatAccessToken','aliPhoneSignName','appMenuHeaderTips','签到功能暂未开放!','configs','qcloudPhoneRegisterStatus','utf-8','./config.entity','getAuthInfo','hupi','wechatOfficialAppId','mjProxyImgUrl','百度敏感词配置检测失败，您的参数可能配置的不正确!','缺失ip信息','queryFrontConfig','firstRregisterSendDrawMjCount','aliPhoneTemplateCode','emailRegisterStatus','post','decorate','Logger','companyName','axios','__esModule','save','openaiBaseUrl','registerBaseUrl','aliPhoneAccessKeySecret','GlobalConfigService','NAMESPACE','version','initGetAllConfig','includes','__metadata','设置完成！','Like','payMpayChannel','fetchBaseAccessToken','configEntity','access_token','baiduTextStatus','isShowAppCatIcon','操作完成！','copyrightTitle','parse','clientFavoIconPath','手机验证码功能暂未开放!','获取微信access_token失败、错误信息：','Status','请按要求填写正确的授权信息','getCopyright','update','payWechatStatus','chatGptKey','请填写您的授权码','setGptKeys','log','fetchJsapiTicket','HttpStatus','signInStatus','453141NBdhEJ','registerSendStatus','error','length','isVerifyEmail','nineaiBuiltInSensitiveStatus','wechatSilentLoginStatus','response','baiduTextSecretKey','error:\x20','wechatJsapiTicket','mjProxy','baidu','assign','robotAvatar','__param','OfficialService','@nestjs/typeorm','3298836GhXYDH','auth','data','appMenuHeaderBgUrl','firstRregisterSendModel3Count','setConfig','gpt','isAutoOpenNotice','256935BdRETj','signInModel4Count','createOrUpdate','configVal','请配置正确的秘钥、当前秘钥检测不通过！','隐私内容、非超级管理员无权查看','wechat','onModuleInit','client_credential','Key','clientLogoPath','InjectRepository','571690lgJQHi','get','configKey','mjHideWorkIn','../../common/utils','&grant_type=client_credentials','defineProperty','https://aip.baidubce.com/oauth/2.0/token?client_id=','还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！','clientHomePath','queryConfig','nineAiToken','package.json','globalConfigs','getSensitiveConfig','salesSeniorRatio','getPhoneVerifyConfig','firstRegisterSendRank','phoneRegisterStatus','Injectable','signInModel3Count','map','entries','emailLoginStatus','application/json','typeorm','payEpayChannel','design:paramtypes','super','env','Repository','find','initBaiduSensitive','支付功能暂未开放!','getSignatureGiftConfig','function','baiduTextAccessToken','invitedGuestSendModel4Count','chatGptKey:','payHupiStatus','mjHideNotBlock','qcloudSecretKey','BAD_REQUEST','getOwnPropertyDescriptor','default','baiduCode','reduce','forEach','MjdrawCount','https://api.weixin.qq.com/cgi-bin/stable_token','qcloudSMSSDKAppId','qcloudSecretId','delete','HttpException','siteName','baiduTextApiKey','queryNotice','invitedGuestSendModel3Count','getConfigs','metadata','mpay','NINEAI','qcloudSMSTemplateId','invitedGuestSendDrawMjCount','isUseWxLogin','filter','queryPayType','inviteSendStatus','registerSendModel4Count','inviteGiveSendModel4Count','nineaiBuiltInSensitiveApiBase','ConfigEntity','firstRregisterSendModel4Count','inviteGiveSendDrawMjCount','tencent','user','ChatLogEntity','domain','object','buyCramiAddress','payMpayStatus','signInMjDrawToken','7164744SwsUXx','百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!','noticeInfo','__decorate','getDiffArray','modelsService','payWeChatPublicKey','qqNumber','findOne','wechatRegisterStatus','payEpayStatus','vxNumber','epay'];_0x8512=function(){return _0x336811;};return _0x8512();}let GlobalConfigService=class GlobalConfigService{constructor(_0x461554,_0x3c588a,_0x20a276){const _0xd26d66=_0x300098;this[_0xd26d66(0x27b)]=_0x461554,this['chatLogEntity']=_0x3c588a,this[_0xd26d66(0x23d)]=_0x20a276,this['globalConfigs']={},this[_0xd26d66(0x1f1)]=!![];}async[_0x300098(0x1e1)](){const _0x26cffd=_0x300098;await this[_0x26cffd(0x274)]();}async[_0x300098(0x220)](_0x7623db){const _0x141263=_0x300098;if(_0x7623db[_0x141263(0x1c3)]===0x0)return;if(_0x7623db[_0x141263(0x275)](_0x141263(0x249))&&_0x7623db[_0x141263(0x1c3)]===0x1)return this[_0x141263(0x249)];if(_0x7623db[_0x141263(0x275)]('wechatJsapiTicket')&&_0x7623db[_0x141263(0x1c3)]===0x1)return this[_0x141263(0x1ca)];if(_0x7623db[_0x141263(0x1c3)]===0x1)return this['globalConfigs'][_0x7623db[0x0]];else{const _0x3d751f={};return _0x7623db[_0x141263(0x215)](_0x407ba0=>_0x3d751f[_0x407ba0]=this['globalConfigs'][_0x407ba0]),_0x3d751f;}}async[_0x300098(0x274)](){const _0x25745c=_0x300098,_0x26e8f5=await this[_0x25745c(0x27b)][_0x25745c(0x205)]();this[_0x25745c(0x1f3)]=_0x26e8f5[_0x25745c(0x214)]((_0x337cfd,_0x4cd7e3)=>{const _0x5097f4=_0x25745c;return _0x337cfd[_0x4cd7e3['configKey']]=_0x4cd7e3[_0x5097f4(0x1dd)],_0x337cfd;},{}),this[_0x25745c(0x206)]();}async[_0x300098(0x206)](_0x335751=!![]){const _0x1058fe=_0x300098,{baiduTextApiKey:_0x4c2ac6,baiduTextSecretKey:_0x36c642}=await this['getConfigs']([_0x1058fe(0x21d),_0x1058fe(0x1c8)]);if(!_0x4c2ac6||!_0x36c642){common_1[_0x1058fe(0x269)][_0x1058fe(0x1c2)](_0x1058fe(0x239),_0x1058fe(0x271));return;}const _0x1660f3={'Content-Type':'application/json','Accept':_0x1058fe(0x1fe)},_0x3c5e7c=_0x1058fe(0x1ed)+_0x4c2ac6+_0x1058fe(0x24e)+_0x36c642+_0x1058fe(0x1eb);try{const _0x29c859=await axios_1[_0x1058fe(0x212)][_0x1058fe(0x267)](_0x3c5e7c,{'headers':_0x1660f3});this[_0x1058fe(0x1f3)][_0x1058fe(0x20a)]=_0x29c859[_0x1058fe(0x1d4)][_0x1058fe(0x27c)];}catch(_0x2de631){if(_0x335751)common_1['Logger'][_0x1058fe(0x1c2)](_0x1058fe(0x261),_0x1058fe(0x271));else throw new common_1[(_0x1058fe(0x21b))](_0x2de631[_0x1058fe(0x1c7)][_0x1058fe(0x1d4)][_0x1058fe(0x24d)],common_1[_0x1058fe(0x1be)][_0x1058fe(0x210)]);}}async[_0x300098(0x255)](_0x591bb5=![]){const _0x1f6a1a=_0x300098;console[_0x1f6a1a(0x1bc)]('调了一次刷access_token');const {wechatOfficialAppId:_0x325f4f,wechatOfficialAppSecret:_0x5b49d7}=await this[_0x1f6a1a(0x220)]([_0x1f6a1a(0x25f),_0x1f6a1a(0x247)]);if(!_0x325f4f||!_0x5b49d7)return common_1['Logger']['error'](_0x1f6a1a(0x1ee),_0x1f6a1a(0x1d0));this[_0x1f6a1a(0x249)]=await this['fetchBaseAccessToken'](_0x325f4f,_0x5b49d7,_0x591bb5),this[_0x1f6a1a(0x1ca)]=await this['fetchJsapiTicket'](this[_0x1f6a1a(0x249)]),common_1[_0x1f6a1a(0x269)][_0x1f6a1a(0x1bc)](_0x1f6a1a(0x24a)+this['wechatAccessToken'],'OfficialService');}async[_0x300098(0x27a)](_0x1ff768,_0x474ed1,_0x7651e6=![]){const _0x536eaf=_0x300098;if(process[_0x536eaf(0x203)][_0x536eaf(0x253)]===_0x536eaf(0x24c)){this[_0x536eaf(0x249)]='';return;}const {data:{errmsg:_0x2b15a0,access_token:_0x360707,expires_in:_0x1388bb}}=await axios_1[_0x536eaf(0x212)][_0x536eaf(0x267)](_0x536eaf(0x217),{'grant_type':_0x536eaf(0x1e2),'appid':_0x1ff768,'secret':_0x474ed1});console['log'](_0x536eaf(0x27c),_0x360707,_0x1388bb);if(_0x2b15a0){console[_0x536eaf(0x1bc)]('errMsg',_0x2b15a0);if(_0x7651e6)common_1[_0x536eaf(0x269)][_0x536eaf(0x1c2)](_0x536eaf(0x284)+_0x2b15a0,_0x536eaf(0x1d0));else throw new common_1[(_0x536eaf(0x21b))](_0x536eaf(0x1de),common_1[_0x536eaf(0x1be)][_0x536eaf(0x210)]);return'';}return _0x360707;}async[_0x300098(0x1bd)](_0x33196e){const _0x539da3=_0x300098;var _0x320d47;if(process[_0x539da3(0x203)][_0x539da3(0x253)]===_0x539da3(0x24c)){this[_0x539da3(0x1ca)]='';return;}const _0x1254f8=await axios_1[_0x539da3(0x212)][_0x539da3(0x1e7)]('https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token='+_0x33196e+'&type=jsapi');return(_0x320d47=_0x1254f8===null||_0x1254f8===void 0x0?void 0x0:_0x1254f8[_0x539da3(0x1d4)])===null||_0x320d47===void 0x0?void 0x0:_0x320d47['ticket'];}async['queryAllConfig'](_0x579891){const _0x4dc2b0=_0x300098,{role:_0x5bfd59}=_0x579891[_0x4dc2b0(0x231)];return this[_0x4dc2b0(0x1f3)];}async[_0x300098(0x263)](_0x4b81cb,_0x1c88c0){const _0xc7e3c8=_0x300098,_0xf185c1=[_0xc7e3c8(0x243),_0xc7e3c8(0x1c1),'registerSendModel3Count',_0xc7e3c8(0x22a),'registerSendDrawMjCount',_0xc7e3c8(0x24f),_0xc7e3c8(0x1f7),_0xc7e3c8(0x1d6),_0xc7e3c8(0x22e),_0xc7e3c8(0x264),_0xc7e3c8(0x229),'inviteGiveSendModel3Count',_0xc7e3c8(0x22b),_0xc7e3c8(0x22f),_0xc7e3c8(0x21f),_0xc7e3c8(0x20b),_0xc7e3c8(0x225),_0xc7e3c8(0x1ef),_0xc7e3c8(0x1e4),_0xc7e3c8(0x282),_0xc7e3c8(0x226),'siteName',_0xc7e3c8(0x1ce),'siteRobotName',_0xc7e3c8(0x235),'mindDefaultData',_0xc7e3c8(0x213),_0xc7e3c8(0x200),_0xc7e3c8(0x279),_0xc7e3c8(0x246),_0xc7e3c8(0x242),_0xc7e3c8(0x20d),_0xc7e3c8(0x289),_0xc7e3c8(0x236),_0xc7e3c8(0x1d9),_0xc7e3c8(0x27e),'salesBaseRatio',_0xc7e3c8(0x1f5),'salesAllowDrawMoney',_0xc7e3c8(0x26a),'filingNumber','phoneRegisterStatus',_0xc7e3c8(0x25a),_0xc7e3c8(0x266),_0xc7e3c8(0x1fd),'phoneLoginStatus','qcloudPhoneLoginStatus',_0xc7e3c8(0x241),_0xc7e3c8(0x1c6),'signInStatus',_0xc7e3c8(0x1fa),_0xc7e3c8(0x1db),_0xc7e3c8(0x237),_0xc7e3c8(0x257),_0xc7e3c8(0x1d5),'mjUseBaiduFy',_0xc7e3c8(0x20e),_0xc7e3c8(0x1e9),_0xc7e3c8(0x1c4)],_0x1a4e21=await this['configEntity'][_0xc7e3c8(0x205)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0xf185c1)}}),{domain:_0x231dd0}=_0x4b81cb,_0xce76b4=this[_0xc7e3c8(0x1f3)][_0xc7e3c8(0x233)];_0xce76b4!==_0x231dd0&&(this[_0xc7e3c8(0x1dc)]({'configKey':_0xc7e3c8(0x233),'configVal':_0x231dd0,'status':0x1}),await this[_0xc7e3c8(0x274)]());const _0x4a6da9=_0x1a4e21[_0xc7e3c8(0x214)]((_0x4aae0b,_0x6ec5d3)=>{const _0x19c441=_0xc7e3c8;return _0x4aae0b[_0x6ec5d3[_0x19c441(0x1e8)]]=_0x6ec5d3['configVal'],_0x4aae0b;},{}),{wechatOfficialAppId:_0x355e41,wechatOfficialAppSecret:_0x490127}=await this[_0xc7e3c8(0x220)]([_0xc7e3c8(0x25f),'wechatOfficialAppSecret']),_0x8c5f0d=!!(_0x355e41&&_0x490127);return Object[_0xc7e3c8(0x1cd)](Object[_0xc7e3c8(0x1cd)]({},_0x4a6da9),{'isUseWxLogin':_0x8c5f0d});}async['queryGptKeys'](_0x1f1a7a){const _0xa9c0f8=_0x300098,{role:_0x19801d}=_0x1f1a7a['user'],_0x1bcc96=await this[_0xa9c0f8(0x27b)][_0xa9c0f8(0x205)]({'where':{'configKey':(0x0,typeorm_2['Like'])('%'+'chatGptKey'+'%')}});if(_0x19801d===_0xa9c0f8(0x202))return _0x1bcc96;return _0x1bcc96[_0xa9c0f8(0x1fb)](_0x216fb8=>{const _0x32ef7c=_0xa9c0f8;return _0x216fb8[_0x32ef7c(0x1dd)]=(0x0,utils_1['hideString'])(_0x216fb8['configVal']),_0x216fb8;});}async[_0x300098(0x28c)](_0x4a62e1){const _0x38903f=_0x300098,_0x5dae7d=_0x4a62e1[_0x38903f(0x259)][_0x38903f(0x227)](_0x20b6f1=>_0x20b6f1['configVal']),_0x1ae005=_0x5dae7d[_0x38903f(0x1fb)](_0x4fbeda=>_0x4fbeda['configKey']);for(const [_0x3956a7,_0x1aaa26]of _0x5dae7d[_0x38903f(0x1fc)]()){const {configKey:_0x4bf147,configVal:_0x261b15,status:_0x5f4c61}=_0x1aaa26;await this[_0x38903f(0x1dc)]({'configKey':_0x38903f(0x20c)+(_0x3956a7+0x1),'configVal':_0x261b15,'status':_0x5f4c61});}const _0x3e75b3=await this[_0x38903f(0x27b)][_0x38903f(0x205)]({'where':{'configKey':(0x0,typeorm_2[_0x38903f(0x278)])('%'+_0x38903f(0x28a)+'%')}}),_0x236ad7=_0x3e75b3['map'](_0x44585b=>_0x44585b[_0x38903f(0x1e8)]);if(_0x236ad7['length']>_0x1ae005[_0x38903f(0x1c3)]){const _0x559a78=(0x0,utils_1[_0x38903f(0x23c)])(_0x236ad7[_0x38903f(0x1c3)],_0x1ae005['length'],_0x38903f(0x20c));for(const _0x13c6c5 of _0x559a78){await this[_0x38903f(0x27b)][_0x38903f(0x21a)]({'configKey':_0x13c6c5});}}return await this[_0x38903f(0x274)](),_0x38903f(0x27f);}async[_0x300098(0x1f0)](_0xa0a26e,_0x1ffd6e){const _0x134933=_0x300098,{role:_0x2ee217}=_0x1ffd6e[_0x134933(0x231)],{keys:_0x1c0057}=_0xa0a26e,_0xb0d28e=await this[_0x134933(0x27b)][_0x134933(0x205)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x1c0057)}});return _0x2ee217!==_0x134933(0x202)&&_0xb0d28e[_0x134933(0x215)](_0x308d89=>{const _0x3894e8=_0x134933;if(_0x308d89[_0x3894e8(0x1e8)][_0x3894e8(0x275)]('mj')||_0x308d89[_0x3894e8(0x1e8)]['includes'](_0x3894e8(0x1e3))||_0x308d89['configKey'][_0x3894e8(0x275)](_0x3894e8(0x1d8))||_0x308d89[_0x3894e8(0x1e8)][_0x3894e8(0x275)]('cos')||_0x308d89[_0x3894e8(0x1e8)][_0x3894e8(0x275)]('baidu')||_0x308d89[_0x3894e8(0x1e8)][_0x3894e8(0x275)]('ali')||_0x308d89['configKey'][_0x3894e8(0x275)](_0x3894e8(0x230))||_0x308d89[_0x3894e8(0x1e8)][_0x3894e8(0x275)]('pay')||_0x308d89[_0x3894e8(0x1e8)][_0x3894e8(0x275)](_0x3894e8(0x1e0))||_0x308d89[_0x3894e8(0x1e8)][_0x3894e8(0x275)](_0x3894e8(0x260))||_0x308d89[_0x3894e8(0x1e8)]===_0x3894e8(0x26e)){const _0x4a2f40=[_0x3894e8(0x23e),_0x3894e8(0x251)];if(_0x4a2f40[_0x3894e8(0x275)](_0x308d89[_0x3894e8(0x1e8)]))return _0x308d89[_0x3894e8(0x1dd)]=(0x0,utils_1['hideString'])(_0x308d89[_0x3894e8(0x1dd)],_0x3894e8(0x1df));const _0x4da929=[_0x3894e8(0x242),_0x3894e8(0x20d),_0x3894e8(0x1cb)];!_0x4da929[_0x3894e8(0x275)](_0x308d89[_0x3894e8(0x1e8)])&&!_0x308d89['configKey']['includes'](_0x3894e8(0x285))&&(_0x308d89['configVal']=(0x0,utils_1['hideString'])(_0x308d89[_0x3894e8(0x1dd)]));}}),_0xb0d28e['reduce']((_0x145010,_0x461a31)=>{const _0x2b3889=_0x134933;return _0x145010[_0x461a31['configKey']]=_0x461a31[_0x2b3889(0x1dd)],_0x145010;},{});}['getNineAiToken'](){const _0xafc3f7=_0x300098,_0x4a056c=this['globalConfigs'][_0xafc3f7(0x216)],_0xde6385=this[_0xafc3f7(0x1f1)];return!_0xde6385||Number(_0x4a056c)===0x1;}async[_0x300098(0x1d7)](_0x8a9c32){const _0x3484db=_0x300098;try{const {settings:_0x45498c}=_0x8a9c32;for(const _0x47b1bc of _0x45498c){await this[_0x3484db(0x1dc)](_0x47b1bc);}await this[_0x3484db(0x274)]();const _0x295c04=_0x45498c[_0x3484db(0x1fb)](_0x44a040=>_0x44a040[_0x3484db(0x1e8)]);return(_0x295c04[_0x3484db(0x275)](_0x3484db(0x21d))||_0x295c04['includes'](_0x3484db(0x1c8)))&&await this['initBaiduSensitive'](![]),(_0x295c04[_0x3484db(0x275)]('wechatOfficialAppId')||_0x295c04[_0x3484db(0x275)](_0x3484db(0x247)))&&await this[_0x3484db(0x255)](),_0x3484db(0x277);}catch(_0x52b317){console[_0x3484db(0x1bc)](_0x3484db(0x1c9),_0x52b317);}}async['createOrUpdate'](_0x1c96cb){const _0x3df75a=_0x300098;try{const {configKey:_0x15493f,configVal:_0x3a7e98,status:status=0x1}=_0x1c96cb,_0x35ef86=await this[_0x3df75a(0x27b)][_0x3df75a(0x240)]({'where':{'configKey':_0x15493f}});if(_0x35ef86){const _0x3ef0b9=await this[_0x3df75a(0x27b)][_0x3df75a(0x288)]({'configKey':_0x15493f},{'configVal':_0x3a7e98,'status':status});}else{const _0x45cdec=await this[_0x3df75a(0x27b)][_0x3df75a(0x26d)]({'configKey':_0x15493f,'configVal':_0x3a7e98,'status':status});}}catch(_0x2f36c9){console[_0x3df75a(0x1bc)](_0x3df75a(0x1c9),_0x2f36c9);throw new common_1[(_0x3df75a(0x21b))]('设置配置信息错误！',common_1[_0x3df75a(0x1be)]['BAD_REQUEST']);}}async[_0x300098(0x21e)](){const _0xcd50eb=_0x300098;return await this[_0xcd50eb(0x220)]([_0xcd50eb(0x23a),'noticeTitle']);}async[_0x300098(0x287)](){const _0x55db69=_0x300098;return await this['getConfigs'](['copyrightUrl',_0x55db69(0x280)]);}async[_0x300098(0x228)](){const _0x3d36d2=_0x300098,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this[_0x3d36d2(0x220)](['payHupiStatus',_0x3d36d2(0x242),_0x3d36d2(0x236),_0x3d36d2(0x289)]);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus]['every'](_0x5a0e16=>_0x5a0e16===0x0))throw new common_1[(_0x3d36d2(0x21b))](_0x3d36d2(0x207),common_1[_0x3d36d2(0x1be)]['BAD_REQUEST']);if(Number(payWechatStatus)===0x1)return _0x3d36d2(0x1e0);if(Number(payEpayStatus)===0x1)return _0x3d36d2(0x244);if(Number(payMpayStatus)===0x1)return _0x3d36d2(0x222);if(Number(payHupiStatus)===0x1)return _0x3d36d2(0x25e);}async[_0x300098(0x25d)](){const _0x458d25=_0x300098,{siteName:_0x1d6019,qqNumber:_0x2ac559,vxNumber:_0x334120,registerBaseUrl:_0x38b64b,domain:_0x2f27b6}=await this[_0x458d25(0x220)]([_0x458d25(0x21c),_0x458d25(0x23f),_0x458d25(0x243),_0x458d25(0x26f),_0x458d25(0x233)]);return{'siteName':_0x1d6019,'qqNumber':_0x2ac559,'vxNumber':_0x334120,'registerBaseUrl':_0x38b64b,'domain':_0x2f27b6};}async[_0x300098(0x1f6)](){const _0x54d048=_0x300098,{phoneRegisterStatus:_0x496dbf,aliPhoneAccessKeyId:_0x30479f,aliPhoneAccessKeySecret:_0x4b4768,aliPhoneSignName:_0x57c064,aliPhoneTemplateCode:_0x59fcb4}=await this[_0x54d048(0x220)]([_0x54d048(0x1f8),_0x54d048(0x24b),_0x54d048(0x270),_0x54d048(0x256),_0x54d048(0x265)]);if(Number(_0x496dbf)!==0x1)throw new common_1[(_0x54d048(0x21b))](_0x54d048(0x283),common_1['HttpStatus'][_0x54d048(0x210)]);return{'accessKeyId':_0x30479f,'accessKeySecret':_0x4b4768,'SignName':_0x57c064,'TemplateCode':_0x59fcb4};}async['getQcloudPhoneVerifyConfig'](){const _0x1fd5b5=_0x300098,{qcloudPhoneRegisterStatus:_0x41faa9,qcloudSecretId:_0x3ab2db,qcloudSecretKey:_0x33297b,qcloudPhoneSignName:_0x29160f,qcloudSMSTemplateId:_0x36c0f1,qcloudSMSSDKAppId:_0x59cb28}=await this['getConfigs'](['qcloudPhoneRegisterStatus',_0x1fd5b5(0x219),_0x1fd5b5(0x20f),'qcloudPhoneSignName',_0x1fd5b5(0x224),_0x1fd5b5(0x218)]);if(Number(_0x41faa9)!==0x1)throw new common_1[(_0x1fd5b5(0x21b))](_0x1fd5b5(0x283),common_1[_0x1fd5b5(0x1be)][_0x1fd5b5(0x210)]);return{'secretId':_0x3ab2db,'secretKey':_0x33297b,'signName':_0x29160f,'templateId':_0x36c0f1,'sdkAppId':_0x59cb28};}['getNamespace'](){const _0x32f8af=_0x300098;return process[_0x32f8af(0x203)][_0x32f8af(0x272)]||_0x32f8af(0x223);}async[_0x300098(0x208)](){const _0x54a692=_0x300098,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this[_0x54a692(0x220)]([_0x54a692(0x1bf),'signInModel3Count',_0x54a692(0x1db),_0x54a692(0x237)]);if(Number(signInStatus)!==0x1)throw new common_1['HttpException'](_0x54a692(0x258),common_1[_0x54a692(0x1be)][_0x54a692(0x210)]);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async[_0x300098(0x1d3)](){const _0x26245e=_0x300098,_0x2fa9f1=_0x26245e(0x250),_0x34145e=await fetch(_0x2fa9f1,{}),_0x15cb35=await _0x34145e[_0x26245e(0x248)](),{success:success=!![],message:_0x5a5bf2}=_0x15cb35;common_1[_0x26245e(0x269)][_0x26245e(0x1c2)](_0x26245e(0x286)),common_1[_0x26245e(0x269)]['error'](_0x26245e(0x28b)),common_1['Logger']['error'](_0x26245e(0x262)),common_1['Logger']['error'](_0x26245e(0x262)),common_1[_0x26245e(0x269)]['debug']('感谢您使用NineAi、祝您使用愉快~');}async[_0x300098(0x1f4)](){const _0x406364=_0x300098,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x205431,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x414604,nineaiBuiltInSensitiveAuthKey:_0x2e2edd}=await this[_0x406364(0x220)]([_0x406364(0x27d),_0x406364(0x20a),_0x406364(0x1c5),_0x406364(0x22c),'nineaiBuiltInSensitiveAuthKey']);if(Number(baiduTextStatus)===0x1)return{'useType':_0x406364(0x1cc),'baiduTextAccessToken':_0x205431};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':_0x406364(0x245),'nineaiBuiltInSensitiveApiBase':_0x414604,'nineaiBuiltInSensitiveAuthKey':_0x2e2edd};return null;}};GlobalConfigService=__decorate([(0x0,common_1[_0x300098(0x1f9)])(),__param(0x0,(0x0,typeorm_1[_0x300098(0x1e5)])(config_entity_1[_0x300098(0x22d)])),__param(0x1,(0x0,typeorm_1[_0x300098(0x1e5)])(chatLog_entity_1[_0x300098(0x232)])),__metadata(_0x300098(0x201),[typeorm_2[_0x300098(0x204)],typeorm_2[_0x300098(0x204)],models_service_1['ModelsService']])],GlobalConfigService),exports[_0x300098(0x271)]=GlobalConfigService;