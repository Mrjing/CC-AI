'use strict';const _0x158adb=_0x1421;function _0x4e33(){const _0x1c4ca5=['auth','fetchJsapiTicket','salesBaseRatio','application/json','wechatAccessToken','操作完成！','ISDEV','package.json','cos','../../common/utils','queryGptKeys','firstRregisterSendDrawMjCount','errMsg','decorate','inviteSendStatus','Logger','get','baiduTextSecretKey','emailRegisterStatus','qqNumber','BAD_REQUEST','getDiffArray','buyCramiAddress','ticket','payWeChatPublicKey','error','Key','env','@nestjs/common','payEpayStatus','180bNHVVU','百度敏感词配置检测失败，您的参数可能配置的不正确!','getAuthInfo','copyrightTitle','20404mgqfOg','clientHomePath','isAutoOpenNotice','map','registerSendDrawMjCount','domain','firstRegisterSendRank','aliPhoneTemplateCode','salesSeniorRatio','signInMjDrawToken','registerSendModel3Count','emailLoginStatus','手机验证码功能暂未开放!','mjHideNotBlock','epay','default','log','Repository','error_description','nineaiBuiltInSensitiveAuthKey','hideString','aliPhoneAccessKeyId','siteRobotName','qcloudSecretId','payEpayApiPayUrl','8YWEbOf','3546918gaMKkY','phoneRegisterStatus','mjHideWorkIn','siteName','design:paramtypes','firstRegisterSendStatus','queryConfig','baiduTextStatus','signInModel3Count','noticeTitle','baidu','@nestjs/typeorm','initGetAllConfig','modelsService','metadata','1056921iVjNua','queryFrontConfig','firstRregisterSendModel3Count','wechatSilentLoginStatus','chatLogEntity','getOwnPropertyDescriptor','GlobalConfigService','appMenuHeaderBgUrl','wechatOfficialAppId','1339160NFAtUC','payWeChatPrivateKey','setConfig','configVal','filter','chatGptKey','registerSendModel4Count','ChatLogEntity','reduce','configKey','wechat','请按要求填写正确的授权信息','../chatLog/chatLog.entity','response','https://aip.baidubce.com/oauth/2.0/token?client_id=','qcloudSMSSDKAppId','object','appMenuHeaderTips','forEach','mjUseBaiduFy','getConfigs','invitedGuestSendDrawMjCount','baiduCode','copyrightUrl','super','companyName','&secret=','NINEAI','entries','获取微信access_token失败、错误信息：','Injectable','getWechatAccessToken','Like','__decorate','请填写您的授权码','queryNotice','qcloudSecretKey','TRUE','salesAllowDrawMoney','wechatJsapiTicket','wechatRegisterStatus','InjectRepository','baiduTextApiKey','user','configs','&grant_type=client_credentials','filingNumber','registerBaseUrl','qcloudPhoneSignName','设置完成！','wechat\x20refresh\x20access_token\x20\x20==>\x20','202138XOvjoO','payHupiStatus','inviteGiveSendModel4Count','https://api.jiangly.com/api/permission/auth','invitedGuestSendModel4Count','&type=jsapi','initBaiduSensitive','includes','robotAvatar','invitedGuestSendModel3Count','onModuleInit','find','queryPayType','baiduTextAccessToken','fetchBaseAccessToken','noticeInfo','\x20current\x20use\x20version\x20in\x20------>:\x20','assign','post','createOrUpdate','OfficialService','getPhoneVerifyConfig','json','4415299nMcUGK','缺失ip信息','configEntity','mindDefaultData','感谢您使用NineAi、祝您使用愉快~','&client_secret=','aliPhoneAccessKeySecret','__esModule','设置配置信息错误！','signInModel4Count','358226hZkNuy','hupi','HttpException','typeorm','mpay','globalConfigs','data','clientFavoIconPath','utf-8','signInStatus','chatGptKey:','__param','length','inviteGiveSendModel3Count','error:\x20','nineaiBuiltInSensitiveStatus','payWechatStatus','pay','../models/models.service','HttpStatus','wechatOfficialAppSecret','gpt','payMpayStatus','update','getNineAiToken','getSignatureGiftConfig','https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=','325yQNfqI','openaiBaseUrl','请配置正确的秘钥、当前秘钥检测不通过！','isUseWxLogin'];_0x4e33=function(){return _0x1c4ca5;};return _0x4e33();}(function(_0x1d0968,_0x4fc680){const _0x5b8343=_0x1421,_0x444ad2=_0x1d0968();while(!![]){try{const _0x469614=-parseInt(_0x5b8343(0x12f))/0x1+-parseInt(_0x5b8343(0x150))/0x2+-parseInt(_0x5b8343(0x1ba))/0x3+parseInt(_0x5b8343(0x191))/0x4*(-parseInt(_0x5b8343(0x16b))/0x5)+-parseInt(_0x5b8343(0x1ab))/0x6+parseInt(_0x5b8343(0x146))/0x7*(-parseInt(_0x5b8343(0x1aa))/0x8)+parseInt(_0x5b8343(0x18d))/0x9*(parseInt(_0x5b8343(0x1c3))/0xa);if(_0x469614===_0x4fc680)break;else _0x444ad2['push'](_0x444ad2['shift']());}catch(_0x5931c1){_0x444ad2['push'](_0x444ad2['shift']());}}}(_0x4e33,0x5f877));var __decorate=this&&this[_0x158adb(0x11d)]||function(_0xbb7a60,_0x12636e,_0x166698,_0x303250){const _0x35a7ec=_0x158adb;var _0x5238ce=arguments['length'],_0x3a1080=_0x5238ce<0x3?_0x12636e:_0x303250===null?_0x303250=Object[_0x35a7ec(0x1bf)](_0x12636e,_0x166698):_0x303250,_0x44e119;if(typeof Reflect===_0x35a7ec(0x1d3)&&typeof Reflect['decorate']==='function')_0x3a1080=Reflect[_0x35a7ec(0x17c)](_0xbb7a60,_0x12636e,_0x166698,_0x303250);else{for(var _0x390d73=_0xbb7a60['length']-0x1;_0x390d73>=0x0;_0x390d73--)if(_0x44e119=_0xbb7a60[_0x390d73])_0x3a1080=(_0x5238ce<0x3?_0x44e119(_0x3a1080):_0x5238ce>0x3?_0x44e119(_0x12636e,_0x166698,_0x3a1080):_0x44e119(_0x12636e,_0x166698))||_0x3a1080;}return _0x5238ce>0x3&&_0x3a1080&&Object['defineProperty'](_0x12636e,_0x166698,_0x3a1080),_0x3a1080;},__metadata=this&&this['__metadata']||function(_0x3aef28,_0x3cffaa){const _0x13fd32=_0x158adb;if(typeof Reflect===_0x13fd32(0x1d3)&&typeof Reflect[_0x13fd32(0x1b9)]==='function')return Reflect[_0x13fd32(0x1b9)](_0x3aef28,_0x3cffaa);},__param=this&&this[_0x158adb(0x15b)]||function(_0x36ffba,_0x30adbf){return function(_0x252d2c,_0x19604){_0x30adbf(_0x252d2c,_0x19604,_0x36ffba);};};function _0x1421(_0x296753,_0x39a85b){const _0x4e332f=_0x4e33();return _0x1421=function(_0x142192,_0x248a20){_0x142192=_0x142192-0x111;let _0x486aa6=_0x4e332f[_0x142192];return _0x486aa6;},_0x1421(_0x296753,_0x39a85b);}Object['defineProperty'](exports,_0x158adb(0x14d),{'value':!![]}),exports[_0x158adb(0x1c0)]=void 0x0;const models_service_1=require(_0x158adb(0x162)),chatLog_entity_1=require(_0x158adb(0x1cf)),common_1=require(_0x158adb(0x18b)),config_entity_1=require('./config.entity'),typeorm_1=require(_0x158adb(0x1b6)),typeorm_2=require(_0x158adb(0x153)),utils_1=require(_0x158adb(0x178)),axios_1=require('axios'),fs=require('fs'),packageJsonContent=fs['readFileSync'](_0x158adb(0x176),_0x158adb(0x158)),packageJson=JSON['parse'](packageJsonContent),version=packageJson['version'];console[_0x158adb(0x1a1)](_0x158adb(0x13f),version);let GlobalConfigService=class GlobalConfigService{constructor(_0x34c8b3,_0x480c86,_0x85d8d1){const _0x1ba375=_0x158adb;this['configEntity']=_0x34c8b3,this[_0x1ba375(0x1be)]=_0x480c86,this[_0x1ba375(0x1b8)]=_0x85d8d1,this[_0x1ba375(0x155)]={},this['nineAiToken']=!![];}async[_0x158adb(0x139)](){await this['initGetAllConfig']();}async['getConfigs'](_0x1723fc){const _0x237371=_0x158adb;if(_0x1723fc['length']===0x0)return;if(_0x1723fc[_0x237371(0x136)](_0x237371(0x173))&&_0x1723fc[_0x237371(0x15c)]===0x1)return this[_0x237371(0x173)];if(_0x1723fc[_0x237371(0x136)]('wechatJsapiTicket')&&_0x1723fc[_0x237371(0x15c)]===0x1)return this['wechatJsapiTicket'];if(_0x1723fc[_0x237371(0x15c)]===0x1)return this['globalConfigs'][_0x1723fc[0x0]];else{const _0x1823b0={};return _0x1723fc[_0x237371(0x1d5)](_0x36c2c2=>_0x1823b0[_0x36c2c2]=this[_0x237371(0x155)][_0x36c2c2]),_0x1823b0;}}async[_0x158adb(0x1b7)](){const _0x3506fe=_0x158adb,_0x5390ac=await this['configEntity'][_0x3506fe(0x13a)]();this['globalConfigs']=_0x5390ac[_0x3506fe(0x1cb)]((_0x227d88,_0x43388f)=>{return _0x227d88[_0x43388f['configKey']]=_0x43388f['configVal'],_0x227d88;},{}),this[_0x3506fe(0x135)]();}async[_0x158adb(0x135)](_0x1bf7c7=!![]){const _0x284225=_0x158adb,{baiduTextApiKey:_0x5f2c33,baiduTextSecretKey:_0x4fab3d}=await this[_0x284225(0x1d7)]([_0x284225(0x126),_0x284225(0x180)]);if(!_0x5f2c33||!_0x4fab3d){common_1[_0x284225(0x17e)][_0x284225(0x188)]('百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!',_0x284225(0x1c0));return;}const _0x5decc6={'Content-Type':'application/json','Accept':_0x284225(0x172)},_0x3523a2=_0x284225(0x1d1)+_0x5f2c33+_0x284225(0x14b)+_0x4fab3d+_0x284225(0x129);try{const _0x2a862f=await axios_1['default'][_0x284225(0x141)](_0x3523a2,{'headers':_0x5decc6});this[_0x284225(0x155)]['baiduTextAccessToken']=_0x2a862f[_0x284225(0x156)]['access_token'];}catch(_0x1d1e0f){if(_0x1bf7c7)common_1[_0x284225(0x17e)][_0x284225(0x188)](_0x284225(0x18e),'GlobalConfigService');else throw new common_1[(_0x284225(0x152))](_0x1d1e0f[_0x284225(0x1d0)]['data'][_0x284225(0x1a3)],common_1[_0x284225(0x163)]['BAD_REQUEST']);}}async[_0x158adb(0x11b)](_0x2f55ab=![]){const _0x53de15=_0x158adb,{wechatOfficialAppId:_0x3d1296,wechatOfficialAppSecret:_0xb5fbf0}=await this['getConfigs'](['wechatOfficialAppId','wechatOfficialAppSecret']);if(!_0x3d1296||!_0xb5fbf0)return common_1[_0x53de15(0x17e)][_0x53de15(0x188)]('还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！',_0x53de15(0x143));this[_0x53de15(0x173)]=await this[_0x53de15(0x13d)](_0x3d1296,_0xb5fbf0,_0x2f55ab),this['wechatJsapiTicket']=await this[_0x53de15(0x170)](this[_0x53de15(0x173)]),common_1[_0x53de15(0x17e)]['log'](_0x53de15(0x12e)+this['wechatAccessToken'],_0x53de15(0x143));}async[_0x158adb(0x13d)](_0x5ad217,_0x359b02,_0x2f26ef=![]){const _0x4e9186=_0x158adb;if(process['env'][_0x4e9186(0x175)]===_0x4e9186(0x121)){this[_0x4e9186(0x173)]='';return;}const {data:{errmsg:_0x2e39b9,access_token:_0x4c408d}}=await axios_1[_0x4e9186(0x1a0)][_0x4e9186(0x17f)](_0x4e9186(0x16a)+_0x5ad217+_0x4e9186(0x116)+_0x359b02);if(_0x2e39b9){console[_0x4e9186(0x1a1)](_0x4e9186(0x17b),_0x2e39b9);if(_0x2f26ef)common_1[_0x4e9186(0x17e)][_0x4e9186(0x188)](_0x4e9186(0x119)+_0x2e39b9,'OfficialService');else throw new common_1[(_0x4e9186(0x152))](_0x4e9186(0x16d),common_1[_0x4e9186(0x163)][_0x4e9186(0x183)]);return'';}return _0x4c408d;}async[_0x158adb(0x170)](_0x34efd3){const _0x16c24b=_0x158adb;var _0x203fad;if(process[_0x16c24b(0x18a)][_0x16c24b(0x175)]===_0x16c24b(0x121)){this[_0x16c24b(0x123)]='';return;}const _0x482033=await axios_1['default'][_0x16c24b(0x17f)]('https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token='+_0x34efd3+_0x16c24b(0x134));return(_0x203fad=_0x482033===null||_0x482033===void 0x0?void 0x0:_0x482033[_0x16c24b(0x156)])===null||_0x203fad===void 0x0?void 0x0:_0x203fad[_0x16c24b(0x186)];}async['queryAllConfig'](_0x111235){const _0x1ad31d=_0x158adb,{role:_0x14c19a}=_0x111235[_0x1ad31d(0x127)];return this[_0x1ad31d(0x155)];}async[_0x158adb(0x1bb)](_0x200d25,_0x698800){const _0x3bb6b1=_0x158adb,_0x5e464b=['vxNumber','registerSendStatus',_0x3bb6b1(0x19b),_0x3bb6b1(0x1c9),_0x3bb6b1(0x195),_0x3bb6b1(0x1b0),_0x3bb6b1(0x197),_0x3bb6b1(0x1bc),'firstRregisterSendModel4Count',_0x3bb6b1(0x17a),_0x3bb6b1(0x17d),_0x3bb6b1(0x15d),_0x3bb6b1(0x131),'inviteGiveSendDrawMjCount',_0x3bb6b1(0x138),_0x3bb6b1(0x133),_0x3bb6b1(0x111),_0x3bb6b1(0x192),'clientLogoPath',_0x3bb6b1(0x157),_0x3bb6b1(0x16e),_0x3bb6b1(0x1ae),_0x3bb6b1(0x137),_0x3bb6b1(0x1a7),_0x3bb6b1(0x185),_0x3bb6b1(0x149),_0x3bb6b1(0x112),'payEpayChannel','payMpayChannel',_0x3bb6b1(0x1a9),_0x3bb6b1(0x18c),_0x3bb6b1(0x130),_0x3bb6b1(0x160),_0x3bb6b1(0x166),_0x3bb6b1(0x193),'isShowAppCatIcon',_0x3bb6b1(0x171),_0x3bb6b1(0x199),_0x3bb6b1(0x122),_0x3bb6b1(0x115),_0x3bb6b1(0x12a),_0x3bb6b1(0x1ac),'qcloudPhoneRegisterStatus',_0x3bb6b1(0x181),_0x3bb6b1(0x19c),'phoneLoginStatus','qcloudPhoneLoginStatus',_0x3bb6b1(0x124),_0x3bb6b1(0x1bd),_0x3bb6b1(0x159),_0x3bb6b1(0x1b3),_0x3bb6b1(0x14f),_0x3bb6b1(0x19a),_0x3bb6b1(0x1d4),_0x3bb6b1(0x1c1),_0x3bb6b1(0x1d6),_0x3bb6b1(0x19e),_0x3bb6b1(0x1ad),'isVerifyEmail'],_0x1d117d=await this[_0x3bb6b1(0x148)][_0x3bb6b1(0x13a)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x5e464b)}}),{domain:_0x1920c1}=_0x200d25,_0x2914ee=this[_0x3bb6b1(0x155)][_0x3bb6b1(0x196)];_0x2914ee!==_0x1920c1&&(this['createOrUpdate']({'configKey':_0x3bb6b1(0x196),'configVal':_0x1920c1,'status':0x1}),await this[_0x3bb6b1(0x1b7)]());const _0x2a27c6=_0x1d117d[_0x3bb6b1(0x1cb)]((_0x2a8974,_0x393594)=>{const _0x12da65=_0x3bb6b1;return _0x2a8974[_0x393594['configKey']]=_0x393594[_0x12da65(0x1c6)],_0x2a8974;},{}),{wechatOfficialAppId:_0x246b44,wechatOfficialAppSecret:_0x18e265}=await this[_0x3bb6b1(0x1d7)]([_0x3bb6b1(0x1c2),_0x3bb6b1(0x164)]),_0x2b963c=!!(_0x246b44&&_0x18e265);return Object[_0x3bb6b1(0x140)](Object[_0x3bb6b1(0x140)]({},_0x2a27c6),{'isUseWxLogin':_0x2b963c});}async[_0x158adb(0x179)](_0x59c548){const _0x153f43=_0x158adb,{role:_0xd4d279}=_0x59c548[_0x153f43(0x127)],_0x414582=await this[_0x153f43(0x148)][_0x153f43(0x13a)]({'where':{'configKey':(0x0,typeorm_2[_0x153f43(0x11c)])('%'+_0x153f43(0x1c8)+'%')}});if(_0xd4d279==='super')return _0x414582;return _0x414582[_0x153f43(0x194)](_0xfb750=>{const _0x41d736=_0x153f43;return _0xfb750[_0x41d736(0x1c6)]=(0x0,utils_1[_0x41d736(0x1a5)])(_0xfb750['configVal']),_0xfb750;});}async['setGptKeys'](_0x309674){const _0x2e37ea=_0x158adb,_0x474487=_0x309674[_0x2e37ea(0x128)][_0x2e37ea(0x1c7)](_0x391b48=>_0x391b48['configVal']),_0x38ad6a=_0x474487[_0x2e37ea(0x194)](_0x4a1c74=>_0x4a1c74[_0x2e37ea(0x1cc)]);for(const [_0x22389d,_0x5c1eca]of _0x474487[_0x2e37ea(0x118)]()){const {configKey:_0x20cc10,configVal:_0x1c553c,status:_0x1f15dc}=_0x5c1eca;await this[_0x2e37ea(0x142)]({'configKey':_0x2e37ea(0x15a)+(_0x22389d+0x1),'configVal':_0x1c553c,'status':_0x1f15dc});}const _0x5ddbd6=await this['configEntity'][_0x2e37ea(0x13a)]({'where':{'configKey':(0x0,typeorm_2[_0x2e37ea(0x11c)])('%'+_0x2e37ea(0x1c8)+'%')}}),_0x5d894f=_0x5ddbd6['map'](_0x4780bf=>_0x4780bf[_0x2e37ea(0x1cc)]);if(_0x5d894f['length']>_0x38ad6a[_0x2e37ea(0x15c)]){const _0x3a5511=(0x0,utils_1[_0x2e37ea(0x184)])(_0x5d894f['length'],_0x38ad6a['length'],_0x2e37ea(0x15a));for(const _0x44dadc of _0x3a5511){await this[_0x2e37ea(0x148)]['delete']({'configKey':_0x44dadc});}}return await this[_0x2e37ea(0x1b7)](),_0x2e37ea(0x174);}async[_0x158adb(0x1b1)](_0x527db3,_0x5ba014){const _0x565018=_0x158adb,{role:_0x7d3825}=_0x5ba014[_0x565018(0x127)],{keys:_0x36eb18}=_0x527db3,_0x4433d0=await this[_0x565018(0x148)][_0x565018(0x13a)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x36eb18)}});return _0x7d3825!==_0x565018(0x114)&&_0x4433d0[_0x565018(0x1d5)](_0x549e99=>{const _0x3f91f5=_0x565018;if(_0x549e99[_0x3f91f5(0x1cc)]['includes']('mj')||_0x549e99[_0x3f91f5(0x1cc)][_0x3f91f5(0x136)](_0x3f91f5(0x189))||_0x549e99['configKey'][_0x3f91f5(0x136)](_0x3f91f5(0x165))||_0x549e99[_0x3f91f5(0x1cc)][_0x3f91f5(0x136)](_0x3f91f5(0x177))||_0x549e99[_0x3f91f5(0x1cc)][_0x3f91f5(0x136)]('baidu')||_0x549e99[_0x3f91f5(0x1cc)][_0x3f91f5(0x136)]('ali')||_0x549e99[_0x3f91f5(0x1cc)][_0x3f91f5(0x136)]('tencent')||_0x549e99[_0x3f91f5(0x1cc)][_0x3f91f5(0x136)](_0x3f91f5(0x161))||_0x549e99[_0x3f91f5(0x1cc)][_0x3f91f5(0x136)](_0x3f91f5(0x1cd))||_0x549e99[_0x3f91f5(0x1cc)][_0x3f91f5(0x136)]('mjProxyImgUrl')||_0x549e99[_0x3f91f5(0x1cc)]===_0x3f91f5(0x16c)){const _0x205b2c=[_0x3f91f5(0x187),_0x3f91f5(0x1c4)];if(_0x205b2c[_0x3f91f5(0x136)](_0x549e99[_0x3f91f5(0x1cc)]))return _0x549e99[_0x3f91f5(0x1c6)]=(0x0,utils_1[_0x3f91f5(0x1a5)])(_0x549e99[_0x3f91f5(0x1c6)],'隐私内容、非超级管理员无权查看');const _0x3dcb52=[_0x3f91f5(0x18c),_0x3f91f5(0x130),'mjProxy'];!_0x3dcb52['includes'](_0x549e99[_0x3f91f5(0x1cc)])&&!_0x549e99[_0x3f91f5(0x1cc)][_0x3f91f5(0x136)]('Status')&&(_0x549e99['configVal']=(0x0,utils_1[_0x3f91f5(0x1a5)])(_0x549e99[_0x3f91f5(0x1c6)]));}}),_0x4433d0[_0x565018(0x1cb)]((_0x42f292,_0x3f662d)=>{const _0x55efb6=_0x565018;return _0x42f292[_0x3f662d[_0x55efb6(0x1cc)]]=_0x3f662d[_0x55efb6(0x1c6)],_0x42f292;},{});}[_0x158adb(0x168)](){const _0x2f6336=_0x158adb,_0x8f54a5=this[_0x2f6336(0x155)]['MjdrawCount'],_0x28a156=this['nineAiToken'];return!_0x28a156||Number(_0x8f54a5)===0x1;}async[_0x158adb(0x1c5)](_0x35394c){const _0x281b96=_0x158adb;try{const {settings:_0x3848ac}=_0x35394c;for(const _0x11c00d of _0x3848ac){await this['createOrUpdate'](_0x11c00d);}await this['initGetAllConfig']();const _0x32713f=_0x3848ac[_0x281b96(0x194)](_0x387ca7=>_0x387ca7[_0x281b96(0x1cc)]);return(_0x32713f[_0x281b96(0x136)]('baiduTextApiKey')||_0x32713f['includes'](_0x281b96(0x180)))&&await this['initBaiduSensitive'](![]),(_0x32713f['includes']('wechatOfficialAppId')||_0x32713f[_0x281b96(0x136)](_0x281b96(0x164)))&&await this['getWechatAccessToken'](),_0x281b96(0x12d);}catch(_0x444275){console[_0x281b96(0x1a1)](_0x281b96(0x15e),_0x444275);}}async['createOrUpdate'](_0xff9c69){const _0x4cd10e=_0x158adb;try{const {configKey:_0x2b271e,configVal:_0x3d4748,status:status=0x1}=_0xff9c69,_0x448755=await this[_0x4cd10e(0x148)]['findOne']({'where':{'configKey':_0x2b271e}});if(_0x448755){const _0x23e6b0=await this[_0x4cd10e(0x148)][_0x4cd10e(0x167)]({'configKey':_0x2b271e},{'configVal':_0x3d4748,'status':status});}else{const _0x26bd76=await this[_0x4cd10e(0x148)]['save']({'configKey':_0x2b271e,'configVal':_0x3d4748,'status':status});}}catch(_0x51d1c0){console[_0x4cd10e(0x1a1)](_0x4cd10e(0x15e),_0x51d1c0);throw new common_1[(_0x4cd10e(0x152))](_0x4cd10e(0x14e),common_1[_0x4cd10e(0x163)]['BAD_REQUEST']);}}async[_0x158adb(0x11f)](){const _0x5cbe27=_0x158adb;return await this[_0x5cbe27(0x1d7)]([_0x5cbe27(0x13e),_0x5cbe27(0x1b4)]);}async['getCopyright'](){const _0x247eb9=_0x158adb;return await this[_0x247eb9(0x1d7)]([_0x247eb9(0x113),_0x247eb9(0x190)]);}async[_0x158adb(0x13b)](){const _0x50027b=_0x158adb,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this['getConfigs']([_0x50027b(0x130),'payEpayStatus',_0x50027b(0x166),'payWechatStatus']);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus]['every'](_0x544be6=>_0x544be6===0x0))throw new common_1['HttpException']('支付功能暂未开放!',common_1[_0x50027b(0x163)][_0x50027b(0x183)]);if(Number(payWechatStatus)===0x1)return'wechat';if(Number(payEpayStatus)===0x1)return _0x50027b(0x19f);if(Number(payMpayStatus)===0x1)return _0x50027b(0x154);if(Number(payHupiStatus)===0x1)return _0x50027b(0x151);}async[_0x158adb(0x18f)](){const _0x16efac=_0x158adb,{siteName:_0x3ebec4,qqNumber:_0x2157a,vxNumber:_0x7a6db2,registerBaseUrl:_0x233646,domain:_0x30e628}=await this[_0x16efac(0x1d7)](['siteName',_0x16efac(0x182),'vxNumber',_0x16efac(0x12b),'domain']);return{'siteName':_0x3ebec4,'qqNumber':_0x2157a,'vxNumber':_0x7a6db2,'registerBaseUrl':_0x233646,'domain':_0x30e628};}async[_0x158adb(0x144)](){const _0x1f3750=_0x158adb,{phoneRegisterStatus:_0x5b5960,aliPhoneAccessKeyId:_0xf9637,aliPhoneAccessKeySecret:_0x4b49cd,aliPhoneSignName:_0x413c35,aliPhoneTemplateCode:_0x2d18f4}=await this[_0x1f3750(0x1d7)]([_0x1f3750(0x1ac),_0x1f3750(0x1a6),_0x1f3750(0x14c),'aliPhoneSignName',_0x1f3750(0x198)]);if(Number(_0x5b5960)!==0x1)throw new common_1['HttpException']('手机验证码功能暂未开放!',common_1[_0x1f3750(0x163)][_0x1f3750(0x183)]);return{'accessKeyId':_0xf9637,'accessKeySecret':_0x4b49cd,'SignName':_0x413c35,'TemplateCode':_0x2d18f4};}async['getQcloudPhoneVerifyConfig'](){const _0x4cb09e=_0x158adb,{qcloudPhoneRegisterStatus:_0x382552,qcloudSecretId:_0x29ec7e,qcloudSecretKey:_0x43328e,qcloudPhoneSignName:_0x22fce0,qcloudSMSTemplateId:_0x2421a3,qcloudSMSSDKAppId:_0x46e727}=await this[_0x4cb09e(0x1d7)](['qcloudPhoneRegisterStatus',_0x4cb09e(0x1a8),_0x4cb09e(0x120),_0x4cb09e(0x12c),'qcloudSMSTemplateId',_0x4cb09e(0x1d2)]);if(Number(_0x382552)!==0x1)throw new common_1[(_0x4cb09e(0x152))](_0x4cb09e(0x19d),common_1['HttpStatus'][_0x4cb09e(0x183)]);return{'secretId':_0x29ec7e,'secretKey':_0x43328e,'signName':_0x22fce0,'templateId':_0x2421a3,'sdkAppId':_0x46e727};}['getNamespace'](){const _0x5df1d1=_0x158adb;return process['env']['NAMESPACE']||_0x5df1d1(0x117);}async[_0x158adb(0x169)](){const _0x42d31c=_0x158adb,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this[_0x42d31c(0x1d7)]([_0x42d31c(0x159),_0x42d31c(0x1b3),_0x42d31c(0x14f),_0x42d31c(0x19a)]);if(Number(signInStatus)!==0x1)throw new common_1[(_0x42d31c(0x152))]('签到功能暂未开放!',common_1[_0x42d31c(0x163)][_0x42d31c(0x183)]);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async[_0x158adb(0x16f)](){const _0xac89a8=_0x158adb,_0x2f591f=_0xac89a8(0x132),_0x274b2d=await fetch(_0x2f591f,{}),_0x1464d8=await _0x274b2d[_0xac89a8(0x145)](),{success:success=!![],message:_0x36aa89}=_0x1464d8;common_1[_0xac89a8(0x17e)]['error'](_0xac89a8(0x1ce)),common_1[_0xac89a8(0x17e)][_0xac89a8(0x188)](_0xac89a8(0x11e)),common_1[_0xac89a8(0x17e)]['error'](_0xac89a8(0x147)),common_1[_0xac89a8(0x17e)][_0xac89a8(0x188)]('缺失ip信息'),common_1[_0xac89a8(0x17e)]['debug'](_0xac89a8(0x14a));}async['getSensitiveConfig'](){const _0x3fbfa6=_0x158adb,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x528e6f,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x24e9b8,nineaiBuiltInSensitiveAuthKey:_0xeca50b}=await this[_0x3fbfa6(0x1d7)]([_0x3fbfa6(0x1b2),_0x3fbfa6(0x13c),_0x3fbfa6(0x15f),'nineaiBuiltInSensitiveApiBase',_0x3fbfa6(0x1a4)]);if(Number(baiduTextStatus)===0x1)return{'useType':_0x3fbfa6(0x1b5),'baiduTextAccessToken':_0x528e6f};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':'nineai','nineaiBuiltInSensitiveApiBase':_0x24e9b8,'nineaiBuiltInSensitiveAuthKey':_0xeca50b};return null;}};GlobalConfigService=__decorate([(0x0,common_1[_0x158adb(0x11a)])(),__param(0x0,(0x0,typeorm_1[_0x158adb(0x125)])(config_entity_1['ConfigEntity'])),__param(0x1,(0x0,typeorm_1[_0x158adb(0x125)])(chatLog_entity_1[_0x158adb(0x1ca)])),__metadata(_0x158adb(0x1af),[typeorm_2[_0x158adb(0x1a2)],typeorm_2[_0x158adb(0x1a2)],models_service_1['ModelsService']])],GlobalConfigService),exports[_0x158adb(0x1c0)]=GlobalConfigService;