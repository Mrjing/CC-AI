'use strict';const _0x1ff4df=_0x1e8b;(function(_0x173490,_0x1093e2){const _0x40a28b=_0x1e8b,_0x864dc8=_0x173490();while(!![]){try{const _0x4263d8=-parseInt(_0x40a28b(0x134))/0x1+-parseInt(_0x40a28b(0x139))/0x2+parseInt(_0x40a28b(0xa0))/0x3*(-parseInt(_0x40a28b(0xd0))/0x4)+parseInt(_0x40a28b(0xfd))/0x5*(-parseInt(_0x40a28b(0x107))/0x6)+parseInt(_0x40a28b(0x10a))/0x7*(parseInt(_0x40a28b(0x146))/0x8)+parseInt(_0x40a28b(0xae))/0x9+parseInt(_0x40a28b(0xc2))/0xa;if(_0x4263d8===_0x1093e2)break;else _0x864dc8['push'](_0x864dc8['shift']());}catch(_0x2b84ff){_0x864dc8['push'](_0x864dc8['shift']());}}}(_0x20d6,0x23324));function _0x20d6(){const _0x22e55d=['Logger','noticeTitle','isShowAppCatIcon','payWeChatPrivateKey','wechatOfficialAppSecret','wechatSilentLoginStatus','./config.entity','forEach','delete','getWechatAccessToken','findOne','emailLoginStatus','baiduCode','salesSeniorRatio','__esModule','payMpayStatus','设置完成！','TRUE','configEntity','NINEAI','get','chatLogEntity','aliPhoneAccessKeyId','__param','setConfig','获取微信access_token失败、错误信息：','13506ZGfQvJ','chatGptKey:','registerSendModel4Count','ticket','getNineAiToken','313044RSlGKO','json','payWechatStatus','ConfigEntity','隐私内容、非超级管理员无权查看','请填写您的授权码','../chatLog/chatLog.entity','includes','https://api.jiangly.com/api/permission/auth','parse','getQcloudPhoneVerifyConfig','设置配置信息错误！','getAuthInfo','5032cmQwvZ','debug','OfficialService','signInModel3Count','every','function','hideString','payHupiStatus','fetchJsapiTicket','wechatOfficialAppId','mjProxy','buyCramiAddress','缺失ip信息','qcloudPhoneRegisterStatus','ali','save','salesAllowDrawMoney','cos','signInStatus','data','ModelsService','errMsg','NAMESPACE','@nestjs/typeorm','mpay','Repository','payWeChatPublicKey','isVerifyEmail','clientLogoPath','copyrightTitle','signInModel4Count','Like','请按要求填写正确的授权信息','phoneRegisterStatus','createOrUpdate','queryConfig','application/json','__metadata','1704EwgmVL','https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=','typeorm','robotAvatar','initBaiduSensitive','qcloudSecretId','fetchBaseAccessToken','signInMjDrawToken','感谢您使用NineAi、祝您使用愉快~','log','version','https://aip.baidubce.com/oauth/2.0/token?client_id=','queryNotice','__decorate','368856ZarxZK','object','../../common/utils','baiduTextSecretKey','find','\x20current\x20use\x20version\x20in\x20------>:\x20','nineaiBuiltInSensitiveAuthKey','baiduTextAccessToken','salesBaseRatio','modelsService','epay','error','readFileSync','百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!','configs','clientFavoIconPath','payEpayStatus','firstRregisterSendModel3Count','error:\x20','qcloudPhoneLoginStatus','3226410TrlOpN','response','map','mjHideWorkIn','isAutoOpenNotice','inviteGiveSendModel4Count','baidu','MjdrawCount','initGetAllConfig','wechat','../models/models.service','domain','InjectRepository','entries','632bEJFfo','queryGptKeys','utf-8','defineProperty','HttpStatus','getSensitiveConfig','操作完成！','update','&type=jsapi','decorate','wechat\x20refresh\x20access_token\x20\x20==>\x20','queryAllConfig','Injectable','payEpayChannel','qcloudSMSSDKAppId','firstRregisterSendDrawMjCount','ISDEV','wechatAccessToken','default','setGptKeys','configVal','assign','baiduTextStatus','qcloudSMSTemplateId','globalConfigs','nineaiBuiltInSensitiveStatus','手机验证码功能暂未开放!','getPhoneVerifyConfig','请配置正确的秘钥、当前秘钥检测不通过！','siteName','BAD_REQUEST','package.json','aliPhoneAccessKeySecret','isUseWxLogin','getConfigs','reduce','noticeInfo','mjProxyImgUrl','filter','wechatRegisterStatus','metadata','siteRobotName','chatGptKey','&client_secret=','GlobalConfigService','110485EBgoBG','&secret=','getCopyright','axios','Status','env','length','baiduTextApiKey','firstRegisterSendStatus','user','42iPqExD','qqNumber','wechatJsapiTicket','2170bmSmNY','HttpException','百度敏感词配置检测失败，您的参数可能配置的不正确!','registerSendDrawMjCount','firstRegisterSendRank','configKey','@nestjs/common','inviteSendStatus','super','copyrightUrl','vxNumber','&grant_type=client_credentials','filingNumber','aliPhoneSignName','payEpayApiPayUrl','ChatLogEntity'];_0x20d6=function(){return _0x22e55d;};return _0x20d6();}var __decorate=this&&this[_0x1ff4df(0xad)]||function(_0x1982d6,_0x3ca685,_0x518048,_0x124091){const _0x54c9e7=_0x1ff4df;var _0xe60bf9=arguments[_0x54c9e7(0x103)],_0x5021ad=_0xe60bf9<0x3?_0x3ca685:_0x124091===null?_0x124091=Object['getOwnPropertyDescriptor'](_0x3ca685,_0x518048):_0x124091,_0x6012f6;if(typeof Reflect===_0x54c9e7(0xaf)&&typeof Reflect[_0x54c9e7(0xd9)]==='function')_0x5021ad=Reflect[_0x54c9e7(0xd9)](_0x1982d6,_0x3ca685,_0x518048,_0x124091);else{for(var _0x22e80f=_0x1982d6[_0x54c9e7(0x103)]-0x1;_0x22e80f>=0x0;_0x22e80f--)if(_0x6012f6=_0x1982d6[_0x22e80f])_0x5021ad=(_0xe60bf9<0x3?_0x6012f6(_0x5021ad):_0xe60bf9>0x3?_0x6012f6(_0x3ca685,_0x518048,_0x5021ad):_0x6012f6(_0x3ca685,_0x518048))||_0x5021ad;}return _0xe60bf9>0x3&&_0x5021ad&&Object[_0x54c9e7(0xd3)](_0x3ca685,_0x518048,_0x5021ad),_0x5021ad;},__metadata=this&&this[_0x1ff4df(0x9f)]||function(_0x100c31,_0x429f6d){const _0x1a18d6=_0x1ff4df;if(typeof Reflect==='object'&&typeof Reflect[_0x1a18d6(0xf8)]===_0x1a18d6(0x14b))return Reflect[_0x1a18d6(0xf8)](_0x100c31,_0x429f6d);},__param=this&&this[_0x1ff4df(0x131)]||function(_0x3ab657,_0x29c88a){return function(_0x31ddf7,_0x3aff5b){_0x29c88a(_0x31ddf7,_0x3aff5b,_0x3ab657);};};Object[_0x1ff4df(0xd3)](exports,_0x1ff4df(0x128),{'value':!![]}),exports[_0x1ff4df(0xfc)]=void 0x0;const models_service_1=require(_0x1ff4df(0xcc)),chatLog_entity_1=require(_0x1ff4df(0x13f)),common_1=require(_0x1ff4df(0x110)),config_entity_1=require(_0x1ff4df(0x120)),typeorm_1=require(_0x1ff4df(0x15d)),typeorm_2=require(_0x1ff4df(0xa2)),utils_1=require(_0x1ff4df(0xb0)),axios_1=require(_0x1ff4df(0x100)),fs=require('fs'),packageJsonContent=fs[_0x1ff4df(0xba)](_0x1ff4df(0xef),_0x1ff4df(0xd2)),packageJson=JSON[_0x1ff4df(0x142)](packageJsonContent),version=packageJson[_0x1ff4df(0xaa)];function _0x1e8b(_0x36aff9,_0x59b8e3){const _0x20d655=_0x20d6();return _0x1e8b=function(_0x1e8b77,_0x440017){_0x1e8b77=_0x1e8b77-0x9b;let _0x36ee02=_0x20d655[_0x1e8b77];return _0x36ee02;},_0x1e8b(_0x36aff9,_0x59b8e3);}console[_0x1ff4df(0xa9)](_0x1ff4df(0xb3),version);let GlobalConfigService=class GlobalConfigService{constructor(_0x471cf1,_0x4175ce,_0x3db99c){const _0x5248bc=_0x1ff4df;this[_0x5248bc(0x12c)]=_0x471cf1,this[_0x5248bc(0x12f)]=_0x4175ce,this[_0x5248bc(0xb7)]=_0x3db99c,this[_0x5248bc(0xe8)]={},this['nineAiToken']=!![];}async['onModuleInit'](){const _0x1922e5=_0x1ff4df;await this[_0x1922e5(0xca)]();}async[_0x1ff4df(0xf2)](_0x483515){const _0x4a076b=_0x1ff4df;if(_0x483515['length']===0x0)return;if(_0x483515['includes'](_0x4a076b(0xe1))&&_0x483515[_0x4a076b(0x103)]===0x1)return this['wechatAccessToken'];if(_0x483515[_0x4a076b(0x140)](_0x4a076b(0x109))&&_0x483515[_0x4a076b(0x103)]===0x1)return this[_0x4a076b(0x109)];if(_0x483515[_0x4a076b(0x103)]===0x1)return this[_0x4a076b(0xe8)][_0x483515[0x0]];else{const _0x538fc2={};return _0x483515[_0x4a076b(0x121)](_0x52ab11=>_0x538fc2[_0x52ab11]=this[_0x4a076b(0xe8)][_0x52ab11]),_0x538fc2;}}async['initGetAllConfig'](){const _0x40f80b=_0x1ff4df,_0x38a53c=await this['configEntity']['find']();this['globalConfigs']=_0x38a53c[_0x40f80b(0xf3)]((_0x4be18a,_0x2d8bb0)=>{return _0x4be18a[_0x2d8bb0['configKey']]=_0x2d8bb0['configVal'],_0x4be18a;},{}),this[_0x40f80b(0xa4)]();}async[_0x1ff4df(0xa4)](_0x2857de=!![]){const _0xc97c79=_0x1ff4df,{baiduTextApiKey:_0x1c0976,baiduTextSecretKey:_0x163c6c}=await this[_0xc97c79(0xf2)]([_0xc97c79(0x104),_0xc97c79(0xb1)]);if(!_0x1c0976||!_0x163c6c){common_1[_0xc97c79(0x11a)][_0xc97c79(0xb9)](_0xc97c79(0xbb),_0xc97c79(0xfc));return;}const _0xecc923={'Content-Type':_0xc97c79(0x9e),'Accept':'application/json'},_0x472726=_0xc97c79(0xab)+_0x1c0976+_0xc97c79(0xfb)+_0x163c6c+_0xc97c79(0x115);try{const _0x2a6708=await axios_1[_0xc97c79(0xe2)]['post'](_0x472726,{'headers':_0xecc923});this[_0xc97c79(0xe8)][_0xc97c79(0xb5)]=_0x2a6708[_0xc97c79(0x159)]['access_token'];}catch(_0x410be4){if(_0x2857de)common_1['Logger']['error'](_0xc97c79(0x10c),_0xc97c79(0xfc));else throw new common_1[(_0xc97c79(0x10b))](_0x410be4[_0xc97c79(0xc3)]['data']['error_description'],common_1[_0xc97c79(0xd4)][_0xc97c79(0xee)]);}}async[_0x1ff4df(0x123)](_0x5d1872=![]){const _0x51853f=_0x1ff4df,{wechatOfficialAppId:_0x203802,wechatOfficialAppSecret:_0x66a70b}=await this[_0x51853f(0xf2)](['wechatOfficialAppId',_0x51853f(0x11e)]);if(!_0x203802||!_0x66a70b)return common_1[_0x51853f(0x11a)]['error']('还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！','OfficialService');this[_0x51853f(0xe1)]=await this[_0x51853f(0xa6)](_0x203802,_0x66a70b,_0x5d1872),this[_0x51853f(0x109)]=await this['fetchJsapiTicket'](this[_0x51853f(0xe1)]),common_1[_0x51853f(0x11a)][_0x51853f(0xa9)](_0x51853f(0xda)+this[_0x51853f(0xe1)],_0x51853f(0x148));}async[_0x1ff4df(0xa6)](_0x249cda,_0x31017f,_0x1d324a=![]){const _0x4fadcb=_0x1ff4df;if(process[_0x4fadcb(0x102)][_0x4fadcb(0xe0)]==='TRUE'){this['wechatAccessToken']='';return;}const {data:{errmsg:_0x4f36ff,access_token:_0x4fe850}}=await axios_1[_0x4fadcb(0xe2)]['get']('https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid='+_0x249cda+_0x4fadcb(0xfe)+_0x31017f);if(_0x4f36ff){console[_0x4fadcb(0xa9)](_0x4fadcb(0x15b),_0x4f36ff);if(_0x1d324a)common_1[_0x4fadcb(0x11a)]['error'](_0x4fadcb(0x133)+_0x4f36ff,_0x4fadcb(0x148));else throw new common_1[(_0x4fadcb(0x10b))](_0x4fadcb(0xec),common_1[_0x4fadcb(0xd4)][_0x4fadcb(0xee)]);return'';}return _0x4fe850;}async[_0x1ff4df(0x14e)](_0xd2c547){const _0x2ca330=_0x1ff4df;var _0x39b594;if(process[_0x2ca330(0x102)][_0x2ca330(0xe0)]===_0x2ca330(0x12b)){this[_0x2ca330(0x109)]='';return;}const _0x223c70=await axios_1['default'][_0x2ca330(0x12e)](_0x2ca330(0xa1)+_0xd2c547+_0x2ca330(0xd8));return(_0x39b594=_0x223c70===null||_0x223c70===void 0x0?void 0x0:_0x223c70[_0x2ca330(0x159)])===null||_0x39b594===void 0x0?void 0x0:_0x39b594[_0x2ca330(0x137)];}async[_0x1ff4df(0xdb)](_0x4eb44f){const _0xc5c386=_0x1ff4df,{role:_0x568b3e}=_0x4eb44f[_0xc5c386(0x106)];return this[_0xc5c386(0xe8)];}async['queryFrontConfig'](_0x2322d6,_0x52e4aa){const _0x13f305=_0x1ff4df,_0x4f298d=['vxNumber','registerSendStatus','registerSendModel3Count',_0x13f305(0x136),_0x13f305(0x10d),_0x13f305(0x105),_0x13f305(0x10e),_0x13f305(0xbf),'firstRregisterSendModel4Count',_0x13f305(0xdf),_0x13f305(0x111),'inviteGiveSendModel3Count',_0x13f305(0xc7),'inviteGiveSendDrawMjCount','invitedGuestSendModel3Count','invitedGuestSendModel4Count','invitedGuestSendDrawMjCount','clientHomePath',_0x13f305(0x162),_0x13f305(0xbd),_0x13f305(0xf1),_0x13f305(0xed),_0x13f305(0xa3),_0x13f305(0xf9),_0x13f305(0x151),'mindDefaultData',_0x13f305(0x126),_0x13f305(0xdd),'payMpayChannel',_0x13f305(0x118),_0x13f305(0xbe),_0x13f305(0x14d),'payWechatStatus',_0x13f305(0x129),_0x13f305(0xc6),_0x13f305(0x11c),_0x13f305(0xb6),_0x13f305(0x127),_0x13f305(0x156),'companyName',_0x13f305(0x116),_0x13f305(0x9b),_0x13f305(0x153),'emailRegisterStatus',_0x13f305(0x125),'phoneLoginStatus',_0x13f305(0xc1),_0x13f305(0xf7),_0x13f305(0x11f),_0x13f305(0x158),_0x13f305(0x149),_0x13f305(0x164),_0x13f305(0xa7),'appMenuHeaderTips','appMenuHeaderBgUrl','mjUseBaiduFy','mjHideNotBlock',_0x13f305(0xc5),_0x13f305(0x161)],_0x51eefa=await this[_0x13f305(0x12c)][_0x13f305(0xb2)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x4f298d)}}),{domain:_0x5dcfd3}=_0x2322d6,_0x42a9da=this['globalConfigs']['domain'];_0x42a9da!==_0x5dcfd3&&(this[_0x13f305(0x9c)]({'configKey':_0x13f305(0xcd),'configVal':_0x5dcfd3,'status':0x1}),await this[_0x13f305(0xca)]());const _0x2b392c=_0x51eefa[_0x13f305(0xf3)]((_0x2dfad5,_0x24ec1c)=>{const _0x377f04=_0x13f305;return _0x2dfad5[_0x24ec1c[_0x377f04(0x10f)]]=_0x24ec1c[_0x377f04(0xe4)],_0x2dfad5;},{}),{wechatOfficialAppId:_0x5835a0,wechatOfficialAppSecret:_0x1ed91a}=await this[_0x13f305(0xf2)](['wechatOfficialAppId',_0x13f305(0x11e)]),_0x41b973=!!(_0x5835a0&&_0x1ed91a);return Object[_0x13f305(0xe5)](Object[_0x13f305(0xe5)]({},_0x2b392c),{'isUseWxLogin':_0x41b973});}async[_0x1ff4df(0xd1)](_0x4cb97e){const _0x45a41e=_0x1ff4df,{role:_0x21ca38}=_0x4cb97e[_0x45a41e(0x106)],_0x3855e8=await this['configEntity'][_0x45a41e(0xb2)]({'where':{'configKey':(0x0,typeorm_2[_0x45a41e(0x165)])('%'+_0x45a41e(0xfa)+'%')}});if(_0x21ca38===_0x45a41e(0x112))return _0x3855e8;return _0x3855e8[_0x45a41e(0xc4)](_0x2aad37=>{const _0x2d06e0=_0x45a41e;return _0x2aad37[_0x2d06e0(0xe4)]=(0x0,utils_1['hideString'])(_0x2aad37['configVal']),_0x2aad37;});}async[_0x1ff4df(0xe3)](_0x16f03c){const _0xcbc94c=_0x1ff4df,_0xd6772c=_0x16f03c[_0xcbc94c(0xbc)][_0xcbc94c(0xf6)](_0x2de688=>_0x2de688['configVal']),_0x366d59=_0xd6772c[_0xcbc94c(0xc4)](_0x3fa8c1=>_0x3fa8c1[_0xcbc94c(0x10f)]);for(const [_0x5c421b,_0x5427db]of _0xd6772c[_0xcbc94c(0xcf)]()){const {configKey:_0x2b9641,configVal:_0x3e11c7,status:_0x400423}=_0x5427db;await this[_0xcbc94c(0x9c)]({'configKey':'chatGptKey:'+(_0x5c421b+0x1),'configVal':_0x3e11c7,'status':_0x400423});}const _0x8639b7=await this[_0xcbc94c(0x12c)][_0xcbc94c(0xb2)]({'where':{'configKey':(0x0,typeorm_2[_0xcbc94c(0x165)])('%'+_0xcbc94c(0xfa)+'%')}}),_0x239113=_0x8639b7[_0xcbc94c(0xc4)](_0x4e0604=>_0x4e0604[_0xcbc94c(0x10f)]);if(_0x239113['length']>_0x366d59[_0xcbc94c(0x103)]){const _0x574696=(0x0,utils_1['getDiffArray'])(_0x239113[_0xcbc94c(0x103)],_0x366d59[_0xcbc94c(0x103)],_0xcbc94c(0x135));for(const _0x9e63c3 of _0x574696){await this[_0xcbc94c(0x12c)][_0xcbc94c(0x122)]({'configKey':_0x9e63c3});}}return await this['initGetAllConfig'](),_0xcbc94c(0xd6);}async[_0x1ff4df(0x9d)](_0x1e0e46,_0x45a9cd){const _0x4e8928=_0x1ff4df,{role:_0x24b8d4}=_0x45a9cd[_0x4e8928(0x106)],{keys:_0x5c975e}=_0x1e0e46,_0x36442b=await this[_0x4e8928(0x12c)][_0x4e8928(0xb2)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x5c975e)}});return _0x24b8d4!==_0x4e8928(0x112)&&_0x36442b['forEach'](_0xda6d1b=>{const _0x2d7400=_0x4e8928;if(_0xda6d1b[_0x2d7400(0x10f)][_0x2d7400(0x140)]('mj')||_0xda6d1b[_0x2d7400(0x10f)][_0x2d7400(0x140)]('Key')||_0xda6d1b[_0x2d7400(0x10f)][_0x2d7400(0x140)]('gpt')||_0xda6d1b[_0x2d7400(0x10f)][_0x2d7400(0x140)](_0x2d7400(0x157))||_0xda6d1b['configKey'][_0x2d7400(0x140)]('baidu')||_0xda6d1b[_0x2d7400(0x10f)]['includes'](_0x2d7400(0x154))||_0xda6d1b[_0x2d7400(0x10f)][_0x2d7400(0x140)]('tencent')||_0xda6d1b[_0x2d7400(0x10f)][_0x2d7400(0x140)]('pay')||_0xda6d1b['configKey']['includes'](_0x2d7400(0xcb))||_0xda6d1b[_0x2d7400(0x10f)][_0x2d7400(0x140)](_0x2d7400(0xf5))||_0xda6d1b[_0x2d7400(0x10f)]==='openaiBaseUrl'){const _0x33fcfb=[_0x2d7400(0x160),_0x2d7400(0x11d)];if(_0x33fcfb[_0x2d7400(0x140)](_0xda6d1b[_0x2d7400(0x10f)]))return _0xda6d1b[_0x2d7400(0xe4)]=(0x0,utils_1[_0x2d7400(0x14c)])(_0xda6d1b[_0x2d7400(0xe4)],_0x2d7400(0x13d));const _0x48285e=[_0x2d7400(0xbe),_0x2d7400(0x14d),_0x2d7400(0x150)];!_0x48285e[_0x2d7400(0x140)](_0xda6d1b[_0x2d7400(0x10f)])&&!_0xda6d1b[_0x2d7400(0x10f)][_0x2d7400(0x140)](_0x2d7400(0x101))&&(_0xda6d1b['configVal']=(0x0,utils_1[_0x2d7400(0x14c)])(_0xda6d1b[_0x2d7400(0xe4)]));}}),_0x36442b[_0x4e8928(0xf3)]((_0x48a1b3,_0x469560)=>{const _0x2f4b75=_0x4e8928;return _0x48a1b3[_0x469560[_0x2f4b75(0x10f)]]=_0x469560['configVal'],_0x48a1b3;},{});}[_0x1ff4df(0x138)](){const _0x3b2f45=_0x1ff4df,_0x591348=this[_0x3b2f45(0xe8)][_0x3b2f45(0xc9)],_0x1f2209=this['nineAiToken'];return!_0x1f2209||Number(_0x591348)===0x1;}async[_0x1ff4df(0x132)](_0x24abe5){const _0x442639=_0x1ff4df;try{const {settings:_0x49f337}=_0x24abe5;for(const _0x45e032 of _0x49f337){await this[_0x442639(0x9c)](_0x45e032);}await this[_0x442639(0xca)]();const _0x42aa74=_0x49f337[_0x442639(0xc4)](_0x1acfbb=>_0x1acfbb[_0x442639(0x10f)]);return(_0x42aa74[_0x442639(0x140)](_0x442639(0x104))||_0x42aa74[_0x442639(0x140)]('baiduTextSecretKey'))&&await this[_0x442639(0xa4)](![]),(_0x42aa74[_0x442639(0x140)](_0x442639(0x14f))||_0x42aa74[_0x442639(0x140)](_0x442639(0x11e)))&&await this[_0x442639(0x123)](),_0x442639(0x12a);}catch(_0x52d8b5){console[_0x442639(0xa9)](_0x442639(0xc0),_0x52d8b5);}}async[_0x1ff4df(0x9c)](_0xf92a5b){const _0x55238c=_0x1ff4df;try{const {configKey:_0x116ca0,configVal:_0x5b6955,status:status=0x1}=_0xf92a5b,_0x503c88=await this[_0x55238c(0x12c)][_0x55238c(0x124)]({'where':{'configKey':_0x116ca0}});if(_0x503c88){const _0x2661d8=await this['configEntity'][_0x55238c(0xd7)]({'configKey':_0x116ca0},{'configVal':_0x5b6955,'status':status});}else{const _0x140151=await this[_0x55238c(0x12c)][_0x55238c(0x155)]({'configKey':_0x116ca0,'configVal':_0x5b6955,'status':status});}}catch(_0x39b363){console[_0x55238c(0xa9)]('error:\x20',_0x39b363);throw new common_1[(_0x55238c(0x10b))](_0x55238c(0x144),common_1['HttpStatus'][_0x55238c(0xee)]);}}async[_0x1ff4df(0xac)](){const _0x242f54=_0x1ff4df;return await this[_0x242f54(0xf2)]([_0x242f54(0xf4),_0x242f54(0x11b)]);}async[_0x1ff4df(0xff)](){const _0x5a6c7b=_0x1ff4df;return await this['getConfigs']([_0x5a6c7b(0x113),_0x5a6c7b(0x163)]);}async['queryPayType'](){const _0x445d00=_0x1ff4df,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this[_0x445d00(0xf2)]([_0x445d00(0x14d),_0x445d00(0xbe),_0x445d00(0x129),_0x445d00(0x13b)]);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus][_0x445d00(0x14a)](_0x46cef8=>_0x46cef8===0x0))throw new common_1[(_0x445d00(0x10b))]('支付功能暂未开放!',common_1['HttpStatus'][_0x445d00(0xee)]);if(Number(payWechatStatus)===0x1)return'wechat';if(Number(payEpayStatus)===0x1)return _0x445d00(0xb8);if(Number(payMpayStatus)===0x1)return _0x445d00(0x15e);if(Number(payHupiStatus)===0x1)return'hupi';}async[_0x1ff4df(0x145)](){const _0x5476a1=_0x1ff4df,{siteName:_0x3d0fd6,qqNumber:_0x5826ec,vxNumber:_0x592c06,registerBaseUrl:_0x4e97ca,domain:_0x266c7f}=await this[_0x5476a1(0xf2)]([_0x5476a1(0xed),_0x5476a1(0x108),_0x5476a1(0x114),'registerBaseUrl','domain']);return{'siteName':_0x3d0fd6,'qqNumber':_0x5826ec,'vxNumber':_0x592c06,'registerBaseUrl':_0x4e97ca,'domain':_0x266c7f};}async[_0x1ff4df(0xeb)](){const _0x463937=_0x1ff4df,{phoneRegisterStatus:_0x7195c2,aliPhoneAccessKeyId:_0x3fc5b1,aliPhoneAccessKeySecret:_0x3aef1b,aliPhoneSignName:_0x248513,aliPhoneTemplateCode:_0x5383d6}=await this[_0x463937(0xf2)](['phoneRegisterStatus',_0x463937(0x130),_0x463937(0xf0),_0x463937(0x117),'aliPhoneTemplateCode']);if(Number(_0x7195c2)!==0x1)throw new common_1['HttpException'](_0x463937(0xea),common_1[_0x463937(0xd4)]['BAD_REQUEST']);return{'accessKeyId':_0x3fc5b1,'accessKeySecret':_0x3aef1b,'SignName':_0x248513,'TemplateCode':_0x5383d6};}async[_0x1ff4df(0x143)](){const _0x5538ab=_0x1ff4df,{qcloudPhoneRegisterStatus:_0x9b55cb,qcloudSecretId:_0x467cd6,qcloudSecretKey:_0x715790,qcloudPhoneSignName:_0x65494b,qcloudSMSTemplateId:_0x4923db,qcloudSMSSDKAppId:_0x2e7054}=await this[_0x5538ab(0xf2)]([_0x5538ab(0x153),_0x5538ab(0xa5),'qcloudSecretKey','qcloudPhoneSignName',_0x5538ab(0xe7),_0x5538ab(0xde)]);if(Number(_0x9b55cb)!==0x1)throw new common_1['HttpException']('手机验证码功能暂未开放!',common_1[_0x5538ab(0xd4)][_0x5538ab(0xee)]);return{'secretId':_0x467cd6,'secretKey':_0x715790,'signName':_0x65494b,'templateId':_0x4923db,'sdkAppId':_0x2e7054};}['getNamespace'](){const _0x3d3162=_0x1ff4df;return process[_0x3d3162(0x102)][_0x3d3162(0x15c)]||_0x3d3162(0x12d);}async['getSignatureGiftConfig'](){const _0x3d150d=_0x1ff4df,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this[_0x3d150d(0xf2)]([_0x3d150d(0x158),_0x3d150d(0x149),_0x3d150d(0x164),_0x3d150d(0xa7)]);if(Number(signInStatus)!==0x1)throw new common_1[(_0x3d150d(0x10b))]('签到功能暂未开放!',common_1[_0x3d150d(0xd4)][_0x3d150d(0xee)]);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async['auth'](){const _0x58c34c=_0x1ff4df,_0x54ab47=_0x58c34c(0x141),_0x2d9c46=await fetch(_0x54ab47,{}),_0x5f302f=await _0x2d9c46[_0x58c34c(0x13a)](),{success:success=!![],message:_0x1776a4}=_0x5f302f;common_1[_0x58c34c(0x11a)]['error'](_0x58c34c(0x166)),common_1[_0x58c34c(0x11a)]['error'](_0x58c34c(0x13e)),common_1['Logger']['error'](_0x58c34c(0x152)),common_1[_0x58c34c(0x11a)][_0x58c34c(0xb9)]('缺失ip信息'),common_1[_0x58c34c(0x11a)][_0x58c34c(0x147)](_0x58c34c(0xa8));}async[_0x1ff4df(0xd5)](){const _0xa4a5ba=_0x1ff4df,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x36cca8,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x4afe44,nineaiBuiltInSensitiveAuthKey:_0x1e2b2e}=await this[_0xa4a5ba(0xf2)]([_0xa4a5ba(0xe6),'baiduTextAccessToken',_0xa4a5ba(0xe9),'nineaiBuiltInSensitiveApiBase',_0xa4a5ba(0xb4)]);if(Number(baiduTextStatus)===0x1)return{'useType':_0xa4a5ba(0xc8),'baiduTextAccessToken':_0x36cca8};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':'nineai','nineaiBuiltInSensitiveApiBase':_0x4afe44,'nineaiBuiltInSensitiveAuthKey':_0x1e2b2e};return null;}};GlobalConfigService=__decorate([(0x0,common_1[_0x1ff4df(0xdc)])(),__param(0x0,(0x0,typeorm_1[_0x1ff4df(0xce)])(config_entity_1[_0x1ff4df(0x13c)])),__param(0x1,(0x0,typeorm_1[_0x1ff4df(0xce)])(chatLog_entity_1[_0x1ff4df(0x119)])),__metadata('design:paramtypes',[typeorm_2[_0x1ff4df(0x15f)],typeorm_2['Repository'],models_service_1[_0x1ff4df(0x15a)]])],GlobalConfigService),exports['GlobalConfigService']=GlobalConfigService;