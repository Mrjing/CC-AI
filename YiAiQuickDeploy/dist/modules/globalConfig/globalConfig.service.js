'use strict';const _0x3b5821=_0x37e4;(function(_0xde0471,_0x279f08){const _0x5a4e37=_0x37e4,_0x5dd796=_0xde0471();while(!![]){try{const _0x4ef285=-parseInt(_0x5a4e37(0x199))/0x1*(parseInt(_0x5a4e37(0x14e))/0x2)+parseInt(_0x5a4e37(0x122))/0x3+-parseInt(_0x5a4e37(0x135))/0x4*(parseInt(_0x5a4e37(0x121))/0x5)+parseInt(_0x5a4e37(0xf2))/0x6*(parseInt(_0x5a4e37(0x198))/0x7)+parseInt(_0x5a4e37(0x12b))/0x8+parseInt(_0x5a4e37(0x16e))/0x9*(-parseInt(_0x5a4e37(0x142))/0xa)+-parseInt(_0x5a4e37(0x13a))/0xb*(-parseInt(_0x5a4e37(0x156))/0xc);if(_0x4ef285===_0x279f08)break;else _0x5dd796['push'](_0x5dd796['shift']());}catch(_0x130cbf){_0x5dd796['push'](_0x5dd796['shift']());}}}(_0x1393,0x3866d));function _0x1393(){const _0x809052=['baidu','976720ucNnVM','GlobalConfigService','configs','__esModule','isAutoOpenNotice','getAuthInfo','function','save','super','queryPayType','update','registerBaseUrl','4KpxBGi','wechatSilentLoginStatus','errMsg','queryConfig','auth','access_token','qcloudPhoneLoginStatus','mpay','26976rWBQvY','OfficialService','chatLogEntity','appMenuHeaderBgUrl','reduce','nineaiBuiltInSensitiveAuthKey','forEach','payEpayStatus','copyrightUrl','chatGptKey:','data','ticket','emailRegisterStatus','json','getNineAiToken','log','qcloudSMSSDKAppId','aliPhoneAccessKeyId','signInModel4Count','tencent','clientFavoIconPath','获取微信access_token失败、错误信息：','post','error_description','9qkNjLe','globalConfigs','缺失ip信息','queryFrontConfig','modelsService','https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=','isUseWxLogin','isVerifyEmail','baiduCode','salesAllowDrawMoney','hupi','registerSendDrawMjCount','qcloudSMSTemplateId','wechatRegisterStatus','application/json','BAD_REQUEST','configVal','设置配置信息错误！','ISDEV','@nestjs/common','getNamespace','phoneLoginStatus','wechat','baiduTextSecretKey','domain','HttpException','signInStatus','隐私内容、非超级管理员无权查看','nineaiBuiltInSensitiveApiBase','inviteGiveSendModel4Count','&type=jsapi','companyName','payWeChatPrivateKey','请配置正确的秘钥、当前秘钥检测不通过！','TRUE','utf-8','every','queryNotice','getPhoneVerifyConfig','qcloudSecretKey','设置完成！','HttpStatus','601139nGeAyb','175182JbZVKD','getDiffArray','user','../chatLog/chatLog.entity','default','error','metadata','nineaiBuiltInSensitiveStatus','createOrUpdate','&secret=','baiduTextStatus','assign','includes','hideString','操作完成！','robotAvatar','package.json','MjdrawCount','getCopyright','design:paramtypes','wechatOfficialAppId','firstRregisterSendModel4Count','openaiBaseUrl','wechat\x20refresh\x20access_token\x20\x20==>\x20','mjHideNotBlock','mjUseBaiduFy','https://api.jiangly.com/api/permission/auth','object','请按要求填写正确的授权信息','baiduTextAccessToken','filingNumber','wechatOfficialAppSecret','find','get','parse','fetchJsapiTicket','debug','configKey','Key','payEpayChannel','ModelsService','payMpayStatus','../models/models.service','18spoVuw','wechatAccessToken','@nestjs/typeorm','invitedGuestSendDrawMjCount','qcloudSecretId','queryAllConfig','qqNumber','noticeInfo','noticeTitle','initGetAllConfig','ChatLogEntity','fetchBaseAccessToken','registerSendStatus','Like','payEpayApiPayUrl','aliPhoneSignName','getOwnPropertyDescriptor','nineai','__param','mjProxy','firstRegisterSendRank','clientHomePath','env','siteName','getSignatureGiftConfig','ali','initBaiduSensitive','还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！','getConfigs','phoneRegisterStatus','百度敏感词配置检测失败，您的参数可能配置的不正确!','entries','qcloudPhoneSignName','configEntity','baiduTextApiKey','error:\x20','buyCramiAddress','百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!','__decorate','https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=','请填写您的授权码','inviteSendStatus','epay','nineAiToken','signInModel3Count','invitedGuestSendModel4Count','payWechatStatus','135BFaAxr','687003oCnerg','length','cos','payHupiStatus','registerSendModel4Count','response','delete','chatGptKey','decorate','1811040hNYOsx','Repository','readFileSync','Logger','手机验证码功能暂未开放!','copyrightTitle','inviteGiveSendDrawMjCount','InjectRepository','qcloudPhoneRegisterStatus','defineProperty','19684latVjM','firstRregisterSendDrawMjCount','onModuleInit','getWechatAccessToken','version','484rHoiRs','感谢您使用NineAi、祝您使用愉快~','wechatJsapiTicket','ConfigEntity','&grant_type=client_credentials','queryGptKeys','map'];_0x1393=function(){return _0x809052;};return _0x1393();}function _0x37e4(_0x3dd497,_0x1d996f){const _0x139300=_0x1393();return _0x37e4=function(_0x37e4d,_0x547eae){_0x37e4d=_0x37e4d-0xd4;let _0xbafb83=_0x139300[_0x37e4d];return _0xbafb83;},_0x37e4(_0x3dd497,_0x1d996f);}var __decorate=this&&this[_0x3b5821(0x118)]||function(_0x4faf13,_0x362563,_0x4a9520,_0x37ded3){const _0x251c93=_0x3b5821;var _0x1ea71e=arguments[_0x251c93(0x123)],_0x1c8d36=_0x1ea71e<0x3?_0x362563:_0x37ded3===null?_0x37ded3=Object[_0x251c93(0x102)](_0x362563,_0x4a9520):_0x37ded3,_0x53733f;if(typeof Reflect==='object'&&typeof Reflect[_0x251c93(0x12a)]===_0x251c93(0x148))_0x1c8d36=Reflect[_0x251c93(0x12a)](_0x4faf13,_0x362563,_0x4a9520,_0x37ded3);else{for(var _0xf815ea=_0x4faf13[_0x251c93(0x123)]-0x1;_0xf815ea>=0x0;_0xf815ea--)if(_0x53733f=_0x4faf13[_0xf815ea])_0x1c8d36=(_0x1ea71e<0x3?_0x53733f(_0x1c8d36):_0x1ea71e>0x3?_0x53733f(_0x362563,_0x4a9520,_0x1c8d36):_0x53733f(_0x362563,_0x4a9520))||_0x1c8d36;}return _0x1ea71e>0x3&&_0x1c8d36&&Object[_0x251c93(0x134)](_0x362563,_0x4a9520,_0x1c8d36),_0x1c8d36;},__metadata=this&&this['__metadata']||function(_0x5012cb,_0x1a736c){const _0x2809fd=_0x3b5821;if(typeof Reflect===_0x2809fd(0xe2)&&typeof Reflect[_0x2809fd(0x19f)]===_0x2809fd(0x148))return Reflect['metadata'](_0x5012cb,_0x1a736c);},__param=this&&this[_0x3b5821(0x104)]||function(_0x1f67c2,_0x2d9d3c){return function(_0x560316,_0x356fb4){_0x2d9d3c(_0x560316,_0x356fb4,_0x1f67c2);};};Object['defineProperty'](exports,_0x3b5821(0x145),{'value':!![]}),exports[_0x3b5821(0x143)]=void 0x0;const models_service_1=require(_0x3b5821(0xf1)),chatLog_entity_1=require(_0x3b5821(0x19c)),common_1=require(_0x3b5821(0x181)),config_entity_1=require('./config.entity'),typeorm_1=require(_0x3b5821(0xf4)),typeorm_2=require('typeorm'),utils_1=require('../../common/utils'),axios_1=require('axios'),fs=require('fs'),packageJsonContent=fs[_0x3b5821(0x12d)](_0x3b5821(0xd7),_0x3b5821(0x191)),packageJson=JSON[_0x3b5821(0xe9)](packageJsonContent),version=packageJson[_0x3b5821(0x139)];console[_0x3b5821(0x165)]('\x20current\x20use\x20version\x20in\x20------>:\x20',version);let GlobalConfigService=class GlobalConfigService{constructor(_0x4a37e3,_0x5b44d7,_0x56530a){const _0x194b0a=_0x3b5821;this['configEntity']=_0x4a37e3,this[_0x194b0a(0x158)]=_0x5b44d7,this[_0x194b0a(0x172)]=_0x56530a,this['globalConfigs']={},this[_0x194b0a(0x11d)]=!![];}async[_0x3b5821(0x137)](){await this['initGetAllConfig']();}async[_0x3b5821(0x10e)](_0x3d413f){const _0x1ebbff=_0x3b5821;if(_0x3d413f[_0x1ebbff(0x123)]===0x0)return;if(_0x3d413f['includes'](_0x1ebbff(0xf3))&&_0x3d413f['length']===0x1)return this[_0x1ebbff(0xf3)];if(_0x3d413f['includes']('wechatJsapiTicket')&&_0x3d413f[_0x1ebbff(0x123)]===0x1)return this[_0x1ebbff(0x13c)];if(_0x3d413f['length']===0x1)return this[_0x1ebbff(0x16f)][_0x3d413f[0x0]];else{const _0x5d908e={};return _0x3d413f['forEach'](_0x5ca57b=>_0x5d908e[_0x5ca57b]=this[_0x1ebbff(0x16f)][_0x5ca57b]),_0x5d908e;}}async[_0x3b5821(0xfb)](){const _0x3735bd=_0x3b5821,_0x5af5ee=await this[_0x3735bd(0x113)][_0x3735bd(0xe7)]();this[_0x3735bd(0x16f)]=_0x5af5ee[_0x3735bd(0x15a)]((_0x464ed3,_0x492aba)=>{const _0x5d2949=_0x3735bd;return _0x464ed3[_0x492aba['configKey']]=_0x492aba[_0x5d2949(0x17e)],_0x464ed3;},{}),this[_0x3735bd(0x10c)]();}async[_0x3b5821(0x10c)](_0x1fcb0c=!![]){const _0x56b93b=_0x3b5821,{baiduTextApiKey:_0x32000c,baiduTextSecretKey:_0x555d57}=await this[_0x56b93b(0x10e)]([_0x56b93b(0x114),_0x56b93b(0x185)]);if(!_0x32000c||!_0x555d57){common_1[_0x56b93b(0x12e)][_0x56b93b(0x19e)](_0x56b93b(0x117),_0x56b93b(0x143));return;}const _0x54946e={'Content-Type':_0x56b93b(0x17c),'Accept':_0x56b93b(0x17c)},_0x1d9459='https://aip.baidubce.com/oauth/2.0/token?client_id='+_0x32000c+'&client_secret='+_0x555d57+_0x56b93b(0x13e);try{const _0x42a96e=await axios_1['default'][_0x56b93b(0x16c)](_0x1d9459,{'headers':_0x54946e});this[_0x56b93b(0x16f)][_0x56b93b(0xe4)]=_0x42a96e[_0x56b93b(0x160)][_0x56b93b(0x153)];}catch(_0x33896f){if(_0x1fcb0c)common_1[_0x56b93b(0x12e)][_0x56b93b(0x19e)](_0x56b93b(0x110),_0x56b93b(0x143));else throw new common_1[(_0x56b93b(0x187))](_0x33896f[_0x56b93b(0x127)][_0x56b93b(0x160)][_0x56b93b(0x16d)],common_1[_0x56b93b(0x197)][_0x56b93b(0x17d)]);}}async[_0x3b5821(0x138)](_0x526fcd=![]){const _0x479a60=_0x3b5821,{wechatOfficialAppId:_0x4d0c2f,wechatOfficialAppSecret:_0x4264ff}=await this[_0x479a60(0x10e)]([_0x479a60(0xdb),_0x479a60(0xe6)]);if(!_0x4d0c2f||!_0x4264ff)return common_1[_0x479a60(0x12e)][_0x479a60(0x19e)](_0x479a60(0x10d),'OfficialService');this[_0x479a60(0xf3)]=await this['fetchBaseAccessToken'](_0x4d0c2f,_0x4264ff,_0x526fcd),this[_0x479a60(0x13c)]=await this[_0x479a60(0xea)](this[_0x479a60(0xf3)]),common_1[_0x479a60(0x12e)]['log'](_0x479a60(0xde)+this[_0x479a60(0xf3)],'OfficialService');}async[_0x3b5821(0xfd)](_0x2a856a,_0x524db4,_0x7e25cd=![]){const _0x179fe6=_0x3b5821;if(process[_0x179fe6(0x108)][_0x179fe6(0x180)]===_0x179fe6(0x190)){this[_0x179fe6(0xf3)]='';return;}const {data:{errmsg:_0xb51b20,access_token:_0x5aa12b}}=await axios_1['default']['get'](_0x179fe6(0x173)+_0x2a856a+_0x179fe6(0x1a2)+_0x524db4);if(_0xb51b20){console[_0x179fe6(0x165)](_0x179fe6(0x150),_0xb51b20);if(_0x7e25cd)common_1[_0x179fe6(0x12e)][_0x179fe6(0x19e)](_0x179fe6(0x16b)+_0xb51b20,_0x179fe6(0x157));else throw new common_1[(_0x179fe6(0x187))](_0x179fe6(0x18f),common_1[_0x179fe6(0x197)][_0x179fe6(0x17d)]);return'';}return _0x5aa12b;}async[_0x3b5821(0xea)](_0x4aca6e){const _0x546a3f=_0x3b5821;var _0xf3bbda;if(process['env'][_0x546a3f(0x180)]===_0x546a3f(0x190)){this['wechatJsapiTicket']='';return;}const _0x2eff29=await axios_1[_0x546a3f(0x19d)][_0x546a3f(0xe8)](_0x546a3f(0x119)+_0x4aca6e+_0x546a3f(0x18c));return(_0xf3bbda=_0x2eff29===null||_0x2eff29===void 0x0?void 0x0:_0x2eff29[_0x546a3f(0x160)])===null||_0xf3bbda===void 0x0?void 0x0:_0xf3bbda[_0x546a3f(0x161)];}async[_0x3b5821(0xf7)](_0xb76928){const _0x44eb73=_0x3b5821,{role:_0x26313c}=_0xb76928[_0x44eb73(0x19b)];return this[_0x44eb73(0x16f)];}async[_0x3b5821(0x171)](_0xe9e082,_0x48aba8){const _0x25f0b8=_0x3b5821,_0x1fe69f=['vxNumber',_0x25f0b8(0xfe),'registerSendModel3Count',_0x25f0b8(0x126),_0x25f0b8(0x179),'firstRegisterSendStatus',_0x25f0b8(0x106),'firstRregisterSendModel3Count',_0x25f0b8(0xdc),_0x25f0b8(0x136),_0x25f0b8(0x11b),'inviteGiveSendModel3Count',_0x25f0b8(0x18b),_0x25f0b8(0x131),'invitedGuestSendModel3Count',_0x25f0b8(0x11f),_0x25f0b8(0xf5),_0x25f0b8(0x107),'clientLogoPath',_0x25f0b8(0x16a),_0x25f0b8(0x174),_0x25f0b8(0x109),_0x25f0b8(0xd6),'siteRobotName',_0x25f0b8(0x116),'mindDefaultData',_0x25f0b8(0x176),_0x25f0b8(0xee),'payMpayChannel',_0x25f0b8(0x100),'payEpayStatus',_0x25f0b8(0x125),_0x25f0b8(0x120),_0x25f0b8(0xf0),_0x25f0b8(0x146),'isShowAppCatIcon','salesBaseRatio','salesSeniorRatio',_0x25f0b8(0x177),_0x25f0b8(0x18d),_0x25f0b8(0xe5),_0x25f0b8(0x10f),_0x25f0b8(0x133),_0x25f0b8(0x162),'emailLoginStatus',_0x25f0b8(0x183),_0x25f0b8(0x154),_0x25f0b8(0x17b),_0x25f0b8(0x14f),_0x25f0b8(0x188),_0x25f0b8(0x11e),_0x25f0b8(0x168),'signInMjDrawToken','appMenuHeaderTips',_0x25f0b8(0x159),_0x25f0b8(0xe0),_0x25f0b8(0xdf),'mjHideWorkIn',_0x25f0b8(0x175)],_0x58e2e3=await this[_0x25f0b8(0x113)][_0x25f0b8(0xe7)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x1fe69f)}}),{domain:_0x3df558}=_0xe9e082,_0x274bba=this[_0x25f0b8(0x16f)][_0x25f0b8(0x186)];_0x274bba!==_0x3df558&&(this[_0x25f0b8(0x1a1)]({'configKey':_0x25f0b8(0x186),'configVal':_0x3df558,'status':0x1}),await this['initGetAllConfig']());const _0x35fa5b=_0x58e2e3[_0x25f0b8(0x15a)]((_0x2bc79b,_0x2fda0b)=>{const _0x1f7934=_0x25f0b8;return _0x2bc79b[_0x2fda0b['configKey']]=_0x2fda0b[_0x1f7934(0x17e)],_0x2bc79b;},{}),{wechatOfficialAppId:_0x43722f,wechatOfficialAppSecret:_0x4e4aa0}=await this[_0x25f0b8(0x10e)](['wechatOfficialAppId',_0x25f0b8(0xe6)]),_0x593473=!!(_0x43722f&&_0x4e4aa0);return Object[_0x25f0b8(0x1a4)](Object[_0x25f0b8(0x1a4)]({},_0x35fa5b),{'isUseWxLogin':_0x593473});}async[_0x3b5821(0x13f)](_0x3f7d33){const _0x1af2f8=_0x3b5821,{role:_0x26e98a}=_0x3f7d33[_0x1af2f8(0x19b)],_0x42e0cb=await this[_0x1af2f8(0x113)]['find']({'where':{'configKey':(0x0,typeorm_2[_0x1af2f8(0xff)])('%'+_0x1af2f8(0x129)+'%')}});if(_0x26e98a===_0x1af2f8(0x14a))return _0x42e0cb;return _0x42e0cb[_0x1af2f8(0x140)](_0xf3152d=>{const _0x24e059=_0x1af2f8;return _0xf3152d['configVal']=(0x0,utils_1[_0x24e059(0xd4)])(_0xf3152d[_0x24e059(0x17e)]),_0xf3152d;});}async['setGptKeys'](_0x37cb3e){const _0x5467b2=_0x3b5821,_0x353775=_0x37cb3e[_0x5467b2(0x144)]['filter'](_0x402990=>_0x402990['configVal']),_0x275005=_0x353775[_0x5467b2(0x140)](_0x102907=>_0x102907['configKey']);for(const [_0x430c93,_0xac797]of _0x353775[_0x5467b2(0x111)]()){const {configKey:_0x260e62,configVal:_0x69a61e,status:_0x203cae}=_0xac797;await this[_0x5467b2(0x1a1)]({'configKey':_0x5467b2(0x15f)+(_0x430c93+0x1),'configVal':_0x69a61e,'status':_0x203cae});}const _0x30e22f=await this[_0x5467b2(0x113)][_0x5467b2(0xe7)]({'where':{'configKey':(0x0,typeorm_2[_0x5467b2(0xff)])('%'+_0x5467b2(0x129)+'%')}}),_0x48531e=_0x30e22f['map'](_0x52e51c=>_0x52e51c[_0x5467b2(0xec)]);if(_0x48531e[_0x5467b2(0x123)]>_0x275005['length']){const _0x5c1089=(0x0,utils_1[_0x5467b2(0x19a)])(_0x48531e['length'],_0x275005['length'],'chatGptKey:');for(const _0x30badb of _0x5c1089){await this['configEntity'][_0x5467b2(0x128)]({'configKey':_0x30badb});}}return await this[_0x5467b2(0xfb)](),_0x5467b2(0xd5);}async[_0x3b5821(0x151)](_0x1df385,_0x26c602){const _0x23470e=_0x3b5821,{role:_0x5b30d2}=_0x26c602[_0x23470e(0x19b)],{keys:_0x42019b}=_0x1df385,_0x42b987=await this[_0x23470e(0x113)][_0x23470e(0xe7)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x42019b)}});return _0x5b30d2!==_0x23470e(0x14a)&&_0x42b987[_0x23470e(0x15c)](_0x402733=>{const _0x40beec=_0x23470e;if(_0x402733['configKey'][_0x40beec(0x1a5)]('mj')||_0x402733[_0x40beec(0xec)][_0x40beec(0x1a5)](_0x40beec(0xed))||_0x402733['configKey'][_0x40beec(0x1a5)]('gpt')||_0x402733[_0x40beec(0xec)][_0x40beec(0x1a5)](_0x40beec(0x124))||_0x402733[_0x40beec(0xec)][_0x40beec(0x1a5)](_0x40beec(0x141))||_0x402733[_0x40beec(0xec)][_0x40beec(0x1a5)](_0x40beec(0x10b))||_0x402733[_0x40beec(0xec)][_0x40beec(0x1a5)](_0x40beec(0x169))||_0x402733[_0x40beec(0xec)]['includes']('pay')||_0x402733['configKey'][_0x40beec(0x1a5)](_0x40beec(0x184))||_0x402733[_0x40beec(0xec)][_0x40beec(0x1a5)]('mjProxyImgUrl')||_0x402733['configKey']===_0x40beec(0xdd)){const _0x4d9109=['payWeChatPublicKey',_0x40beec(0x18e)];if(_0x4d9109[_0x40beec(0x1a5)](_0x402733[_0x40beec(0xec)]))return _0x402733[_0x40beec(0x17e)]=(0x0,utils_1[_0x40beec(0xd4)])(_0x402733[_0x40beec(0x17e)],_0x40beec(0x189));const _0x286440=['payEpayStatus',_0x40beec(0x125),_0x40beec(0x105)];!_0x286440[_0x40beec(0x1a5)](_0x402733[_0x40beec(0xec)])&&!_0x402733[_0x40beec(0xec)][_0x40beec(0x1a5)]('Status')&&(_0x402733['configVal']=(0x0,utils_1[_0x40beec(0xd4)])(_0x402733[_0x40beec(0x17e)]));}}),_0x42b987[_0x23470e(0x15a)]((_0x373573,_0x28455e)=>{const _0x5151dc=_0x23470e;return _0x373573[_0x28455e['configKey']]=_0x28455e[_0x5151dc(0x17e)],_0x373573;},{});}[_0x3b5821(0x164)](){const _0x539230=_0x3b5821,_0x30fef2=this[_0x539230(0x16f)][_0x539230(0xd8)],_0x560616=this[_0x539230(0x11d)];return!_0x560616||Number(_0x30fef2)===0x1;}async['setConfig'](_0xb845c0){const _0x2c0a26=_0x3b5821;try{const {settings:_0x15f61b}=_0xb845c0;for(const _0x3a4139 of _0x15f61b){await this[_0x2c0a26(0x1a1)](_0x3a4139);}await this[_0x2c0a26(0xfb)]();const _0x24e273=_0x15f61b[_0x2c0a26(0x140)](_0x50080c=>_0x50080c[_0x2c0a26(0xec)]);return(_0x24e273[_0x2c0a26(0x1a5)]('baiduTextApiKey')||_0x24e273[_0x2c0a26(0x1a5)](_0x2c0a26(0x185)))&&await this[_0x2c0a26(0x10c)](![]),(_0x24e273[_0x2c0a26(0x1a5)](_0x2c0a26(0xdb))||_0x24e273[_0x2c0a26(0x1a5)](_0x2c0a26(0xe6)))&&await this['getWechatAccessToken'](),_0x2c0a26(0x196);}catch(_0x183511){console[_0x2c0a26(0x165)](_0x2c0a26(0x115),_0x183511);}}async[_0x3b5821(0x1a1)](_0x2088a2){const _0x21ac08=_0x3b5821;try{const {configKey:_0x2b1d99,configVal:_0xbd37bf,status:status=0x1}=_0x2088a2,_0x4f3183=await this[_0x21ac08(0x113)]['findOne']({'where':{'configKey':_0x2b1d99}});if(_0x4f3183){const _0x3673a9=await this[_0x21ac08(0x113)][_0x21ac08(0x14c)]({'configKey':_0x2b1d99},{'configVal':_0xbd37bf,'status':status});}else{const _0x2bb05c=await this[_0x21ac08(0x113)][_0x21ac08(0x149)]({'configKey':_0x2b1d99,'configVal':_0xbd37bf,'status':status});}}catch(_0x268f2a){console['log'](_0x21ac08(0x115),_0x268f2a);throw new common_1[(_0x21ac08(0x187))](_0x21ac08(0x17f),common_1[_0x21ac08(0x197)][_0x21ac08(0x17d)]);}}async[_0x3b5821(0x193)](){const _0x518688=_0x3b5821;return await this[_0x518688(0x10e)]([_0x518688(0xf9),_0x518688(0xfa)]);}async[_0x3b5821(0xd9)](){const _0x5be4f8=_0x3b5821;return await this[_0x5be4f8(0x10e)]([_0x5be4f8(0x15e),_0x5be4f8(0x130)]);}async[_0x3b5821(0x14b)](){const _0x143177=_0x3b5821,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this[_0x143177(0x10e)]([_0x143177(0x125),_0x143177(0x15d),_0x143177(0xf0),_0x143177(0x120)]);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus][_0x143177(0x192)](_0x559433=>_0x559433===0x0))throw new common_1['HttpException']('支付功能暂未开放!',common_1[_0x143177(0x197)][_0x143177(0x17d)]);if(Number(payWechatStatus)===0x1)return'wechat';if(Number(payEpayStatus)===0x1)return _0x143177(0x11c);if(Number(payMpayStatus)===0x1)return _0x143177(0x155);if(Number(payHupiStatus)===0x1)return _0x143177(0x178);}async[_0x3b5821(0x147)](){const _0x3ef4ea=_0x3b5821,{siteName:_0x57d43c,qqNumber:_0x414975,vxNumber:_0x412de6,registerBaseUrl:_0x40c78e,domain:_0x373b4b}=await this[_0x3ef4ea(0x10e)](['siteName',_0x3ef4ea(0xf8),'vxNumber',_0x3ef4ea(0x14d),'domain']);return{'siteName':_0x57d43c,'qqNumber':_0x414975,'vxNumber':_0x412de6,'registerBaseUrl':_0x40c78e,'domain':_0x373b4b};}async[_0x3b5821(0x194)](){const _0x38a186=_0x3b5821,{phoneRegisterStatus:_0x2d53b3,aliPhoneAccessKeyId:_0x57dc5f,aliPhoneAccessKeySecret:_0x493f01,aliPhoneSignName:_0x1c8eb2,aliPhoneTemplateCode:_0x35972a}=await this['getConfigs']([_0x38a186(0x10f),_0x38a186(0x167),'aliPhoneAccessKeySecret',_0x38a186(0x101),'aliPhoneTemplateCode']);if(Number(_0x2d53b3)!==0x1)throw new common_1['HttpException'](_0x38a186(0x12f),common_1['HttpStatus'][_0x38a186(0x17d)]);return{'accessKeyId':_0x57dc5f,'accessKeySecret':_0x493f01,'SignName':_0x1c8eb2,'TemplateCode':_0x35972a};}async['getQcloudPhoneVerifyConfig'](){const _0x406463=_0x3b5821,{qcloudPhoneRegisterStatus:_0x292e5c,qcloudSecretId:_0x34c25d,qcloudSecretKey:_0x4777d4,qcloudPhoneSignName:_0x244a94,qcloudSMSTemplateId:_0x5369de,qcloudSMSSDKAppId:_0x1bfb3d}=await this[_0x406463(0x10e)](['qcloudPhoneRegisterStatus',_0x406463(0xf6),_0x406463(0x195),_0x406463(0x112),_0x406463(0x17a),_0x406463(0x166)]);if(Number(_0x292e5c)!==0x1)throw new common_1[(_0x406463(0x187))]('手机验证码功能暂未开放!',common_1[_0x406463(0x197)][_0x406463(0x17d)]);return{'secretId':_0x34c25d,'secretKey':_0x4777d4,'signName':_0x244a94,'templateId':_0x5369de,'sdkAppId':_0x1bfb3d};}[_0x3b5821(0x182)](){const _0x413c97=_0x3b5821;return process[_0x413c97(0x108)]['NAMESPACE']||'NINEAI';}async[_0x3b5821(0x10a)](){const _0xcee592=_0x3b5821,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this[_0xcee592(0x10e)]([_0xcee592(0x188),'signInModel3Count',_0xcee592(0x168),'signInMjDrawToken']);if(Number(signInStatus)!==0x1)throw new common_1['HttpException']('签到功能暂未开放!',common_1[_0xcee592(0x197)]['BAD_REQUEST']);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async[_0x3b5821(0x152)](){const _0x23afdc=_0x3b5821,_0x4dc425=_0x23afdc(0xe1),_0x27d493=await fetch(_0x4dc425,{}),_0x3c494f=await _0x27d493[_0x23afdc(0x163)](),{success:success=!![],message:_0x1e70cf}=_0x3c494f;common_1[_0x23afdc(0x12e)][_0x23afdc(0x19e)](_0x23afdc(0xe3)),common_1[_0x23afdc(0x12e)][_0x23afdc(0x19e)](_0x23afdc(0x11a)),common_1[_0x23afdc(0x12e)]['error'](_0x23afdc(0x170)),common_1['Logger']['error']('缺失ip信息'),common_1[_0x23afdc(0x12e)][_0x23afdc(0xeb)](_0x23afdc(0x13b));}async['getSensitiveConfig'](){const _0x2dba76=_0x3b5821,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x39a829,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x38c381,nineaiBuiltInSensitiveAuthKey:_0x399960}=await this[_0x2dba76(0x10e)]([_0x2dba76(0x1a3),_0x2dba76(0xe4),_0x2dba76(0x1a0),_0x2dba76(0x18a),_0x2dba76(0x15b)]);if(Number(baiduTextStatus)===0x1)return{'useType':'baidu','baiduTextAccessToken':_0x39a829};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':_0x2dba76(0x103),'nineaiBuiltInSensitiveApiBase':_0x38c381,'nineaiBuiltInSensitiveAuthKey':_0x399960};return null;}};GlobalConfigService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_1[_0x3b5821(0x132)])(config_entity_1[_0x3b5821(0x13d)])),__param(0x1,(0x0,typeorm_1['InjectRepository'])(chatLog_entity_1[_0x3b5821(0xfc)])),__metadata(_0x3b5821(0xda),[typeorm_2[_0x3b5821(0x12c)],typeorm_2['Repository'],models_service_1[_0x3b5821(0xef)]])],GlobalConfigService),exports[_0x3b5821(0x143)]=GlobalConfigService;