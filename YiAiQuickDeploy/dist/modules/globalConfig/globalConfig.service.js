'use strict';const _0x88173a=_0x3df6;(function(_0x25388b,_0x53213e){const _0x1b8b55=_0x3df6,_0x4b0d29=_0x25388b();while(!![]){try{const _0x548158=-parseInt(_0x1b8b55(0xca))/0x1*(-parseInt(_0x1b8b55(0xe5))/0x2)+parseInt(_0x1b8b55(0x8e))/0x3+parseInt(_0x1b8b55(0x9d))/0x4*(-parseInt(_0x1b8b55(0xc6))/0x5)+parseInt(_0x1b8b55(0xd8))/0x6+parseInt(_0x1b8b55(0xa3))/0x7+parseInt(_0x1b8b55(0xe3))/0x8+-parseInt(_0x1b8b55(0xfc))/0x9;if(_0x548158===_0x53213e)break;else _0x4b0d29['push'](_0x4b0d29['shift']());}catch(_0x1f407b){_0x4b0d29['push'](_0x4b0d29['shift']());}}}(_0x5bfc,0xcb354));function _0x5bfc(){const _0x103f7a=['Injectable','3602529DcSUsd','qcloudSecretId','isVerifyEmail','getPhoneVerifyConfig','payMpayChannel','hideString','getQcloudPhoneVerifyConfig','NAMESPACE','vxNumber','default','手机验证码功能暂未开放!','queryPayType','ConfigEntity','mjProxy','openaiBaseUrl','196nRglNt','getSensitiveConfig','post','payWeChatPrivateKey','请配置正确的秘钥、当前秘钥检测不通过！','chatGptKey','11176179ELKOdq','wechatJsapiTicket','queryGptKeys','getSignatureGiftConfig','payMpayStatus','registerSendStatus','application/json','qcloudPhoneSignName','invitedGuestSendModel3Count','invitedGuestSendModel4Count','@nestjs/common','pay','payWechatStatus','wechatOfficialAppId','siteName','mjUseBaiduFy','baidu','qcloudPhoneLoginStatus','error_description','ChatLogEntity','parse','nineaiBuiltInSensitiveAuthKey','isShowAppCatIcon','configKey','wechat\x20refresh\x20access_token\x20\x20==>\x20','ModelsService','forEach','baiduTextSecretKey','mpay','buyCramiAddress','https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=','Key','save','getCopyright','salesAllowDrawMoney','23795cIrFuY','queryConfig','signInModel3Count','GlobalConfigService','83042UWkKHN','debug','aliPhoneAccessKeySecret','fetchJsapiTicket','操作完成！','qcloudSMSSDKAppId','TRUE','error','signInModel4Count','phoneRegisterStatus','https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=','Status','assign','InjectRepository','2813922PtxDfL','签到功能暂未开放!','domain','getOwnPropertyDescriptor','wechatOfficialAppSecret','nineaiBuiltInSensitiveStatus','&type=jsapi','registerSendModel3Count','mjHideWorkIn','registerSendDrawMjCount','wechatAccessToken','13192896kYRGAh','getNineAiToken','22jqtBPo','wechatRegisterStatus','设置完成！','package.json','design:paramtypes','filingNumber','firstRegisterSendRank','cos','firstRregisterSendModel4Count','createOrUpdate','baiduTextApiKey','缺失ip信息','entries','感谢您使用NineAi、祝您使用愉快~','aliPhoneAccessKeyId','errMsg','百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!','__esModule','isUseWxLogin','getConfigs','invitedGuestSendDrawMjCount','length','请按要求填写正确的授权信息','42871230VKIdnB','configEntity','json','gpt','appMenuHeaderBgUrl','https://aip.baidubce.com/oauth/2.0/token?client_id=','map','还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！','copyrightTitle','__param','chatGptKey:','version','wechat','auth','../models/models.service','qcloudPhoneRegisterStatus','log','NINEAI','Logger','findOne','setConfig','signInMjDrawToken','registerSendModel4Count','noticeTitle','function','百度敏感词配置检测失败，您的参数可能配置的不正确!','response','globalConfigs','data','registerBaseUrl','&grant_type=client_credentials','inviteGiveSendDrawMjCount','epay','signInStatus','qcloudSecretKey','baiduTextStatus','decorate','https://api.jiangly.com/api/permission/auth','&client_secret=','user','ISDEV','find','configs','payEpayApiPayUrl','隐私内容、非超级管理员无权查看','hupi','metadata','initGetAllConfig','env','super','\x20current\x20use\x20version\x20in\x20------>:\x20','&secret=','fetchBaseAccessToken','getWechatAccessToken','qqNumber','delete','getAuthInfo','inviteSendStatus','baiduCode','HttpException','HttpStatus','siteRobotName','nineai','queryAllConfig','OfficialService','configVal','Repository','salesBaseRatio','获取微信access_token失败、错误信息：','tencent','qcloudSMSTemplateId','wechatSilentLoginStatus','Like','noticeInfo','get','object','typeorm','getNamespace','__metadata','includes','reduce','axios','../chatLog/chatLog.entity','payEpayStatus','BAD_REQUEST','baiduTextAccessToken','salesSeniorRatio','firstRegisterSendStatus','utf-8','clientLogoPath','支付功能暂未开放!','mjProxyImgUrl','mindDefaultData','error:\x20','nineaiBuiltInSensitiveApiBase','initBaiduSensitive'];_0x5bfc=function(){return _0x103f7a;};return _0x5bfc();}var __decorate=this&&this['__decorate']||function(_0x39902b,_0x2ac0f3,_0x1fc880,_0x116235){const _0x1d7b43=_0x3df6;var _0x99506a=arguments[_0x1d7b43(0xfa)],_0x82dd8b=_0x99506a<0x3?_0x2ac0f3:_0x116235===null?_0x116235=Object[_0x1d7b43(0xdb)](_0x2ac0f3,_0x1fc880):_0x116235,_0x4100cc;if(typeof Reflect===_0x1d7b43(0x147)&&typeof Reflect[_0x1d7b43(0x120)]===_0x1d7b43(0x114))_0x82dd8b=Reflect['decorate'](_0x39902b,_0x2ac0f3,_0x1fc880,_0x116235);else{for(var _0x29caac=_0x39902b['length']-0x1;_0x29caac>=0x0;_0x29caac--)if(_0x4100cc=_0x39902b[_0x29caac])_0x82dd8b=(_0x99506a<0x3?_0x4100cc(_0x82dd8b):_0x99506a>0x3?_0x4100cc(_0x2ac0f3,_0x1fc880,_0x82dd8b):_0x4100cc(_0x2ac0f3,_0x1fc880))||_0x82dd8b;}return _0x99506a>0x3&&_0x82dd8b&&Object['defineProperty'](_0x2ac0f3,_0x1fc880,_0x82dd8b),_0x82dd8b;},__metadata=this&&this[_0x88173a(0x14a)]||function(_0x544b4b,_0x247dd3){const _0x6a9e66=_0x88173a;if(typeof Reflect===_0x6a9e66(0x147)&&typeof Reflect[_0x6a9e66(0x12a)]===_0x6a9e66(0x114))return Reflect['metadata'](_0x544b4b,_0x247dd3);},__param=this&&this[_0x88173a(0x105)]||function(_0x58fa6b,_0x213b62){return function(_0x5f1374,_0x29d7c9){_0x213b62(_0x5f1374,_0x29d7c9,_0x58fa6b);};};function _0x3df6(_0x78e329,_0x41de97){const _0x5bfc14=_0x5bfc();return _0x3df6=function(_0x3df6b2,_0x4e19bf){_0x3df6b2=_0x3df6b2-0x8b;let _0x4116a7=_0x5bfc14[_0x3df6b2];return _0x4116a7;},_0x3df6(_0x78e329,_0x41de97);}Object['defineProperty'](exports,_0x88173a(0xf6),{'value':!![]}),exports[_0x88173a(0xc9)]=void 0x0;const models_service_1=require(_0x88173a(0x10a)),chatLog_entity_1=require(_0x88173a(0x14e)),common_1=require(_0x88173a(0xad)),config_entity_1=require('./config.entity'),typeorm_1=require('@nestjs/typeorm'),typeorm_2=require(_0x88173a(0x148)),utils_1=require('../../common/utils'),axios_1=require(_0x88173a(0x14d)),fs=require('fs'),packageJsonContent=fs['readFileSync'](_0x88173a(0xe8),_0x88173a(0x154)),packageJson=JSON[_0x88173a(0xb7)](packageJsonContent),version=packageJson[_0x88173a(0x107)];console[_0x88173a(0x10c)](_0x88173a(0x12e),version);let GlobalConfigService=class GlobalConfigService{constructor(_0x3018eb,_0x307ea2,_0x266757){const _0x46710b=_0x88173a;this[_0x46710b(0xfd)]=_0x3018eb,this['chatLogEntity']=_0x307ea2,this['modelsService']=_0x266757,this[_0x46710b(0x117)]={},this['nineAiToken']=!![];}async['onModuleInit'](){const _0x10e8d2=_0x88173a;await this[_0x10e8d2(0x12b)]();}async[_0x88173a(0xf8)](_0x3ba1cf){const _0x151812=_0x88173a;if(_0x3ba1cf['length']===0x0)return;if(_0x3ba1cf[_0x151812(0x14b)](_0x151812(0xe2))&&_0x3ba1cf['length']===0x1)return this[_0x151812(0xe2)];if(_0x3ba1cf[_0x151812(0x14b)](_0x151812(0xa4))&&_0x3ba1cf['length']===0x1)return this[_0x151812(0xa4)];if(_0x3ba1cf[_0x151812(0xfa)]===0x1)return this[_0x151812(0x117)][_0x3ba1cf[0x0]];else{const _0xee7a1b={};return _0x3ba1cf[_0x151812(0xbd)](_0x3f8dd6=>_0xee7a1b[_0x3f8dd6]=this[_0x151812(0x117)][_0x3f8dd6]),_0xee7a1b;}}async[_0x88173a(0x12b)](){const _0x415c4b=_0x88173a,_0xf86529=await this[_0x415c4b(0xfd)][_0x415c4b(0x125)]();this[_0x415c4b(0x117)]=_0xf86529['reduce']((_0x4afa3a,_0x5f4eb7)=>{const _0x29b206=_0x415c4b;return _0x4afa3a[_0x5f4eb7[_0x29b206(0xba)]]=_0x5f4eb7[_0x29b206(0x13d)],_0x4afa3a;},{}),this[_0x415c4b(0x8c)]();}async['initBaiduSensitive'](_0x7898f=!![]){const _0x4a4ce1=_0x88173a,{baiduTextApiKey:_0x48fd7b,baiduTextSecretKey:_0x5a4fb7}=await this[_0x4a4ce1(0xf8)]([_0x4a4ce1(0xef),_0x4a4ce1(0xbe)]);if(!_0x48fd7b||!_0x5a4fb7){common_1[_0x4a4ce1(0x10e)][_0x4a4ce1(0xd1)](_0x4a4ce1(0xf5),_0x4a4ce1(0xc9));return;}const _0x508f9a={'Content-Type':'application/json','Accept':_0x4a4ce1(0xa9)},_0x2a7168=_0x4a4ce1(0x101)+_0x48fd7b+_0x4a4ce1(0x122)+_0x5a4fb7+_0x4a4ce1(0x11a);try{const _0x226430=await axios_1['default'][_0x4a4ce1(0x9f)](_0x2a7168,{'headers':_0x508f9a});this[_0x4a4ce1(0x117)]['baiduTextAccessToken']=_0x226430[_0x4a4ce1(0x118)]['access_token'];}catch(_0x4da0a7){if(_0x7898f)common_1[_0x4a4ce1(0x10e)]['error'](_0x4a4ce1(0x115),'GlobalConfigService');else throw new common_1[(_0x4a4ce1(0x137))](_0x4da0a7[_0x4a4ce1(0x116)][_0x4a4ce1(0x118)][_0x4a4ce1(0xb5)],common_1['HttpStatus'][_0x4a4ce1(0x150)]);}}async['getWechatAccessToken'](_0x5a576e=![]){const _0x3d18fe=_0x88173a,{wechatOfficialAppId:_0x3f3948,wechatOfficialAppSecret:_0x5c9293}=await this[_0x3d18fe(0xf8)]([_0x3d18fe(0xb0),_0x3d18fe(0xdc)]);if(!_0x3f3948||!_0x5c9293)return common_1['Logger'][_0x3d18fe(0xd1)](_0x3d18fe(0x103),_0x3d18fe(0x13c));this['wechatAccessToken']=await this[_0x3d18fe(0x130)](_0x3f3948,_0x5c9293,_0x5a576e),this['wechatJsapiTicket']=await this['fetchJsapiTicket'](this[_0x3d18fe(0xe2)]),common_1['Logger'][_0x3d18fe(0x10c)](_0x3d18fe(0xbb)+this[_0x3d18fe(0xe2)],_0x3d18fe(0x13c));}async[_0x88173a(0x130)](_0x556a22,_0x28c68c,_0x429a9f=![]){const _0x3bd805=_0x88173a;if(process[_0x3bd805(0x12c)][_0x3bd805(0x124)]===_0x3bd805(0xd0)){this[_0x3bd805(0xe2)]='';return;}const {data:{errmsg:_0xfbbbe0,access_token:_0x34253e}}=await axios_1[_0x3bd805(0x97)][_0x3bd805(0x146)](_0x3bd805(0xc1)+_0x556a22+_0x3bd805(0x12f)+_0x28c68c);if(_0xfbbbe0){console[_0x3bd805(0x10c)](_0x3bd805(0xf4),_0xfbbbe0);if(_0x429a9f)common_1['Logger']['error'](_0x3bd805(0x140)+_0xfbbbe0,'OfficialService');else throw new common_1[(_0x3bd805(0x137))](_0x3bd805(0xa1),common_1[_0x3bd805(0x138)][_0x3bd805(0x150)]);return'';}return _0x34253e;}async[_0x88173a(0xcd)](_0x5cedce){const _0x1f8928=_0x88173a;var _0xa46ca4;if(process['env'][_0x1f8928(0x124)]==='TRUE'){this[_0x1f8928(0xa4)]='';return;}const _0x15d61c=await axios_1[_0x1f8928(0x97)][_0x1f8928(0x146)](_0x1f8928(0xd4)+_0x5cedce+_0x1f8928(0xde));return(_0xa46ca4=_0x15d61c===null||_0x15d61c===void 0x0?void 0x0:_0x15d61c[_0x1f8928(0x118)])===null||_0xa46ca4===void 0x0?void 0x0:_0xa46ca4['ticket'];}async[_0x88173a(0x13b)](_0x394246){const _0x443fbd=_0x88173a,{role:_0x488b93}=_0x394246[_0x443fbd(0x123)];return this['globalConfigs'];}async['queryFrontConfig'](_0x4431d7,_0x2e3869){const _0x179fca=_0x88173a,_0x4d8495=[_0x179fca(0x96),_0x179fca(0xa8),_0x179fca(0xdf),_0x179fca(0x112),_0x179fca(0xe1),_0x179fca(0x153),_0x179fca(0xeb),'firstRregisterSendModel3Count',_0x179fca(0xed),'firstRregisterSendDrawMjCount',_0x179fca(0x135),'inviteGiveSendModel3Count','inviteGiveSendModel4Count',_0x179fca(0x11b),_0x179fca(0xab),_0x179fca(0xac),_0x179fca(0xf9),'clientHomePath',_0x179fca(0x155),'clientFavoIconPath',_0x179fca(0xf7),_0x179fca(0xb1),'robotAvatar',_0x179fca(0x139),_0x179fca(0xc0),_0x179fca(0x158),_0x179fca(0x136),'payEpayChannel',_0x179fca(0x92),_0x179fca(0x127),_0x179fca(0x14f),'payHupiStatus',_0x179fca(0xaf),_0x179fca(0xa7),'isAutoOpenNotice',_0x179fca(0xb9),_0x179fca(0x13f),_0x179fca(0x152),_0x179fca(0xc5),'companyName',_0x179fca(0xea),'phoneRegisterStatus',_0x179fca(0x10b),'emailRegisterStatus','emailLoginStatus','phoneLoginStatus',_0x179fca(0xb4),_0x179fca(0xe6),_0x179fca(0x143),_0x179fca(0x11d),'signInModel3Count',_0x179fca(0xd2),_0x179fca(0x111),'appMenuHeaderTips',_0x179fca(0x100),_0x179fca(0xb2),'mjHideNotBlock',_0x179fca(0xe0),_0x179fca(0x90)],_0x234339=await this[_0x179fca(0xfd)][_0x179fca(0x125)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x4d8495)}}),{domain:_0x180ddf}=_0x4431d7,_0x445b94=this[_0x179fca(0x117)]['domain'];_0x445b94!==_0x180ddf&&(this[_0x179fca(0xee)]({'configKey':'domain','configVal':_0x180ddf,'status':0x1}),await this['initGetAllConfig']());const _0x338e55=_0x234339[_0x179fca(0x14c)]((_0x5cc8b0,_0x51eaa5)=>{const _0x3be20d=_0x179fca;return _0x5cc8b0[_0x51eaa5[_0x3be20d(0xba)]]=_0x51eaa5['configVal'],_0x5cc8b0;},{}),{wechatOfficialAppId:_0x178aac,wechatOfficialAppSecret:_0x148b48}=await this[_0x179fca(0xf8)]([_0x179fca(0xb0),_0x179fca(0xdc)]),_0x18009f=!!(_0x178aac&&_0x148b48);return Object[_0x179fca(0xd6)](Object[_0x179fca(0xd6)]({},_0x338e55),{'isUseWxLogin':_0x18009f});}async[_0x88173a(0xa5)](_0x3424b6){const _0x18b8fb=_0x88173a,{role:_0x1eecd9}=_0x3424b6[_0x18b8fb(0x123)],_0x3f301a=await this['configEntity'][_0x18b8fb(0x125)]({'where':{'configKey':(0x0,typeorm_2[_0x18b8fb(0x144)])('%'+_0x18b8fb(0xa2)+'%')}});if(_0x1eecd9===_0x18b8fb(0x12d))return _0x3f301a;return _0x3f301a[_0x18b8fb(0x102)](_0x56930e=>{const _0x516325=_0x18b8fb;return _0x56930e['configVal']=(0x0,utils_1[_0x516325(0x93)])(_0x56930e[_0x516325(0x13d)]),_0x56930e;});}async['setGptKeys'](_0x74fb20){const _0x476b94=_0x88173a,_0x4b577c=_0x74fb20[_0x476b94(0x126)]['filter'](_0xf6f27d=>_0xf6f27d[_0x476b94(0x13d)]),_0x5db555=_0x4b577c[_0x476b94(0x102)](_0x54e6a5=>_0x54e6a5['configKey']);for(const [_0xf81ba,_0x2ca2c4]of _0x4b577c[_0x476b94(0xf1)]()){const {configKey:_0x54a4ce,configVal:_0x36d48a,status:_0x14ca8d}=_0x2ca2c4;await this['createOrUpdate']({'configKey':'chatGptKey:'+(_0xf81ba+0x1),'configVal':_0x36d48a,'status':_0x14ca8d});}const _0x4b9382=await this['configEntity'][_0x476b94(0x125)]({'where':{'configKey':(0x0,typeorm_2[_0x476b94(0x144)])('%'+'chatGptKey'+'%')}}),_0xf5405d=_0x4b9382[_0x476b94(0x102)](_0x1505ed=>_0x1505ed['configKey']);if(_0xf5405d[_0x476b94(0xfa)]>_0x5db555['length']){const _0x4686b4=(0x0,utils_1['getDiffArray'])(_0xf5405d[_0x476b94(0xfa)],_0x5db555[_0x476b94(0xfa)],_0x476b94(0x106));for(const _0x473580 of _0x4686b4){await this[_0x476b94(0xfd)][_0x476b94(0x133)]({'configKey':_0x473580});}}return await this[_0x476b94(0x12b)](),_0x476b94(0xce);}async[_0x88173a(0xc7)](_0x258371,_0x50b94f){const _0xd75ccf=_0x88173a,{role:_0x4f9068}=_0x50b94f[_0xd75ccf(0x123)],{keys:_0x1b91b9}=_0x258371,_0x1c5a56=await this[_0xd75ccf(0xfd)][_0xd75ccf(0x125)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x1b91b9)}});return _0x4f9068!=='super'&&_0x1c5a56[_0xd75ccf(0xbd)](_0x1ab838=>{const _0x1511e4=_0xd75ccf;if(_0x1ab838[_0x1511e4(0xba)][_0x1511e4(0x14b)]('mj')||_0x1ab838[_0x1511e4(0xba)][_0x1511e4(0x14b)](_0x1511e4(0xc2))||_0x1ab838[_0x1511e4(0xba)][_0x1511e4(0x14b)](_0x1511e4(0xff))||_0x1ab838[_0x1511e4(0xba)][_0x1511e4(0x14b)](_0x1511e4(0xec))||_0x1ab838[_0x1511e4(0xba)][_0x1511e4(0x14b)](_0x1511e4(0xb3))||_0x1ab838[_0x1511e4(0xba)][_0x1511e4(0x14b)]('ali')||_0x1ab838[_0x1511e4(0xba)][_0x1511e4(0x14b)](_0x1511e4(0x141))||_0x1ab838[_0x1511e4(0xba)][_0x1511e4(0x14b)](_0x1511e4(0xae))||_0x1ab838['configKey'][_0x1511e4(0x14b)](_0x1511e4(0x108))||_0x1ab838[_0x1511e4(0xba)][_0x1511e4(0x14b)](_0x1511e4(0x157))||_0x1ab838[_0x1511e4(0xba)]===_0x1511e4(0x9c)){const _0x1092fa=['payWeChatPublicKey',_0x1511e4(0xa0)];if(_0x1092fa[_0x1511e4(0x14b)](_0x1ab838[_0x1511e4(0xba)]))return _0x1ab838['configVal']=(0x0,utils_1[_0x1511e4(0x93)])(_0x1ab838[_0x1511e4(0x13d)],_0x1511e4(0x128));const _0x3e895b=['payEpayStatus','payHupiStatus',_0x1511e4(0x9b)];!_0x3e895b[_0x1511e4(0x14b)](_0x1ab838[_0x1511e4(0xba)])&&!_0x1ab838[_0x1511e4(0xba)]['includes'](_0x1511e4(0xd5))&&(_0x1ab838['configVal']=(0x0,utils_1[_0x1511e4(0x93)])(_0x1ab838[_0x1511e4(0x13d)]));}}),_0x1c5a56['reduce']((_0x90bf8c,_0x1f3ff5)=>{const _0x2b73f4=_0xd75ccf;return _0x90bf8c[_0x1f3ff5['configKey']]=_0x1f3ff5[_0x2b73f4(0x13d)],_0x90bf8c;},{});}[_0x88173a(0xe4)](){const _0x9ce766=_0x88173a,_0x586fbb=this[_0x9ce766(0x117)]['MjdrawCount'],_0x3c99e2=this['nineAiToken'];return!_0x3c99e2||Number(_0x586fbb)===0x1;}async[_0x88173a(0x110)](_0x4c17f2){const _0x493032=_0x88173a;try{const {settings:_0x494445}=_0x4c17f2;for(const _0x345b59 of _0x494445){await this[_0x493032(0xee)](_0x345b59);}await this['initGetAllConfig']();const _0x914288=_0x494445['map'](_0x1133a1=>_0x1133a1[_0x493032(0xba)]);return(_0x914288[_0x493032(0x14b)]('baiduTextApiKey')||_0x914288[_0x493032(0x14b)](_0x493032(0xbe)))&&await this[_0x493032(0x8c)](![]),(_0x914288[_0x493032(0x14b)]('wechatOfficialAppId')||_0x914288['includes'](_0x493032(0xdc)))&&await this[_0x493032(0x131)](),_0x493032(0xe7);}catch(_0x1a2ad7){console[_0x493032(0x10c)](_0x493032(0x159),_0x1a2ad7);}}async['createOrUpdate'](_0x46c360){const _0x40bd22=_0x88173a;try{const {configKey:_0x20c04a,configVal:_0x13e62b,status:status=0x1}=_0x46c360,_0x36f101=await this[_0x40bd22(0xfd)][_0x40bd22(0x10f)]({'where':{'configKey':_0x20c04a}});if(_0x36f101){const _0x55f1c2=await this[_0x40bd22(0xfd)]['update']({'configKey':_0x20c04a},{'configVal':_0x13e62b,'status':status});}else{const _0x53f3b0=await this[_0x40bd22(0xfd)][_0x40bd22(0xc3)]({'configKey':_0x20c04a,'configVal':_0x13e62b,'status':status});}}catch(_0x51a056){console[_0x40bd22(0x10c)]('error:\x20',_0x51a056);throw new common_1[(_0x40bd22(0x137))]('设置配置信息错误！',common_1[_0x40bd22(0x138)][_0x40bd22(0x150)]);}}async['queryNotice'](){const _0x531c5e=_0x88173a;return await this[_0x531c5e(0xf8)]([_0x531c5e(0x145),_0x531c5e(0x113)]);}async[_0x88173a(0xc4)](){const _0x3af5de=_0x88173a;return await this['getConfigs'](['copyrightUrl',_0x3af5de(0x104)]);}async[_0x88173a(0x99)](){const _0x36972e=_0x88173a,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this[_0x36972e(0xf8)](['payHupiStatus','payEpayStatus','payMpayStatus',_0x36972e(0xaf)]);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus]['every'](_0x58d96a=>_0x58d96a===0x0))throw new common_1[(_0x36972e(0x137))](_0x36972e(0x156),common_1[_0x36972e(0x138)]['BAD_REQUEST']);if(Number(payWechatStatus)===0x1)return _0x36972e(0x108);if(Number(payEpayStatus)===0x1)return _0x36972e(0x11c);if(Number(payMpayStatus)===0x1)return _0x36972e(0xbf);if(Number(payHupiStatus)===0x1)return _0x36972e(0x129);}async[_0x88173a(0x134)](){const _0x50df35=_0x88173a,{siteName:_0x46c1ad,qqNumber:_0x318a43,vxNumber:_0x54162f,registerBaseUrl:_0x23a817,domain:_0x3326a1}=await this[_0x50df35(0xf8)]([_0x50df35(0xb1),_0x50df35(0x132),_0x50df35(0x96),_0x50df35(0x119),_0x50df35(0xda)]);return{'siteName':_0x46c1ad,'qqNumber':_0x318a43,'vxNumber':_0x54162f,'registerBaseUrl':_0x23a817,'domain':_0x3326a1};}async[_0x88173a(0x91)](){const _0x41bc78=_0x88173a,{phoneRegisterStatus:_0x2f4e2f,aliPhoneAccessKeyId:_0x4753cf,aliPhoneAccessKeySecret:_0x1fc2c1,aliPhoneSignName:_0xfa8c4f,aliPhoneTemplateCode:_0x129f60}=await this[_0x41bc78(0xf8)]([_0x41bc78(0xd3),_0x41bc78(0xf3),_0x41bc78(0xcc),'aliPhoneSignName','aliPhoneTemplateCode']);if(Number(_0x2f4e2f)!==0x1)throw new common_1[(_0x41bc78(0x137))](_0x41bc78(0x98),common_1[_0x41bc78(0x138)][_0x41bc78(0x150)]);return{'accessKeyId':_0x4753cf,'accessKeySecret':_0x1fc2c1,'SignName':_0xfa8c4f,'TemplateCode':_0x129f60};}async[_0x88173a(0x94)](){const _0x3626bf=_0x88173a,{qcloudPhoneRegisterStatus:_0x1029d5,qcloudSecretId:_0x3af38d,qcloudSecretKey:_0x3fdda1,qcloudPhoneSignName:_0x3bbe83,qcloudSMSTemplateId:_0x206ec8,qcloudSMSSDKAppId:_0x11647f}=await this[_0x3626bf(0xf8)]([_0x3626bf(0x10b),_0x3626bf(0x8f),_0x3626bf(0x11e),_0x3626bf(0xaa),_0x3626bf(0x142),_0x3626bf(0xcf)]);if(Number(_0x1029d5)!==0x1)throw new common_1['HttpException']('手机验证码功能暂未开放!',common_1[_0x3626bf(0x138)][_0x3626bf(0x150)]);return{'secretId':_0x3af38d,'secretKey':_0x3fdda1,'signName':_0x3bbe83,'templateId':_0x206ec8,'sdkAppId':_0x11647f};}[_0x88173a(0x149)](){const _0x15cb21=_0x88173a;return process[_0x15cb21(0x12c)][_0x15cb21(0x95)]||_0x15cb21(0x10d);}async[_0x88173a(0xa6)](){const _0x131cd4=_0x88173a,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this[_0x131cd4(0xf8)]([_0x131cd4(0x11d),_0x131cd4(0xc8),_0x131cd4(0xd2),_0x131cd4(0x111)]);if(Number(signInStatus)!==0x1)throw new common_1[(_0x131cd4(0x137))](_0x131cd4(0xd9),common_1[_0x131cd4(0x138)]['BAD_REQUEST']);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async[_0x88173a(0x109)](){const _0x4ba53e=_0x88173a,_0x495a0e=_0x4ba53e(0x121),_0x58979c=await fetch(_0x495a0e,{}),_0x1a768e=await _0x58979c[_0x4ba53e(0xfe)](),{success:success=!![],message:_0x2b8c93}=_0x1a768e;common_1[_0x4ba53e(0x10e)][_0x4ba53e(0xd1)](_0x4ba53e(0xfb)),common_1[_0x4ba53e(0x10e)][_0x4ba53e(0xd1)]('请填写您的授权码'),common_1['Logger']['error'](_0x4ba53e(0xf0)),common_1[_0x4ba53e(0x10e)][_0x4ba53e(0xd1)](_0x4ba53e(0xf0)),common_1[_0x4ba53e(0x10e)][_0x4ba53e(0xcb)](_0x4ba53e(0xf2));}async[_0x88173a(0x9e)](){const _0x5c50f3=_0x88173a,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x2c71de,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x133025,nineaiBuiltInSensitiveAuthKey:_0x1b1317}=await this[_0x5c50f3(0xf8)]([_0x5c50f3(0x11f),_0x5c50f3(0x151),_0x5c50f3(0xdd),_0x5c50f3(0x8b),_0x5c50f3(0xb8)]);if(Number(baiduTextStatus)===0x1)return{'useType':'baidu','baiduTextAccessToken':_0x2c71de};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':_0x5c50f3(0x13a),'nineaiBuiltInSensitiveApiBase':_0x133025,'nineaiBuiltInSensitiveAuthKey':_0x1b1317};return null;}};GlobalConfigService=__decorate([(0x0,common_1[_0x88173a(0x8d)])(),__param(0x0,(0x0,typeorm_1[_0x88173a(0xd7)])(config_entity_1[_0x88173a(0x9a)])),__param(0x1,(0x0,typeorm_1[_0x88173a(0xd7)])(chatLog_entity_1[_0x88173a(0xb6)])),__metadata(_0x88173a(0xe9),[typeorm_2[_0x88173a(0x13e)],typeorm_2[_0x88173a(0x13e)],models_service_1[_0x88173a(0xbc)]])],GlobalConfigService),exports['GlobalConfigService']=GlobalConfigService;