'use strict';const _0x188e0e=_0x31b6;(function(_0xc62ef8,_0x3b43b6){const _0x1e1c34=_0x31b6,_0x1eb8d7=_0xc62ef8();while(!![]){try{const _0x195a7f=parseInt(_0x1e1c34(0x1a4))/0x1+-parseInt(_0x1e1c34(0x236))/0x2+-parseInt(_0x1e1c34(0x223))/0x3+-parseInt(_0x1e1c34(0x24c))/0x4+-parseInt(_0x1e1c34(0x25b))/0x5*(parseInt(_0x1e1c34(0x1b6))/0x6)+-parseInt(_0x1e1c34(0x237))/0x7+parseInt(_0x1e1c34(0x1f0))/0x8;if(_0x195a7f===_0x3b43b6)break;else _0x1eb8d7['push'](_0x1eb8d7['shift']());}catch(_0x3ad473){_0x1eb8d7['push'](_0x1eb8d7['shift']());}}}(_0x4ba6,0xe3bbb));var __decorate=this&&this[_0x188e0e(0x234)]||function(_0x27bb05,_0x46b068,_0x5bfe3c,_0x3aeeb3){const _0x58b859=_0x188e0e;var _0x2b65c0=arguments[_0x58b859(0x1b8)],_0x3c811a=_0x2b65c0<0x3?_0x46b068:_0x3aeeb3===null?_0x3aeeb3=Object[_0x58b859(0x233)](_0x46b068,_0x5bfe3c):_0x3aeeb3,_0x27f3da;if(typeof Reflect==='object'&&typeof Reflect[_0x58b859(0x1bc)]===_0x58b859(0x23a))_0x3c811a=Reflect[_0x58b859(0x1bc)](_0x27bb05,_0x46b068,_0x5bfe3c,_0x3aeeb3);else{for(var _0x12bef9=_0x27bb05['length']-0x1;_0x12bef9>=0x0;_0x12bef9--)if(_0x27f3da=_0x27bb05[_0x12bef9])_0x3c811a=(_0x2b65c0<0x3?_0x27f3da(_0x3c811a):_0x2b65c0>0x3?_0x27f3da(_0x46b068,_0x5bfe3c,_0x3c811a):_0x27f3da(_0x46b068,_0x5bfe3c))||_0x3c811a;}return _0x2b65c0>0x3&&_0x3c811a&&Object[_0x58b859(0x254)](_0x46b068,_0x5bfe3c,_0x3c811a),_0x3c811a;},__metadata=this&&this['__metadata']||function(_0x2b7d8d,_0x2bdf6b){const _0x2e56f5=_0x188e0e;if(typeof Reflect===_0x2e56f5(0x1c7)&&typeof Reflect[_0x2e56f5(0x23d)]===_0x2e56f5(0x23a))return Reflect[_0x2e56f5(0x23d)](_0x2b7d8d,_0x2bdf6b);},__param=this&&this[_0x188e0e(0x229)]||function(_0x5d962a,_0x4e7d76){return function(_0x1797eb,_0x279009){_0x4e7d76(_0x1797eb,_0x279009,_0x5d962a);};};Object[_0x188e0e(0x254)](exports,_0x188e0e(0x1ca),{'value':!![]}),exports[_0x188e0e(0x1d4)]=void 0x0;const models_service_1=require('../models/models.service'),chatLog_entity_1=require(_0x188e0e(0x1fe)),common_1=require(_0x188e0e(0x24d)),config_entity_1=require(_0x188e0e(0x268)),typeorm_1=require(_0x188e0e(0x1ae)),typeorm_2=require(_0x188e0e(0x1eb)),utils_1=require(_0x188e0e(0x1a6)),axios_1=require('axios'),fs=require('fs'),packageJsonContent=fs['readFileSync'](_0x188e0e(0x209),'utf-8'),packageJson=JSON[_0x188e0e(0x1f5)](packageJsonContent),version=packageJson[_0x188e0e(0x202)];console['log']('\x20current\x20use\x20version\x20in\x20------>:\x20',version);function _0x4ba6(){const _0x431dd9=['wechat\x20refresh\x20access_token\x20\x20==>\x20','操作完成！','decorate','initBaiduSensitive','调了一次刷access_token','isUseWxLogin','copyrightUrl','wechatSilentLoginStatus','mjProxy','error_description','支付功能暂未开放!','获取微信access_token失败、错误信息：','baiduTextAccessToken','object','qcloudSMSSDKAppId','openaiBaseUrl','__esModule','mjHideNotBlock','isVerifyEmail','save','setConfig','isShowAppCatIcon','qcloudPhoneLoginStatus','还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！','firstRregisterSendDrawMjCount','queryPayType','GlobalConfigService','configKey','assign','ISDEV','fetchJsapiTicket','findOne','请配置正确的秘钥、当前秘钥检测不通过！','signInModel3Count','Logger','firstRegisterSendStatus','mjProxyImgUrl','createOrUpdate','default','payWeChatPublicKey','noticeInfo','TRUE','&grant_type=client_credentials','nineaiBuiltInSensitiveApiBase','find','aliPhoneAccessKeyId','Key','getCopyright','手机验证码功能暂未开放!','typeorm','onModuleInit','https://api.weixin.qq.com/cgi-bin/stable_token','BAD_REQUEST','response','18059936cCZqcC','getNineAiToken','https://api.jiangly.com/api/permission/auth','json','缺失ip信息','parse','隐私内容、非超级管理员无权查看','design:paramtypes','payEpayStatus','OfficialService','mpay','inviteGiveSendModel4Count','clientHomePath','error:\x20','../chatLog/chatLog.entity','initGetAllConfig','baiduTextApiKey','map','version','errMsg','globalConfigs','payHupiStatus','baiduTextStatus','wechatAccessToken','baiduTextSecretKey','package.json','aliPhoneSignName','https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=','user','siteName','getDiffArray','ChatLogEntity','感谢您使用NineAi、祝您使用愉快~','qcloudPhoneSignName','every','payMpayChannel','error','post','data','ModelsService','domain','fetchBaseAccessToken','get','filingNumber','ali','payMpayStatus','invitedGuestSendModel4Count','getNamespace','reduce','delete','ticket','148872Ebuyjh','forEach','请按要求填写正确的授权信息','wechatOfficialAppId','queryConfig','getSignatureGiftConfig','__param','aliPhoneAccessKeySecret','application/json','filter','queryNotice','nineAiToken','appMenuHeaderBgUrl','getQcloudPhoneVerifyConfig','签到功能暂未开放!','epay','getOwnPropertyDescriptor','__decorate','payWechatStatus','116968jZJagu','6388137hnkwTw','includes','isAutoOpenNotice','function','百度敏感词配置检测失败，您的参数可能配置的不正确!','env','metadata','wechatRegisterStatus','registerBaseUrl','pay','registerSendStatus','inviteGiveSendDrawMjCount','gpt','wechat','nineaiBuiltInSensitiveAuthKey','firstRregisterSendModel3Count','chatGptKey:','hideString','salesSeniorRatio','update','tencent','2200560stxvMo','@nestjs/common','HttpException','phoneLoginStatus','wechatOfficialAppSecret','inviteSendStatus','qcloudSMSTemplateId','log','defineProperty','access_token','copyrightTitle','signInModel4Count','salesAllowDrawMoney','signInStatus','cos','200NhdFSx','MjdrawCount','phoneRegisterStatus','getConfigs','&type=jsapi','robotAvatar','&client_secret=','inviteGiveSendModel3Count','qcloudSecretKey','mindDefaultData','clientLogoPath','firstRegisterSendRank','NAMESPACE','./config.entity','chatLogEntity','payEpayChannel','getSensitiveConfig','mjUseBaiduFy','mjHideWorkIn','baidu','emailRegisterStatus','payEpayApiPayUrl','nineai','configVal','client_credential','百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!','companyName','wechatJsapiTicket','baiduCode','modelsService','chatGptKey','1251662cyfgOE','getAuthInfo','../../common/utils','HttpStatus','设置配置信息错误！','queryFrontConfig','getPhoneVerifyConfig','InjectRepository','请填写您的授权码','signInMjDrawToken','@nestjs/typeorm','getWechatAccessToken','vxNumber','siteRobotName','payWeChatPrivateKey','Injectable','configEntity','auth','150828Ozggjz','salesBaseRatio','length','debug'];_0x4ba6=function(){return _0x431dd9;};return _0x4ba6();}let GlobalConfigService=class GlobalConfigService{constructor(_0x1767a5,_0x3e478c,_0x4b0729){const _0x57cbc1=_0x188e0e;this[_0x57cbc1(0x1b4)]=_0x1767a5,this[_0x57cbc1(0x269)]=_0x3e478c,this[_0x57cbc1(0x278)]=_0x4b0729,this['globalConfigs']={},this[_0x57cbc1(0x22e)]=!![];}async[_0x188e0e(0x1ec)](){const _0x3c4c83=_0x188e0e;await this[_0x3c4c83(0x1ff)]();}async[_0x188e0e(0x25e)](_0x4bbae9){const _0x4fbbf3=_0x188e0e;if(_0x4bbae9[_0x4fbbf3(0x1b8)]===0x0)return;if(_0x4bbae9[_0x4fbbf3(0x238)](_0x4fbbf3(0x207))&&_0x4bbae9[_0x4fbbf3(0x1b8)]===0x1)return this[_0x4fbbf3(0x207)];if(_0x4bbae9[_0x4fbbf3(0x238)](_0x4fbbf3(0x276))&&_0x4bbae9['length']===0x1)return this[_0x4fbbf3(0x276)];if(_0x4bbae9['length']===0x1)return this[_0x4fbbf3(0x204)][_0x4bbae9[0x0]];else{const _0x13705f={};return _0x4bbae9[_0x4fbbf3(0x224)](_0x446958=>_0x13705f[_0x446958]=this[_0x4fbbf3(0x204)][_0x446958]),_0x13705f;}}async[_0x188e0e(0x1ff)](){const _0x47e869=_0x188e0e,_0x5a8e6a=await this[_0x47e869(0x1b4)][_0x47e869(0x1e6)]();this[_0x47e869(0x204)]=_0x5a8e6a[_0x47e869(0x220)]((_0xe79082,_0x31e3cc)=>{const _0x4b622b=_0x47e869;return _0xe79082[_0x31e3cc[_0x4b622b(0x1d5)]]=_0x31e3cc['configVal'],_0xe79082;},{}),this[_0x47e869(0x1bd)]();}async[_0x188e0e(0x1bd)](_0x41e500=!![]){const _0x1785c8=_0x188e0e,{baiduTextApiKey:_0x413345,baiduTextSecretKey:_0x2a390c}=await this[_0x1785c8(0x25e)]([_0x1785c8(0x200),_0x1785c8(0x208)]);if(!_0x413345||!_0x2a390c){common_1[_0x1785c8(0x1dc)]['error'](_0x1785c8(0x274),_0x1785c8(0x1d4));return;}const _0x5bc6ea={'Content-Type':_0x1785c8(0x22b),'Accept':_0x1785c8(0x22b)},_0x442e4b='https://aip.baidubce.com/oauth/2.0/token?client_id='+_0x413345+_0x1785c8(0x261)+_0x2a390c+_0x1785c8(0x1e4);try{const _0xc360e6=await axios_1[_0x1785c8(0x1e0)]['post'](_0x442e4b,{'headers':_0x5bc6ea});this[_0x1785c8(0x204)]['baiduTextAccessToken']=_0xc360e6[_0x1785c8(0x216)][_0x1785c8(0x255)];}catch(_0xf2cee5){if(_0x41e500)common_1[_0x1785c8(0x1dc)]['error'](_0x1785c8(0x23b),_0x1785c8(0x1d4));else throw new common_1[(_0x1785c8(0x24e))](_0xf2cee5[_0x1785c8(0x1ef)]['data'][_0x1785c8(0x1c3)],common_1['HttpStatus'][_0x1785c8(0x1ee)]);}}async['getWechatAccessToken'](_0x92b7ee=![]){const _0x12b7dc=_0x188e0e;console['log'](_0x12b7dc(0x1be));const {wechatOfficialAppId:_0x2ed6de,wechatOfficialAppSecret:_0x4b7e6f}=await this[_0x12b7dc(0x25e)](['wechatOfficialAppId',_0x12b7dc(0x250)]);if(!_0x2ed6de||!_0x4b7e6f)return common_1[_0x12b7dc(0x1dc)][_0x12b7dc(0x214)](_0x12b7dc(0x1d1),_0x12b7dc(0x1f9));this[_0x12b7dc(0x207)]=await this[_0x12b7dc(0x219)](_0x2ed6de,_0x4b7e6f,_0x92b7ee),this[_0x12b7dc(0x276)]=await this['fetchJsapiTicket'](this['wechatAccessToken']),common_1[_0x12b7dc(0x1dc)]['log'](_0x12b7dc(0x1ba)+this['wechatAccessToken'],'OfficialService');}async[_0x188e0e(0x219)](_0x54669b,_0x3e6c3a,_0x3710b9=![]){const _0x4f9ccd=_0x188e0e;if(process[_0x4f9ccd(0x23c)]['ISDEV']===_0x4f9ccd(0x1e3)){this[_0x4f9ccd(0x207)]='';return;}const {data:{errmsg:_0x566f87,access_token:_0x13f1c9,expires_in:_0x14dc77}}=await axios_1[_0x4f9ccd(0x1e0)][_0x4f9ccd(0x215)](_0x4f9ccd(0x1ed),{'grant_type':_0x4f9ccd(0x273),'appid':_0x54669b,'secret':_0x3e6c3a});console[_0x4f9ccd(0x253)](_0x4f9ccd(0x255),_0x13f1c9,_0x14dc77);if(_0x566f87){console['log'](_0x4f9ccd(0x203),_0x566f87);if(_0x3710b9)common_1[_0x4f9ccd(0x1dc)][_0x4f9ccd(0x214)](_0x4f9ccd(0x1c5)+_0x566f87,'OfficialService');else throw new common_1[(_0x4f9ccd(0x24e))](_0x4f9ccd(0x1da),common_1['HttpStatus']['BAD_REQUEST']);return'';}return _0x13f1c9;}async[_0x188e0e(0x1d8)](_0x38dd8f){const _0x22da58=_0x188e0e;var _0x17dbef;if(process[_0x22da58(0x23c)][_0x22da58(0x1d7)]===_0x22da58(0x1e3)){this['wechatJsapiTicket']='';return;}const _0x4d03c8=await axios_1[_0x22da58(0x1e0)][_0x22da58(0x21a)](_0x22da58(0x20b)+_0x38dd8f+_0x22da58(0x25f));return(_0x17dbef=_0x4d03c8===null||_0x4d03c8===void 0x0?void 0x0:_0x4d03c8['data'])===null||_0x17dbef===void 0x0?void 0x0:_0x17dbef[_0x22da58(0x222)];}async['queryAllConfig'](_0x4dd246){const {role:_0x41cbc6}=_0x4dd246['user'];return this['globalConfigs'];}async[_0x188e0e(0x1a9)](_0x9f67be,_0xe50d70){const _0x5f5817=_0x188e0e,_0x3b391e=[_0x5f5817(0x1b0),_0x5f5817(0x241),'registerSendModel3Count','registerSendModel4Count','registerSendDrawMjCount',_0x5f5817(0x1dd),_0x5f5817(0x266),_0x5f5817(0x246),'firstRregisterSendModel4Count',_0x5f5817(0x1d2),_0x5f5817(0x251),_0x5f5817(0x262),_0x5f5817(0x1fb),_0x5f5817(0x242),'invitedGuestSendModel3Count',_0x5f5817(0x21e),'invitedGuestSendDrawMjCount',_0x5f5817(0x1fc),_0x5f5817(0x265),'clientFavoIconPath',_0x5f5817(0x1bf),'siteName',_0x5f5817(0x260),_0x5f5817(0x1b1),'buyCramiAddress',_0x5f5817(0x264),_0x5f5817(0x277),_0x5f5817(0x26a),_0x5f5817(0x213),_0x5f5817(0x270),_0x5f5817(0x1f8),'payHupiStatus',_0x5f5817(0x235),_0x5f5817(0x21d),_0x5f5817(0x239),_0x5f5817(0x1cf),_0x5f5817(0x1b7),_0x5f5817(0x249),_0x5f5817(0x258),_0x5f5817(0x275),_0x5f5817(0x21b),_0x5f5817(0x25d),'qcloudPhoneRegisterStatus',_0x5f5817(0x26f),'emailLoginStatus',_0x5f5817(0x24f),_0x5f5817(0x1d0),_0x5f5817(0x23e),_0x5f5817(0x1c1),_0x5f5817(0x259),'signInModel3Count','signInModel4Count',_0x5f5817(0x1ad),'appMenuHeaderTips',_0x5f5817(0x22f),_0x5f5817(0x26c),_0x5f5817(0x1cb),_0x5f5817(0x26d),_0x5f5817(0x1cc)],_0x3f1be0=await this[_0x5f5817(0x1b4)]['find']({'where':{'configKey':(0x0,typeorm_2['In'])(_0x3b391e)}}),{domain:_0x124435}=_0x9f67be,_0x59a695=this['globalConfigs']['domain'];_0x59a695!==_0x124435&&(this['createOrUpdate']({'configKey':_0x5f5817(0x218),'configVal':_0x124435,'status':0x1}),await this[_0x5f5817(0x1ff)]());const _0x486830=_0x3f1be0[_0x5f5817(0x220)]((_0x45cd57,_0x998799)=>{return _0x45cd57[_0x998799['configKey']]=_0x998799['configVal'],_0x45cd57;},{}),{wechatOfficialAppId:_0x3f4604,wechatOfficialAppSecret:_0x2b7ddd}=await this[_0x5f5817(0x25e)]([_0x5f5817(0x226),'wechatOfficialAppSecret']),_0x232af4=!!(_0x3f4604&&_0x2b7ddd);return Object[_0x5f5817(0x1d6)](Object[_0x5f5817(0x1d6)]({},_0x486830),{'isUseWxLogin':_0x232af4});}async['queryGptKeys'](_0x4e77f7){const _0x104f69=_0x188e0e,{role:_0x1019fe}=_0x4e77f7[_0x104f69(0x20c)],_0x41ee74=await this[_0x104f69(0x1b4)][_0x104f69(0x1e6)]({'where':{'configKey':(0x0,typeorm_2['Like'])('%'+_0x104f69(0x1a3)+'%')}});if(_0x1019fe==='super')return _0x41ee74;return _0x41ee74[_0x104f69(0x201)](_0x4d06c2=>{const _0x38a84c=_0x104f69;return _0x4d06c2[_0x38a84c(0x272)]=(0x0,utils_1[_0x38a84c(0x248)])(_0x4d06c2[_0x38a84c(0x272)]),_0x4d06c2;});}async['setGptKeys'](_0x263c71){const _0x4a78c9=_0x188e0e,_0x36c4f6=_0x263c71['configs'][_0x4a78c9(0x22c)](_0x4995cb=>_0x4995cb[_0x4a78c9(0x272)]),_0x290675=_0x36c4f6[_0x4a78c9(0x201)](_0x155625=>_0x155625[_0x4a78c9(0x1d5)]);for(const [_0x37a2cb,_0x1eb6ca]of _0x36c4f6['entries']()){const {configKey:_0x3c81cc,configVal:_0x30a744,status:_0x1e6ab7}=_0x1eb6ca;await this[_0x4a78c9(0x1df)]({'configKey':_0x4a78c9(0x247)+(_0x37a2cb+0x1),'configVal':_0x30a744,'status':_0x1e6ab7});}const _0x409863=await this['configEntity'][_0x4a78c9(0x1e6)]({'where':{'configKey':(0x0,typeorm_2['Like'])('%'+_0x4a78c9(0x1a3)+'%')}}),_0x25a316=_0x409863['map'](_0x3004cc=>_0x3004cc[_0x4a78c9(0x1d5)]);if(_0x25a316[_0x4a78c9(0x1b8)]>_0x290675[_0x4a78c9(0x1b8)]){const _0x33e1f9=(0x0,utils_1[_0x4a78c9(0x20e)])(_0x25a316['length'],_0x290675[_0x4a78c9(0x1b8)],_0x4a78c9(0x247));for(const _0x212d98 of _0x33e1f9){await this[_0x4a78c9(0x1b4)][_0x4a78c9(0x221)]({'configKey':_0x212d98});}}return await this['initGetAllConfig'](),_0x4a78c9(0x1bb);}async[_0x188e0e(0x227)](_0x1e73da,_0x403002){const _0x26108f=_0x188e0e,{role:_0x3e0720}=_0x403002[_0x26108f(0x20c)],{keys:_0x3c1d1a}=_0x1e73da,_0x32b3aa=await this[_0x26108f(0x1b4)][_0x26108f(0x1e6)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x3c1d1a)}});return _0x3e0720!=='super'&&_0x32b3aa[_0x26108f(0x224)](_0x2cef1c=>{const _0x42696a=_0x26108f;if(_0x2cef1c[_0x42696a(0x1d5)]['includes']('mj')||_0x2cef1c[_0x42696a(0x1d5)][_0x42696a(0x238)](_0x42696a(0x1e8))||_0x2cef1c[_0x42696a(0x1d5)][_0x42696a(0x238)](_0x42696a(0x243))||_0x2cef1c[_0x42696a(0x1d5)][_0x42696a(0x238)](_0x42696a(0x25a))||_0x2cef1c[_0x42696a(0x1d5)]['includes'](_0x42696a(0x26e))||_0x2cef1c['configKey'][_0x42696a(0x238)](_0x42696a(0x21c))||_0x2cef1c[_0x42696a(0x1d5)][_0x42696a(0x238)](_0x42696a(0x24b))||_0x2cef1c['configKey'][_0x42696a(0x238)](_0x42696a(0x240))||_0x2cef1c['configKey'][_0x42696a(0x238)](_0x42696a(0x244))||_0x2cef1c[_0x42696a(0x1d5)][_0x42696a(0x238)](_0x42696a(0x1de))||_0x2cef1c[_0x42696a(0x1d5)]===_0x42696a(0x1c9)){const _0x5bbe69=[_0x42696a(0x1e1),_0x42696a(0x1b2)];if(_0x5bbe69[_0x42696a(0x238)](_0x2cef1c[_0x42696a(0x1d5)]))return _0x2cef1c[_0x42696a(0x272)]=(0x0,utils_1[_0x42696a(0x248)])(_0x2cef1c[_0x42696a(0x272)],_0x42696a(0x1f6));const _0x1fc7e3=[_0x42696a(0x1f8),_0x42696a(0x205),_0x42696a(0x1c2)];!_0x1fc7e3[_0x42696a(0x238)](_0x2cef1c[_0x42696a(0x1d5)])&&!_0x2cef1c[_0x42696a(0x1d5)][_0x42696a(0x238)]('Status')&&(_0x2cef1c[_0x42696a(0x272)]=(0x0,utils_1[_0x42696a(0x248)])(_0x2cef1c[_0x42696a(0x272)]));}}),_0x32b3aa[_0x26108f(0x220)]((_0x583919,_0x29682f)=>{const _0x322d90=_0x26108f;return _0x583919[_0x29682f[_0x322d90(0x1d5)]]=_0x29682f[_0x322d90(0x272)],_0x583919;},{});}[_0x188e0e(0x1f1)](){const _0x4ac79b=_0x188e0e,_0x4efa8c=this[_0x4ac79b(0x204)][_0x4ac79b(0x25c)],_0x3b012f=this['nineAiToken'];return!_0x3b012f||Number(_0x4efa8c)===0x1;}async[_0x188e0e(0x1ce)](_0x43c596){const _0x536ada=_0x188e0e;try{const {settings:_0xf1f62f}=_0x43c596;for(const _0x46b150 of _0xf1f62f){await this[_0x536ada(0x1df)](_0x46b150);}await this[_0x536ada(0x1ff)]();const _0x373723=_0xf1f62f[_0x536ada(0x201)](_0x36fad0=>_0x36fad0[_0x536ada(0x1d5)]);return(_0x373723[_0x536ada(0x238)](_0x536ada(0x200))||_0x373723[_0x536ada(0x238)]('baiduTextSecretKey'))&&await this[_0x536ada(0x1bd)](![]),(_0x373723['includes'](_0x536ada(0x226))||_0x373723[_0x536ada(0x238)](_0x536ada(0x250)))&&await this[_0x536ada(0x1af)](),'设置完成！';}catch(_0x2afd80){console['log'](_0x536ada(0x1fd),_0x2afd80);}}async[_0x188e0e(0x1df)](_0x5aee41){const _0xcbb122=_0x188e0e;try{const {configKey:_0x42b99a,configVal:_0x150a2b,status:status=0x1}=_0x5aee41,_0x14f242=await this[_0xcbb122(0x1b4)][_0xcbb122(0x1d9)]({'where':{'configKey':_0x42b99a}});if(_0x14f242){const _0x4053b0=await this[_0xcbb122(0x1b4)][_0xcbb122(0x24a)]({'configKey':_0x42b99a},{'configVal':_0x150a2b,'status':status});}else{const _0x4ae4e0=await this[_0xcbb122(0x1b4)][_0xcbb122(0x1cd)]({'configKey':_0x42b99a,'configVal':_0x150a2b,'status':status});}}catch(_0x5aaf56){console[_0xcbb122(0x253)](_0xcbb122(0x1fd),_0x5aaf56);throw new common_1['HttpException'](_0xcbb122(0x1a8),common_1[_0xcbb122(0x1a7)][_0xcbb122(0x1ee)]);}}async[_0x188e0e(0x22d)](){const _0x4986ab=_0x188e0e;return await this[_0x4986ab(0x25e)]([_0x4986ab(0x1e2),'noticeTitle']);}async[_0x188e0e(0x1e9)](){const _0xf82d21=_0x188e0e;return await this['getConfigs']([_0xf82d21(0x1c0),_0xf82d21(0x256)]);}async[_0x188e0e(0x1d3)](){const _0x567914=_0x188e0e,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this[_0x567914(0x25e)]([_0x567914(0x205),'payEpayStatus',_0x567914(0x21d),'payWechatStatus']);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus][_0x567914(0x212)](_0x2f7e6e=>_0x2f7e6e===0x0))throw new common_1[(_0x567914(0x24e))](_0x567914(0x1c4),common_1[_0x567914(0x1a7)][_0x567914(0x1ee)]);if(Number(payWechatStatus)===0x1)return'wechat';if(Number(payEpayStatus)===0x1)return _0x567914(0x232);if(Number(payMpayStatus)===0x1)return _0x567914(0x1fa);if(Number(payHupiStatus)===0x1)return'hupi';}async[_0x188e0e(0x1a5)](){const _0x49e0db=_0x188e0e,{siteName:_0x552149,qqNumber:_0x19eb6a,vxNumber:_0x1ca01b,registerBaseUrl:_0x55989d,domain:_0x38dbe8}=await this[_0x49e0db(0x25e)]([_0x49e0db(0x20d),'qqNumber',_0x49e0db(0x1b0),_0x49e0db(0x23f),_0x49e0db(0x218)]);return{'siteName':_0x552149,'qqNumber':_0x19eb6a,'vxNumber':_0x1ca01b,'registerBaseUrl':_0x55989d,'domain':_0x38dbe8};}async[_0x188e0e(0x1aa)](){const _0x5738db=_0x188e0e,{phoneRegisterStatus:_0x168a47,aliPhoneAccessKeyId:_0x403e7f,aliPhoneAccessKeySecret:_0x2e7493,aliPhoneSignName:_0x2b0fb5,aliPhoneTemplateCode:_0x3bc71e}=await this[_0x5738db(0x25e)]([_0x5738db(0x25d),_0x5738db(0x1e7),_0x5738db(0x22a),_0x5738db(0x20a),'aliPhoneTemplateCode']);if(Number(_0x168a47)!==0x1)throw new common_1['HttpException'](_0x5738db(0x1ea),common_1[_0x5738db(0x1a7)][_0x5738db(0x1ee)]);return{'accessKeyId':_0x403e7f,'accessKeySecret':_0x2e7493,'SignName':_0x2b0fb5,'TemplateCode':_0x3bc71e};}async[_0x188e0e(0x230)](){const _0x20b0a3=_0x188e0e,{qcloudPhoneRegisterStatus:_0x59bd02,qcloudSecretId:_0x2efc63,qcloudSecretKey:_0xe7bc96,qcloudPhoneSignName:_0x50a488,qcloudSMSTemplateId:_0x51011b,qcloudSMSSDKAppId:_0x39d886}=await this[_0x20b0a3(0x25e)](['qcloudPhoneRegisterStatus','qcloudSecretId',_0x20b0a3(0x263),_0x20b0a3(0x211),_0x20b0a3(0x252),_0x20b0a3(0x1c8)]);if(Number(_0x59bd02)!==0x1)throw new common_1[(_0x20b0a3(0x24e))](_0x20b0a3(0x1ea),common_1[_0x20b0a3(0x1a7)][_0x20b0a3(0x1ee)]);return{'secretId':_0x2efc63,'secretKey':_0xe7bc96,'signName':_0x50a488,'templateId':_0x51011b,'sdkAppId':_0x39d886};}[_0x188e0e(0x21f)](){const _0x474737=_0x188e0e;return process['env'][_0x474737(0x267)]||'NINEAI';}async[_0x188e0e(0x228)](){const _0x584d70=_0x188e0e,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this[_0x584d70(0x25e)]([_0x584d70(0x259),_0x584d70(0x1db),_0x584d70(0x257),_0x584d70(0x1ad)]);if(Number(signInStatus)!==0x1)throw new common_1[(_0x584d70(0x24e))](_0x584d70(0x231),common_1['HttpStatus'][_0x584d70(0x1ee)]);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async[_0x188e0e(0x1b5)](){const _0x50c4d8=_0x188e0e,_0x20d2c7=_0x50c4d8(0x1f2),_0x4c83f6=await fetch(_0x20d2c7,{}),_0x271996=await _0x4c83f6[_0x50c4d8(0x1f3)](),{success:success=!![],message:_0x581ab2}=_0x271996;common_1['Logger'][_0x50c4d8(0x214)](_0x50c4d8(0x225)),common_1[_0x50c4d8(0x1dc)]['error'](_0x50c4d8(0x1ac)),common_1[_0x50c4d8(0x1dc)]['error'](_0x50c4d8(0x1f4)),common_1[_0x50c4d8(0x1dc)][_0x50c4d8(0x214)]('缺失ip信息'),common_1['Logger'][_0x50c4d8(0x1b9)](_0x50c4d8(0x210));}async[_0x188e0e(0x26b)](){const _0x3c67aa=_0x188e0e,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x2848d8,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x45dc1e,nineaiBuiltInSensitiveAuthKey:_0x352f61}=await this[_0x3c67aa(0x25e)]([_0x3c67aa(0x206),_0x3c67aa(0x1c6),'nineaiBuiltInSensitiveStatus',_0x3c67aa(0x1e5),_0x3c67aa(0x245)]);if(Number(baiduTextStatus)===0x1)return{'useType':_0x3c67aa(0x26e),'baiduTextAccessToken':_0x2848d8};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':_0x3c67aa(0x271),'nineaiBuiltInSensitiveApiBase':_0x45dc1e,'nineaiBuiltInSensitiveAuthKey':_0x352f61};return null;}};function _0x31b6(_0x6bc1ce,_0x5da926){const _0x4ba6d0=_0x4ba6();return _0x31b6=function(_0x31b615,_0x5d9bbc){_0x31b615=_0x31b615-0x1a3;let _0x4bf3f3=_0x4ba6d0[_0x31b615];return _0x4bf3f3;},_0x31b6(_0x6bc1ce,_0x5da926);}GlobalConfigService=__decorate([(0x0,common_1[_0x188e0e(0x1b3)])(),__param(0x0,(0x0,typeorm_1[_0x188e0e(0x1ab)])(config_entity_1['ConfigEntity'])),__param(0x1,(0x0,typeorm_1[_0x188e0e(0x1ab)])(chatLog_entity_1[_0x188e0e(0x20f)])),__metadata(_0x188e0e(0x1f7),[typeorm_2['Repository'],typeorm_2['Repository'],models_service_1[_0x188e0e(0x217)]])],GlobalConfigService),exports[_0x188e0e(0x1d4)]=GlobalConfigService;