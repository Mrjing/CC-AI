'use strict';const _0x24519c=_0x5c30;(function(_0x28b1ab,_0x53a0be){const _0xb558f0=_0x5c30,_0xfe12ae=_0x28b1ab();while(!![]){try{const _0xb6d6ff=-parseInt(_0xb558f0(0xaf))/0x1*(parseInt(_0xb558f0(0xa2))/0x2)+-parseInt(_0xb558f0(0x125))/0x3*(parseInt(_0xb558f0(0xc3))/0x4)+-parseInt(_0xb558f0(0xb1))/0x5*(parseInt(_0xb558f0(0x12a))/0x6)+-parseInt(_0xb558f0(0xd1))/0x7*(parseInt(_0xb558f0(0xd4))/0x8)+-parseInt(_0xb558f0(0xd9))/0x9+-parseInt(_0xb558f0(0x10f))/0xa*(-parseInt(_0xb558f0(0x95))/0xb)+-parseInt(_0xb558f0(0xc4))/0xc*(-parseInt(_0xb558f0(0x13e))/0xd);if(_0xb6d6ff===_0x53a0be)break;else _0xfe12ae['push'](_0xfe12ae['shift']());}catch(_0x4f480a){_0xfe12ae['push'](_0xfe12ae['shift']());}}}(_0x4fe6,0xdaaed));function _0x4fe6(){const _0x176ece=['HttpStatus','https://aip.baidubce.com/oauth/2.0/token?client_id=','__metadata','metadata','chatGptKey:','qcloudPhoneRegisterStatus','update','find','8MpvQWd','234060GtruIz','firstRegisterSendRank','chatGptKey','filingNumber','getNineAiToken','auth','initBaiduSensitive','hideString','tencent','isAutoOpenNotice','payWechatStatus','onModuleInit','invitedGuestSendModel4Count','11505109jSavTM','decorate','@nestjs/typeorm','8wnSLHp','getWechatAccessToken','object','baiduTextStatus','error:\x20','6166863jcRpaK','openaiBaseUrl','nineaiBuiltInSensitiveAuthKey','getConfigs','OfficialService','isUseWxLogin','baidu','@nestjs/common','getQcloudPhoneVerifyConfig','ali','data','baiduTextApiKey','delete','emailRegisterStatus','mjUseBaiduFy','configVal','buyCramiAddress','siteRobotName','companyName','操作完成！','siteName','TRUE','phoneLoginStatus','\x20current\x20use\x20version\x20in\x20------>:\x20','user','firstRegisterSendStatus','__param','emailLoginStatus','请配置正确的秘钥、当前秘钥检测不通过！','aliPhoneTemplateCode','qqNumber','../models/models.service','fetchJsapiTicket','payMpayChannel','fetchBaseAccessToken','invitedGuestSendDrawMjCount','qcloudSecretKey','aliPhoneAccessKeySecret','payEpayStatus','clientFavoIconPath','NAMESPACE','aliPhoneAccessKeyId','json','mjHideWorkIn','wechatAccessToken','phoneRegisterStatus','super','queryFrontConfig','signInModel3Count','payWeChatPrivateKey','mpay','includes','https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=','Status','483880WlwlZv','InjectRepository','assign','length','__decorate','appMenuHeaderBgUrl','wechatRegisterStatus','registerSendModel4Count','access_token','__esModule','设置完成！','isVerifyEmail','GlobalConfigService','filter','nineAiToken','nineai','signInStatus','缺失ip信息','baiduTextAccessToken','qcloudPhoneLoginStatus','ConfigEntity','firstRregisterSendDrawMjCount','249351oDpjsH','salesBaseRatio','mjProxy','ChatLogEntity','function','1298406QPHuzU','axios','errMsg','BAD_REQUEST','cos','application/json','pay','queryNotice','configKey','Repository','支付功能暂未开放!','modelsService','get','Like','initGetAllConfig','MjdrawCount','copyrightUrl','Injectable','nineaiBuiltInSensitiveApiBase','payWeChatPublicKey','2522LDjEJn','queryGptKeys','default','getDiffArray','HttpException','signInMjDrawToken','response','isShowAppCatIcon','getCopyright','https://api.jiangly.com/api/permission/auth','clientHomePath','registerSendStatus','utf-8','error_description','Logger','copyrightTitle','clientLogoPath','aliPhoneSignName','getSensitiveConfig','mjProxyImgUrl','createOrUpdate','wechatJsapiTicket','&grant_type=client_credentials','隐私内容、非超级管理员无权查看','forEach','qcloudSMSSDKAppId','every','post','registerBaseUrl','wechatSilentLoginStatus','NINEAI','defineProperty','设置配置信息错误！','invitedGuestSendModel3Count','nineaiBuiltInSensitiveStatus','package.json','env','domain','setGptKeys','configEntity','286CrxITI','&secret=','wechatOfficialAppId','getOwnPropertyDescriptor','registerSendModel3Count','wechat','ModelsService','ISDEV','getPhoneVerifyConfig','wechatOfficialAppSecret','queryAllConfig','vxNumber','map','4322rMoGOO','salesAllowDrawMoney','inviteGiveSendDrawMjCount','手机验证码功能暂未开放!','../../common/utils','baiduTextSecretKey','readFileSync','ticket','hupi','getSignatureGiftConfig','reduce','globalConfigs','debug','664yNLTVz','save','5TquaOV','感谢您使用NineAi、祝您使用愉快~','mjHideNotBlock','payMpayStatus','noticeInfo','setConfig','payHupiStatus','log','error','registerSendDrawMjCount'];_0x4fe6=function(){return _0x176ece;};return _0x4fe6();}var __decorate=this&&this[_0x24519c(0x113)]||function(_0x5c6a3c,_0x473a7a,_0x5c0019,_0x552c91){const _0x1621e0=_0x24519c;var _0x4c9147=arguments[_0x1621e0(0x112)],_0x2a97c0=_0x4c9147<0x3?_0x473a7a:_0x552c91===null?_0x552c91=Object[_0x1621e0(0x98)](_0x473a7a,_0x5c0019):_0x552c91,_0x104078;if(typeof Reflect===_0x1621e0(0xd6)&&typeof Reflect[_0x1621e0(0xd2)]===_0x1621e0(0x129))_0x2a97c0=Reflect[_0x1621e0(0xd2)](_0x5c6a3c,_0x473a7a,_0x5c0019,_0x552c91);else{for(var _0x26ff50=_0x5c6a3c[_0x1621e0(0x112)]-0x1;_0x26ff50>=0x0;_0x26ff50--)if(_0x104078=_0x5c6a3c[_0x26ff50])_0x2a97c0=(_0x4c9147<0x3?_0x104078(_0x2a97c0):_0x4c9147>0x3?_0x104078(_0x473a7a,_0x5c0019,_0x2a97c0):_0x104078(_0x473a7a,_0x5c0019))||_0x2a97c0;}return _0x4c9147>0x3&&_0x2a97c0&&Object[_0x1621e0(0x8c)](_0x473a7a,_0x5c0019,_0x2a97c0),_0x2a97c0;},__metadata=this&&this[_0x24519c(0xbd)]||function(_0x10b5a7,_0x49ea75){const _0x1c1d8c=_0x24519c;if(typeof Reflect==='object'&&typeof Reflect[_0x1c1d8c(0xbe)]===_0x1c1d8c(0x129))return Reflect[_0x1c1d8c(0xbe)](_0x10b5a7,_0x49ea75);},__param=this&&this[_0x24519c(0xf3)]||function(_0x11cab9,_0x44bb53){return function(_0x3432b4,_0x797bf4){_0x44bb53(_0x3432b4,_0x797bf4,_0x11cab9);};};Object[_0x24519c(0x8c)](exports,_0x24519c(0x118),{'value':!![]}),exports[_0x24519c(0x11b)]=void 0x0;const models_service_1=require(_0x24519c(0xf8)),chatLog_entity_1=require('../chatLog/chatLog.entity'),common_1=require(_0x24519c(0xe0)),config_entity_1=require('./config.entity'),typeorm_1=require(_0x24519c(0xd3)),typeorm_2=require('typeorm'),utils_1=require(_0x24519c(0xa6)),axios_1=require(_0x24519c(0x12b)),fs=require('fs'),packageJsonContent=fs[_0x24519c(0xa8)](_0x24519c(0x90),_0x24519c(0x14a)),packageJson=JSON['parse'](packageJsonContent),version=packageJson['version'];console[_0x24519c(0xb8)](_0x24519c(0xf0),version);function _0x5c30(_0x3c80be,_0x24ccd9){const _0x4fe66a=_0x4fe6();return _0x5c30=function(_0x5c3022,_0x22284e){_0x5c3022=_0x5c3022-0x80;let _0xf6169e=_0x4fe66a[_0x5c3022];return _0xf6169e;},_0x5c30(_0x3c80be,_0x24ccd9);}let GlobalConfigService=class GlobalConfigService{constructor(_0x534671,_0x35c508,_0x333683){const _0x29fd60=_0x24519c;this[_0x29fd60(0x94)]=_0x534671,this['chatLogEntity']=_0x35c508,this[_0x29fd60(0x135)]=_0x333683,this[_0x29fd60(0xad)]={},this[_0x29fd60(0x11d)]=!![];}async[_0x24519c(0xcf)](){const _0x4438f7=_0x24519c;await this[_0x4438f7(0x138)]();}async[_0x24519c(0xdc)](_0x5d6622){const _0x541a56=_0x24519c;if(_0x5d6622[_0x541a56(0x112)]===0x0)return;if(_0x5d6622[_0x541a56(0x10c)](_0x541a56(0x105))&&_0x5d6622[_0x541a56(0x112)]===0x1)return this[_0x541a56(0x105)];if(_0x5d6622[_0x541a56(0x10c)](_0x541a56(0x82))&&_0x5d6622['length']===0x1)return this[_0x541a56(0x82)];if(_0x5d6622[_0x541a56(0x112)]===0x1)return this[_0x541a56(0xad)][_0x5d6622[0x0]];else{const _0x13552f={};return _0x5d6622['forEach'](_0x2c2053=>_0x13552f[_0x2c2053]=this[_0x541a56(0xad)][_0x2c2053]),_0x13552f;}}async[_0x24519c(0x138)](){const _0x4cae28=_0x24519c,_0x5f1c7b=await this[_0x4cae28(0x94)][_0x4cae28(0xc2)]();this[_0x4cae28(0xad)]=_0x5f1c7b['reduce']((_0x35a286,_0x249d56)=>{const _0x2e2c3a=_0x4cae28;return _0x35a286[_0x249d56[_0x2e2c3a(0x132)]]=_0x249d56[_0x2e2c3a(0xe8)],_0x35a286;},{}),this[_0x4cae28(0xca)]();}async[_0x24519c(0xca)](_0x226be6=!![]){const _0x46a562=_0x24519c,{baiduTextApiKey:_0x3ea025,baiduTextSecretKey:_0x3e58c6}=await this[_0x46a562(0xdc)](['baiduTextApiKey',_0x46a562(0xa7)]);if(!_0x3ea025||!_0x3e58c6){common_1['Logger']['error']('百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!','GlobalConfigService');return;}const _0x575b26={'Content-Type':_0x46a562(0x12f),'Accept':_0x46a562(0x12f)},_0x3aa9e6=_0x46a562(0xbc)+_0x3ea025+'&client_secret='+_0x3e58c6+_0x46a562(0x83);try{const _0xf90a52=await axios_1[_0x46a562(0x140)][_0x46a562(0x88)](_0x3aa9e6,{'headers':_0x575b26});this['globalConfigs'][_0x46a562(0x121)]=_0xf90a52[_0x46a562(0xe3)][_0x46a562(0x117)];}catch(_0x51b7c0){if(_0x226be6)common_1[_0x46a562(0x14c)][_0x46a562(0xb9)]('百度敏感词配置检测失败，您的参数可能配置的不正确!',_0x46a562(0x11b));else throw new common_1['HttpException'](_0x51b7c0[_0x46a562(0x144)][_0x46a562(0xe3)][_0x46a562(0x14b)],common_1[_0x46a562(0xbb)][_0x46a562(0x12d)]);}}async[_0x24519c(0xd5)](_0x2ce386=![]){const _0x168a7f=_0x24519c,{wechatOfficialAppId:_0x309fa5,wechatOfficialAppSecret:_0x2085eb}=await this[_0x168a7f(0xdc)]([_0x168a7f(0x97),_0x168a7f(0x9e)]);if(!_0x309fa5||!_0x2085eb)return common_1[_0x168a7f(0x14c)][_0x168a7f(0xb9)]('还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！',_0x168a7f(0xdd));this[_0x168a7f(0x105)]=await this[_0x168a7f(0xfb)](_0x309fa5,_0x2085eb,_0x2ce386),this[_0x168a7f(0x82)]=await this[_0x168a7f(0xf9)](this['wechatAccessToken']),common_1[_0x168a7f(0x14c)][_0x168a7f(0xb8)]('wechat\x20refresh\x20access_token\x20\x20==>\x20'+this[_0x168a7f(0x105)],'OfficialService');}async['fetchBaseAccessToken'](_0x1f6444,_0x5e0cb1,_0x3bcc4d=![]){const _0xf22615=_0x24519c;if(process[_0xf22615(0x91)]['ISDEV']===_0xf22615(0xee)){this[_0xf22615(0x105)]='';return;}const {data:{errmsg:_0x357dea,access_token:_0x23f76c}}=await axios_1[_0xf22615(0x140)][_0xf22615(0x136)]('https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid='+_0x1f6444+_0xf22615(0x96)+_0x5e0cb1);if(_0x357dea){console[_0xf22615(0xb8)](_0xf22615(0x12c),_0x357dea);if(_0x3bcc4d)common_1['Logger'][_0xf22615(0xb9)]('获取微信access_token失败、错误信息：'+_0x357dea,_0xf22615(0xdd));else throw new common_1[(_0xf22615(0x142))](_0xf22615(0xf5),common_1['HttpStatus'][_0xf22615(0x12d)]);return'';}return _0x23f76c;}async[_0x24519c(0xf9)](_0x3f85a6){const _0x4b40cd=_0x24519c;var _0x39ec6a;if(process[_0x4b40cd(0x91)][_0x4b40cd(0x9c)]===_0x4b40cd(0xee)){this[_0x4b40cd(0x82)]='';return;}const _0x551e10=await axios_1[_0x4b40cd(0x140)][_0x4b40cd(0x136)](_0x4b40cd(0x10d)+_0x3f85a6+'&type=jsapi');return(_0x39ec6a=_0x551e10===null||_0x551e10===void 0x0?void 0x0:_0x551e10[_0x4b40cd(0xe3)])===null||_0x39ec6a===void 0x0?void 0x0:_0x39ec6a[_0x4b40cd(0xa9)];}async[_0x24519c(0x9f)](_0x95b00a){const _0x495ce0=_0x24519c,{role:_0x1626a8}=_0x95b00a[_0x495ce0(0xf1)];return this[_0x495ce0(0xad)];}async[_0x24519c(0x108)](_0x53df10,_0x85f55e){const _0x1b478b=_0x24519c,_0x514617=[_0x1b478b(0xa0),_0x1b478b(0x149),_0x1b478b(0x99),_0x1b478b(0x116),_0x1b478b(0xba),_0x1b478b(0xf2),_0x1b478b(0xc5),'firstRregisterSendModel3Count','firstRregisterSendModel4Count',_0x1b478b(0x124),'inviteSendStatus','inviteGiveSendModel3Count','inviteGiveSendModel4Count',_0x1b478b(0xa4),_0x1b478b(0x8e),_0x1b478b(0xd0),_0x1b478b(0xfc),_0x1b478b(0x148),_0x1b478b(0x14e),_0x1b478b(0x100),_0x1b478b(0xde),_0x1b478b(0xed),'robotAvatar',_0x1b478b(0xea),_0x1b478b(0xe9),'mindDefaultData','baiduCode','payEpayChannel',_0x1b478b(0xfa),'payEpayApiPayUrl',_0x1b478b(0xff),_0x1b478b(0xb7),_0x1b478b(0xce),_0x1b478b(0xb4),_0x1b478b(0xcd),_0x1b478b(0x145),_0x1b478b(0x126),'salesSeniorRatio',_0x1b478b(0xa3),_0x1b478b(0xeb),_0x1b478b(0xc7),_0x1b478b(0x106),_0x1b478b(0xc0),_0x1b478b(0xe6),_0x1b478b(0xf4),_0x1b478b(0xef),_0x1b478b(0x122),_0x1b478b(0x115),_0x1b478b(0x8a),_0x1b478b(0x11f),_0x1b478b(0x109),'signInModel4Count',_0x1b478b(0x143),'appMenuHeaderTips',_0x1b478b(0x114),_0x1b478b(0xe7),_0x1b478b(0xb3),_0x1b478b(0x104),_0x1b478b(0x11a)],_0x3ff32c=await this[_0x1b478b(0x94)][_0x1b478b(0xc2)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x514617)}}),{domain:_0x571d48}=_0x53df10,_0x26098e=this['globalConfigs'][_0x1b478b(0x92)];_0x26098e!==_0x571d48&&(this[_0x1b478b(0x81)]({'configKey':'domain','configVal':_0x571d48,'status':0x1}),await this[_0x1b478b(0x138)]());const _0xb7c5bc=_0x3ff32c[_0x1b478b(0xac)]((_0x399443,_0x2e6022)=>{const _0x37830d=_0x1b478b;return _0x399443[_0x2e6022[_0x37830d(0x132)]]=_0x2e6022[_0x37830d(0xe8)],_0x399443;},{}),{wechatOfficialAppId:_0x1a6b36,wechatOfficialAppSecret:_0x5e71fd}=await this[_0x1b478b(0xdc)]([_0x1b478b(0x97),_0x1b478b(0x9e)]),_0x4a3d3a=!!(_0x1a6b36&&_0x5e71fd);return Object['assign'](Object[_0x1b478b(0x111)]({},_0xb7c5bc),{'isUseWxLogin':_0x4a3d3a});}async[_0x24519c(0x13f)](_0x2ed8db){const _0xda240e=_0x24519c,{role:_0xa968ee}=_0x2ed8db[_0xda240e(0xf1)],_0x4085ed=await this['configEntity'][_0xda240e(0xc2)]({'where':{'configKey':(0x0,typeorm_2[_0xda240e(0x137)])('%'+'chatGptKey'+'%')}});if(_0xa968ee==='super')return _0x4085ed;return _0x4085ed[_0xda240e(0xa1)](_0x53cb34=>{const _0x59eb73=_0xda240e;return _0x53cb34[_0x59eb73(0xe8)]=(0x0,utils_1[_0x59eb73(0xcb)])(_0x53cb34[_0x59eb73(0xe8)]),_0x53cb34;});}async[_0x24519c(0x93)](_0x2939c5){const _0x47e037=_0x24519c,_0x1f19a2=_0x2939c5['configs'][_0x47e037(0x11c)](_0x3dad70=>_0x3dad70[_0x47e037(0xe8)]),_0x4d0e02=_0x1f19a2['map'](_0x39199a=>_0x39199a[_0x47e037(0x132)]);for(const [_0x2ef69c,_0x1204e4]of _0x1f19a2['entries']()){const {configKey:_0x4f01a3,configVal:_0x2375bc,status:_0x3810e1}=_0x1204e4;await this[_0x47e037(0x81)]({'configKey':_0x47e037(0xbf)+(_0x2ef69c+0x1),'configVal':_0x2375bc,'status':_0x3810e1});}const _0x27ccb5=await this['configEntity'][_0x47e037(0xc2)]({'where':{'configKey':(0x0,typeorm_2[_0x47e037(0x137)])('%'+_0x47e037(0xc6)+'%')}}),_0x5ce987=_0x27ccb5['map'](_0x5c1955=>_0x5c1955[_0x47e037(0x132)]);if(_0x5ce987[_0x47e037(0x112)]>_0x4d0e02[_0x47e037(0x112)]){const _0x56bd83=(0x0,utils_1[_0x47e037(0x141)])(_0x5ce987[_0x47e037(0x112)],_0x4d0e02['length'],_0x47e037(0xbf));for(const _0x1de75f of _0x56bd83){await this[_0x47e037(0x94)][_0x47e037(0xe5)]({'configKey':_0x1de75f});}}return await this[_0x47e037(0x138)](),_0x47e037(0xec);}async['queryConfig'](_0x413928,_0x88810c){const _0x2e256c=_0x24519c,{role:_0x496c47}=_0x88810c['user'],{keys:_0x4b57fd}=_0x413928,_0x2e9a75=await this[_0x2e256c(0x94)][_0x2e256c(0xc2)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x4b57fd)}});return _0x496c47!==_0x2e256c(0x107)&&_0x2e9a75[_0x2e256c(0x85)](_0xbf219d=>{const _0x5a5874=_0x2e256c;if(_0xbf219d[_0x5a5874(0x132)][_0x5a5874(0x10c)]('mj')||_0xbf219d[_0x5a5874(0x132)][_0x5a5874(0x10c)]('Key')||_0xbf219d[_0x5a5874(0x132)]['includes']('gpt')||_0xbf219d['configKey']['includes'](_0x5a5874(0x12e))||_0xbf219d[_0x5a5874(0x132)][_0x5a5874(0x10c)](_0x5a5874(0xdf))||_0xbf219d[_0x5a5874(0x132)][_0x5a5874(0x10c)](_0x5a5874(0xe2))||_0xbf219d[_0x5a5874(0x132)][_0x5a5874(0x10c)](_0x5a5874(0xcc))||_0xbf219d[_0x5a5874(0x132)]['includes'](_0x5a5874(0x130))||_0xbf219d[_0x5a5874(0x132)][_0x5a5874(0x10c)](_0x5a5874(0x9a))||_0xbf219d['configKey'][_0x5a5874(0x10c)](_0x5a5874(0x80))||_0xbf219d[_0x5a5874(0x132)]===_0x5a5874(0xda)){const _0x57872a=[_0x5a5874(0x13d),_0x5a5874(0x10a)];if(_0x57872a[_0x5a5874(0x10c)](_0xbf219d[_0x5a5874(0x132)]))return _0xbf219d[_0x5a5874(0xe8)]=(0x0,utils_1[_0x5a5874(0xcb)])(_0xbf219d[_0x5a5874(0xe8)],_0x5a5874(0x84));const _0x255733=[_0x5a5874(0xff),_0x5a5874(0xb7),_0x5a5874(0x127)];!_0x255733[_0x5a5874(0x10c)](_0xbf219d[_0x5a5874(0x132)])&&!_0xbf219d[_0x5a5874(0x132)]['includes'](_0x5a5874(0x10e))&&(_0xbf219d[_0x5a5874(0xe8)]=(0x0,utils_1[_0x5a5874(0xcb)])(_0xbf219d[_0x5a5874(0xe8)]));}}),_0x2e9a75['reduce']((_0x48b90b,_0x5a4512)=>{const _0x302ab9=_0x2e256c;return _0x48b90b[_0x5a4512[_0x302ab9(0x132)]]=_0x5a4512[_0x302ab9(0xe8)],_0x48b90b;},{});}[_0x24519c(0xc8)](){const _0x611ef1=_0x24519c,_0x1a88c1=this[_0x611ef1(0xad)][_0x611ef1(0x139)],_0x39ef2d=this[_0x611ef1(0x11d)];return!_0x39ef2d||Number(_0x1a88c1)===0x1;}async[_0x24519c(0xb6)](_0x4ad4ae){const _0x1106a1=_0x24519c;try{const {settings:_0x19f3ac}=_0x4ad4ae;for(const _0x323422 of _0x19f3ac){await this[_0x1106a1(0x81)](_0x323422);}await this[_0x1106a1(0x138)]();const _0x2df1f1=_0x19f3ac[_0x1106a1(0xa1)](_0x2b4468=>_0x2b4468['configKey']);return(_0x2df1f1[_0x1106a1(0x10c)](_0x1106a1(0xe4))||_0x2df1f1['includes']('baiduTextSecretKey'))&&await this[_0x1106a1(0xca)](![]),(_0x2df1f1['includes'](_0x1106a1(0x97))||_0x2df1f1[_0x1106a1(0x10c)](_0x1106a1(0x9e)))&&await this[_0x1106a1(0xd5)](),_0x1106a1(0x119);}catch(_0x4f7056){console[_0x1106a1(0xb8)](_0x1106a1(0xd8),_0x4f7056);}}async[_0x24519c(0x81)](_0x1e68c7){const _0x40427f=_0x24519c;try{const {configKey:_0x393969,configVal:_0x10fe20,status:status=0x1}=_0x1e68c7,_0x379d44=await this[_0x40427f(0x94)]['findOne']({'where':{'configKey':_0x393969}});if(_0x379d44){const _0x26f0f6=await this[_0x40427f(0x94)][_0x40427f(0xc1)]({'configKey':_0x393969},{'configVal':_0x10fe20,'status':status});}else{const _0x323064=await this['configEntity'][_0x40427f(0xb0)]({'configKey':_0x393969,'configVal':_0x10fe20,'status':status});}}catch(_0x28cd9d){console[_0x40427f(0xb8)]('error:\x20',_0x28cd9d);throw new common_1[(_0x40427f(0x142))](_0x40427f(0x8d),common_1[_0x40427f(0xbb)][_0x40427f(0x12d)]);}}async[_0x24519c(0x131)](){const _0x5371b3=_0x24519c;return await this[_0x5371b3(0xdc)]([_0x5371b3(0xb5),'noticeTitle']);}async[_0x24519c(0x146)](){const _0x47d708=_0x24519c;return await this[_0x47d708(0xdc)]([_0x47d708(0x13a),_0x47d708(0x14d)]);}async['queryPayType'](){const _0x3543ae=_0x24519c,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this[_0x3543ae(0xdc)]([_0x3543ae(0xb7),_0x3543ae(0xff),_0x3543ae(0xb4),'payWechatStatus']);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus][_0x3543ae(0x87)](_0xd7c3a2=>_0xd7c3a2===0x0))throw new common_1[(_0x3543ae(0x142))](_0x3543ae(0x134),common_1[_0x3543ae(0xbb)][_0x3543ae(0x12d)]);if(Number(payWechatStatus)===0x1)return _0x3543ae(0x9a);if(Number(payEpayStatus)===0x1)return'epay';if(Number(payMpayStatus)===0x1)return _0x3543ae(0x10b);if(Number(payHupiStatus)===0x1)return _0x3543ae(0xaa);}async['getAuthInfo'](){const _0xf715c9=_0x24519c,{siteName:_0x2a6d5f,qqNumber:_0x54211a,vxNumber:_0x3dc7fb,registerBaseUrl:_0xd350ef,domain:_0x4e3ed7}=await this[_0xf715c9(0xdc)]([_0xf715c9(0xed),_0xf715c9(0xf7),_0xf715c9(0xa0),_0xf715c9(0x89),'domain']);return{'siteName':_0x2a6d5f,'qqNumber':_0x54211a,'vxNumber':_0x3dc7fb,'registerBaseUrl':_0xd350ef,'domain':_0x4e3ed7};}async[_0x24519c(0x9d)](){const _0x1e885d=_0x24519c,{phoneRegisterStatus:_0x1b7f1b,aliPhoneAccessKeyId:_0x56af33,aliPhoneAccessKeySecret:_0x20158a,aliPhoneSignName:_0x2bb2ce,aliPhoneTemplateCode:_0x1fdd36}=await this[_0x1e885d(0xdc)]([_0x1e885d(0x106),_0x1e885d(0x102),_0x1e885d(0xfe),_0x1e885d(0x14f),_0x1e885d(0xf6)]);if(Number(_0x1b7f1b)!==0x1)throw new common_1[(_0x1e885d(0x142))](_0x1e885d(0xa5),common_1[_0x1e885d(0xbb)]['BAD_REQUEST']);return{'accessKeyId':_0x56af33,'accessKeySecret':_0x20158a,'SignName':_0x2bb2ce,'TemplateCode':_0x1fdd36};}async[_0x24519c(0xe1)](){const _0xff29a5=_0x24519c,{qcloudPhoneRegisterStatus:_0xb303b6,qcloudSecretId:_0x385433,qcloudSecretKey:_0x5bc058,qcloudPhoneSignName:_0x3e4711,qcloudSMSTemplateId:_0x4784c7,qcloudSMSSDKAppId:_0xa4e8c}=await this[_0xff29a5(0xdc)]([_0xff29a5(0xc0),'qcloudSecretId',_0xff29a5(0xfd),'qcloudPhoneSignName','qcloudSMSTemplateId',_0xff29a5(0x86)]);if(Number(_0xb303b6)!==0x1)throw new common_1['HttpException'](_0xff29a5(0xa5),common_1[_0xff29a5(0xbb)][_0xff29a5(0x12d)]);return{'secretId':_0x385433,'secretKey':_0x5bc058,'signName':_0x3e4711,'templateId':_0x4784c7,'sdkAppId':_0xa4e8c};}['getNamespace'](){const _0x289525=_0x24519c;return process['env'][_0x289525(0x101)]||_0x289525(0x8b);}async[_0x24519c(0xab)](){const _0x27a242=_0x24519c,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this[_0x27a242(0xdc)]([_0x27a242(0x11f),_0x27a242(0x109),'signInModel4Count','signInMjDrawToken']);if(Number(signInStatus)!==0x1)throw new common_1[(_0x27a242(0x142))]('签到功能暂未开放!',common_1[_0x27a242(0xbb)][_0x27a242(0x12d)]);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async[_0x24519c(0xc9)](){const _0x865350=_0x24519c,_0xeb099a=_0x865350(0x147),_0x494b97=await fetch(_0xeb099a,{}),_0x111914=await _0x494b97[_0x865350(0x103)](),{success:success=!![],message:_0xd792f8}=_0x111914;common_1[_0x865350(0x14c)][_0x865350(0xb9)]('请按要求填写正确的授权信息'),common_1[_0x865350(0x14c)][_0x865350(0xb9)]('请填写您的授权码'),common_1[_0x865350(0x14c)]['error'](_0x865350(0x120)),common_1[_0x865350(0x14c)][_0x865350(0xb9)](_0x865350(0x120)),common_1[_0x865350(0x14c)][_0x865350(0xae)](_0x865350(0xb2));}async[_0x24519c(0x150)](){const _0x27fe4b=_0x24519c,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x1162ba,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x4a7c30,nineaiBuiltInSensitiveAuthKey:_0x1be139}=await this[_0x27fe4b(0xdc)]([_0x27fe4b(0xd7),_0x27fe4b(0x121),_0x27fe4b(0x8f),_0x27fe4b(0x13c),_0x27fe4b(0xdb)]);if(Number(baiduTextStatus)===0x1)return{'useType':_0x27fe4b(0xdf),'baiduTextAccessToken':_0x1162ba};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':_0x27fe4b(0x11e),'nineaiBuiltInSensitiveApiBase':_0x4a7c30,'nineaiBuiltInSensitiveAuthKey':_0x1be139};return null;}};GlobalConfigService=__decorate([(0x0,common_1[_0x24519c(0x13b)])(),__param(0x0,(0x0,typeorm_1[_0x24519c(0x110)])(config_entity_1[_0x24519c(0x123)])),__param(0x1,(0x0,typeorm_1[_0x24519c(0x110)])(chatLog_entity_1[_0x24519c(0x128)])),__metadata('design:paramtypes',[typeorm_2[_0x24519c(0x133)],typeorm_2[_0x24519c(0x133)],models_service_1[_0x24519c(0x9b)]])],GlobalConfigService),exports[_0x24519c(0x11b)]=GlobalConfigService;