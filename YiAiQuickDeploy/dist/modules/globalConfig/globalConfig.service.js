'use strict';const _0x1a04ab=_0x503a;(function(_0x138739,_0x307357){const _0x123ccf=_0x503a,_0x238778=_0x138739();while(!![]){try{const _0x1ccf71=parseInt(_0x123ccf(0x10e))/0x1*(parseInt(_0x123ccf(0xfe))/0x2)+parseInt(_0x123ccf(0x8f))/0x3+-parseInt(_0x123ccf(0xa6))/0x4+parseInt(_0x123ccf(0xcd))/0x5+-parseInt(_0x123ccf(0xc6))/0x6*(-parseInt(_0x123ccf(0x11d))/0x7)+-parseInt(_0x123ccf(0x117))/0x8*(-parseInt(_0x123ccf(0xf5))/0x9)+parseInt(_0x123ccf(0x81))/0xa*(-parseInt(_0x123ccf(0x10d))/0xb);if(_0x1ccf71===_0x307357)break;else _0x238778['push'](_0x238778['shift']());}catch(_0x51adee){_0x238778['push'](_0x238778['shift']());}}}(_0x6436,0xd3fc7));function _0x6436(){const _0x3dc29e=['348AwBzww','error_description','queryConfig','getAuthInfo','BAD_REQUEST','map','qcloudSecretId','invitedGuestSendDrawMjCount','隐私内容、非超级管理员无权查看','还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！','inviteGiveSendModel3Count','__param','function','firstRegisterSendRank','qcloudPhoneRegisterStatus','2655477xdNxRc','9314GJnNyi','get','ISDEV','payEpayChannel','initGetAllConfig','aliPhoneTemplateCode','length','registerSendModel4Count','update','424Gpuvvp','setGptKeys','baiduCode','wechatJsapiTicket','payWeChatPublicKey','getSensitiveConfig','8376249tbWtYd','HttpStatus','isShowAppCatIcon','mindDefaultData','ticket','find','access_token','wechat','isUseWxLogin','modelsService','请配置正确的秘钥、当前秘钥检测不通过！','emailLoginStatus','payWechatStatus','queryFrontConfig','InjectRepository','Key','getDiffArray','firstRegisterSendStatus','nineaiBuiltInSensitiveAuthKey','isVerifyEmail','pay','env','application/json','wechatOfficialAppSecret','assign','chatGptKey:','wechatAccessToken','salesSeniorRatio','https://api.jiangly.com/api/permission/auth','百度敏感词配置检测失败，您的参数可能配置的不正确!','百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!','forEach','epay','Logger','baiduTextApiKey','aliPhoneAccessKeyId','json','copyrightUrl','configVal','user','fetchJsapiTicket','decorate','Injectable','mjUseBaiduFy','noticeInfo','120EtzJgw','version','post','nineaiBuiltInSensitiveStatus','getNamespace','error:\x20','signInStatus','../chatLog/chatLog.entity','wechat\x20refresh\x20access_token\x20\x20==>\x20','aliPhoneAccessKeySecret','entries','getSignatureGiftConfig','configKey','setConfig','1646280vFTNaw','mjHideWorkIn','ModelsService','readFileSync','configEntity','hideString','qcloudSecretKey','&grant_type=client_credentials','wechatOfficialAppId','qcloudPhoneSignName','save','@nestjs/common','invitedGuestSendModel4Count','globalConfigs','https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=','Status','ChatLogEntity','includes','initBaiduSensitive','registerSendStatus','appMenuHeaderBgUrl','createOrUpdate','../models/models.service','1634264PtRVnJ','queryGptKeys','mjHideNotBlock','delete','缺失ip信息','payMpayStatus','utf-8','Repository','hupi','robotAvatar','package.json','__decorate','phoneRegisterStatus','ali','log','signInModel3Count','registerSendDrawMjCount','object','noticeTitle','onModuleInit','&type=jsapi','parse','./config.entity','vxNumber','signInModel4Count','salesBaseRatio','nineai','mjProxy','tencent','chatGptKey','clientFavoIconPath','fetchBaseAccessToken','6CrywPx','@nestjs/typeorm','super','请填写您的授权码','data','Like','mjProxyImgUrl','3052115ePaqXv','感谢您使用NineAi、祝您使用愉快~','inviteSendStatus','inviteGiveSendDrawMjCount','salesAllowDrawMoney','inviteGiveSendModel4Count','手机验证码功能暂未开放!','getCopyright','HttpException','payHupiStatus','ConfigEntity','signInMjDrawToken','queryAllConfig','getNineAiToken','qcloudSMSSDKAppId','default','qcloudPhoneLoginStatus','phoneLoginStatus','axios','siteName','baidu','invitedGuestSendModel3Count','clientHomePath','clientLogoPath','getWechatAccessToken','siteRobotName','TRUE','errMsg','buyCramiAddress','response','payEpayStatus','openaiBaseUrl','appMenuHeaderTips','GlobalConfigService','getOwnPropertyDescriptor','nineAiToken','reduce','error','metadata','getConfigs','33507HLxndr','queryPayType','domain','aliPhoneSignName','firstRregisterSendDrawMjCount','baiduTextSecretKey','OfficialService','NAMESPACE','wechatSilentLoginStatus'];_0x6436=function(){return _0x3dc29e;};return _0x6436();}function _0x503a(_0x20b4d5,_0x5511e){const _0x64365c=_0x6436();return _0x503a=function(_0x503ad8,_0x2d4d2a){_0x503ad8=_0x503ad8-0x7e;let _0x33f617=_0x64365c[_0x503ad8];return _0x33f617;},_0x503a(_0x20b4d5,_0x5511e);}var __decorate=this&&this[_0x1a04ab(0xb1)]||function(_0x5b23b0,_0x3a2dcd,_0x4594d3,_0x2fe58f){const _0x4f1ad4=_0x1a04ab;var _0x3bb14d=arguments[_0x4f1ad4(0x114)],_0x45d51b=_0x3bb14d<0x3?_0x3a2dcd:_0x2fe58f===null?_0x2fe58f=Object[_0x4f1ad4(0xef)](_0x3a2dcd,_0x4594d3):_0x2fe58f,_0x489ee4;if(typeof Reflect===_0x4f1ad4(0xb7)&&typeof Reflect[_0x4f1ad4(0x146)]===_0x4f1ad4(0x10a))_0x45d51b=Reflect['decorate'](_0x5b23b0,_0x3a2dcd,_0x4594d3,_0x2fe58f);else{for(var _0x89a514=_0x5b23b0['length']-0x1;_0x89a514>=0x0;_0x89a514--)if(_0x489ee4=_0x5b23b0[_0x89a514])_0x45d51b=(_0x3bb14d<0x3?_0x489ee4(_0x45d51b):_0x3bb14d>0x3?_0x489ee4(_0x3a2dcd,_0x4594d3,_0x45d51b):_0x489ee4(_0x3a2dcd,_0x4594d3))||_0x45d51b;}return _0x3bb14d>0x3&&_0x45d51b&&Object['defineProperty'](_0x3a2dcd,_0x4594d3,_0x45d51b),_0x45d51b;},__metadata=this&&this['__metadata']||function(_0x4d0e98,_0x65cf64){const _0x4d5bea=_0x1a04ab;if(typeof Reflect===_0x4d5bea(0xb7)&&typeof Reflect['metadata']===_0x4d5bea(0x10a))return Reflect[_0x4d5bea(0xf3)](_0x4d0e98,_0x65cf64);},__param=this&&this[_0x1a04ab(0x109)]||function(_0x159890,_0x474948){return function(_0x22ac74,_0x8aab6f){_0x474948(_0x22ac74,_0x8aab6f,_0x159890);};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[_0x1a04ab(0xee)]=void 0x0;const models_service_1=require(_0x1a04ab(0xa5)),chatLog_entity_1=require(_0x1a04ab(0x88)),common_1=require(_0x1a04ab(0x9a)),config_entity_1=require(_0x1a04ab(0xbc)),typeorm_1=require(_0x1a04ab(0xc7)),typeorm_2=require('typeorm'),utils_1=require('../../common/utils'),axios_1=require(_0x1a04ab(0xdf)),fs=require('fs'),packageJsonContent=fs[_0x1a04ab(0x92)](_0x1a04ab(0xb0),_0x1a04ab(0xac)),packageJson=JSON[_0x1a04ab(0xbb)](packageJsonContent),version=packageJson[_0x1a04ab(0x82)];console[_0x1a04ab(0xb4)]('\x20current\x20use\x20version\x20in\x20------>:\x20',version);let GlobalConfigService=class GlobalConfigService{constructor(_0x4a5492,_0x424983,_0x3bc55b){const _0x4d2c58=_0x1a04ab;this[_0x4d2c58(0x93)]=_0x4a5492,this['chatLogEntity']=_0x424983,this[_0x4d2c58(0x126)]=_0x3bc55b,this[_0x4d2c58(0x9c)]={},this[_0x4d2c58(0xf0)]=!![];}async[_0x1a04ab(0xb9)](){const _0x27e738=_0x1a04ab;await this[_0x27e738(0x112)]();}async[_0x1a04ab(0xf4)](_0x3c8d3f){const _0x5537ac=_0x1a04ab;if(_0x3c8d3f[_0x5537ac(0x114)]===0x0)return;if(_0x3c8d3f['includes'](_0x5537ac(0x137))&&_0x3c8d3f['length']===0x1)return this['wechatAccessToken'];if(_0x3c8d3f[_0x5537ac(0xa0)](_0x5537ac(0x11a))&&_0x3c8d3f[_0x5537ac(0x114)]===0x1)return this[_0x5537ac(0x11a)];if(_0x3c8d3f[_0x5537ac(0x114)]===0x1)return this[_0x5537ac(0x9c)][_0x3c8d3f[0x0]];else{const _0x4c9276={};return _0x3c8d3f[_0x5537ac(0x13c)](_0x5604ce=>_0x4c9276[_0x5604ce]=this['globalConfigs'][_0x5604ce]),_0x4c9276;}}async[_0x1a04ab(0x112)](){const _0x305892=_0x1a04ab,_0x841bd9=await this[_0x305892(0x93)][_0x305892(0x122)]();this[_0x305892(0x9c)]=_0x841bd9['reduce']((_0x1de03f,_0x23fd20)=>{const _0x30d599=_0x305892;return _0x1de03f[_0x23fd20['configKey']]=_0x23fd20[_0x30d599(0x143)],_0x1de03f;},{}),this[_0x305892(0xa1)]();}async['initBaiduSensitive'](_0x5d2874=!![]){const _0x3af455=_0x1a04ab,{baiduTextApiKey:_0x1a6021,baiduTextSecretKey:_0x47ad87}=await this[_0x3af455(0xf4)]([_0x3af455(0x13f),_0x3af455(0xfa)]);if(!_0x1a6021||!_0x47ad87){common_1[_0x3af455(0x13e)][_0x3af455(0xf2)](_0x3af455(0x13b),_0x3af455(0xee));return;}const _0x3543c4={'Content-Type':'application/json','Accept':_0x3af455(0x133)},_0x396c3b='https://aip.baidubce.com/oauth/2.0/token?client_id='+_0x1a6021+'&client_secret='+_0x47ad87+_0x3af455(0x96);try{const _0x1522cf=await axios_1[_0x3af455(0xdc)][_0x3af455(0x83)](_0x396c3b,{'headers':_0x3543c4});this[_0x3af455(0x9c)]['baiduTextAccessToken']=_0x1522cf['data'][_0x3af455(0x123)];}catch(_0x49e316){if(_0x5d2874)common_1[_0x3af455(0x13e)][_0x3af455(0xf2)](_0x3af455(0x13a),_0x3af455(0xee));else throw new common_1[(_0x3af455(0xd5))](_0x49e316[_0x3af455(0xea)]['data'][_0x3af455(0xff)],common_1[_0x3af455(0x11e)][_0x3af455(0x102)]);}}async[_0x1a04ab(0xe5)](_0x4030d0=![]){const _0x524e23=_0x1a04ab,{wechatOfficialAppId:_0x50788f,wechatOfficialAppSecret:_0x89118b}=await this[_0x524e23(0xf4)]([_0x524e23(0x97),_0x524e23(0x134)]);if(!_0x50788f||!_0x89118b)return common_1[_0x524e23(0x13e)][_0x524e23(0xf2)](_0x524e23(0x107),_0x524e23(0xfb));this[_0x524e23(0x137)]=await this[_0x524e23(0xc5)](_0x50788f,_0x89118b,_0x4030d0),this[_0x524e23(0x11a)]=await this[_0x524e23(0x145)](this[_0x524e23(0x137)]),common_1['Logger']['log'](_0x524e23(0x89)+this[_0x524e23(0x137)],_0x524e23(0xfb));}async[_0x1a04ab(0xc5)](_0x3eefb1,_0x4b734d,_0xc5b706=![]){const _0x461222=_0x1a04ab;if(process[_0x461222(0x132)][_0x461222(0x110)]===_0x461222(0xe7)){this[_0x461222(0x137)]='';return;}const {data:{errmsg:_0x5060da,access_token:_0x540511}}=await axios_1[_0x461222(0xdc)][_0x461222(0x10f)](_0x461222(0x9d)+_0x3eefb1+'&secret='+_0x4b734d);if(_0x5060da){console[_0x461222(0xb4)](_0x461222(0xe8),_0x5060da);if(_0xc5b706)common_1[_0x461222(0x13e)][_0x461222(0xf2)]('获取微信access_token失败、错误信息：'+_0x5060da,_0x461222(0xfb));else throw new common_1[(_0x461222(0xd5))](_0x461222(0x127),common_1[_0x461222(0x11e)][_0x461222(0x102)]);return'';}return _0x540511;}async[_0x1a04ab(0x145)](_0x416ce8){const _0x5a1862=_0x1a04ab;var _0x2ff081;if(process['env']['ISDEV']===_0x5a1862(0xe7)){this[_0x5a1862(0x11a)]='';return;}const _0x32b853=await axios_1[_0x5a1862(0xdc)]['get']('https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token='+_0x416ce8+_0x5a1862(0xba));return(_0x2ff081=_0x32b853===null||_0x32b853===void 0x0?void 0x0:_0x32b853[_0x5a1862(0xca)])===null||_0x2ff081===void 0x0?void 0x0:_0x2ff081[_0x5a1862(0x121)];}async[_0x1a04ab(0xd9)](_0x31e0d0){const _0xf1b50a=_0x1a04ab,{role:_0x3970f6}=_0x31e0d0[_0xf1b50a(0x144)];return this['globalConfigs'];}async[_0x1a04ab(0x12a)](_0x6be2fe,_0x1f231e){const _0x45a692=_0x1a04ab,_0x44c6e7=[_0x45a692(0xbd),_0x45a692(0xa2),'registerSendModel3Count',_0x45a692(0x115),_0x45a692(0xb6),_0x45a692(0x12e),_0x45a692(0x10b),'firstRregisterSendModel3Count','firstRregisterSendModel4Count',_0x45a692(0xf9),_0x45a692(0xcf),_0x45a692(0x108),_0x45a692(0xd2),_0x45a692(0xd0),_0x45a692(0xe2),_0x45a692(0x9b),_0x45a692(0x105),_0x45a692(0xe3),_0x45a692(0xe4),_0x45a692(0xc4),_0x45a692(0x125),'siteName',_0x45a692(0xaf),_0x45a692(0xe6),_0x45a692(0xe9),_0x45a692(0x120),_0x45a692(0x119),_0x45a692(0x111),'payMpayChannel','payEpayApiPayUrl',_0x45a692(0xeb),'payHupiStatus',_0x45a692(0x129),_0x45a692(0xab),'isAutoOpenNotice',_0x45a692(0x11f),_0x45a692(0xbf),_0x45a692(0x138),_0x45a692(0xd1),'companyName','filingNumber',_0x45a692(0xb2),_0x45a692(0x10c),'emailRegisterStatus',_0x45a692(0x128),_0x45a692(0xde),_0x45a692(0xdd),'wechatRegisterStatus',_0x45a692(0xfd),_0x45a692(0x87),_0x45a692(0xb5),_0x45a692(0xbe),_0x45a692(0xd8),_0x45a692(0xed),_0x45a692(0xa3),_0x45a692(0x7f),_0x45a692(0xa8),_0x45a692(0x90),_0x45a692(0x130)],_0x22a7f1=await this[_0x45a692(0x93)]['find']({'where':{'configKey':(0x0,typeorm_2['In'])(_0x44c6e7)}}),{domain:_0x15d465}=_0x6be2fe,_0xd2e474=this[_0x45a692(0x9c)][_0x45a692(0xf7)];_0xd2e474!==_0x15d465&&(this['createOrUpdate']({'configKey':_0x45a692(0xf7),'configVal':_0x15d465,'status':0x1}),await this['initGetAllConfig']());const _0x23821e=_0x22a7f1[_0x45a692(0xf1)]((_0x57de5b,_0x36f218)=>{const _0x426d51=_0x45a692;return _0x57de5b[_0x36f218[_0x426d51(0x8d)]]=_0x36f218[_0x426d51(0x143)],_0x57de5b;},{}),{wechatOfficialAppId:_0x247374,wechatOfficialAppSecret:_0x57b1e8}=await this[_0x45a692(0xf4)](['wechatOfficialAppId','wechatOfficialAppSecret']),_0x44ba9c=!!(_0x247374&&_0x57b1e8);return Object['assign'](Object[_0x45a692(0x135)]({},_0x23821e),{'isUseWxLogin':_0x44ba9c});}async[_0x1a04ab(0xa7)](_0x126160){const _0x4bac3d=_0x1a04ab,{role:_0x4e88ee}=_0x126160[_0x4bac3d(0x144)],_0x5351de=await this[_0x4bac3d(0x93)][_0x4bac3d(0x122)]({'where':{'configKey':(0x0,typeorm_2['Like'])('%'+_0x4bac3d(0xc3)+'%')}});if(_0x4e88ee==='super')return _0x5351de;return _0x5351de[_0x4bac3d(0x103)](_0x1185f=>{const _0x129472=_0x4bac3d;return _0x1185f[_0x129472(0x143)]=(0x0,utils_1[_0x129472(0x94)])(_0x1185f[_0x129472(0x143)]),_0x1185f;});}async[_0x1a04ab(0x118)](_0x13bdda){const _0x78bbe0=_0x1a04ab,_0x288d23=_0x13bdda['configs']['filter'](_0x4509a4=>_0x4509a4[_0x78bbe0(0x143)]),_0x410b86=_0x288d23[_0x78bbe0(0x103)](_0x1bf726=>_0x1bf726[_0x78bbe0(0x8d)]);for(const [_0x4bb3ba,_0x5ec57d]of _0x288d23[_0x78bbe0(0x8b)]()){const {configKey:_0xd34479,configVal:_0x1e9efe,status:_0x6a8a8c}=_0x5ec57d;await this[_0x78bbe0(0xa4)]({'configKey':'chatGptKey:'+(_0x4bb3ba+0x1),'configVal':_0x1e9efe,'status':_0x6a8a8c});}const _0x648300=await this[_0x78bbe0(0x93)][_0x78bbe0(0x122)]({'where':{'configKey':(0x0,typeorm_2[_0x78bbe0(0xcb)])('%'+_0x78bbe0(0xc3)+'%')}}),_0x3c5ea9=_0x648300[_0x78bbe0(0x103)](_0x722da7=>_0x722da7[_0x78bbe0(0x8d)]);if(_0x3c5ea9[_0x78bbe0(0x114)]>_0x410b86[_0x78bbe0(0x114)]){const _0x416d72=(0x0,utils_1[_0x78bbe0(0x12d)])(_0x3c5ea9[_0x78bbe0(0x114)],_0x410b86['length'],_0x78bbe0(0x136));for(const _0x19368e of _0x416d72){await this[_0x78bbe0(0x93)][_0x78bbe0(0xa9)]({'configKey':_0x19368e});}}return await this[_0x78bbe0(0x112)](),'操作完成！';}async[_0x1a04ab(0x100)](_0x2d42f0,_0x3be1fe){const _0x379fe3=_0x1a04ab,{role:_0x47e6d2}=_0x3be1fe[_0x379fe3(0x144)],{keys:_0x245073}=_0x2d42f0,_0x1027a2=await this[_0x379fe3(0x93)][_0x379fe3(0x122)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x245073)}});return _0x47e6d2!==_0x379fe3(0xc8)&&_0x1027a2[_0x379fe3(0x13c)](_0x5c71ee=>{const _0x3129ee=_0x379fe3;if(_0x5c71ee[_0x3129ee(0x8d)][_0x3129ee(0xa0)]('mj')||_0x5c71ee[_0x3129ee(0x8d)][_0x3129ee(0xa0)](_0x3129ee(0x12c))||_0x5c71ee[_0x3129ee(0x8d)][_0x3129ee(0xa0)]('gpt')||_0x5c71ee['configKey'][_0x3129ee(0xa0)]('cos')||_0x5c71ee[_0x3129ee(0x8d)]['includes'](_0x3129ee(0xe1))||_0x5c71ee[_0x3129ee(0x8d)][_0x3129ee(0xa0)](_0x3129ee(0xb3))||_0x5c71ee[_0x3129ee(0x8d)][_0x3129ee(0xa0)](_0x3129ee(0xc2))||_0x5c71ee[_0x3129ee(0x8d)]['includes'](_0x3129ee(0x131))||_0x5c71ee[_0x3129ee(0x8d)][_0x3129ee(0xa0)](_0x3129ee(0x124))||_0x5c71ee[_0x3129ee(0x8d)]['includes'](_0x3129ee(0xcc))||_0x5c71ee[_0x3129ee(0x8d)]===_0x3129ee(0xec)){const _0x16b297=[_0x3129ee(0x11b),'payWeChatPrivateKey'];if(_0x16b297[_0x3129ee(0xa0)](_0x5c71ee[_0x3129ee(0x8d)]))return _0x5c71ee[_0x3129ee(0x143)]=(0x0,utils_1[_0x3129ee(0x94)])(_0x5c71ee['configVal'],_0x3129ee(0x106));const _0x397b38=[_0x3129ee(0xeb),_0x3129ee(0xd6),_0x3129ee(0xc1)];!_0x397b38[_0x3129ee(0xa0)](_0x5c71ee[_0x3129ee(0x8d)])&&!_0x5c71ee[_0x3129ee(0x8d)][_0x3129ee(0xa0)](_0x3129ee(0x9e))&&(_0x5c71ee[_0x3129ee(0x143)]=(0x0,utils_1[_0x3129ee(0x94)])(_0x5c71ee[_0x3129ee(0x143)]));}}),_0x1027a2[_0x379fe3(0xf1)]((_0x56934d,_0x5336df)=>{const _0x1b78dd=_0x379fe3;return _0x56934d[_0x5336df[_0x1b78dd(0x8d)]]=_0x5336df[_0x1b78dd(0x143)],_0x56934d;},{});}[_0x1a04ab(0xda)](){const _0x417dff=_0x1a04ab,_0x60c884=this[_0x417dff(0x9c)]['MjdrawCount'],_0xcae6c=this[_0x417dff(0xf0)];return!_0xcae6c||Number(_0x60c884)===0x1;}async[_0x1a04ab(0x8e)](_0x33e9fc){const _0x99ad3=_0x1a04ab;try{const {settings:_0x45ef3f}=_0x33e9fc;for(const _0x1fa60d of _0x45ef3f){await this[_0x99ad3(0xa4)](_0x1fa60d);}await this[_0x99ad3(0x112)]();const _0x58fd9d=_0x45ef3f[_0x99ad3(0x103)](_0x55d1f7=>_0x55d1f7[_0x99ad3(0x8d)]);return(_0x58fd9d[_0x99ad3(0xa0)](_0x99ad3(0x13f))||_0x58fd9d[_0x99ad3(0xa0)]('baiduTextSecretKey'))&&await this[_0x99ad3(0xa1)](![]),(_0x58fd9d[_0x99ad3(0xa0)](_0x99ad3(0x97))||_0x58fd9d['includes'](_0x99ad3(0x134)))&&await this[_0x99ad3(0xe5)](),'设置完成！';}catch(_0x415530){console['log'](_0x99ad3(0x86),_0x415530);}}async[_0x1a04ab(0xa4)](_0x420cb6){const _0x2d91a6=_0x1a04ab;try{const {configKey:_0x3e8390,configVal:_0xc8b2cf,status:status=0x1}=_0x420cb6,_0x599d11=await this[_0x2d91a6(0x93)]['findOne']({'where':{'configKey':_0x3e8390}});if(_0x599d11){const _0x2da354=await this[_0x2d91a6(0x93)][_0x2d91a6(0x116)]({'configKey':_0x3e8390},{'configVal':_0xc8b2cf,'status':status});}else{const _0x1b8a7f=await this[_0x2d91a6(0x93)][_0x2d91a6(0x99)]({'configKey':_0x3e8390,'configVal':_0xc8b2cf,'status':status});}}catch(_0x26a410){console[_0x2d91a6(0xb4)]('error:\x20',_0x26a410);throw new common_1[(_0x2d91a6(0xd5))]('设置配置信息错误！',common_1[_0x2d91a6(0x11e)][_0x2d91a6(0x102)]);}}async['queryNotice'](){const _0x5819bd=_0x1a04ab;return await this[_0x5819bd(0xf4)]([_0x5819bd(0x80),_0x5819bd(0xb8)]);}async[_0x1a04ab(0xd4)](){const _0x49cc2c=_0x1a04ab;return await this[_0x49cc2c(0xf4)]([_0x49cc2c(0x142),'copyrightTitle']);}async[_0x1a04ab(0xf6)](){const _0x251cdb=_0x1a04ab,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this[_0x251cdb(0xf4)]([_0x251cdb(0xd6),'payEpayStatus',_0x251cdb(0xab),_0x251cdb(0x129)]);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus]['every'](_0x28ad03=>_0x28ad03===0x0))throw new common_1[(_0x251cdb(0xd5))]('支付功能暂未开放!',common_1[_0x251cdb(0x11e)]['BAD_REQUEST']);if(Number(payWechatStatus)===0x1)return _0x251cdb(0x124);if(Number(payEpayStatus)===0x1)return _0x251cdb(0x13d);if(Number(payMpayStatus)===0x1)return'mpay';if(Number(payHupiStatus)===0x1)return _0x251cdb(0xae);}async[_0x1a04ab(0x101)](){const _0x468330=_0x1a04ab,{siteName:_0x1c543f,qqNumber:_0xe6b056,vxNumber:_0x47271f,registerBaseUrl:_0xca3395,domain:_0x5de32e}=await this['getConfigs']([_0x468330(0xe0),'qqNumber','vxNumber','registerBaseUrl',_0x468330(0xf7)]);return{'siteName':_0x1c543f,'qqNumber':_0xe6b056,'vxNumber':_0x47271f,'registerBaseUrl':_0xca3395,'domain':_0x5de32e};}async['getPhoneVerifyConfig'](){const _0x134e45=_0x1a04ab,{phoneRegisterStatus:_0x4ecae1,aliPhoneAccessKeyId:_0x28fe03,aliPhoneAccessKeySecret:_0x3a0f43,aliPhoneSignName:_0x31081b,aliPhoneTemplateCode:_0x2ab4ab}=await this['getConfigs']([_0x134e45(0xb2),_0x134e45(0x140),_0x134e45(0x8a),_0x134e45(0xf8),_0x134e45(0x113)]);if(Number(_0x4ecae1)!==0x1)throw new common_1[(_0x134e45(0xd5))]('手机验证码功能暂未开放!',common_1[_0x134e45(0x11e)]['BAD_REQUEST']);return{'accessKeyId':_0x28fe03,'accessKeySecret':_0x3a0f43,'SignName':_0x31081b,'TemplateCode':_0x2ab4ab};}async['getQcloudPhoneVerifyConfig'](){const _0x139662=_0x1a04ab,{qcloudPhoneRegisterStatus:_0x24ea82,qcloudSecretId:_0x481075,qcloudSecretKey:_0x4050ab,qcloudPhoneSignName:_0x15e8e7,qcloudSMSTemplateId:_0x17d1b1,qcloudSMSSDKAppId:_0x46dd4c}=await this[_0x139662(0xf4)](['qcloudPhoneRegisterStatus',_0x139662(0x104),_0x139662(0x95),_0x139662(0x98),'qcloudSMSTemplateId',_0x139662(0xdb)]);if(Number(_0x24ea82)!==0x1)throw new common_1[(_0x139662(0xd5))](_0x139662(0xd3),common_1['HttpStatus'][_0x139662(0x102)]);return{'secretId':_0x481075,'secretKey':_0x4050ab,'signName':_0x15e8e7,'templateId':_0x17d1b1,'sdkAppId':_0x46dd4c};}[_0x1a04ab(0x85)](){const _0x59aee8=_0x1a04ab;return process['env'][_0x59aee8(0xfc)]||'NINEAI';}async[_0x1a04ab(0x8c)](){const _0x2f5614=_0x1a04ab,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this[_0x2f5614(0xf4)]([_0x2f5614(0x87),_0x2f5614(0xb5),_0x2f5614(0xbe),_0x2f5614(0xd8)]);if(Number(signInStatus)!==0x1)throw new common_1[(_0x2f5614(0xd5))]('签到功能暂未开放!',common_1[_0x2f5614(0x11e)][_0x2f5614(0x102)]);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async['auth'](){const _0x55807c=_0x1a04ab,_0x91a775=_0x55807c(0x139),_0xc6e9fa=await fetch(_0x91a775,{}),_0x4e6cfd=await _0xc6e9fa[_0x55807c(0x141)](),{success:success=!![],message:_0x2d9e84}=_0x4e6cfd;common_1[_0x55807c(0x13e)]['error']('请按要求填写正确的授权信息'),common_1[_0x55807c(0x13e)][_0x55807c(0xf2)](_0x55807c(0xc9)),common_1[_0x55807c(0x13e)]['error'](_0x55807c(0xaa)),common_1['Logger'][_0x55807c(0xf2)]('缺失ip信息'),common_1['Logger']['debug'](_0x55807c(0xce));}async[_0x1a04ab(0x11c)](){const _0x3a040c=_0x1a04ab,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x1fe95d,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x24583d,nineaiBuiltInSensitiveAuthKey:_0x2a0f3b}=await this[_0x3a040c(0xf4)](['baiduTextStatus','baiduTextAccessToken',_0x3a040c(0x84),'nineaiBuiltInSensitiveApiBase',_0x3a040c(0x12f)]);if(Number(baiduTextStatus)===0x1)return{'useType':'baidu','baiduTextAccessToken':_0x1fe95d};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':_0x3a040c(0xc0),'nineaiBuiltInSensitiveApiBase':_0x24583d,'nineaiBuiltInSensitiveAuthKey':_0x2a0f3b};return null;}};GlobalConfigService=__decorate([(0x0,common_1[_0x1a04ab(0x7e)])(),__param(0x0,(0x0,typeorm_1['InjectRepository'])(config_entity_1[_0x1a04ab(0xd7)])),__param(0x1,(0x0,typeorm_1[_0x1a04ab(0x12b)])(chatLog_entity_1[_0x1a04ab(0x9f)])),__metadata('design:paramtypes',[typeorm_2['Repository'],typeorm_2[_0x1a04ab(0xad)],models_service_1[_0x1a04ab(0x91)]])],GlobalConfigService),exports[_0x1a04ab(0xee)]=GlobalConfigService;