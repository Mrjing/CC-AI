'use strict';function _0x4c58(_0x1f3f77,_0x5fdc4b){const _0x1192f6=_0x1192();return _0x4c58=function(_0x4c5838,_0x3178f9){_0x4c5838=_0x4c5838-0x90;let _0x4aebb1=_0x1192f6[_0x4c5838];return _0x4aebb1;},_0x4c58(_0x1f3f77,_0x5fdc4b);}function _0x1192(){const _0x571a79=['NAMESPACE','queryNotice','typeorm','every','siteRobotName','initBaiduSensitive','gpt','metadata','@nestjs/common','mjUseBaiduFy','firstRregisterSendModel4Count','isUseWxLogin','../chatLog/chatLog.entity','payWechatStatus','salesAllowDrawMoney','domain','getDiffArray','find','openaiBaseUrl','__metadata','nineaiBuiltInSensitiveApiBase','appMenuHeaderBgUrl','支付功能暂未开放!','configs','NINEAI','env','操作完成！','error:\x20','ali','post','wechat','filingNumber','inviteGiveSendModel3Count','getConfigs','siteName','https://api.jiangly.com/api/permission/auth','mjProxy','&type=jsapi','Logger','data','payHupiStatus','fetchBaseAccessToken','qcloudSecretId','appMenuHeaderTips','payEpayApiPayUrl','280692NlrmNb','pay','isShowAppCatIcon','user','wechat\x20refresh\x20access_token\x20\x20==>\x20','16StulEn','epay','getQcloudPhoneVerifyConfig','log','signInMjDrawToken','aliPhoneAccessKeySecret','1169058bCIYFu','getNineAiToken','qcloudPhoneSignName','隐私内容、非超级管理员无权查看','430404Bvncmy','mindDefaultData','wechatAccessToken','ChatLogEntity','https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=','214965qHeVjU','includes','length','filter','phoneRegisterStatus','getNamespace','fetchJsapiTicket','手机验证码功能暂未开放!','defineProperty','设置配置信息错误！','payEpayStatus','BAD_REQUEST','payEpayChannel','save','aliPhoneTemplateCode','get','aliPhoneAccessKeyId','OfficialService','ISDEV','response','https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=','qcloudSMSTemplateId','百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!','decorate','modelsService','请配置正确的秘钥、当前秘钥检测不通过！','hideString','signInModel4Count','HttpStatus','copyrightTitle','errMsg','mpay','感谢您使用NineAi、祝您使用愉快~','qcloudSecretKey','baiduTextStatus','configVal','registerSendModel3Count','readFileSync','chatGptKey:','getSensitiveConfig','firstRregisterSendModel3Count','registerBaseUrl','__param','queryPayType','firstRegisterSendStatus','./config.entity','payMpayStatus','Like','tencent','invitedGuestSendDrawMjCount','&secret=','baiduCode','delete','getWechatAccessToken','utf-8','cos','clientLogoPath','getAuthInfo','TRUE','registerSendModel4Count','auth','baiduTextAccessToken','@nestjs/typeorm','version','buyCramiAddress','design:paramtypes','qcloudPhoneRegisterStatus','error','onModuleInit','ModelsService','&grant_type=client_credentials','签到功能暂未开放!','package.json','&client_secret=','inviteGiveSendModel4Count','GlobalConfigService','Status','forEach','salesSeniorRatio','application/json','axios','firstRegisterSendRank','debug','wechatSilentLoginStatus','InjectRepository','nineaiBuiltInSensitiveAuthKey','getCopyright','queryConfig','../../common/utils','signInStatus','wechatJsapiTicket','registerSendStatus','wechatOfficialAppId','nineAiToken','baiduTextSecretKey','nineaiBuiltInSensitiveStatus','emailRegisterStatus','qcloudPhoneLoginStatus','assign','super','Repository','ConfigEntity','function','queryAllConfig','wechatRegisterStatus','noticeTitle','queryGptKeys','qcloudSMSSDKAppId','reduce','baidu','inviteSendStatus','access_token','HttpException','百度敏感词配置检测失败，您的参数可能配置的不正确!','default','configEntity','请填写您的授权码','getPhoneVerifyConfig','wechatOfficialAppSecret','调了一次刷access_token','Key','805452zjzfwN','initGetAllConfig','setConfig','116158lNceuP','chatGptKey','3346416EhEWQA','globalConfigs','createOrUpdate','entries','mjHideWorkIn','configKey','vxNumber','inviteGiveSendDrawMjCount','qqNumber','缺失ip信息','parse','copyrightUrl','object','获取微信access_token失败、错误信息：','payWeChatPublicKey','map','payWeChatPrivateKey'];_0x1192=function(){return _0x571a79;};return _0x1192();}const _0x46e6d7=_0x4c58;(function(_0x3376be,_0x337f20){const _0x172718=_0x4c58,_0x26d4b6=_0x3376be();while(!![]){try{const _0x491630=-parseInt(_0x172718(0x129))/0x1+parseInt(_0x172718(0x138))/0x2+parseInt(_0x172718(0xe6))/0x3+-parseInt(_0x172718(0x12e))/0x4*(-parseInt(_0x172718(0x13d))/0x5)+parseInt(_0x172718(0x134))/0x6+parseInt(_0x172718(0xe9))/0x7+-parseInt(_0x172718(0xeb))/0x8;if(_0x491630===_0x337f20)break;else _0x26d4b6['push'](_0x26d4b6['shift']());}catch(_0x3b5a69){_0x26d4b6['push'](_0x26d4b6['shift']());}}}(_0x1192,0x290a5));var __decorate=this&&this['__decorate']||function(_0x57193b,_0x55ce7b,_0x4a32c5,_0x143cb2){const _0x3e276a=_0x4c58;var _0x46777f=arguments[_0x3e276a(0x13f)],_0x23b570=_0x46777f<0x3?_0x55ce7b:_0x143cb2===null?_0x143cb2=Object['getOwnPropertyDescriptor'](_0x55ce7b,_0x4a32c5):_0x143cb2,_0x598520;if(typeof Reflect===_0x3e276a(0xf7)&&typeof Reflect[_0x3e276a(0x154)]===_0x3e276a(0xd3))_0x23b570=Reflect[_0x3e276a(0x154)](_0x57193b,_0x55ce7b,_0x4a32c5,_0x143cb2);else{for(var _0x5f0b9f=_0x57193b[_0x3e276a(0x13f)]-0x1;_0x5f0b9f>=0x0;_0x5f0b9f--)if(_0x598520=_0x57193b[_0x5f0b9f])_0x23b570=(_0x46777f<0x3?_0x598520(_0x23b570):_0x46777f>0x3?_0x598520(_0x55ce7b,_0x4a32c5,_0x23b570):_0x598520(_0x55ce7b,_0x4a32c5))||_0x23b570;}return _0x46777f>0x3&&_0x23b570&&Object[_0x3e276a(0x145)](_0x55ce7b,_0x4a32c5,_0x23b570),_0x23b570;},__metadata=this&&this[_0x46e6d7(0x10f)]||function(_0x2552d1,_0x401f11){const _0x6f76f0=_0x46e6d7;if(typeof Reflect===_0x6f76f0(0xf7)&&typeof Reflect[_0x6f76f0(0x103)]===_0x6f76f0(0xd3))return Reflect[_0x6f76f0(0x103)](_0x2552d1,_0x401f11);},__param=this&&this[_0x46e6d7(0x97)]||function(_0x73057b,_0x4726f7){return function(_0x2e9155,_0x24aa7d){_0x4726f7(_0x2e9155,_0x24aa7d,_0x73057b);};};Object[_0x46e6d7(0x145)](exports,'__esModule',{'value':!![]}),exports[_0x46e6d7(0xb8)]=void 0x0;const models_service_1=require('../models/models.service'),chatLog_entity_1=require(_0x46e6d7(0x108)),common_1=require(_0x46e6d7(0x104)),config_entity_1=require(_0x46e6d7(0x9a)),typeorm_1=require(_0x46e6d7(0xab)),typeorm_2=require(_0x46e6d7(0xfe)),utils_1=require(_0x46e6d7(0xc5)),axios_1=require(_0x46e6d7(0xbd)),fs=require('fs'),packageJsonContent=fs[_0x46e6d7(0x92)](_0x46e6d7(0xb5),_0x46e6d7(0xa3)),packageJson=JSON[_0x46e6d7(0xf5)](packageJsonContent),version=packageJson[_0x46e6d7(0xac)];console[_0x46e6d7(0x131)]('\x20current\x20use\x20version\x20in\x20------>:\x20',version);let GlobalConfigService=class GlobalConfigService{constructor(_0x4af1ee,_0x35cd39,_0x1a9cc2){const _0x162465=_0x46e6d7;this[_0x162465(0xe0)]=_0x4af1ee,this['chatLogEntity']=_0x35cd39,this[_0x162465(0x155)]=_0x1a9cc2,this[_0x162465(0xec)]={},this[_0x162465(0xca)]=!![];}async[_0x46e6d7(0xb1)](){const _0x8a2241=_0x46e6d7;await this[_0x8a2241(0xe7)]();}async['getConfigs'](_0xbe0b0f){const _0x819a0b=_0x46e6d7;if(_0xbe0b0f[_0x819a0b(0x13f)]===0x0)return;if(_0xbe0b0f[_0x819a0b(0x13e)](_0x819a0b(0x13a))&&_0xbe0b0f[_0x819a0b(0x13f)]===0x1)return this[_0x819a0b(0x13a)];if(_0xbe0b0f['includes'](_0x819a0b(0xc7))&&_0xbe0b0f['length']===0x1)return this[_0x819a0b(0xc7)];if(_0xbe0b0f[_0x819a0b(0x13f)]===0x1)return this[_0x819a0b(0xec)][_0xbe0b0f[0x0]];else{const _0x10eb3e={};return _0xbe0b0f[_0x819a0b(0xba)](_0x38ca85=>_0x10eb3e[_0x38ca85]=this[_0x819a0b(0xec)][_0x38ca85]),_0x10eb3e;}}async[_0x46e6d7(0xe7)](){const _0x3317c4=_0x46e6d7,_0x4eb8d9=await this[_0x3317c4(0xe0)]['find']();this[_0x3317c4(0xec)]=_0x4eb8d9[_0x3317c4(0xd9)]((_0x529ff8,_0x57ddf6)=>{const _0x89af96=_0x3317c4;return _0x529ff8[_0x57ddf6[_0x89af96(0xf0)]]=_0x57ddf6[_0x89af96(0x90)],_0x529ff8;},{}),this['initBaiduSensitive']();}async['initBaiduSensitive'](_0x5c32db=!![]){const _0x3fbe19=_0x46e6d7,{baiduTextApiKey:_0x51eb85,baiduTextSecretKey:_0x4baae1}=await this['getConfigs'](['baiduTextApiKey',_0x3fbe19(0xcb)]);if(!_0x51eb85||!_0x4baae1){common_1[_0x3fbe19(0x122)][_0x3fbe19(0xb0)](_0x3fbe19(0x153),_0x3fbe19(0xb8));return;}const _0x71022a={'Content-Type':_0x3fbe19(0xbc),'Accept':_0x3fbe19(0xbc)},_0x189281='https://aip.baidubce.com/oauth/2.0/token?client_id='+_0x51eb85+_0x3fbe19(0xb6)+_0x4baae1+_0x3fbe19(0xb3);try{const _0x5b43e8=await axios_1['default'][_0x3fbe19(0x119)](_0x189281,{'headers':_0x71022a});this[_0x3fbe19(0xec)]['baiduTextAccessToken']=_0x5b43e8[_0x3fbe19(0x123)][_0x3fbe19(0xdc)];}catch(_0x4ac7aa){if(_0x5c32db)common_1[_0x3fbe19(0x122)][_0x3fbe19(0xb0)](_0x3fbe19(0xde),'GlobalConfigService');else throw new common_1[(_0x3fbe19(0xdd))](_0x4ac7aa[_0x3fbe19(0x150)][_0x3fbe19(0x123)]['error_description'],common_1[_0x3fbe19(0x159)][_0x3fbe19(0x148)]);}}async[_0x46e6d7(0xa2)](_0x221133=![]){const _0x5f0c39=_0x46e6d7;console['log'](_0x5f0c39(0xe4));const {wechatOfficialAppId:_0x8ae096,wechatOfficialAppSecret:_0x141717}=await this[_0x5f0c39(0x11d)]([_0x5f0c39(0xc9),_0x5f0c39(0xe3)]);if(!_0x8ae096||!_0x141717)return common_1[_0x5f0c39(0x122)][_0x5f0c39(0xb0)]('还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！',_0x5f0c39(0x14e));this[_0x5f0c39(0x13a)]=await this[_0x5f0c39(0x125)](_0x8ae096,_0x141717,_0x221133),this[_0x5f0c39(0xc7)]=await this[_0x5f0c39(0x143)](this[_0x5f0c39(0x13a)]),common_1[_0x5f0c39(0x122)][_0x5f0c39(0x131)](_0x5f0c39(0x12d)+this[_0x5f0c39(0x13a)],_0x5f0c39(0x14e));}async[_0x46e6d7(0x125)](_0x1282dd,_0x23c8da,_0x5eb20e=![]){const _0x211acd=_0x46e6d7;if(process[_0x211acd(0x115)]['ISDEV']===_0x211acd(0xa7)){this[_0x211acd(0x13a)]='';return;}const {data:{errmsg:_0x19c25f,access_token:_0x158098}}=await axios_1[_0x211acd(0xdf)][_0x211acd(0x14c)](_0x211acd(0x151)+_0x1282dd+_0x211acd(0x9f)+_0x23c8da);if(_0x19c25f){console[_0x211acd(0x131)](_0x211acd(0x15b),_0x19c25f);if(_0x5eb20e)common_1[_0x211acd(0x122)]['error'](_0x211acd(0xf8)+_0x19c25f,_0x211acd(0x14e));else throw new common_1[(_0x211acd(0xdd))](_0x211acd(0x156),common_1[_0x211acd(0x159)][_0x211acd(0x148)]);return'';}return _0x158098;}async[_0x46e6d7(0x143)](_0x83ed10){const _0x32b23d=_0x46e6d7;var _0x435bfc;if(process[_0x32b23d(0x115)][_0x32b23d(0x14f)]===_0x32b23d(0xa7)){this[_0x32b23d(0xc7)]='';return;}const _0x4fa039=await axios_1[_0x32b23d(0xdf)][_0x32b23d(0x14c)](_0x32b23d(0x13c)+_0x83ed10+_0x32b23d(0x121));return(_0x435bfc=_0x4fa039===null||_0x4fa039===void 0x0?void 0x0:_0x4fa039[_0x32b23d(0x123)])===null||_0x435bfc===void 0x0?void 0x0:_0x435bfc['ticket'];}async[_0x46e6d7(0xd4)](_0x131360){const _0x4fa304=_0x46e6d7,{role:_0x2ca28d}=_0x131360[_0x4fa304(0x12c)];return this['globalConfigs'];}async['queryFrontConfig'](_0x4ab207,_0xd51dce){const _0x65c2e=_0x46e6d7,_0x38f7c2=[_0x65c2e(0xf1),_0x65c2e(0xc8),_0x65c2e(0x91),_0x65c2e(0xa8),'registerSendDrawMjCount',_0x65c2e(0x99),_0x65c2e(0xbe),_0x65c2e(0x95),_0x65c2e(0x106),'firstRregisterSendDrawMjCount',_0x65c2e(0xdb),_0x65c2e(0x11c),_0x65c2e(0xb7),_0x65c2e(0xf2),'invitedGuestSendModel3Count','invitedGuestSendModel4Count',_0x65c2e(0x9e),'clientHomePath',_0x65c2e(0xa5),'clientFavoIconPath',_0x65c2e(0x107),'siteName','robotAvatar',_0x65c2e(0x100),_0x65c2e(0xad),_0x65c2e(0x139),_0x65c2e(0xa0),_0x65c2e(0x149),'payMpayChannel',_0x65c2e(0x128),'payEpayStatus',_0x65c2e(0x124),'payWechatStatus',_0x65c2e(0x9b),'isAutoOpenNotice',_0x65c2e(0x12b),'salesBaseRatio',_0x65c2e(0xbb),_0x65c2e(0x10a),'companyName',_0x65c2e(0x11b),_0x65c2e(0x141),_0x65c2e(0xaf),_0x65c2e(0xcd),'emailLoginStatus','phoneLoginStatus',_0x65c2e(0xce),_0x65c2e(0xd5),_0x65c2e(0xc0),_0x65c2e(0xc6),'signInModel3Count','signInModel4Count',_0x65c2e(0x132),_0x65c2e(0x127),_0x65c2e(0x111),_0x65c2e(0x105),'mjHideNotBlock',_0x65c2e(0xef),'isVerifyEmail'],_0x6c9365=await this['configEntity'][_0x65c2e(0x10d)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x38f7c2)}}),{domain:_0x11eaf7}=_0x4ab207,_0x39edeb=this[_0x65c2e(0xec)]['domain'];_0x39edeb!==_0x11eaf7&&(this[_0x65c2e(0xed)]({'configKey':_0x65c2e(0x10b),'configVal':_0x11eaf7,'status':0x1}),await this[_0x65c2e(0xe7)]());const _0xb9858e=_0x6c9365[_0x65c2e(0xd9)]((_0x2ce015,_0x270854)=>{const _0x3e0769=_0x65c2e;return _0x2ce015[_0x270854['configKey']]=_0x270854[_0x3e0769(0x90)],_0x2ce015;},{}),{wechatOfficialAppId:_0x1e6115,wechatOfficialAppSecret:_0x3d999a}=await this['getConfigs']([_0x65c2e(0xc9),_0x65c2e(0xe3)]),_0xa239ca=!!(_0x1e6115&&_0x3d999a);return Object['assign'](Object[_0x65c2e(0xcf)]({},_0xb9858e),{'isUseWxLogin':_0xa239ca});}async[_0x46e6d7(0xd7)](_0x188f7e){const _0x5effeb=_0x46e6d7,{role:_0x3eb027}=_0x188f7e[_0x5effeb(0x12c)],_0x4e1704=await this['configEntity'][_0x5effeb(0x10d)]({'where':{'configKey':(0x0,typeorm_2[_0x5effeb(0x9c)])('%'+_0x5effeb(0xea)+'%')}});if(_0x3eb027===_0x5effeb(0xd0))return _0x4e1704;return _0x4e1704[_0x5effeb(0xfa)](_0x5be40a=>{const _0x14d73c=_0x5effeb;return _0x5be40a['configVal']=(0x0,utils_1[_0x14d73c(0x157)])(_0x5be40a[_0x14d73c(0x90)]),_0x5be40a;});}async['setGptKeys'](_0x1da4a5){const _0x36a96f=_0x46e6d7,_0x25ff9b=_0x1da4a5[_0x36a96f(0x113)][_0x36a96f(0x140)](_0x1f7ef7=>_0x1f7ef7['configVal']),_0x5cdb5d=_0x25ff9b[_0x36a96f(0xfa)](_0x467994=>_0x467994[_0x36a96f(0xf0)]);for(const [_0x4f4ab2,_0x1fac2c]of _0x25ff9b[_0x36a96f(0xee)]()){const {configKey:_0x38e4f9,configVal:_0xec6993,status:_0x23a3f7}=_0x1fac2c;await this[_0x36a96f(0xed)]({'configKey':_0x36a96f(0x93)+(_0x4f4ab2+0x1),'configVal':_0xec6993,'status':_0x23a3f7});}const _0x28c342=await this[_0x36a96f(0xe0)][_0x36a96f(0x10d)]({'where':{'configKey':(0x0,typeorm_2['Like'])('%'+_0x36a96f(0xea)+'%')}}),_0x541cee=_0x28c342[_0x36a96f(0xfa)](_0x2b4568=>_0x2b4568[_0x36a96f(0xf0)]);if(_0x541cee[_0x36a96f(0x13f)]>_0x5cdb5d[_0x36a96f(0x13f)]){const _0x71b93a=(0x0,utils_1[_0x36a96f(0x10c)])(_0x541cee[_0x36a96f(0x13f)],_0x5cdb5d['length'],_0x36a96f(0x93));for(const _0xc41b76 of _0x71b93a){await this['configEntity'][_0x36a96f(0xa1)]({'configKey':_0xc41b76});}}return await this[_0x36a96f(0xe7)](),_0x36a96f(0x116);}async[_0x46e6d7(0xc4)](_0x458196,_0xdfee62){const _0x371f3d=_0x46e6d7,{role:_0x2ab9e1}=_0xdfee62[_0x371f3d(0x12c)],{keys:_0x4b48d0}=_0x458196,_0x437482=await this['configEntity']['find']({'where':{'configKey':(0x0,typeorm_2['In'])(_0x4b48d0)}});return _0x2ab9e1!==_0x371f3d(0xd0)&&_0x437482[_0x371f3d(0xba)](_0x130c18=>{const _0x4478a0=_0x371f3d;if(_0x130c18[_0x4478a0(0xf0)][_0x4478a0(0x13e)]('mj')||_0x130c18[_0x4478a0(0xf0)]['includes'](_0x4478a0(0xe5))||_0x130c18[_0x4478a0(0xf0)][_0x4478a0(0x13e)](_0x4478a0(0x102))||_0x130c18['configKey'][_0x4478a0(0x13e)](_0x4478a0(0xa4))||_0x130c18[_0x4478a0(0xf0)][_0x4478a0(0x13e)](_0x4478a0(0xda))||_0x130c18[_0x4478a0(0xf0)][_0x4478a0(0x13e)](_0x4478a0(0x118))||_0x130c18[_0x4478a0(0xf0)][_0x4478a0(0x13e)](_0x4478a0(0x9d))||_0x130c18[_0x4478a0(0xf0)][_0x4478a0(0x13e)](_0x4478a0(0x12a))||_0x130c18[_0x4478a0(0xf0)]['includes'](_0x4478a0(0x11a))||_0x130c18[_0x4478a0(0xf0)][_0x4478a0(0x13e)]('mjProxyImgUrl')||_0x130c18['configKey']===_0x4478a0(0x10e)){const _0x5d063c=[_0x4478a0(0xf9),_0x4478a0(0xfb)];if(_0x5d063c[_0x4478a0(0x13e)](_0x130c18[_0x4478a0(0xf0)]))return _0x130c18[_0x4478a0(0x90)]=(0x0,utils_1[_0x4478a0(0x157)])(_0x130c18[_0x4478a0(0x90)],_0x4478a0(0x137));const _0x1a29e6=[_0x4478a0(0x147),_0x4478a0(0x124),_0x4478a0(0x120)];!_0x1a29e6['includes'](_0x130c18[_0x4478a0(0xf0)])&&!_0x130c18['configKey'][_0x4478a0(0x13e)](_0x4478a0(0xb9))&&(_0x130c18['configVal']=(0x0,utils_1[_0x4478a0(0x157)])(_0x130c18[_0x4478a0(0x90)]));}}),_0x437482[_0x371f3d(0xd9)]((_0x13c544,_0x38f33e)=>{const _0x5d67f8=_0x371f3d;return _0x13c544[_0x38f33e[_0x5d67f8(0xf0)]]=_0x38f33e[_0x5d67f8(0x90)],_0x13c544;},{});}[_0x46e6d7(0x135)](){const _0x2e6fb9=_0x46e6d7,_0x271c5a=this[_0x2e6fb9(0xec)]['MjdrawCount'],_0x3c452f=this['nineAiToken'];return!_0x3c452f||Number(_0x271c5a)===0x1;}async[_0x46e6d7(0xe8)](_0x377ee9){const _0x4dfe3f=_0x46e6d7;try{const {settings:_0x360b11}=_0x377ee9;for(const _0x4ef61a of _0x360b11){await this['createOrUpdate'](_0x4ef61a);}await this[_0x4dfe3f(0xe7)]();const _0xc29d58=_0x360b11[_0x4dfe3f(0xfa)](_0x7ed33b=>_0x7ed33b[_0x4dfe3f(0xf0)]);return(_0xc29d58[_0x4dfe3f(0x13e)]('baiduTextApiKey')||_0xc29d58[_0x4dfe3f(0x13e)](_0x4dfe3f(0xcb)))&&await this[_0x4dfe3f(0x101)](![]),(_0xc29d58[_0x4dfe3f(0x13e)](_0x4dfe3f(0xc9))||_0xc29d58[_0x4dfe3f(0x13e)](_0x4dfe3f(0xe3)))&&await this[_0x4dfe3f(0xa2)](),'设置完成！';}catch(_0x315433){console['log'](_0x4dfe3f(0x117),_0x315433);}}async[_0x46e6d7(0xed)](_0x4f7399){const _0x525639=_0x46e6d7;try{const {configKey:_0x235dc4,configVal:_0x44e24c,status:status=0x1}=_0x4f7399,_0x3c0383=await this[_0x525639(0xe0)]['findOne']({'where':{'configKey':_0x235dc4}});if(_0x3c0383){const _0x1cb2ec=await this['configEntity']['update']({'configKey':_0x235dc4},{'configVal':_0x44e24c,'status':status});}else{const _0x2cef27=await this['configEntity'][_0x525639(0x14a)]({'configKey':_0x235dc4,'configVal':_0x44e24c,'status':status});}}catch(_0x1770f3){console[_0x525639(0x131)]('error:\x20',_0x1770f3);throw new common_1[(_0x525639(0xdd))](_0x525639(0x146),common_1[_0x525639(0x159)]['BAD_REQUEST']);}}async[_0x46e6d7(0xfd)](){const _0x2e4115=_0x46e6d7;return await this[_0x2e4115(0x11d)](['noticeInfo',_0x2e4115(0xd6)]);}async[_0x46e6d7(0xc3)](){const _0x574769=_0x46e6d7;return await this['getConfigs']([_0x574769(0xf6),_0x574769(0x15a)]);}async[_0x46e6d7(0x98)](){const _0x23cd3b=_0x46e6d7,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this['getConfigs']([_0x23cd3b(0x124),_0x23cd3b(0x147),_0x23cd3b(0x9b),_0x23cd3b(0x109)]);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus][_0x23cd3b(0xff)](_0x5b6dae=>_0x5b6dae===0x0))throw new common_1[(_0x23cd3b(0xdd))](_0x23cd3b(0x112),common_1[_0x23cd3b(0x159)][_0x23cd3b(0x148)]);if(Number(payWechatStatus)===0x1)return'wechat';if(Number(payEpayStatus)===0x1)return _0x23cd3b(0x12f);if(Number(payMpayStatus)===0x1)return _0x23cd3b(0x15c);if(Number(payHupiStatus)===0x1)return'hupi';}async[_0x46e6d7(0xa6)](){const _0x5157cd=_0x46e6d7,{siteName:_0x201fe4,qqNumber:_0x1265fa,vxNumber:_0x2f9c26,registerBaseUrl:_0x52fc5e,domain:_0x291960}=await this[_0x5157cd(0x11d)]([_0x5157cd(0x11e),_0x5157cd(0xf3),'vxNumber',_0x5157cd(0x96),_0x5157cd(0x10b)]);return{'siteName':_0x201fe4,'qqNumber':_0x1265fa,'vxNumber':_0x2f9c26,'registerBaseUrl':_0x52fc5e,'domain':_0x291960};}async[_0x46e6d7(0xe2)](){const _0x3b4f00=_0x46e6d7,{phoneRegisterStatus:_0x2401d8,aliPhoneAccessKeyId:_0x4fc8e5,aliPhoneAccessKeySecret:_0x4a64c1,aliPhoneSignName:_0x4a368f,aliPhoneTemplateCode:_0x792a75}=await this['getConfigs']([_0x3b4f00(0x141),_0x3b4f00(0x14d),_0x3b4f00(0x133),'aliPhoneSignName',_0x3b4f00(0x14b)]);if(Number(_0x2401d8)!==0x1)throw new common_1['HttpException'](_0x3b4f00(0x144),common_1[_0x3b4f00(0x159)][_0x3b4f00(0x148)]);return{'accessKeyId':_0x4fc8e5,'accessKeySecret':_0x4a64c1,'SignName':_0x4a368f,'TemplateCode':_0x792a75};}async[_0x46e6d7(0x130)](){const _0x465b39=_0x46e6d7,{qcloudPhoneRegisterStatus:_0x2ceb15,qcloudSecretId:_0x5942fa,qcloudSecretKey:_0x4853f2,qcloudPhoneSignName:_0x4f9c94,qcloudSMSTemplateId:_0x1a6aee,qcloudSMSSDKAppId:_0x3d4e32}=await this[_0x465b39(0x11d)]([_0x465b39(0xaf),_0x465b39(0x126),_0x465b39(0x15e),_0x465b39(0x136),_0x465b39(0x152),_0x465b39(0xd8)]);if(Number(_0x2ceb15)!==0x1)throw new common_1[(_0x465b39(0xdd))]('手机验证码功能暂未开放!',common_1[_0x465b39(0x159)]['BAD_REQUEST']);return{'secretId':_0x5942fa,'secretKey':_0x4853f2,'signName':_0x4f9c94,'templateId':_0x1a6aee,'sdkAppId':_0x3d4e32};}[_0x46e6d7(0x142)](){const _0x29c9d0=_0x46e6d7;return process[_0x29c9d0(0x115)][_0x29c9d0(0xfc)]||_0x29c9d0(0x114);}async['getSignatureGiftConfig'](){const _0x423f94=_0x46e6d7,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this[_0x423f94(0x11d)]([_0x423f94(0xc6),'signInModel3Count',_0x423f94(0x158),_0x423f94(0x132)]);if(Number(signInStatus)!==0x1)throw new common_1['HttpException'](_0x423f94(0xb4),common_1[_0x423f94(0x159)][_0x423f94(0x148)]);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async[_0x46e6d7(0xa9)](){const _0x2bc7e7=_0x46e6d7,_0x577dee=_0x2bc7e7(0x11f),_0x19055a=await fetch(_0x577dee,{}),_0x4cf3a6=await _0x19055a['json'](),{success:success=!![],message:_0x2e60b5}=_0x4cf3a6;common_1[_0x2bc7e7(0x122)][_0x2bc7e7(0xb0)]('请按要求填写正确的授权信息'),common_1[_0x2bc7e7(0x122)][_0x2bc7e7(0xb0)](_0x2bc7e7(0xe1)),common_1[_0x2bc7e7(0x122)][_0x2bc7e7(0xb0)]('缺失ip信息'),common_1[_0x2bc7e7(0x122)][_0x2bc7e7(0xb0)](_0x2bc7e7(0xf4)),common_1[_0x2bc7e7(0x122)][_0x2bc7e7(0xbf)](_0x2bc7e7(0x15d));}async[_0x46e6d7(0x94)](){const _0x41a74d=_0x46e6d7,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x47c035,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x365286,nineaiBuiltInSensitiveAuthKey:_0x58e1aa}=await this[_0x41a74d(0x11d)]([_0x41a74d(0x15f),_0x41a74d(0xaa),_0x41a74d(0xcc),_0x41a74d(0x110),_0x41a74d(0xc2)]);if(Number(baiduTextStatus)===0x1)return{'useType':_0x41a74d(0xda),'baiduTextAccessToken':_0x47c035};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':'nineai','nineaiBuiltInSensitiveApiBase':_0x365286,'nineaiBuiltInSensitiveAuthKey':_0x58e1aa};return null;}};GlobalConfigService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_1[_0x46e6d7(0xc1)])(config_entity_1[_0x46e6d7(0xd2)])),__param(0x1,(0x0,typeorm_1['InjectRepository'])(chatLog_entity_1[_0x46e6d7(0x13b)])),__metadata(_0x46e6d7(0xae),[typeorm_2['Repository'],typeorm_2[_0x46e6d7(0xd1)],models_service_1[_0x46e6d7(0xb2)]])],GlobalConfigService),exports[_0x46e6d7(0xb8)]=GlobalConfigService;