'use strict';const _0x9a8a80=_0x5818;(function(_0x3e5584,_0x54c017){const _0x2315aa=_0x5818,_0x2dbc66=_0x3e5584();while(!![]){try{const _0x42926a=-parseInt(_0x2315aa(0x1d6))/0x1+parseInt(_0x2315aa(0x212))/0x2+parseInt(_0x2315aa(0x1a4))/0x3*(parseInt(_0x2315aa(0x1fa))/0x4)+-parseInt(_0x2315aa(0x207))/0x5+-parseInt(_0x2315aa(0x247))/0x6+-parseInt(_0x2315aa(0x1a3))/0x7+parseInt(_0x2315aa(0x1f9))/0x8;if(_0x42926a===_0x54c017)break;else _0x2dbc66['push'](_0x2dbc66['shift']());}catch(_0x50bd02){_0x2dbc66['push'](_0x2dbc66['shift']());}}}(_0x5d84,0x94c4d));function _0x5d84(){const _0x233cf1=['decorate','3479945svoxgG','wechat','payHupiStatus','invitedGuestSendModel3Count','getOwnPropertyDescriptor','../../common/utils','firstRregisterSendDrawMjCount','wechatOfficialAppSecret','baidu','payEpayStatus','getSignatureGiftConfig','362982NtznYw','initBaiduSensitive','error_description','Logger','payMpayStatus','ticket','env','payEpayApiPayUrl','mpay','aliPhoneAccessKeySecret','../chatLog/chatLog.entity','payWeChatPublicKey','post','qcloudSMSSDKAppId','hupi','emailRegisterStatus','typeorm','getPhoneVerifyConfig','getConfigs','wechatOfficialAppId','&type=jsapi','gpt','emailLoginStatus','error:\x20','getQcloudPhoneVerifyConfig','package.json','registerSendModel4Count','手机验证码功能暂未开放!','findOne','isShowAppCatIcon','signInModel4Count','includes','vxNumber','reduce','isUseWxLogin','请按要求填写正确的授权信息','noticeTitle','payWeChatPrivateKey','firstRregisterSendModel4Count','qcloudSecretId','mjHideNotBlock','update','design:paramtypes','domain','companyName','qcloudPhoneRegisterStatus','signInStatus','hideString','&grant_type=client_credentials','ISDEV','inviteSendStatus','payMpayChannel','请配置正确的秘钥、当前秘钥检测不通过！','2112516EvoWmB','utf-8','signInModel3Count','wechatJsapiTicket','signInMjDrawToken','errMsg','salesSeniorRatio','chatGptKey:','log','baiduTextSecretKey','getWechatAccessToken','qcloudPhoneLoginStatus','nineaiBuiltInSensitiveAuthKey','chatLogEntity','function','nineaiBuiltInSensitiveApiBase','queryConfig','debug','__esModule','assign','inviteGiveSendModel3Count','configVal','getSensitiveConfig','TRUE','mjUseBaiduFy','https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=','286181gZIoNv','460851UmRpDE','firstRegisterSendRank','queryPayType','delete','chatGptKey','HttpException','inviteGiveSendDrawMjCount','MjdrawCount','操作完成！','__param','queryNotice','设置配置信息错误！','OfficialService','createOrUpdate','super','setGptKeys','every','configs','readFileSync','initGetAllConfig','tencent','签到功能暂未开放!','wechatSilentLoginStatus','payWechatStatus','entries','ConfigEntity','https://aip.baidubce.com/oauth/2.0/token?client_id=','filingNumber','https://api.jiangly.com/api/permission/auth','缺失ip信息','qcloudSMSTemplateId','get','phoneRegisterStatus','baiduCode','invitedGuestSendDrawMjCount','支付功能暂未开放!','firstRegisterSendStatus','user','nineAiToken','__metadata','robotAvatar','ali','registerSendStatus','filter','data','baiduTextAccessToken','inviteGiveSendModel4Count','baiduTextStatus','BAD_REQUEST','map','1090997VBIOzX','fetchJsapiTicket','wechatRegisterStatus','clientFavoIconPath','metadata','epay','configEntity','baiduTextApiKey','appMenuHeaderBgUrl','HttpStatus','Repository','object','NINEAI','siteName','InjectRepository','defineProperty','length','NAMESPACE','copyrightTitle','queryAllConfig','phoneLoginStatus','isAutoOpenNotice','axios','default','aliPhoneTemplateCode','payEpayChannel','setConfig','error','access_token','globalConfigs','&client_secret=','onModuleInit','设置完成！','buyCramiAddress','response','19633632kuJPDQ','4cAoIWi','GlobalConfigService','qqNumber','&secret=','registerBaseUrl','wechatAccessToken','configKey','forEach','find','wechat\x20refresh\x20access_token\x20\x20==>\x20','noticeInfo','ChatLogEntity'];_0x5d84=function(){return _0x233cf1;};return _0x5d84();}function _0x5818(_0x581086,_0x25db7b){const _0x5d8400=_0x5d84();return _0x5818=function(_0x581813,_0x3a775d){_0x581813=_0x581813-0x19b;let _0x491b71=_0x5d8400[_0x581813];return _0x491b71;},_0x5818(_0x581086,_0x25db7b);}var __decorate=this&&this['__decorate']||function(_0x182a8b,_0x427456,_0x40427b,_0x3dd09e){const _0x2326f6=_0x5818;var _0x4153e0=arguments[_0x2326f6(0x1e6)],_0x124cd1=_0x4153e0<0x3?_0x427456:_0x3dd09e===null?_0x3dd09e=Object[_0x2326f6(0x20b)](_0x427456,_0x40427b):_0x3dd09e,_0x1d5162;if(typeof Reflect===_0x2326f6(0x1e1)&&typeof Reflect[_0x2326f6(0x206)]==='function')_0x124cd1=Reflect[_0x2326f6(0x206)](_0x182a8b,_0x427456,_0x40427b,_0x3dd09e);else{for(var _0x20e034=_0x182a8b[_0x2326f6(0x1e6)]-0x1;_0x20e034>=0x0;_0x20e034--)if(_0x1d5162=_0x182a8b[_0x20e034])_0x124cd1=(_0x4153e0<0x3?_0x1d5162(_0x124cd1):_0x4153e0>0x3?_0x1d5162(_0x427456,_0x40427b,_0x124cd1):_0x1d5162(_0x427456,_0x40427b))||_0x124cd1;}return _0x4153e0>0x3&&_0x124cd1&&Object['defineProperty'](_0x427456,_0x40427b,_0x124cd1),_0x124cd1;},__metadata=this&&this[_0x9a8a80(0x1cb)]||function(_0x5c74fc,_0x41acc1){const _0x1d6a4d=_0x9a8a80;if(typeof Reflect===_0x1d6a4d(0x1e1)&&typeof Reflect[_0x1d6a4d(0x1da)]===_0x1d6a4d(0x255))return Reflect[_0x1d6a4d(0x1da)](_0x5c74fc,_0x41acc1);},__param=this&&this[_0x9a8a80(0x1ad)]||function(_0xc555d9,_0x568d18){return function(_0x49a95f,_0x374d5c){_0x568d18(_0x49a95f,_0x374d5c,_0xc555d9);};};Object[_0x9a8a80(0x1e5)](exports,_0x9a8a80(0x19b),{'value':!![]}),exports[_0x9a8a80(0x1fb)]=void 0x0;const models_service_1=require('../models/models.service'),chatLog_entity_1=require(_0x9a8a80(0x21c)),common_1=require('@nestjs/common'),config_entity_1=require('./config.entity'),typeorm_1=require('@nestjs/typeorm'),typeorm_2=require(_0x9a8a80(0x222)),utils_1=require(_0x9a8a80(0x20c)),axios_1=require(_0x9a8a80(0x1ec)),fs=require('fs'),packageJsonContent=fs[_0x9a8a80(0x1b6)](_0x9a8a80(0x22b),_0x9a8a80(0x248)),packageJson=JSON['parse'](packageJsonContent),version=packageJson['version'];console[_0x9a8a80(0x24f)]('\x20current\x20use\x20version\x20in\x20------>:\x20',version);let GlobalConfigService=class GlobalConfigService{constructor(_0x3ca63f,_0xeca0c3,_0x36ad80){const _0x129c26=_0x9a8a80;this[_0x129c26(0x1dc)]=_0x3ca63f,this[_0x129c26(0x254)]=_0xeca0c3,this['modelsService']=_0x36ad80,this[_0x129c26(0x1f3)]={},this['nineAiToken']=!![];}async[_0x9a8a80(0x1f5)](){const _0xd39f60=_0x9a8a80;await this[_0xd39f60(0x1b7)]();}async[_0x9a8a80(0x224)](_0x39e89a){const _0x570174=_0x9a8a80;if(_0x39e89a[_0x570174(0x1e6)]===0x0)return;if(_0x39e89a[_0x570174(0x231)]('wechatAccessToken')&&_0x39e89a['length']===0x1)return this[_0x570174(0x1ff)];if(_0x39e89a[_0x570174(0x231)](_0x570174(0x24a))&&_0x39e89a[_0x570174(0x1e6)]===0x1)return this[_0x570174(0x24a)];if(_0x39e89a[_0x570174(0x1e6)]===0x1)return this[_0x570174(0x1f3)][_0x39e89a[0x0]];else{const _0x5d75af={};return _0x39e89a[_0x570174(0x201)](_0x55646a=>_0x5d75af[_0x55646a]=this[_0x570174(0x1f3)][_0x55646a]),_0x5d75af;}}async[_0x9a8a80(0x1b7)](){const _0x18e333=_0x9a8a80,_0x23b3bd=await this[_0x18e333(0x1dc)][_0x18e333(0x202)]();this[_0x18e333(0x1f3)]=_0x23b3bd['reduce']((_0x43ee71,_0x509667)=>{const _0x126804=_0x18e333;return _0x43ee71[_0x509667[_0x126804(0x200)]]=_0x509667['configVal'],_0x43ee71;},{}),this[_0x18e333(0x213)]();}async[_0x9a8a80(0x213)](_0x41fe88=!![]){const _0x28e8d7=_0x9a8a80,{baiduTextApiKey:_0x5b5667,baiduTextSecretKey:_0x3fdf7d}=await this[_0x28e8d7(0x224)]([_0x28e8d7(0x1dd),'baiduTextSecretKey']);if(!_0x5b5667||!_0x3fdf7d){common_1['Logger'][_0x28e8d7(0x1f1)]('百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!',_0x28e8d7(0x1fb));return;}const _0x555a21={'Content-Type':'application/json','Accept':'application/json'},_0x71a909=_0x28e8d7(0x1be)+_0x5b5667+_0x28e8d7(0x1f4)+_0x3fdf7d+_0x28e8d7(0x242);try{const _0x5e05fe=await axios_1[_0x28e8d7(0x1ed)][_0x28e8d7(0x21e)](_0x71a909,{'headers':_0x555a21});this[_0x28e8d7(0x1f3)][_0x28e8d7(0x1d1)]=_0x5e05fe[_0x28e8d7(0x1d0)][_0x28e8d7(0x1f2)];}catch(_0x2eb586){if(_0x41fe88)common_1['Logger'][_0x28e8d7(0x1f1)]('百度敏感词配置检测失败，您的参数可能配置的不正确!',_0x28e8d7(0x1fb));else throw new common_1[(_0x28e8d7(0x1a9))](_0x2eb586[_0x28e8d7(0x1f8)][_0x28e8d7(0x1d0)][_0x28e8d7(0x214)],common_1[_0x28e8d7(0x1df)]['BAD_REQUEST']);}}async['getWechatAccessToken'](_0x2b77be=![]){const _0x1c2402=_0x9a8a80,{wechatOfficialAppId:_0x3591d2,wechatOfficialAppSecret:_0x505dc5}=await this[_0x1c2402(0x224)]([_0x1c2402(0x225),_0x1c2402(0x20e)]);if(!_0x3591d2||!_0x505dc5)return common_1[_0x1c2402(0x215)][_0x1c2402(0x1f1)]('还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！',_0x1c2402(0x1b0));this['wechatAccessToken']=await this['fetchBaseAccessToken'](_0x3591d2,_0x505dc5,_0x2b77be),this[_0x1c2402(0x24a)]=await this[_0x1c2402(0x1d7)](this[_0x1c2402(0x1ff)]),common_1[_0x1c2402(0x215)]['log'](_0x1c2402(0x203)+this[_0x1c2402(0x1ff)],_0x1c2402(0x1b0));}async['fetchBaseAccessToken'](_0x209bb1,_0x3983d7,_0x5bbb39=![]){const _0x13fc1d=_0x9a8a80;if(process[_0x13fc1d(0x218)]['ISDEV']===_0x13fc1d(0x1a0)){this[_0x13fc1d(0x1ff)]='';return;}const {data:{errmsg:_0x41eaa4,access_token:_0x21543d}}=await axios_1[_0x13fc1d(0x1ed)]['get'](_0x13fc1d(0x1a2)+_0x209bb1+_0x13fc1d(0x1fd)+_0x3983d7);if(_0x41eaa4){console[_0x13fc1d(0x24f)](_0x13fc1d(0x24c),_0x41eaa4);if(_0x5bbb39)common_1['Logger'][_0x13fc1d(0x1f1)]('获取微信access_token失败、错误信息：'+_0x41eaa4,_0x13fc1d(0x1b0));else throw new common_1[(_0x13fc1d(0x1a9))](_0x13fc1d(0x246),common_1[_0x13fc1d(0x1df)][_0x13fc1d(0x1d4)]);return'';}return _0x21543d;}async[_0x9a8a80(0x1d7)](_0x411bf1){const _0x2adeae=_0x9a8a80;var _0x2b46db;if(process[_0x2adeae(0x218)][_0x2adeae(0x243)]==='TRUE'){this[_0x2adeae(0x24a)]='';return;}const _0x39628b=await axios_1['default'][_0x2adeae(0x1c3)]('https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token='+_0x411bf1+_0x2adeae(0x226));return(_0x2b46db=_0x39628b===null||_0x39628b===void 0x0?void 0x0:_0x39628b[_0x2adeae(0x1d0)])===null||_0x2b46db===void 0x0?void 0x0:_0x2b46db[_0x2adeae(0x217)];}async[_0x9a8a80(0x1e9)](_0x1454e3){const _0x11caf5=_0x9a8a80,{role:_0x48557c}=_0x1454e3['user'];return this[_0x11caf5(0x1f3)];}async['queryFrontConfig'](_0xf2f6d,_0x1ff26c){const _0xc7a904=_0x9a8a80,_0x22a187=[_0xc7a904(0x232),_0xc7a904(0x1ce),'registerSendModel3Count',_0xc7a904(0x22c),'registerSendDrawMjCount',_0xc7a904(0x1c8),_0xc7a904(0x1a5),'firstRregisterSendModel3Count',_0xc7a904(0x238),_0xc7a904(0x20d),_0xc7a904(0x244),_0xc7a904(0x19d),_0xc7a904(0x1d2),_0xc7a904(0x1aa),_0xc7a904(0x20a),'invitedGuestSendModel4Count',_0xc7a904(0x1c6),'clientHomePath','clientLogoPath',_0xc7a904(0x1d9),_0xc7a904(0x234),_0xc7a904(0x1e3),_0xc7a904(0x1cc),'siteRobotName',_0xc7a904(0x1f7),'mindDefaultData',_0xc7a904(0x1c5),_0xc7a904(0x1ef),_0xc7a904(0x245),_0xc7a904(0x219),_0xc7a904(0x210),_0xc7a904(0x209),'payWechatStatus',_0xc7a904(0x216),_0xc7a904(0x1eb),_0xc7a904(0x22f),'salesBaseRatio',_0xc7a904(0x24d),'salesAllowDrawMoney',_0xc7a904(0x23e),_0xc7a904(0x1bf),_0xc7a904(0x1c4),_0xc7a904(0x23f),_0xc7a904(0x221),_0xc7a904(0x228),_0xc7a904(0x1ea),_0xc7a904(0x252),_0xc7a904(0x1d8),_0xc7a904(0x1ba),_0xc7a904(0x240),_0xc7a904(0x249),_0xc7a904(0x230),_0xc7a904(0x24b),'appMenuHeaderTips',_0xc7a904(0x1de),_0xc7a904(0x1a1),_0xc7a904(0x23a),'mjHideWorkIn','isVerifyEmail'],_0x1b7102=await this[_0xc7a904(0x1dc)][_0xc7a904(0x202)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x22a187)}}),{domain:_0x247cae}=_0xf2f6d,_0x438ff8=this[_0xc7a904(0x1f3)][_0xc7a904(0x23d)];_0x438ff8!==_0x247cae&&(this[_0xc7a904(0x1b1)]({'configKey':_0xc7a904(0x23d),'configVal':_0x247cae,'status':0x1}),await this[_0xc7a904(0x1b7)]());const _0x29bc8d=_0x1b7102['reduce']((_0x3f22db,_0x24716a)=>{const _0x4b2e04=_0xc7a904;return _0x3f22db[_0x24716a[_0x4b2e04(0x200)]]=_0x24716a[_0x4b2e04(0x19e)],_0x3f22db;},{}),{wechatOfficialAppId:_0x30fadc,wechatOfficialAppSecret:_0x27171f}=await this['getConfigs']([_0xc7a904(0x225),_0xc7a904(0x20e)]),_0x140e47=!!(_0x30fadc&&_0x27171f);return Object['assign'](Object[_0xc7a904(0x19c)]({},_0x29bc8d),{'isUseWxLogin':_0x140e47});}async['queryGptKeys'](_0x3892aa){const _0x4b3125=_0x9a8a80,{role:_0x273a26}=_0x3892aa[_0x4b3125(0x1c9)],_0x46e91c=await this[_0x4b3125(0x1dc)][_0x4b3125(0x202)]({'where':{'configKey':(0x0,typeorm_2['Like'])('%'+_0x4b3125(0x1a8)+'%')}});if(_0x273a26===_0x4b3125(0x1b2))return _0x46e91c;return _0x46e91c['map'](_0x44f647=>{const _0x28c6ae=_0x4b3125;return _0x44f647[_0x28c6ae(0x19e)]=(0x0,utils_1['hideString'])(_0x44f647[_0x28c6ae(0x19e)]),_0x44f647;});}async[_0x9a8a80(0x1b3)](_0x871813){const _0x38d6de=_0x9a8a80,_0x43c428=_0x871813[_0x38d6de(0x1b5)][_0x38d6de(0x1cf)](_0x425b2e=>_0x425b2e[_0x38d6de(0x19e)]),_0x282b8c=_0x43c428[_0x38d6de(0x1d5)](_0x126e57=>_0x126e57[_0x38d6de(0x200)]);for(const [_0x17317f,_0x57e68a]of _0x43c428[_0x38d6de(0x1bc)]()){const {configKey:_0x4d21da,configVal:_0xe49b62,status:_0x1190d4}=_0x57e68a;await this[_0x38d6de(0x1b1)]({'configKey':_0x38d6de(0x24e)+(_0x17317f+0x1),'configVal':_0xe49b62,'status':_0x1190d4});}const _0x33562f=await this['configEntity'][_0x38d6de(0x202)]({'where':{'configKey':(0x0,typeorm_2['Like'])('%'+_0x38d6de(0x1a8)+'%')}}),_0x2909b3=_0x33562f[_0x38d6de(0x1d5)](_0x218889=>_0x218889['configKey']);if(_0x2909b3['length']>_0x282b8c[_0x38d6de(0x1e6)]){const _0x37dea4=(0x0,utils_1['getDiffArray'])(_0x2909b3[_0x38d6de(0x1e6)],_0x282b8c[_0x38d6de(0x1e6)],'chatGptKey:');for(const _0x1de818 of _0x37dea4){await this[_0x38d6de(0x1dc)][_0x38d6de(0x1a7)]({'configKey':_0x1de818});}}return await this[_0x38d6de(0x1b7)](),_0x38d6de(0x1ac);}async[_0x9a8a80(0x257)](_0x7d0254,_0x3b8f78){const _0x406e99=_0x9a8a80,{role:_0x4706c5}=_0x3b8f78['user'],{keys:_0x52b1fb}=_0x7d0254,_0x1fa993=await this[_0x406e99(0x1dc)][_0x406e99(0x202)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x52b1fb)}});return _0x4706c5!=='super'&&_0x1fa993[_0x406e99(0x201)](_0x47e864=>{const _0x3bdf38=_0x406e99;if(_0x47e864[_0x3bdf38(0x200)][_0x3bdf38(0x231)]('mj')||_0x47e864[_0x3bdf38(0x200)][_0x3bdf38(0x231)]('Key')||_0x47e864['configKey'][_0x3bdf38(0x231)](_0x3bdf38(0x227))||_0x47e864['configKey']['includes']('cos')||_0x47e864[_0x3bdf38(0x200)][_0x3bdf38(0x231)](_0x3bdf38(0x20f))||_0x47e864['configKey'][_0x3bdf38(0x231)](_0x3bdf38(0x1cd))||_0x47e864[_0x3bdf38(0x200)][_0x3bdf38(0x231)](_0x3bdf38(0x1b8))||_0x47e864[_0x3bdf38(0x200)][_0x3bdf38(0x231)]('pay')||_0x47e864[_0x3bdf38(0x200)][_0x3bdf38(0x231)](_0x3bdf38(0x208))||_0x47e864[_0x3bdf38(0x200)]['includes']('mjProxyImgUrl')||_0x47e864[_0x3bdf38(0x200)]==='openaiBaseUrl'){const _0x1ebcb9=[_0x3bdf38(0x21d),_0x3bdf38(0x237)];if(_0x1ebcb9[_0x3bdf38(0x231)](_0x47e864[_0x3bdf38(0x200)]))return _0x47e864['configVal']=(0x0,utils_1['hideString'])(_0x47e864['configVal'],'隐私内容、非超级管理员无权查看');const _0x149cbb=['payEpayStatus',_0x3bdf38(0x209),'mjProxy'];!_0x149cbb[_0x3bdf38(0x231)](_0x47e864[_0x3bdf38(0x200)])&&!_0x47e864[_0x3bdf38(0x200)][_0x3bdf38(0x231)]('Status')&&(_0x47e864['configVal']=(0x0,utils_1[_0x3bdf38(0x241)])(_0x47e864[_0x3bdf38(0x19e)]));}}),_0x1fa993[_0x406e99(0x233)]((_0x341238,_0x19ccee)=>{const _0x292912=_0x406e99;return _0x341238[_0x19ccee[_0x292912(0x200)]]=_0x19ccee[_0x292912(0x19e)],_0x341238;},{});}['getNineAiToken'](){const _0x4c29bb=_0x9a8a80,_0x53b49b=this[_0x4c29bb(0x1f3)][_0x4c29bb(0x1ab)],_0x41c21c=this[_0x4c29bb(0x1ca)];return!_0x41c21c||Number(_0x53b49b)===0x1;}async[_0x9a8a80(0x1f0)](_0x2523f7){const _0x3270e8=_0x9a8a80;try{const {settings:_0x4e0890}=_0x2523f7;for(const _0x453f43 of _0x4e0890){await this[_0x3270e8(0x1b1)](_0x453f43);}await this[_0x3270e8(0x1b7)]();const _0xce721c=_0x4e0890[_0x3270e8(0x1d5)](_0x5b7bd2=>_0x5b7bd2[_0x3270e8(0x200)]);return(_0xce721c[_0x3270e8(0x231)](_0x3270e8(0x1dd))||_0xce721c['includes'](_0x3270e8(0x250)))&&await this['initBaiduSensitive'](![]),(_0xce721c[_0x3270e8(0x231)](_0x3270e8(0x225))||_0xce721c[_0x3270e8(0x231)](_0x3270e8(0x20e)))&&await this[_0x3270e8(0x251)](),_0x3270e8(0x1f6);}catch(_0x33cc49){console['log'](_0x3270e8(0x229),_0x33cc49);}}async[_0x9a8a80(0x1b1)](_0x5577cf){const _0x5e480b=_0x9a8a80;try{const {configKey:_0x3dad3c,configVal:_0x366b73,status:status=0x1}=_0x5577cf,_0x17a060=await this['configEntity'][_0x5e480b(0x22e)]({'where':{'configKey':_0x3dad3c}});if(_0x17a060){const _0x5e923b=await this[_0x5e480b(0x1dc)][_0x5e480b(0x23b)]({'configKey':_0x3dad3c},{'configVal':_0x366b73,'status':status});}else{const _0x259509=await this[_0x5e480b(0x1dc)]['save']({'configKey':_0x3dad3c,'configVal':_0x366b73,'status':status});}}catch(_0x9e0849){console[_0x5e480b(0x24f)](_0x5e480b(0x229),_0x9e0849);throw new common_1['HttpException'](_0x5e480b(0x1af),common_1[_0x5e480b(0x1df)][_0x5e480b(0x1d4)]);}}async[_0x9a8a80(0x1ae)](){const _0x3c9a90=_0x9a8a80;return await this[_0x3c9a90(0x224)]([_0x3c9a90(0x204),_0x3c9a90(0x236)]);}async['getCopyright'](){const _0x231d5f=_0x9a8a80;return await this[_0x231d5f(0x224)](['copyrightUrl',_0x231d5f(0x1e8)]);}async[_0x9a8a80(0x1a6)](){const _0x5ba0d5=_0x9a8a80,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this[_0x5ba0d5(0x224)]([_0x5ba0d5(0x209),_0x5ba0d5(0x210),_0x5ba0d5(0x216),_0x5ba0d5(0x1bb)]);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus][_0x5ba0d5(0x1b4)](_0x570d79=>_0x570d79===0x0))throw new common_1[(_0x5ba0d5(0x1a9))](_0x5ba0d5(0x1c7),common_1[_0x5ba0d5(0x1df)][_0x5ba0d5(0x1d4)]);if(Number(payWechatStatus)===0x1)return'wechat';if(Number(payEpayStatus)===0x1)return _0x5ba0d5(0x1db);if(Number(payMpayStatus)===0x1)return _0x5ba0d5(0x21a);if(Number(payHupiStatus)===0x1)return _0x5ba0d5(0x220);}async['getAuthInfo'](){const _0xf5f6df=_0x9a8a80,{siteName:_0x5bb40b,qqNumber:_0x567213,vxNumber:_0x4cf7c9,registerBaseUrl:_0x4e291b,domain:_0x32848e}=await this[_0xf5f6df(0x224)]([_0xf5f6df(0x1e3),_0xf5f6df(0x1fc),'vxNumber',_0xf5f6df(0x1fe),_0xf5f6df(0x23d)]);return{'siteName':_0x5bb40b,'qqNumber':_0x567213,'vxNumber':_0x4cf7c9,'registerBaseUrl':_0x4e291b,'domain':_0x32848e};}async[_0x9a8a80(0x223)](){const _0x3d91a5=_0x9a8a80,{phoneRegisterStatus:_0x4a93b0,aliPhoneAccessKeyId:_0x1e15cc,aliPhoneAccessKeySecret:_0x17afee,aliPhoneSignName:_0x52b52f,aliPhoneTemplateCode:_0x3eac3f}=await this[_0x3d91a5(0x224)](['phoneRegisterStatus','aliPhoneAccessKeyId',_0x3d91a5(0x21b),'aliPhoneSignName',_0x3d91a5(0x1ee)]);if(Number(_0x4a93b0)!==0x1)throw new common_1[(_0x3d91a5(0x1a9))]('手机验证码功能暂未开放!',common_1[_0x3d91a5(0x1df)][_0x3d91a5(0x1d4)]);return{'accessKeyId':_0x1e15cc,'accessKeySecret':_0x17afee,'SignName':_0x52b52f,'TemplateCode':_0x3eac3f};}async[_0x9a8a80(0x22a)](){const _0x4de8ed=_0x9a8a80,{qcloudPhoneRegisterStatus:_0x3e7894,qcloudSecretId:_0xd833e6,qcloudSecretKey:_0x334fd0,qcloudPhoneSignName:_0x16ba81,qcloudSMSTemplateId:_0x528532,qcloudSMSSDKAppId:_0x256f64}=await this['getConfigs'](['qcloudPhoneRegisterStatus',_0x4de8ed(0x239),'qcloudSecretKey','qcloudPhoneSignName',_0x4de8ed(0x1c2),_0x4de8ed(0x21f)]);if(Number(_0x3e7894)!==0x1)throw new common_1[(_0x4de8ed(0x1a9))](_0x4de8ed(0x22d),common_1[_0x4de8ed(0x1df)][_0x4de8ed(0x1d4)]);return{'secretId':_0xd833e6,'secretKey':_0x334fd0,'signName':_0x16ba81,'templateId':_0x528532,'sdkAppId':_0x256f64};}['getNamespace'](){const _0x4395a6=_0x9a8a80;return process[_0x4395a6(0x218)][_0x4395a6(0x1e7)]||_0x4395a6(0x1e2);}async[_0x9a8a80(0x211)](){const _0x5bb83d=_0x9a8a80,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this[_0x5bb83d(0x224)]([_0x5bb83d(0x240),_0x5bb83d(0x249),_0x5bb83d(0x230),_0x5bb83d(0x24b)]);if(Number(signInStatus)!==0x1)throw new common_1['HttpException'](_0x5bb83d(0x1b9),common_1[_0x5bb83d(0x1df)][_0x5bb83d(0x1d4)]);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async['auth'](){const _0x85e592=_0x9a8a80,_0x2cbabf=_0x85e592(0x1c0),_0x51138e=await fetch(_0x2cbabf,{}),_0x2187bf=await _0x51138e['json'](),{success:success=!![],message:_0x2845d6}=_0x2187bf;common_1['Logger'][_0x85e592(0x1f1)](_0x85e592(0x235)),common_1['Logger'][_0x85e592(0x1f1)]('请填写您的授权码'),common_1[_0x85e592(0x215)][_0x85e592(0x1f1)](_0x85e592(0x1c1)),common_1[_0x85e592(0x215)][_0x85e592(0x1f1)](_0x85e592(0x1c1)),common_1[_0x85e592(0x215)][_0x85e592(0x258)]('感谢您使用NineAi、祝您使用愉快~');}async[_0x9a8a80(0x19f)](){const _0x23d412=_0x9a8a80,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x1ba37e,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x13452b,nineaiBuiltInSensitiveAuthKey:_0x14b439}=await this['getConfigs']([_0x23d412(0x1d3),_0x23d412(0x1d1),'nineaiBuiltInSensitiveStatus',_0x23d412(0x256),_0x23d412(0x253)]);if(Number(baiduTextStatus)===0x1)return{'useType':_0x23d412(0x20f),'baiduTextAccessToken':_0x1ba37e};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':'nineai','nineaiBuiltInSensitiveApiBase':_0x13452b,'nineaiBuiltInSensitiveAuthKey':_0x14b439};return null;}};GlobalConfigService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_1[_0x9a8a80(0x1e4)])(config_entity_1[_0x9a8a80(0x1bd)])),__param(0x1,(0x0,typeorm_1[_0x9a8a80(0x1e4)])(chatLog_entity_1[_0x9a8a80(0x205)])),__metadata(_0x9a8a80(0x23c),[typeorm_2['Repository'],typeorm_2[_0x9a8a80(0x1e0)],models_service_1['ModelsService']])],GlobalConfigService),exports[_0x9a8a80(0x1fb)]=GlobalConfigService;