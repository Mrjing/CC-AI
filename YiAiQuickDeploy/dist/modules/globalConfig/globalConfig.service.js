'use strict';const _0x22c4e8=_0x3f9d;function _0x3f9d(_0x3ba1c8,_0x642a8e){const _0x227c9e=_0x227c();return _0x3f9d=function(_0x3f9d54,_0x20cbf1){_0x3f9d54=_0x3f9d54-0xa5;let _0x529a38=_0x227c9e[_0x3f9d54];return _0x529a38;},_0x3f9d(_0x3ba1c8,_0x642a8e);}(function(_0x40235f,_0x4e492c){const _0x2879e5=_0x3f9d,_0x425cc5=_0x40235f();while(!![]){try{const _0x45fd04=parseInt(_0x2879e5(0x107))/0x1*(parseInt(_0x2879e5(0xbe))/0x2)+-parseInt(_0x2879e5(0x15d))/0x3+parseInt(_0x2879e5(0xb7))/0x4*(-parseInt(_0x2879e5(0x12c))/0x5)+parseInt(_0x2879e5(0x12b))/0x6+-parseInt(_0x2879e5(0x104))/0x7*(-parseInt(_0x2879e5(0xd9))/0x8)+parseInt(_0x2879e5(0x150))/0x9+parseInt(_0x2879e5(0xf8))/0xa*(-parseInt(_0x2879e5(0x164))/0xb);if(_0x45fd04===_0x4e492c)break;else _0x425cc5['push'](_0x425cc5['shift']());}catch(_0x57bff9){_0x425cc5['push'](_0x425cc5['shift']());}}}(_0x227c,0x9ed3d));var __decorate=this&&this[_0x22c4e8(0x119)]||function(_0x571c3e,_0x1651ac,_0x58a336,_0x2793f3){const _0x3c189d=_0x22c4e8;var _0x1db543=arguments[_0x3c189d(0x126)],_0x104648=_0x1db543<0x3?_0x1651ac:_0x2793f3===null?_0x2793f3=Object['getOwnPropertyDescriptor'](_0x1651ac,_0x58a336):_0x2793f3,_0x3a360c;if(typeof Reflect===_0x3c189d(0xad)&&typeof Reflect[_0x3c189d(0xd4)]===_0x3c189d(0x148))_0x104648=Reflect[_0x3c189d(0xd4)](_0x571c3e,_0x1651ac,_0x58a336,_0x2793f3);else{for(var _0x301e61=_0x571c3e['length']-0x1;_0x301e61>=0x0;_0x301e61--)if(_0x3a360c=_0x571c3e[_0x301e61])_0x104648=(_0x1db543<0x3?_0x3a360c(_0x104648):_0x1db543>0x3?_0x3a360c(_0x1651ac,_0x58a336,_0x104648):_0x3a360c(_0x1651ac,_0x58a336))||_0x104648;}return _0x1db543>0x3&&_0x104648&&Object[_0x3c189d(0xf9)](_0x1651ac,_0x58a336,_0x104648),_0x104648;},__metadata=this&&this[_0x22c4e8(0xc2)]||function(_0x1dc852,_0x5d1dbc){const _0x1e97ea=_0x22c4e8;if(typeof Reflect===_0x1e97ea(0xad)&&typeof Reflect['metadata']==='function')return Reflect[_0x1e97ea(0xcd)](_0x1dc852,_0x5d1dbc);},__param=this&&this[_0x22c4e8(0xb9)]||function(_0xed64d3,_0x56c034){return function(_0x497328,_0x459519){_0x56c034(_0x497328,_0x459519,_0xed64d3);};};Object['defineProperty'](exports,_0x22c4e8(0xba),{'value':!![]}),exports[_0x22c4e8(0xf3)]=void 0x0;const models_service_1=require(_0x22c4e8(0xec)),chatLog_entity_1=require(_0x22c4e8(0xa7)),common_1=require(_0x22c4e8(0x141)),config_entity_1=require(_0x22c4e8(0xc1)),typeorm_1=require(_0x22c4e8(0xbd)),typeorm_2=require('typeorm'),utils_1=require('../../common/utils'),axios_1=require(_0x22c4e8(0x14c)),fs=require('fs'),packageJsonContent=fs[_0x22c4e8(0x139)](_0x22c4e8(0x170),_0x22c4e8(0x13d)),packageJson=JSON[_0x22c4e8(0xc7)](packageJsonContent),version=packageJson['version'];function _0x227c(){const _0x57960a=['3997tTNDxm','qcloudPhoneLoginStatus','globalConfigs','1mZupQP','ticket','getDiffArray','domain','aliPhoneSignName','get','copyrightTitle','百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!','phoneLoginStatus','qcloudPhoneRegisterStatus','hideString','ali','OfficialService','createOrUpdate','nineaiBuiltInSensitiveApiBase','firstRregisterSendModel3Count','wechatJsapiTicket','getSignatureGiftConfig','__decorate','isVerifyEmail','assign','qqNumber','setGptKeys','data','HttpStatus','nineAiToken','&type=jsapi','mjHideWorkIn','aliPhoneAccessKeySecret','noticeTitle','qcloudSMSSDKAppId','length','isAutoOpenNotice','https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=','getNamespace','wechat','5711190DJbqYu','1188230StbgGq','缺失ip信息','entries','configKey','payMpayStatus','forEach','getPhoneVerifyConfig','签到功能暂未开放!','companyName','InjectRepository','isUseWxLogin','salesAllowDrawMoney','emailLoginStatus','readFileSync','Repository','salesSeniorRatio','&secret=','utf-8','wechatOfficialAppSecret','robotAvatar','mpay','@nestjs/common','registerSendDrawMjCount','&grant_type=client_credentials','firstRegisterSendRank','getConfigs','nineai','getCopyright','function','clientLogoPath','ChatLogEntity','configEntity','axios','openaiBaseUrl','salesBaseRatio','response','9163458XqilCS','siteRobotName','感谢您使用NineAi、祝您使用愉快~','isShowAppCatIcon','post','initBaiduSensitive','default','payWeChatPrivateKey','baiduTextStatus','emailRegisterStatus','inviteGiveSendModel4Count','qcloudSecretId','请填写您的授权码','2224818fFyDhb','chatGptKey:','wechatOfficialAppId','wechatAccessToken','wechatRegisterStatus','gpt','payWechatStatus','198XiilNq','NAMESPACE','reduce','registerSendStatus','cos','aliPhoneTemplateCode','configVal','mjProxy','payEpayStatus','signInStatus','application/json','invitedGuestSendDrawMjCount','package.json','mjUseBaiduFy','请按要求填写正确的授权信息','find','getWechatAccessToken','env','../chatLog/chatLog.entity','tencent','TRUE','debug','payWeChatPublicKey','手机验证码功能暂未开放!','object','filingNumber','mindDefaultData','queryAllConfig','vxNumber','baiduTextAccessToken','modelsService','mjProxyImgUrl','errMsg','payHupiStatus','20JplNsW','map','__param','__esModule','user','payEpayChannel','@nestjs/typeorm','975752qEfgzX','ISDEV','inviteGiveSendModel3Count','./config.entity','__metadata','design:paramtypes','error:\x20','https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=','onModuleInit','parse','ConfigEntity','HttpException','setConfig','支付功能暂未开放!','error','metadata','fetchJsapiTicket','mjHideNotBlock','signInModel4Count','baiduTextApiKey','nineaiBuiltInSensitiveAuthKey','queryPayType','decorate','findOne','initGetAllConfig','every','update','9504mCeilw','phoneRegisterStatus','wechatSilentLoginStatus','aliPhoneAccessKeyId','getNineAiToken','inviteGiveSendDrawMjCount','还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！','signInMjDrawToken','百度敏感词配置检测失败，您的参数可能配置的不正确!','includes','epay','ModelsService','qcloudPhoneSignName','设置配置信息错误！','https://api.jiangly.com/api/permission/auth','getQcloudPhoneVerifyConfig','hupi','super','queryGptKeys','../models/models.service','baiduTextSecretKey','BAD_REQUEST','save','inviteSendStatus','copyrightUrl','firstRregisterSendDrawMjCount','GlobalConfigService','baidu','getAuthInfo','siteName','firstRegisterSendStatus','308810qiRnQt','defineProperty','隐私内容、非超级管理员无权查看','\x20current\x20use\x20version\x20in\x20------>:\x20','https://aip.baidubce.com/oauth/2.0/token?client_id=','queryNotice','log','auth','Logger','appMenuHeaderTips','获取微信access_token失败、错误信息：','fetchBaseAccessToken'];_0x227c=function(){return _0x57960a;};return _0x227c();}console['log'](_0x22c4e8(0xfb),version);let GlobalConfigService=class GlobalConfigService{constructor(_0x4eb988,_0x262f09,_0x2c4222){const _0x365856=_0x22c4e8;this[_0x365856(0x14b)]=_0x4eb988,this['chatLogEntity']=_0x262f09,this[_0x365856(0xb3)]=_0x2c4222,this[_0x365856(0x106)]={},this['nineAiToken']=!![];}async[_0x22c4e8(0xc6)](){const _0x283957=_0x22c4e8;await this[_0x283957(0xd6)]();}async['getConfigs'](_0x12232d){const _0x49d752=_0x22c4e8;if(_0x12232d['length']===0x0)return;if(_0x12232d[_0x49d752(0xe2)](_0x49d752(0x160))&&_0x12232d[_0x49d752(0x126)]===0x1)return this[_0x49d752(0x160)];if(_0x12232d['includes'](_0x49d752(0x117))&&_0x12232d[_0x49d752(0x126)]===0x1)return this[_0x49d752(0x117)];if(_0x12232d[_0x49d752(0x126)]===0x1)return this[_0x49d752(0x106)][_0x12232d[0x0]];else{const _0x5245bc={};return _0x12232d[_0x49d752(0x131)](_0x5dbe31=>_0x5245bc[_0x5dbe31]=this[_0x49d752(0x106)][_0x5dbe31]),_0x5245bc;}}async[_0x22c4e8(0xd6)](){const _0xed8c25=_0x22c4e8,_0x4a84cf=await this['configEntity'][_0xed8c25(0x173)]();this['globalConfigs']=_0x4a84cf[_0xed8c25(0x166)]((_0x40ac67,_0x23b50f)=>{const _0x98fc7f=_0xed8c25;return _0x40ac67[_0x23b50f['configKey']]=_0x23b50f[_0x98fc7f(0x16a)],_0x40ac67;},{}),this[_0xed8c25(0x155)]();}async[_0x22c4e8(0x155)](_0x49ffd6=!![]){const _0x11f435=_0x22c4e8,{baiduTextApiKey:_0x387134,baiduTextSecretKey:_0x2aecce}=await this['getConfigs'](['baiduTextApiKey',_0x11f435(0xed)]);if(!_0x387134||!_0x2aecce){common_1[_0x11f435(0x100)][_0x11f435(0xcc)](_0x11f435(0x10e),_0x11f435(0xf3));return;}const _0x228ce8={'Content-Type':_0x11f435(0x16e),'Accept':'application/json'},_0x52b9b8=_0x11f435(0xfc)+_0x387134+'&client_secret='+_0x2aecce+_0x11f435(0x143);try{const _0x1f6429=await axios_1[_0x11f435(0x156)][_0x11f435(0x154)](_0x52b9b8,{'headers':_0x228ce8});this[_0x11f435(0x106)][_0x11f435(0xb2)]=_0x1f6429[_0x11f435(0x11e)]['access_token'];}catch(_0x556442){if(_0x49ffd6)common_1[_0x11f435(0x100)][_0x11f435(0xcc)](_0x11f435(0xe1),_0x11f435(0xf3));else throw new common_1['HttpException'](_0x556442[_0x11f435(0x14f)][_0x11f435(0x11e)]['error_description'],common_1[_0x11f435(0x11f)]['BAD_REQUEST']);}}async[_0x22c4e8(0xa5)](_0x5c74cc=![]){const _0x909521=_0x22c4e8,{wechatOfficialAppId:_0x267ceb,wechatOfficialAppSecret:_0x57bcb6}=await this['getConfigs']([_0x909521(0x15f),_0x909521(0x13e)]);if(!_0x267ceb||!_0x57bcb6)return common_1[_0x909521(0x100)][_0x909521(0xcc)](_0x909521(0xdf),_0x909521(0x113));this[_0x909521(0x160)]=await this[_0x909521(0x103)](_0x267ceb,_0x57bcb6,_0x5c74cc),this['wechatJsapiTicket']=await this[_0x909521(0xce)](this[_0x909521(0x160)]),common_1[_0x909521(0x100)][_0x909521(0xfe)]('wechat\x20refresh\x20access_token\x20\x20==>\x20'+this['wechatAccessToken'],'OfficialService');}async[_0x22c4e8(0x103)](_0x369938,_0x4c5498,_0x5a50da=![]){const _0x17701d=_0x22c4e8;if(process['env'][_0x17701d(0xbf)]==='TRUE'){this[_0x17701d(0x160)]='';return;}const {data:{errmsg:_0x552c65,access_token:_0x4b977e}}=await axios_1['default'][_0x17701d(0x10c)](_0x17701d(0xc5)+_0x369938+_0x17701d(0x13c)+_0x4c5498);if(_0x552c65){console['log'](_0x17701d(0xb5),_0x552c65);if(_0x5a50da)common_1[_0x17701d(0x100)][_0x17701d(0xcc)](_0x17701d(0x102)+_0x552c65,'OfficialService');else throw new common_1['HttpException']('请配置正确的秘钥、当前秘钥检测不通过！',common_1[_0x17701d(0x11f)][_0x17701d(0xee)]);return'';}return _0x4b977e;}async[_0x22c4e8(0xce)](_0x2ea468){const _0x54519f=_0x22c4e8;var _0x5df97e;if(process[_0x54519f(0xa6)]['ISDEV']===_0x54519f(0xa9)){this[_0x54519f(0x117)]='';return;}const _0x330785=await axios_1[_0x54519f(0x156)][_0x54519f(0x10c)](_0x54519f(0x128)+_0x2ea468+_0x54519f(0x121));return(_0x5df97e=_0x330785===null||_0x330785===void 0x0?void 0x0:_0x330785[_0x54519f(0x11e)])===null||_0x5df97e===void 0x0?void 0x0:_0x5df97e[_0x54519f(0x108)];}async[_0x22c4e8(0xb0)](_0x51c083){const _0x1ed84c=_0x22c4e8,{role:_0x26f1e9}=_0x51c083[_0x1ed84c(0xbb)];return this[_0x1ed84c(0x106)];}async['queryFrontConfig'](_0x12a958,_0x371be8){const _0x21761e=_0x22c4e8,_0x11bdfe=[_0x21761e(0xb1),_0x21761e(0x167),'registerSendModel3Count','registerSendModel4Count',_0x21761e(0x142),_0x21761e(0xf7),_0x21761e(0x144),_0x21761e(0x116),'firstRregisterSendModel4Count',_0x21761e(0xf2),_0x21761e(0xf0),_0x21761e(0xc0),_0x21761e(0x15a),_0x21761e(0xde),'invitedGuestSendModel3Count','invitedGuestSendModel4Count',_0x21761e(0x16f),'clientHomePath',_0x21761e(0x149),'clientFavoIconPath',_0x21761e(0x136),_0x21761e(0xf6),_0x21761e(0x13f),_0x21761e(0x151),'buyCramiAddress',_0x21761e(0xaf),'baiduCode',_0x21761e(0xbc),'payMpayChannel','payEpayApiPayUrl',_0x21761e(0x16c),_0x21761e(0xb6),_0x21761e(0x163),_0x21761e(0x130),_0x21761e(0x127),_0x21761e(0x153),_0x21761e(0x14e),_0x21761e(0x13b),_0x21761e(0x137),_0x21761e(0x134),_0x21761e(0xae),_0x21761e(0xda),_0x21761e(0x110),_0x21761e(0x159),_0x21761e(0x138),_0x21761e(0x10f),_0x21761e(0x105),_0x21761e(0x161),_0x21761e(0xdb),_0x21761e(0x16d),'signInModel3Count',_0x21761e(0xd0),_0x21761e(0xe0),_0x21761e(0x101),'appMenuHeaderBgUrl',_0x21761e(0x171),_0x21761e(0xcf),_0x21761e(0x122),_0x21761e(0x11a)],_0x386e14=await this[_0x21761e(0x14b)][_0x21761e(0x173)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x11bdfe)}}),{domain:_0x3e1524}=_0x12a958,_0x3d0da7=this[_0x21761e(0x106)][_0x21761e(0x10a)];_0x3d0da7!==_0x3e1524&&(this['createOrUpdate']({'configKey':_0x21761e(0x10a),'configVal':_0x3e1524,'status':0x1}),await this[_0x21761e(0xd6)]());const _0x13c8cc=_0x386e14['reduce']((_0x3cae1a,_0x4d4f13)=>{const _0x744b9c=_0x21761e;return _0x3cae1a[_0x4d4f13[_0x744b9c(0x12f)]]=_0x4d4f13[_0x744b9c(0x16a)],_0x3cae1a;},{}),{wechatOfficialAppId:_0x92dd45,wechatOfficialAppSecret:_0x1afa99}=await this['getConfigs'](['wechatOfficialAppId',_0x21761e(0x13e)]),_0x34d662=!!(_0x92dd45&&_0x1afa99);return Object[_0x21761e(0x11b)](Object[_0x21761e(0x11b)]({},_0x13c8cc),{'isUseWxLogin':_0x34d662});}async[_0x22c4e8(0xeb)](_0x1b2909){const _0x193104=_0x22c4e8,{role:_0x2ff238}=_0x1b2909[_0x193104(0xbb)],_0x3b45f7=await this['configEntity'][_0x193104(0x173)]({'where':{'configKey':(0x0,typeorm_2['Like'])('%'+'chatGptKey'+'%')}});if(_0x2ff238===_0x193104(0xea))return _0x3b45f7;return _0x3b45f7[_0x193104(0xb8)](_0x26a018=>{const _0x43110c=_0x193104;return _0x26a018[_0x43110c(0x16a)]=(0x0,utils_1['hideString'])(_0x26a018[_0x43110c(0x16a)]),_0x26a018;});}async[_0x22c4e8(0x11d)](_0x545197){const _0x2da106=_0x22c4e8,_0x3e56bd=_0x545197['configs']['filter'](_0x5a0b04=>_0x5a0b04[_0x2da106(0x16a)]),_0x499b7e=_0x3e56bd['map'](_0x5eb599=>_0x5eb599[_0x2da106(0x12f)]);for(const [_0x4bf0aa,_0x2e812b]of _0x3e56bd[_0x2da106(0x12e)]()){const {configKey:_0x25662a,configVal:_0x1b28c9,status:_0x837ca1}=_0x2e812b;await this[_0x2da106(0x114)]({'configKey':_0x2da106(0x15e)+(_0x4bf0aa+0x1),'configVal':_0x1b28c9,'status':_0x837ca1});}const _0x4e7fcb=await this[_0x2da106(0x14b)][_0x2da106(0x173)]({'where':{'configKey':(0x0,typeorm_2['Like'])('%'+'chatGptKey'+'%')}}),_0x48c064=_0x4e7fcb[_0x2da106(0xb8)](_0x43df8d=>_0x43df8d[_0x2da106(0x12f)]);if(_0x48c064[_0x2da106(0x126)]>_0x499b7e[_0x2da106(0x126)]){const _0x26bfe5=(0x0,utils_1[_0x2da106(0x109)])(_0x48c064[_0x2da106(0x126)],_0x499b7e[_0x2da106(0x126)],_0x2da106(0x15e));for(const _0x2e6b12 of _0x26bfe5){await this[_0x2da106(0x14b)]['delete']({'configKey':_0x2e6b12});}}return await this[_0x2da106(0xd6)](),'操作完成！';}async['queryConfig'](_0x9cd5bc,_0x1bc85f){const _0x31ca19=_0x22c4e8,{role:_0x3055b8}=_0x1bc85f[_0x31ca19(0xbb)],{keys:_0x32926b}=_0x9cd5bc,_0x3ef3ad=await this[_0x31ca19(0x14b)][_0x31ca19(0x173)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x32926b)}});return _0x3055b8!==_0x31ca19(0xea)&&_0x3ef3ad[_0x31ca19(0x131)](_0x4ac2fe=>{const _0x11a518=_0x31ca19;if(_0x4ac2fe[_0x11a518(0x12f)][_0x11a518(0xe2)]('mj')||_0x4ac2fe[_0x11a518(0x12f)][_0x11a518(0xe2)]('Key')||_0x4ac2fe[_0x11a518(0x12f)][_0x11a518(0xe2)](_0x11a518(0x162))||_0x4ac2fe[_0x11a518(0x12f)][_0x11a518(0xe2)](_0x11a518(0x168))||_0x4ac2fe[_0x11a518(0x12f)][_0x11a518(0xe2)](_0x11a518(0xf4))||_0x4ac2fe[_0x11a518(0x12f)][_0x11a518(0xe2)](_0x11a518(0x112))||_0x4ac2fe['configKey'][_0x11a518(0xe2)](_0x11a518(0xa8))||_0x4ac2fe[_0x11a518(0x12f)][_0x11a518(0xe2)]('pay')||_0x4ac2fe[_0x11a518(0x12f)][_0x11a518(0xe2)](_0x11a518(0x12a))||_0x4ac2fe[_0x11a518(0x12f)][_0x11a518(0xe2)](_0x11a518(0xb4))||_0x4ac2fe['configKey']===_0x11a518(0x14d)){const _0x4ecce8=[_0x11a518(0xab),_0x11a518(0x157)];if(_0x4ecce8['includes'](_0x4ac2fe[_0x11a518(0x12f)]))return _0x4ac2fe[_0x11a518(0x16a)]=(0x0,utils_1[_0x11a518(0x111)])(_0x4ac2fe[_0x11a518(0x16a)],_0x11a518(0xfa));const _0xdf3a4e=[_0x11a518(0x16c),_0x11a518(0xb6),_0x11a518(0x16b)];!_0xdf3a4e[_0x11a518(0xe2)](_0x4ac2fe[_0x11a518(0x12f)])&&!_0x4ac2fe[_0x11a518(0x12f)][_0x11a518(0xe2)]('Status')&&(_0x4ac2fe[_0x11a518(0x16a)]=(0x0,utils_1[_0x11a518(0x111)])(_0x4ac2fe[_0x11a518(0x16a)]));}}),_0x3ef3ad[_0x31ca19(0x166)]((_0x4d12a6,_0x209853)=>{const _0x1ec0a5=_0x31ca19;return _0x4d12a6[_0x209853['configKey']]=_0x209853[_0x1ec0a5(0x16a)],_0x4d12a6;},{});}[_0x22c4e8(0xdd)](){const _0x4e8d81=_0x22c4e8,_0x2a513c=this[_0x4e8d81(0x106)]['MjdrawCount'],_0x4fa206=this[_0x4e8d81(0x120)];return!_0x4fa206||Number(_0x2a513c)===0x1;}async[_0x22c4e8(0xca)](_0xed7d3b){const _0x2ebaa9=_0x22c4e8;try{const {settings:_0x2f597f}=_0xed7d3b;for(const _0x5613a4 of _0x2f597f){await this['createOrUpdate'](_0x5613a4);}await this[_0x2ebaa9(0xd6)]();const _0x2073f0=_0x2f597f[_0x2ebaa9(0xb8)](_0x210d6c=>_0x210d6c['configKey']);return(_0x2073f0[_0x2ebaa9(0xe2)](_0x2ebaa9(0xd1))||_0x2073f0[_0x2ebaa9(0xe2)](_0x2ebaa9(0xed)))&&await this['initBaiduSensitive'](![]),(_0x2073f0[_0x2ebaa9(0xe2)]('wechatOfficialAppId')||_0x2073f0[_0x2ebaa9(0xe2)](_0x2ebaa9(0x13e)))&&await this[_0x2ebaa9(0xa5)](),'设置完成！';}catch(_0x2507e0){console['log'](_0x2ebaa9(0xc4),_0x2507e0);}}async[_0x22c4e8(0x114)](_0x10c607){const _0x1c6392=_0x22c4e8;try{const {configKey:_0x20fdf1,configVal:_0x121072,status:status=0x1}=_0x10c607,_0x1359e8=await this['configEntity'][_0x1c6392(0xd5)]({'where':{'configKey':_0x20fdf1}});if(_0x1359e8){const _0x110bb2=await this[_0x1c6392(0x14b)][_0x1c6392(0xd8)]({'configKey':_0x20fdf1},{'configVal':_0x121072,'status':status});}else{const _0x5aaf4f=await this['configEntity'][_0x1c6392(0xef)]({'configKey':_0x20fdf1,'configVal':_0x121072,'status':status});}}catch(_0x17901a){console[_0x1c6392(0xfe)]('error:\x20',_0x17901a);throw new common_1[(_0x1c6392(0xc9))](_0x1c6392(0xe6),common_1['HttpStatus'][_0x1c6392(0xee)]);}}async[_0x22c4e8(0xfd)](){const _0x1c7cfb=_0x22c4e8;return await this[_0x1c7cfb(0x145)](['noticeInfo',_0x1c7cfb(0x124)]);}async[_0x22c4e8(0x147)](){const _0x3f653f=_0x22c4e8;return await this['getConfigs']([_0x3f653f(0xf1),_0x3f653f(0x10d)]);}async[_0x22c4e8(0xd3)](){const _0xe3ae9=_0x22c4e8,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this['getConfigs']([_0xe3ae9(0xb6),'payEpayStatus',_0xe3ae9(0x130),_0xe3ae9(0x163)]);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus][_0xe3ae9(0xd7)](_0x108a9e=>_0x108a9e===0x0))throw new common_1[(_0xe3ae9(0xc9))](_0xe3ae9(0xcb),common_1['HttpStatus'][_0xe3ae9(0xee)]);if(Number(payWechatStatus)===0x1)return _0xe3ae9(0x12a);if(Number(payEpayStatus)===0x1)return _0xe3ae9(0xe3);if(Number(payMpayStatus)===0x1)return _0xe3ae9(0x140);if(Number(payHupiStatus)===0x1)return _0xe3ae9(0xe9);}async[_0x22c4e8(0xf5)](){const _0x36d7c0=_0x22c4e8,{siteName:_0x277305,qqNumber:_0x42c619,vxNumber:_0x1546b7,registerBaseUrl:_0x3e77f5,domain:_0x18cddd}=await this[_0x36d7c0(0x145)]([_0x36d7c0(0xf6),_0x36d7c0(0x11c),'vxNumber','registerBaseUrl',_0x36d7c0(0x10a)]);return{'siteName':_0x277305,'qqNumber':_0x42c619,'vxNumber':_0x1546b7,'registerBaseUrl':_0x3e77f5,'domain':_0x18cddd};}async[_0x22c4e8(0x132)](){const _0x60b351=_0x22c4e8,{phoneRegisterStatus:_0x173b91,aliPhoneAccessKeyId:_0x19c138,aliPhoneAccessKeySecret:_0x5b098f,aliPhoneSignName:_0x4c88cc,aliPhoneTemplateCode:_0x50254c}=await this['getConfigs']([_0x60b351(0xda),_0x60b351(0xdc),_0x60b351(0x123),_0x60b351(0x10b),_0x60b351(0x169)]);if(Number(_0x173b91)!==0x1)throw new common_1[(_0x60b351(0xc9))](_0x60b351(0xac),common_1['HttpStatus'][_0x60b351(0xee)]);return{'accessKeyId':_0x19c138,'accessKeySecret':_0x5b098f,'SignName':_0x4c88cc,'TemplateCode':_0x50254c};}async[_0x22c4e8(0xe8)](){const _0x8247be=_0x22c4e8,{qcloudPhoneRegisterStatus:_0x296c85,qcloudSecretId:_0xe93df9,qcloudSecretKey:_0x1b433a,qcloudPhoneSignName:_0x538e10,qcloudSMSTemplateId:_0x1a664e,qcloudSMSSDKAppId:_0xf5adf5}=await this[_0x8247be(0x145)](['qcloudPhoneRegisterStatus',_0x8247be(0x15b),'qcloudSecretKey',_0x8247be(0xe5),'qcloudSMSTemplateId',_0x8247be(0x125)]);if(Number(_0x296c85)!==0x1)throw new common_1[(_0x8247be(0xc9))]('手机验证码功能暂未开放!',common_1['HttpStatus'][_0x8247be(0xee)]);return{'secretId':_0xe93df9,'secretKey':_0x1b433a,'signName':_0x538e10,'templateId':_0x1a664e,'sdkAppId':_0xf5adf5};}[_0x22c4e8(0x129)](){const _0x47acc8=_0x22c4e8;return process[_0x47acc8(0xa6)][_0x47acc8(0x165)]||'NINEAI';}async[_0x22c4e8(0x118)](){const _0x4bd985=_0x22c4e8,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this[_0x4bd985(0x145)]([_0x4bd985(0x16d),'signInModel3Count',_0x4bd985(0xd0),_0x4bd985(0xe0)]);if(Number(signInStatus)!==0x1)throw new common_1[(_0x4bd985(0xc9))](_0x4bd985(0x133),common_1[_0x4bd985(0x11f)]['BAD_REQUEST']);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async[_0x22c4e8(0xff)](){const _0x5a706b=_0x22c4e8,_0x542824=_0x5a706b(0xe7),_0x153370=await fetch(_0x542824,{}),_0x26f1e1=await _0x153370['json'](),{success:success=!![],message:_0x481d4b}=_0x26f1e1;common_1['Logger']['error'](_0x5a706b(0x172)),common_1[_0x5a706b(0x100)][_0x5a706b(0xcc)](_0x5a706b(0x15c)),common_1['Logger']['error']('缺失ip信息'),common_1['Logger']['error'](_0x5a706b(0x12d)),common_1['Logger'][_0x5a706b(0xaa)](_0x5a706b(0x152));}async['getSensitiveConfig'](){const _0x361b60=_0x22c4e8,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x3c8fe3,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x57d3d8,nineaiBuiltInSensitiveAuthKey:_0x496de3}=await this[_0x361b60(0x145)]([_0x361b60(0x158),_0x361b60(0xb2),'nineaiBuiltInSensitiveStatus',_0x361b60(0x115),_0x361b60(0xd2)]);if(Number(baiduTextStatus)===0x1)return{'useType':_0x361b60(0xf4),'baiduTextAccessToken':_0x3c8fe3};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':_0x361b60(0x146),'nineaiBuiltInSensitiveApiBase':_0x57d3d8,'nineaiBuiltInSensitiveAuthKey':_0x496de3};return null;}};GlobalConfigService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_1[_0x22c4e8(0x135)])(config_entity_1[_0x22c4e8(0xc8)])),__param(0x1,(0x0,typeorm_1[_0x22c4e8(0x135)])(chatLog_entity_1[_0x22c4e8(0x14a)])),__metadata(_0x22c4e8(0xc3),[typeorm_2[_0x22c4e8(0x13a)],typeorm_2['Repository'],models_service_1[_0x22c4e8(0xe4)]])],GlobalConfigService),exports[_0x22c4e8(0xf3)]=GlobalConfigService;