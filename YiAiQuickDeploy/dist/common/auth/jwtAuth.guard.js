'use strict';const _0x23ba51=_0x2358;(function(_0x59ca8f,_0x22aa78){const _0x1f7ff8=_0x2358,_0x109d7f=_0x59ca8f();while(!![]){try{const _0x2ff88a=-parseInt(_0x1f7ff8(0x1f4))/0x1*(-parseInt(_0x1f7ff8(0x210))/0x2)+parseInt(_0x1f7ff8(0x1f5))/0x3*(parseInt(_0x1f7ff8(0x1fa))/0x4)+parseInt(_0x1f7ff8(0x218))/0x5*(parseInt(_0x1f7ff8(0x204))/0x6)+-parseInt(_0x1f7ff8(0x21c))/0x7*(-parseInt(_0x1f7ff8(0x1f2))/0x8)+parseInt(_0x1f7ff8(0x219))/0x9*(-parseInt(_0x1f7ff8(0x213))/0xa)+parseInt(_0x1f7ff8(0x207))/0xb*(-parseInt(_0x1f7ff8(0x214))/0xc)+-parseInt(_0x1f7ff8(0x1e7))/0xd*(parseInt(_0x1f7ff8(0x20e))/0xe);if(_0x2ff88a===_0x22aa78)break;else _0x109d7f['push'](_0x109d7f['shift']());}catch(_0x228709){_0x109d7f['push'](_0x109d7f['shift']());}}}(_0x421c,0x83806));var __decorate=this&&this['__decorate']||function(_0x172bcc,_0x14a6b5,_0x49f382,_0x2ba10e){const _0x5b04ad=_0x2358;var _0x2bb2a8=arguments[_0x5b04ad(0x1f6)],_0x184a98=_0x2bb2a8<0x3?_0x14a6b5:_0x2ba10e===null?_0x2ba10e=Object['getOwnPropertyDescriptor'](_0x14a6b5,_0x49f382):_0x2ba10e,_0x4ede69;if(typeof Reflect===_0x5b04ad(0x1e8)&&typeof Reflect[_0x5b04ad(0x1ee)]===_0x5b04ad(0x201))_0x184a98=Reflect['decorate'](_0x172bcc,_0x14a6b5,_0x49f382,_0x2ba10e);else{for(var _0x58b2cf=_0x172bcc[_0x5b04ad(0x1f6)]-0x1;_0x58b2cf>=0x0;_0x58b2cf--)if(_0x4ede69=_0x172bcc[_0x58b2cf])_0x184a98=(_0x2bb2a8<0x3?_0x4ede69(_0x184a98):_0x2bb2a8>0x3?_0x4ede69(_0x14a6b5,_0x49f382,_0x184a98):_0x4ede69(_0x14a6b5,_0x49f382))||_0x184a98;}return _0x2bb2a8>0x3&&_0x184a98&&Object[_0x5b04ad(0x208)](_0x14a6b5,_0x49f382,_0x184a98),_0x184a98;},__metadata=this&&this[_0x23ba51(0x1e4)]||function(_0x56e0ea,_0xf0c95e){const _0x247e26=_0x23ba51;if(typeof Reflect===_0x247e26(0x1e8)&&typeof Reflect[_0x247e26(0x20a)]===_0x247e26(0x201))return Reflect['metadata'](_0x56e0ea,_0xf0c95e);};Object[_0x23ba51(0x208)](exports,_0x23ba51(0x211),{'value':!![]}),exports[_0x23ba51(0x222)]=void 0x0;const redisCache_service_1=require(_0x23ba51(0x21e)),common_1=require(_0x23ba51(0x1e9)),passport_1=require('@nestjs/passport'),jwt=require(_0x23ba51(0x1e6)),core_1=require(_0x23ba51(0x216)),globalConfig_service_1=require(_0x23ba51(0x21d)),auth_service_1=require('../../modules/auth/auth.service');let JwtAuthGuard=class JwtAuthGuard extends(0x0,passport_1['AuthGuard'])('jwt'){constructor(_0x3c5b3d,_0x4c25ce,_0x4feba2,_0x2b4744){const _0x3e9ca4=_0x23ba51;super(),this['redisCacheService']=_0x3c5b3d,this[_0x3e9ca4(0x209)]=_0x4c25ce,this[_0x3e9ca4(0x1e3)]=_0x4feba2,this[_0x3e9ca4(0x20c)]=_0x2b4744;}async[_0x23ba51(0x21a)](_0x44d68f){const _0x1b1f28=_0x23ba51;!this[_0x1b1f28(0x21f)]&&(this[_0x1b1f28(0x21f)]=this[_0x1b1f28(0x209)][_0x1b1f28(0x220)](redisCache_service_1[_0x1b1f28(0x1f1)],{'strict':![]}));const _0x49d610=_0x44d68f['switchToHttp']()[_0x1b1f28(0x1ea)](),_0x1e66f0=_0x49d610[_0x1b1f28(0x217)][_0x1b1f28(0x20f)],_0x361a44=this['extractToken'](_0x49d610);_0x49d610[_0x1b1f28(0x20d)]=this[_0x1b1f28(0x1fc)](_0x361a44);const _0x17f134=this[_0x1b1f28(0x1e3)][_0x1b1f28(0x1ef)]();return await this[_0x1b1f28(0x21f)][_0x1b1f28(0x20b)](_0x361a44,_0x49d610),!![];}[_0x23ba51(0x1fd)](_0x5c375d){const _0x371c55=_0x23ba51;if(!_0x5c375d[_0x371c55(0x217)]['authorization']){if(_0x5c375d[_0x371c55(0x217)][_0x371c55(0x21b)]){let _0x506024=_0x5c375d[_0x371c55(0x217)][_0x371c55(0x21b)];_0x506024>0x7fffffff&&(_0x506024=_0x506024[_0x371c55(0x1ec)]()[_0x371c55(0x200)](-0x9),_0x506024=Number(String(Number(_0x506024))));const _0x5d50d5=this[_0x371c55(0x20c)][_0x371c55(0x1eb)](_0x506024);return _0x5d50d5;}return null;}const _0x1f34c1=_0x5c375d['headers'][_0x371c55(0x1f8)][_0x371c55(0x203)]('\x20');if(_0x1f34c1['length']!==0x2||_0x1f34c1[0x0]!==_0x371c55(0x212))return null;return _0x1f34c1[0x1];}[_0x23ba51(0x1fc)](_0x9b197e){const _0x337497=_0x23ba51;try{return jwt[_0x337497(0x1e5)](_0x9b197e,process['env'][_0x337497(0x205)]);}catch(_0x228367){throw new common_1[(_0x337497(0x206))](_0x337497(0x202),common_1[_0x337497(0x1f3)][_0x337497(0x1fb)]);}}[_0x23ba51(0x1f9)](_0x5e8a54,_0x575389,_0x212beb){const _0x34f1f3=_0x23ba51;if(_0x5e8a54||!_0x575389){console[_0x34f1f3(0x1ed)]('err:\x20',_0x5e8a54);throw _0x5e8a54||new common_1[(_0x34f1f3(0x215))]();}return _0x575389;}};function _0x2358(_0x5dc437,_0x37fd2b){const _0x421c57=_0x421c();return _0x2358=function(_0x235874,_0x3cc5d3){_0x235874=_0x235874-0x1e3;let _0x540052=_0x421c57[_0x235874];return _0x540052;},_0x2358(_0x5dc437,_0x37fd2b);}JwtAuthGuard=__decorate([(0x0,common_1[_0x23ba51(0x1f7)])(),__metadata(_0x23ba51(0x1fe),[redisCache_service_1[_0x23ba51(0x1f1)],core_1[_0x23ba51(0x221)],globalConfig_service_1[_0x23ba51(0x1f0)],auth_service_1[_0x23ba51(0x1ff)]])],JwtAuthGuard),exports['JwtAuthGuard']=JwtAuthGuard;function _0x421c(){const _0x1f13f1=['decorate','getNineAiToken','GlobalConfigService','RedisCacheService','728OjcLgX','HttpStatus','1377GiMvzj','47952eMMhim','length','Injectable','authorization','handleRequest','208KSecdB','UNAUTHORIZED','validateToken','extractToken','design:paramtypes','AuthService','slice','function','亲爱的用户,请登录后继续操作,我们正在等您的到来！','split','23358MtIoge','JWT_SECRET','HttpException','16203lhNNLK','defineProperty','moduleRef','metadata','checkTokenAuth','authService','user','154hTFaBF','x-website-domain','98rXCZfz','__esModule','Bearer','40qwdQgh','5904BNTEJC','UnauthorizedException','@nestjs/core','headers','365iuKlik','1096506flWnAh','canActivate','fingerprint','68887PIubfT','../../modules/globalConfig/globalConfig.service','../../modules/redisCache/redisCache.service','redisCacheService','get','ModuleRef','JwtAuthGuard','globalConfigService','__metadata','verify','jsonwebtoken','387257UiYtPG','object','@nestjs/common','getRequest','createTokenFromFingerprint','toString','log'];_0x421c=function(){return _0x1f13f1;};return _0x421c();}