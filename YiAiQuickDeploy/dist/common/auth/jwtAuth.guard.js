'use strict';const _0x3aea81=_0x16fe;(function(_0x58d5d3,_0x2e950f){const _0x1beaf5=_0x16fe,_0x42ac23=_0x58d5d3();while(!![]){try{const _0x40aff7=-parseInt(_0x1beaf5(0x1e4))/0x1*(parseInt(_0x1beaf5(0x1eb))/0x2)+-parseInt(_0x1beaf5(0x1ca))/0x3*(-parseInt(_0x1beaf5(0x1d6))/0x4)+-parseInt(_0x1beaf5(0x1e2))/0x5+-parseInt(_0x1beaf5(0x1be))/0x6+-parseInt(_0x1beaf5(0x1e3))/0x7+-parseInt(_0x1beaf5(0x1d5))/0x8+-parseInt(_0x1beaf5(0x1d2))/0x9*(-parseInt(_0x1beaf5(0x1ce))/0xa);if(_0x40aff7===_0x2e950f)break;else _0x42ac23['push'](_0x42ac23['shift']());}catch(_0x485e15){_0x42ac23['push'](_0x42ac23['shift']());}}}(_0x1747,0xd18ac));function _0x1747(){const _0x2b0b41=['handleRequest','x-website-domain','AuthGuard','validateToken','__decorate','277900vcpOhT','4908729jMHjvt','734659HOqiEQ','Injectable','user','AuthService','getNineAiToken','log','canActivate','2VHaYQe','亲爱的用户,请登录后继续操作,我们正在等您的到来！','globalConfigService','length','../../modules/auth/auth.service','@nestjs/passport','split','../../modules/redisCache/redisCache.service','jsonwebtoken','HttpException','object','authService','env','Bearer','8248044IVmkAz','authorization','ModuleRef','createTokenFromFingerprint','switchToHttp','../../modules/globalConfig/globalConfig.service','get','@nestjs/common','err:\x20','getOwnPropertyDescriptor','slice','extractToken','129eSgWIz','jwt','__esModule','JWT_SECRET','76790pAGtHp','metadata','design:paramtypes','checkTokenAuth','4014DVuDDW','redisCacheService','decorate','80264iMNUgs','28804GBzXlA','defineProperty','getRequest','JwtAuthGuard','RedisCacheService','headers','fingerprint'];_0x1747=function(){return _0x2b0b41;};return _0x1747();}function _0x16fe(_0x311afb,_0xbdaf9b){const _0x1747c4=_0x1747();return _0x16fe=function(_0x16fee2,_0x3ec969){_0x16fee2=_0x16fee2-0x1b3;let _0x1a0514=_0x1747c4[_0x16fee2];return _0x1a0514;},_0x16fe(_0x311afb,_0xbdaf9b);}var __decorate=this&&this[_0x3aea81(0x1e1)]||function(_0x4b8f66,_0x412f60,_0x3a998e,_0x43f998){const _0x142ee0=_0x3aea81;var _0x25f076=arguments[_0x142ee0(0x1b3)],_0x615b76=_0x25f076<0x3?_0x412f60:_0x43f998===null?_0x43f998=Object[_0x142ee0(0x1c7)](_0x412f60,_0x3a998e):_0x43f998,_0x31d486;if(typeof Reflect===_0x142ee0(0x1ba)&&typeof Reflect[_0x142ee0(0x1d4)]==='function')_0x615b76=Reflect['decorate'](_0x4b8f66,_0x412f60,_0x3a998e,_0x43f998);else{for(var _0x1617c5=_0x4b8f66[_0x142ee0(0x1b3)]-0x1;_0x1617c5>=0x0;_0x1617c5--)if(_0x31d486=_0x4b8f66[_0x1617c5])_0x615b76=(_0x25f076<0x3?_0x31d486(_0x615b76):_0x25f076>0x3?_0x31d486(_0x412f60,_0x3a998e,_0x615b76):_0x31d486(_0x412f60,_0x3a998e))||_0x615b76;}return _0x25f076>0x3&&_0x615b76&&Object[_0x142ee0(0x1d7)](_0x412f60,_0x3a998e,_0x615b76),_0x615b76;},__metadata=this&&this['__metadata']||function(_0x515d03,_0x115a50){const _0x315729=_0x3aea81;if(typeof Reflect===_0x315729(0x1ba)&&typeof Reflect[_0x315729(0x1cf)]==='function')return Reflect[_0x315729(0x1cf)](_0x515d03,_0x115a50);};Object[_0x3aea81(0x1d7)](exports,_0x3aea81(0x1cc),{'value':!![]}),exports['JwtAuthGuard']=void 0x0;const redisCache_service_1=require(_0x3aea81(0x1b7)),common_1=require(_0x3aea81(0x1c5)),passport_1=require(_0x3aea81(0x1b5)),jwt=require(_0x3aea81(0x1b8)),core_1=require('@nestjs/core'),globalConfig_service_1=require(_0x3aea81(0x1c3)),auth_service_1=require(_0x3aea81(0x1b4));let JwtAuthGuard=class JwtAuthGuard extends(0x0,passport_1[_0x3aea81(0x1df)])(_0x3aea81(0x1cb)){constructor(_0x59bc84,_0x4711c2,_0x5f4d4b,_0x1162d4){const _0x21a171=_0x3aea81;super(),this['redisCacheService']=_0x59bc84,this['moduleRef']=_0x4711c2,this[_0x21a171(0x1ed)]=_0x5f4d4b,this['authService']=_0x1162d4;}async[_0x3aea81(0x1ea)](_0x54c799){const _0x11ff4e=_0x3aea81;!this[_0x11ff4e(0x1d3)]&&(this[_0x11ff4e(0x1d3)]=this['moduleRef'][_0x11ff4e(0x1c4)](redisCache_service_1[_0x11ff4e(0x1da)],{'strict':![]}));const _0x2cb03d=_0x54c799[_0x11ff4e(0x1c2)]()[_0x11ff4e(0x1d8)](),_0x3c22b8=_0x2cb03d[_0x11ff4e(0x1db)][_0x11ff4e(0x1de)],_0x417980=this['extractToken'](_0x2cb03d);_0x2cb03d[_0x11ff4e(0x1e6)]=this[_0x11ff4e(0x1e0)](_0x417980);const _0x1f237b=this[_0x11ff4e(0x1ed)][_0x11ff4e(0x1e8)]();return await this[_0x11ff4e(0x1d3)][_0x11ff4e(0x1d1)](_0x417980,_0x2cb03d),!![];}[_0x3aea81(0x1c9)](_0x2b1a59){const _0x25f64d=_0x3aea81;if(!_0x2b1a59[_0x25f64d(0x1db)][_0x25f64d(0x1bf)]){if(_0x2b1a59[_0x25f64d(0x1db)][_0x25f64d(0x1dc)]){let _0x53b484=_0x2b1a59['headers'][_0x25f64d(0x1dc)];_0x53b484>0x7fffffff&&(_0x53b484=_0x53b484['toString']()[_0x25f64d(0x1c8)](-0x9),_0x53b484=Number(String(Number(_0x53b484))));const _0x5185fb=this[_0x25f64d(0x1bb)][_0x25f64d(0x1c1)](_0x53b484);return _0x5185fb;}return null;}const _0x4a87af=_0x2b1a59[_0x25f64d(0x1db)][_0x25f64d(0x1bf)][_0x25f64d(0x1b6)]('\x20');if(_0x4a87af[_0x25f64d(0x1b3)]!==0x2||_0x4a87af[0x0]!==_0x25f64d(0x1bd))return null;return _0x4a87af[0x1];}[_0x3aea81(0x1e0)](_0x59eb19){const _0x2b4a41=_0x3aea81;try{return jwt['verify'](_0x59eb19,process[_0x2b4a41(0x1bc)][_0x2b4a41(0x1cd)]);}catch(_0x344a59){throw new common_1[(_0x2b4a41(0x1b9))](_0x2b4a41(0x1ec),common_1['HttpStatus']['UNAUTHORIZED']);}}[_0x3aea81(0x1dd)](_0x2b9440,_0x22fba7,_0x2e359c){const _0x4aa1dc=_0x3aea81;if(_0x2b9440||!_0x22fba7){console[_0x4aa1dc(0x1e9)](_0x4aa1dc(0x1c6),_0x2b9440);throw _0x2b9440||new common_1['UnauthorizedException']();}return _0x22fba7;}};JwtAuthGuard=__decorate([(0x0,common_1[_0x3aea81(0x1e5)])(),__metadata(_0x3aea81(0x1d0),[redisCache_service_1[_0x3aea81(0x1da)],core_1[_0x3aea81(0x1c0)],globalConfig_service_1['GlobalConfigService'],auth_service_1[_0x3aea81(0x1e7)]])],JwtAuthGuard),exports[_0x3aea81(0x1d9)]=JwtAuthGuard;