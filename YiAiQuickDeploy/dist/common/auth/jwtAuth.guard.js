'use strict';const _0x2d3de2=_0x245f;(function(_0x32b5de,_0x2a4506){const _0x11f796=_0x245f,_0x337f42=_0x32b5de();while(!![]){try{const _0x3e3645=-parseInt(_0x11f796(0xc5))/0x1+parseInt(_0x11f796(0xb2))/0x2+-parseInt(_0x11f796(0xd4))/0x3+-parseInt(_0x11f796(0xcc))/0x4+parseInt(_0x11f796(0xda))/0x5+parseInt(_0x11f796(0xce))/0x6*(-parseInt(_0x11f796(0xdd))/0x7)+-parseInt(_0x11f796(0xb5))/0x8*(-parseInt(_0x11f796(0xaa))/0x9);if(_0x3e3645===_0x2a4506)break;else _0x337f42['push'](_0x337f42['shift']());}catch(_0x2d44f7){_0x337f42['push'](_0x337f42['shift']());}}}(_0x2874,0xdadf5));function _0x245f(_0x2a1997,_0x268a19){const _0x287455=_0x2874();return _0x245f=function(_0x245fd9,_0x2e5e40){_0x245fd9=_0x245fd9-0xa9;let _0xd770e4=_0x287455[_0x245fd9];return _0xd770e4;},_0x245f(_0x2a1997,_0x268a19);}var __decorate=this&&this['__decorate']||function(_0x433374,_0x255715,_0x1f4d93,_0x327420){const _0x4eacfe=_0x245f;var _0x248508=arguments[_0x4eacfe(0xcb)],_0x2f9c4b=_0x248508<0x3?_0x255715:_0x327420===null?_0x327420=Object['getOwnPropertyDescriptor'](_0x255715,_0x1f4d93):_0x327420,_0x34429a;if(typeof Reflect===_0x4eacfe(0xbf)&&typeof Reflect[_0x4eacfe(0xbc)]===_0x4eacfe(0xdb))_0x2f9c4b=Reflect[_0x4eacfe(0xbc)](_0x433374,_0x255715,_0x1f4d93,_0x327420);else{for(var _0xb9821a=_0x433374[_0x4eacfe(0xcb)]-0x1;_0xb9821a>=0x0;_0xb9821a--)if(_0x34429a=_0x433374[_0xb9821a])_0x2f9c4b=(_0x248508<0x3?_0x34429a(_0x2f9c4b):_0x248508>0x3?_0x34429a(_0x255715,_0x1f4d93,_0x2f9c4b):_0x34429a(_0x255715,_0x1f4d93))||_0x2f9c4b;}return _0x248508>0x3&&_0x2f9c4b&&Object['defineProperty'](_0x255715,_0x1f4d93,_0x2f9c4b),_0x2f9c4b;},__metadata=this&&this[_0x2d3de2(0xb8)]||function(_0x1e23af,_0x525700){const _0x56103f=_0x2d3de2;if(typeof Reflect==='object'&&typeof Reflect[_0x56103f(0xb0)]===_0x56103f(0xdb))return Reflect[_0x56103f(0xb0)](_0x1e23af,_0x525700);};Object[_0x2d3de2(0xdc)](exports,_0x2d3de2(0xc4),{'value':!![]}),exports[_0x2d3de2(0xd9)]=void 0x0;const redisCache_service_1=require(_0x2d3de2(0xbe)),common_1=require(_0x2d3de2(0xaf)),passport_1=require('@nestjs/passport'),jwt=require(_0x2d3de2(0xd8)),core_1=require(_0x2d3de2(0xde)),globalConfig_service_1=require('../../modules/globalConfig/globalConfig.service'),auth_service_1=require(_0x2d3de2(0xab));let JwtAuthGuard=class JwtAuthGuard extends(0x0,passport_1[_0x2d3de2(0xb9)])('jwt'){constructor(_0x5c5ed4,_0x98f50b,_0x506ce6,_0x5dee3c){const _0x512b18=_0x2d3de2;super(),this[_0x512b18(0xb3)]=_0x5c5ed4,this[_0x512b18(0xcf)]=_0x98f50b,this[_0x512b18(0xcd)]=_0x506ce6,this[_0x512b18(0xd3)]=_0x5dee3c;}async[_0x2d3de2(0xc9)](_0x210fad){const _0x5ed3b8=_0x2d3de2;!this[_0x5ed3b8(0xb3)]&&(this['redisCacheService']=this[_0x5ed3b8(0xcf)][_0x5ed3b8(0xe0)](redisCache_service_1['RedisCacheService'],{'strict':![]}));const _0x437bc8=_0x210fad[_0x5ed3b8(0xd0)]()[_0x5ed3b8(0xd5)](),_0x5d9f34=_0x437bc8[_0x5ed3b8(0xdf)][_0x5ed3b8(0xac)],_0x4ac87b=this[_0x5ed3b8(0xba)](_0x437bc8);_0x437bc8[_0x5ed3b8(0xb7)]=this[_0x5ed3b8(0xad)](_0x4ac87b);const _0x1770a5=this['globalConfigService']['getNineAiToken']();return await this[_0x5ed3b8(0xb3)]['checkTokenAuth'](_0x4ac87b,_0x437bc8),!![];}['extractToken'](_0x2e81a4){const _0x1fd311=_0x2d3de2;if(!_0x2e81a4[_0x1fd311(0xdf)]['authorization']){if(_0x2e81a4[_0x1fd311(0xdf)][_0x1fd311(0xd1)]){let _0x180638=_0x2e81a4[_0x1fd311(0xdf)][_0x1fd311(0xd1)];_0x180638>0x7fffffff&&(_0x180638=_0x180638[_0x1fd311(0xb4)]()[_0x1fd311(0xc0)](-0x9),_0x180638=Number(String(Number(_0x180638))));const _0x1645f2=this[_0x1fd311(0xd3)][_0x1fd311(0xd2)](_0x180638);return _0x1645f2;}return null;}const _0x37ddf3=_0x2e81a4[_0x1fd311(0xdf)][_0x1fd311(0xc1)][_0x1fd311(0xc8)]('\x20');if(_0x37ddf3[_0x1fd311(0xcb)]!==0x2||_0x37ddf3[0x0]!==_0x1fd311(0xc7))return null;return _0x37ddf3[0x1];}[_0x2d3de2(0xad)](_0x530fb6){const _0x186189=_0x2d3de2;try{return jwt[_0x186189(0xc6)](_0x530fb6,process['env'][_0x186189(0xae)]);}catch(_0x56697a){throw new common_1['HttpException'](_0x186189(0xc3),common_1['HttpStatus'][_0x186189(0xbd)]);}}[_0x2d3de2(0xbb)](_0x21b43c,_0x577fb9,_0x1c6874){const _0x258e28=_0x2d3de2;if(_0x21b43c||!_0x577fb9){console[_0x258e28(0xa9)]('err:\x20',_0x21b43c);throw _0x21b43c||new common_1[(_0x258e28(0xc2))]();}return _0x577fb9;}};JwtAuthGuard=__decorate([(0x0,common_1[_0x2d3de2(0xd7)])(),__metadata(_0x2d3de2(0xca),[redisCache_service_1[_0x2d3de2(0xb1)],core_1[_0x2d3de2(0xb6)],globalConfig_service_1['GlobalConfigService'],auth_service_1[_0x2d3de2(0xd6)]])],JwtAuthGuard),exports[_0x2d3de2(0xd9)]=JwtAuthGuard;function _0x2874(){const _0x3bf83a=['createTokenFromFingerprint','authService','3695859PUOLER','getRequest','AuthService','Injectable','jsonwebtoken','JwtAuthGuard','4857110bwxhZK','function','defineProperty','1607312hDgyRK','@nestjs/core','headers','get','log','1638xotUCf','../../modules/auth/auth.service','x-website-domain','validateToken','JWT_SECRET','@nestjs/common','metadata','RedisCacheService','689306fPqvzI','redisCacheService','toString','158288wzFbfp','ModuleRef','user','__metadata','AuthGuard','extractToken','handleRequest','decorate','UNAUTHORIZED','../../modules/redisCache/redisCache.service','object','slice','authorization','UnauthorizedException','亲爱的用户,请登录后继续操作,我们正在等您的到来！','__esModule','1103105mqUepb','verify','Bearer','split','canActivate','design:paramtypes','length','3068416uCzsrS','globalConfigService','24menFeB','moduleRef','switchToHttp','fingerprint'];_0x2874=function(){return _0x3bf83a;};return _0x2874();}