'use strict';const _0x24e6e8=_0x9009;function _0x9009(_0x50e51f,_0x5744d6){const _0xa8aa42=_0xa8aa();return _0x9009=function(_0x9009a5,_0x2b853d){_0x9009a5=_0x9009a5-0x114;let _0x301287=_0xa8aa42[_0x9009a5];return _0x301287;},_0x9009(_0x50e51f,_0x5744d6);}(function(_0x11c127,_0x2458e1){const _0x3570aa=_0x9009,_0x186571=_0x11c127();while(!![]){try{const _0x35a2e2=-parseInt(_0x3570aa(0x13e))/0x1*(-parseInt(_0x3570aa(0x134))/0x2)+parseInt(_0x3570aa(0x126))/0x3+parseInt(_0x3570aa(0x142))/0x4*(parseInt(_0x3570aa(0x136))/0x5)+-parseInt(_0x3570aa(0x137))/0x6*(parseInt(_0x3570aa(0x127))/0x7)+parseInt(_0x3570aa(0x116))/0x8+parseInt(_0x3570aa(0x129))/0x9+-parseInt(_0x3570aa(0x11e))/0xa;if(_0x35a2e2===_0x2458e1)break;else _0x186571['push'](_0x186571['shift']());}catch(_0xad6c11){_0x186571['push'](_0x186571['shift']());}}}(_0xa8aa,0x932a0));function _0xa8aa(){const _0x4c6be0=['HttpStatus','@nestjs/passport','object','design:paramtypes','Bearer','jsonwebtoken','fingerprint','14038390JAMyjH','RedisCacheService','../../modules/redisCache/redisCache.service','AuthService','__decorate','decorate','extractToken','env','2688699EcgQgm','329tUVFDo','createTokenFromFingerprint','4559859KrxnUW','switchToHttp','defineProperty','__metadata','jwt','authService','moduleRef','getRequest','@nestjs/core','JwtAuthGuard','length','205728ppzKDO','GlobalConfigService','40LjHdGa','138858TQuJVF','globalConfigService','UNAUTHORIZED','function','redisCacheService','x-website-domain','getOwnPropertyDescriptor','8rmkzEm','metadata','@nestjs/common','亲爱的用户,请登录后继续操作,我们正在等您的到来！','207512qVfwpS','checkTokenAuth','verify','HttpException','split','log','UnauthorizedException','authorization','JWT_SECRET','../../modules/auth/auth.service','Injectable','err:\x20','ModuleRef','AuthGuard','../../modules/globalConfig/globalConfig.service','headers','user','validateToken','3628192ovNidl'];_0xa8aa=function(){return _0x4c6be0;};return _0xa8aa();}var __decorate=this&&this[_0x24e6e8(0x122)]||function(_0x344dc1,_0x33ee6b,_0x26f04a,_0x30e683){const _0x3ee633=_0x24e6e8;var _0x4e5bf3=arguments[_0x3ee633(0x133)],_0x22be03=_0x4e5bf3<0x3?_0x33ee6b:_0x30e683===null?_0x30e683=Object[_0x3ee633(0x13d)](_0x33ee6b,_0x26f04a):_0x30e683,_0x54ba3c;if(typeof Reflect===_0x3ee633(0x119)&&typeof Reflect[_0x3ee633(0x123)]===_0x3ee633(0x13a))_0x22be03=Reflect[_0x3ee633(0x123)](_0x344dc1,_0x33ee6b,_0x26f04a,_0x30e683);else{for(var _0x570c0a=_0x344dc1[_0x3ee633(0x133)]-0x1;_0x570c0a>=0x0;_0x570c0a--)if(_0x54ba3c=_0x344dc1[_0x570c0a])_0x22be03=(_0x4e5bf3<0x3?_0x54ba3c(_0x22be03):_0x4e5bf3>0x3?_0x54ba3c(_0x33ee6b,_0x26f04a,_0x22be03):_0x54ba3c(_0x33ee6b,_0x26f04a))||_0x22be03;}return _0x4e5bf3>0x3&&_0x22be03&&Object[_0x3ee633(0x12b)](_0x33ee6b,_0x26f04a,_0x22be03),_0x22be03;},__metadata=this&&this[_0x24e6e8(0x12c)]||function(_0xa96497,_0x549716){const _0x445fce=_0x24e6e8;if(typeof Reflect===_0x445fce(0x119)&&typeof Reflect[_0x445fce(0x13f)]===_0x445fce(0x13a))return Reflect[_0x445fce(0x13f)](_0xa96497,_0x549716);};Object[_0x24e6e8(0x12b)](exports,'__esModule',{'value':!![]}),exports['JwtAuthGuard']=void 0x0;const redisCache_service_1=require(_0x24e6e8(0x120)),common_1=require(_0x24e6e8(0x140)),passport_1=require(_0x24e6e8(0x118)),jwt=require(_0x24e6e8(0x11c)),core_1=require(_0x24e6e8(0x131)),globalConfig_service_1=require(_0x24e6e8(0x150)),auth_service_1=require(_0x24e6e8(0x14b));let JwtAuthGuard=class JwtAuthGuard extends(0x0,passport_1[_0x24e6e8(0x14f)])(_0x24e6e8(0x12d)){constructor(_0x25b749,_0x11a87b,_0x511936,_0x1b9e6a){const _0x23a314=_0x24e6e8;super(),this[_0x23a314(0x13b)]=_0x25b749,this[_0x23a314(0x12f)]=_0x11a87b,this[_0x23a314(0x138)]=_0x511936,this[_0x23a314(0x12e)]=_0x1b9e6a;}async['canActivate'](_0xde4b04){const _0x3fd8fa=_0x24e6e8;!this[_0x3fd8fa(0x13b)]&&(this[_0x3fd8fa(0x13b)]=this['moduleRef']['get'](redisCache_service_1[_0x3fd8fa(0x11f)],{'strict':![]}));const _0x42b89e=_0xde4b04[_0x3fd8fa(0x12a)]()[_0x3fd8fa(0x130)](),_0x41d928=_0x42b89e[_0x3fd8fa(0x151)][_0x3fd8fa(0x13c)],_0x5668f2=this[_0x3fd8fa(0x124)](_0x42b89e);_0x42b89e[_0x3fd8fa(0x114)]=this[_0x3fd8fa(0x115)](_0x5668f2);const _0x5d995d=this[_0x3fd8fa(0x138)]['getNineAiToken']();return await this['redisCacheService'][_0x3fd8fa(0x143)](_0x5668f2,_0x42b89e),!![];}[_0x24e6e8(0x124)](_0x4756a2){const _0x2e6047=_0x24e6e8;if(!_0x4756a2[_0x2e6047(0x151)]['authorization']){if(_0x4756a2[_0x2e6047(0x151)][_0x2e6047(0x11d)]){let _0x375986=_0x4756a2[_0x2e6047(0x151)][_0x2e6047(0x11d)];_0x375986>0x7fffffff&&(_0x375986=_0x375986['toString']()['slice'](-0x9),_0x375986=Number(String(Number(_0x375986))));const _0x842074=this[_0x2e6047(0x12e)][_0x2e6047(0x128)](_0x375986);return _0x842074;}return null;}const _0x30870e=_0x4756a2[_0x2e6047(0x151)][_0x2e6047(0x149)][_0x2e6047(0x146)]('\x20');if(_0x30870e[_0x2e6047(0x133)]!==0x2||_0x30870e[0x0]!==_0x2e6047(0x11b))return null;return _0x30870e[0x1];}[_0x24e6e8(0x115)](_0x524aea){const _0x3378c7=_0x24e6e8;try{return jwt[_0x3378c7(0x144)](_0x524aea,process[_0x3378c7(0x125)][_0x3378c7(0x14a)]);}catch(_0x4e358b){throw new common_1[(_0x3378c7(0x145))](_0x3378c7(0x141),common_1[_0x3378c7(0x117)][_0x3378c7(0x139)]);}}['handleRequest'](_0xbbebe3,_0x19e6e3,_0x1527df){const _0x477d84=_0x24e6e8;if(_0xbbebe3||!_0x19e6e3){console[_0x477d84(0x147)](_0x477d84(0x14d),_0xbbebe3);throw _0xbbebe3||new common_1[(_0x477d84(0x148))]();}return _0x19e6e3;}};JwtAuthGuard=__decorate([(0x0,common_1[_0x24e6e8(0x14c)])(),__metadata(_0x24e6e8(0x11a),[redisCache_service_1[_0x24e6e8(0x11f)],core_1[_0x24e6e8(0x14e)],globalConfig_service_1[_0x24e6e8(0x135)],auth_service_1[_0x24e6e8(0x121)]])],JwtAuthGuard),exports[_0x24e6e8(0x132)]=JwtAuthGuard;