'use strict';const _0x3d7459=_0x643c;(function(_0x1d63fb,_0x1650e3){const _0x5b9ba6=_0x643c,_0x288d26=_0x1d63fb();while(!![]){try{const _0x47bbc6=-parseInt(_0x5b9ba6(0x20d))/0x1*(-parseInt(_0x5b9ba6(0x20c))/0x2)+-parseInt(_0x5b9ba6(0x1f7))/0x3+parseInt(_0x5b9ba6(0x205))/0x4+parseInt(_0x5b9ba6(0x1e1))/0x5*(parseInt(_0x5b9ba6(0x1ea))/0x6)+-parseInt(_0x5b9ba6(0x1f4))/0x7*(-parseInt(_0x5b9ba6(0x1db))/0x8)+-parseInt(_0x5b9ba6(0x209))/0x9+-parseInt(_0x5b9ba6(0x203))/0xa;if(_0x47bbc6===_0x1650e3)break;else _0x288d26['push'](_0x288d26['shift']());}catch(_0x378cfc){_0x288d26['push'](_0x288d26['shift']());}}}(_0x560a,0xecf8b));function _0x560a(){const _0x2efb27=['__metadata','RedisCacheService','GlobalConfigService','jsonwebtoken','2834824AktClM','__decorate','@nestjs/passport','handleRequest','defineProperty','extractToken','95TFNbmJ','JwtAuthGuard','checkTokenAuth','canActivate','metadata','globalConfigService','length','redisCacheService','Bearer','594150yqsAnA','authService','validateToken','split','authorization','../../modules/globalConfig/globalConfig.service','get','HttpException','object','log','7DPxbzD','AuthService','err:\x20','3060861ujCmHx','UnauthorizedException','亲爱的用户,请登录后继续操作,我们正在等您的到来！','UNAUTHORIZED','moduleRef','user','verify','token','ModuleRef','Injectable','env','design:paramtypes','14504360honbCc','createTokenFromFingerprint','1397328dGBAIx','decorate','fingerprint','function','4085100harezf','headers','switchToHttp','7916OyFgDV','331rqMnYY','@nestjs/common','getNineAiToken','@nestjs/core','jwt','JWT_SECRET'];_0x560a=function(){return _0x2efb27;};return _0x560a();}var __decorate=this&&this[_0x3d7459(0x1dc)]||function(_0x3123ac,_0x14f39f,_0x17a2c5,_0x1a25a5){const _0x514ceb=_0x3d7459;var _0x256d5c=arguments[_0x514ceb(0x1e7)],_0x261cc9=_0x256d5c<0x3?_0x14f39f:_0x1a25a5===null?_0x1a25a5=Object['getOwnPropertyDescriptor'](_0x14f39f,_0x17a2c5):_0x1a25a5,_0x2e34aa;if(typeof Reflect===_0x514ceb(0x1f2)&&typeof Reflect[_0x514ceb(0x206)]===_0x514ceb(0x208))_0x261cc9=Reflect[_0x514ceb(0x206)](_0x3123ac,_0x14f39f,_0x17a2c5,_0x1a25a5);else{for(var _0x37b1b5=_0x3123ac[_0x514ceb(0x1e7)]-0x1;_0x37b1b5>=0x0;_0x37b1b5--)if(_0x2e34aa=_0x3123ac[_0x37b1b5])_0x261cc9=(_0x256d5c<0x3?_0x2e34aa(_0x261cc9):_0x256d5c>0x3?_0x2e34aa(_0x14f39f,_0x17a2c5,_0x261cc9):_0x2e34aa(_0x14f39f,_0x17a2c5))||_0x261cc9;}return _0x256d5c>0x3&&_0x261cc9&&Object[_0x514ceb(0x1df)](_0x14f39f,_0x17a2c5,_0x261cc9),_0x261cc9;},__metadata=this&&this[_0x3d7459(0x213)]||function(_0x506cfa,_0x58cbfc){const _0x2b2e2e=_0x3d7459;if(typeof Reflect===_0x2b2e2e(0x1f2)&&typeof Reflect[_0x2b2e2e(0x1e5)]===_0x2b2e2e(0x208))return Reflect[_0x2b2e2e(0x1e5)](_0x506cfa,_0x58cbfc);};Object[_0x3d7459(0x1df)](exports,'__esModule',{'value':!![]}),exports[_0x3d7459(0x1e2)]=void 0x0;const redisCache_service_1=require('../../modules/redisCache/redisCache.service'),common_1=require(_0x3d7459(0x20e)),passport_1=require(_0x3d7459(0x1dd)),jwt=require(_0x3d7459(0x1da)),core_1=require(_0x3d7459(0x210)),globalConfig_service_1=require(_0x3d7459(0x1ef)),auth_service_1=require('../../modules/auth/auth.service');function _0x643c(_0xe7ad03,_0x279de4){const _0x560aba=_0x560a();return _0x643c=function(_0x643cfb,_0x451a12){_0x643cfb=_0x643cfb-0x1d8;let _0x3b9b95=_0x560aba[_0x643cfb];return _0x3b9b95;},_0x643c(_0xe7ad03,_0x279de4);}let JwtAuthGuard=class JwtAuthGuard extends(0x0,passport_1['AuthGuard'])(_0x3d7459(0x211)){constructor(_0x77fc1b,_0x4bf167,_0xea8934,_0x52bc8d){const _0xc33835=_0x3d7459;super(),this[_0xc33835(0x1e8)]=_0x77fc1b,this[_0xc33835(0x1fb)]=_0x4bf167,this[_0xc33835(0x1e6)]=_0xea8934,this[_0xc33835(0x1eb)]=_0x52bc8d;}async[_0x3d7459(0x1e4)](_0x4ec372){const _0x5da015=_0x3d7459;!this[_0x5da015(0x1e8)]&&(this[_0x5da015(0x1e8)]=this[_0x5da015(0x1fb)][_0x5da015(0x1f0)](redisCache_service_1[_0x5da015(0x1d8)],{'strict':![]}));const _0x1d266f=_0x4ec372[_0x5da015(0x20b)]()['getRequest'](),_0x4afcf0=_0x1d266f[_0x5da015(0x20a)]['x-website-domain'],_0xea6770=this[_0x5da015(0x1e0)](_0x1d266f);console[_0x5da015(0x1f3)](_0x5da015(0x1fe),_0xea6770),_0x1d266f[_0x5da015(0x1fc)]=this[_0x5da015(0x1ec)](_0xea6770),console[_0x5da015(0x1f3)](_0x5da015(0x1fc),_0x1d266f[_0x5da015(0x1fc)]);const _0x1f26df=this[_0x5da015(0x1e6)][_0x5da015(0x20f)]();return await this[_0x5da015(0x1e8)][_0x5da015(0x1e3)](_0xea6770,_0x1d266f),!![];}[_0x3d7459(0x1e0)](_0x347532){const _0x40b9d1=_0x3d7459;console[_0x40b9d1(0x1f3)](_0x40b9d1(0x20a),_0x347532[_0x40b9d1(0x20a)]);if(!_0x347532[_0x40b9d1(0x20a)][_0x40b9d1(0x1ee)]){if(_0x347532['headers'][_0x40b9d1(0x207)]){let _0x8cf770=_0x347532[_0x40b9d1(0x20a)][_0x40b9d1(0x207)];_0x8cf770>0x7fffffff&&(_0x8cf770=_0x8cf770['toString']()['slice'](-0x9),_0x8cf770=Number(String(Number(_0x8cf770))));const _0x47c1dc=this[_0x40b9d1(0x1eb)][_0x40b9d1(0x204)](_0x8cf770);return _0x47c1dc;}return null;}const _0x2caebe=_0x347532[_0x40b9d1(0x20a)][_0x40b9d1(0x1ee)][_0x40b9d1(0x1ed)]('\x20');if(_0x2caebe[_0x40b9d1(0x1e7)]!==0x2||_0x2caebe[0x0]!==_0x40b9d1(0x1e9))return null;return _0x2caebe[0x1];}[_0x3d7459(0x1ec)](_0x2e8234){const _0x55641e=_0x3d7459;try{return jwt[_0x55641e(0x1fd)](_0x2e8234,process[_0x55641e(0x201)][_0x55641e(0x212)]);}catch(_0x442344){throw new common_1[(_0x55641e(0x1f1))](_0x55641e(0x1f9),common_1['HttpStatus'][_0x55641e(0x1fa)]);}}[_0x3d7459(0x1de)](_0x178c80,_0x5a0627,_0x2f2d4a){const _0x415579=_0x3d7459;if(_0x178c80||!_0x5a0627){console[_0x415579(0x1f3)](_0x415579(0x1f6),_0x178c80);throw _0x178c80||new common_1[(_0x415579(0x1f8))]();}return _0x5a0627;}};JwtAuthGuard=__decorate([(0x0,common_1[_0x3d7459(0x200)])(),__metadata(_0x3d7459(0x202),[redisCache_service_1[_0x3d7459(0x1d8)],core_1[_0x3d7459(0x1ff)],globalConfig_service_1[_0x3d7459(0x1d9)],auth_service_1[_0x3d7459(0x1f5)]])],JwtAuthGuard),exports[_0x3d7459(0x1e2)]=JwtAuthGuard;